var D5=Object.defineProperty;var P5=(t,e,n)=>e in t?D5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oE=(t,e,n)=>(P5(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function oc(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Je={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=Symbol.for("react.element"),I5=Symbol.for("react.portal"),F5=Symbol.for("react.fragment"),z5=Symbol.for("react.strict_mode"),$5=Symbol.for("react.profiler"),H5=Symbol.for("react.provider"),V5=Symbol.for("react.context"),U5=Symbol.for("react.forward_ref"),W5=Symbol.for("react.suspense"),j5=Symbol.for("react.memo"),q5=Symbol.for("react.lazy"),sE=Symbol.iterator;function J5(t){return t===null||typeof t!="object"?null:(t=sE&&t[sE]||t["@@iterator"],typeof t=="function"?t:null)}var mO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vO=Object.assign,yO={};function sc(t,e,n){this.props=t,this.context=e,this.refs=yO,this.updater=n||mO}sc.prototype.isReactComponent={};sc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wO(){}wO.prototype=sc.prototype;function $x(t,e,n){this.props=t,this.context=e,this.refs=yO,this.updater=n||mO}var Hx=$x.prototype=new wO;Hx.constructor=$x;vO(Hx,sc.prototype);Hx.isPureReactComponent=!0;var lE=Array.isArray,_O=Object.prototype.hasOwnProperty,Vx={current:null},xO={key:!0,ref:!0,__self:!0,__source:!0};function bO(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)_O.call(e,r)&&!xO.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Id,type:t,key:o,ref:s,props:i,_owner:Vx.current}}function K5(t,e){return{$$typeof:Id,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ux(t){return typeof t=="object"&&t!==null&&t.$$typeof===Id}function G5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var aE=/\/+/g;function h1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?G5(""+t.key):e.toString(36)}function om(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Id:case I5:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+h1(s,0):r,lE(i)?(n="",t!=null&&(n=t.replace(aE,"$&/")+"/"),om(i,e,n,"",function(c){return c})):i!=null&&(Ux(i)&&(i=K5(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(aE,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",lE(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+h1(o,l);s+=om(o,e,n,u,i)}else if(u=J5(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+h1(o,l++),s+=om(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function yg(t,e,n){if(t==null)return t;var r=[],i=0;return om(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Z5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var br={current:null},sm={transition:null},Y5={ReactCurrentDispatcher:br,ReactCurrentBatchConfig:sm,ReactCurrentOwner:Vx};je.Children={map:yg,forEach:function(t,e,n){yg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yg(t,function(){e++}),e},toArray:function(t){return yg(t,function(e){return e})||[]},only:function(t){if(!Ux(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=sc;je.Fragment=F5;je.Profiler=$5;je.PureComponent=$x;je.StrictMode=z5;je.Suspense=W5;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y5;je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vO({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Vx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)_O.call(e,u)&&!xO.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Id,type:t.type,key:i,ref:o,props:r,_owner:s}};je.createContext=function(t){return t={$$typeof:V5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H5,_context:t},t.Consumer=t};je.createElement=bO;je.createFactory=function(t){var e=bO.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:U5,render:t}};je.isValidElement=Ux;je.lazy=function(t){return{$$typeof:q5,_payload:{_status:-1,_result:t},_init:Z5}};je.memo=function(t,e){return{$$typeof:j5,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=sm.transition;sm.transition={};try{t()}finally{sm.transition=e}};je.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};je.useCallback=function(t,e){return br.current.useCallback(t,e)};je.useContext=function(t){return br.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return br.current.useDeferredValue(t)};je.useEffect=function(t,e){return br.current.useEffect(t,e)};je.useId=function(){return br.current.useId()};je.useImperativeHandle=function(t,e,n){return br.current.useImperativeHandle(t,e,n)};je.useInsertionEffect=function(t,e){return br.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return br.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return br.current.useMemo(t,e)};je.useReducer=function(t,e,n){return br.current.useReducer(t,e,n)};je.useRef=function(t){return br.current.useRef(t)};je.useState=function(t){return br.current.useState(t)};je.useSyncExternalStore=function(t,e,n){return br.current.useSyncExternalStore(t,e,n)};je.useTransition=function(){return br.current.useTransition()};je.version="18.2.0";(function(t){t.exports=je})(Je);const q0=B5(Je.exports);var Pw={},SO={exports:{}},ci={},kO={exports:{}},EO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,J){var ie=F.length;F.push(J);e:for(;0<ie;){var Se=ie-1>>>1,$e=F[Se];if(0<i($e,J))F[Se]=J,F[ie]=$e,ie=Se;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var J=F[0],ie=F.pop();if(ie!==J){F[0]=ie;e:for(var Se=0,$e=F.length,bn=$e>>>1;Se<bn;){var tn=2*(Se+1)-1,lr=F[tn],Yt=tn+1,ar=F[Yt];if(0>i(lr,ie))Yt<$e&&0>i(ar,lr)?(F[Se]=ar,F[Yt]=ie,Se=Yt):(F[Se]=lr,F[tn]=ie,Se=tn);else if(Yt<$e&&0>i(ar,ie))F[Se]=ar,F[Yt]=ie,Se=Yt;else break e}}return J}function i(F,J){var ie=F.sortIndex-J.sortIndex;return ie!==0?ie:F.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,p=null,g=3,v=!1,y=!1,A=!1,O=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=F)r(c),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(c)}}function T(F){if(A=!1,b(F),!y)if(n(u)!==null)y=!0,Ce(N);else{var J=n(c);J!==null&&ye(T,J.startTime-F)}}function N(F,J){y=!1,A&&(A=!1,x($),$=-1),v=!0;var ie=g;try{for(b(J),p=n(u);p!==null&&(!(p.expirationTime>J)||F&&!oe());){var Se=p.callback;if(typeof Se=="function"){p.callback=null,g=p.priorityLevel;var $e=Se(p.expirationTime<=J);J=t.unstable_now(),typeof $e=="function"?p.callback=$e:p===n(u)&&r(u),b(J)}else r(u);p=n(u)}if(p!==null)var bn=!0;else{var tn=n(c);tn!==null&&ye(T,tn.startTime-J),bn=!1}return bn}finally{p=null,g=ie,v=!1}}var B=!1,D=null,$=-1,G=5,W=-1;function oe(){return!(t.unstable_now()-W<G)}function ve(){if(D!==null){var F=t.unstable_now();W=F;var J=!0;try{J=D(!0,F)}finally{J?_e():(B=!1,D=null)}}else B=!1}var _e;if(typeof k=="function")_e=function(){k(ve)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Qe=ze.port2;ze.port1.onmessage=ve,_e=function(){Qe.postMessage(null)}}else _e=function(){O(ve,0)};function Ce(F){D=F,B||(B=!0,_e())}function ye(F,J){$=O(function(){F(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,Ce(N))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var ie=g;g=J;try{return F()}finally{g=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ie=g;g=F;try{return J()}finally{g=ie}},t.unstable_scheduleCallback=function(F,J,ie){var Se=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Se+ie:Se):ie=Se,F){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ie+$e,F={id:h++,callback:J,priorityLevel:F,startTime:ie,expirationTime:$e,sortIndex:-1},ie>Se?(F.sortIndex=ie,e(c,F),n(u)===null&&F===n(c)&&(A?(x($),$=-1):A=!0,ye(T,ie-Se))):(F.sortIndex=$e,e(u,F),y||v||(y=!0,Ce(N))),F},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(F){var J=g;return function(){var ie=g;g=J;try{return F.apply(this,arguments)}finally{g=ie}}}})(EO);(function(t){t.exports=EO})(kO);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO=Je.exports,ai=kO.exports;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AO=new Set,Zh={};function hu(t,e){If(t,e),If(t+"Capture",e)}function If(t,e){for(Zh[t]=e,t=0;t<e.length;t++)AO.add(e[t])}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bw=Object.prototype.hasOwnProperty,Q5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uE={},fE={};function X5(t){return Bw.call(fE,t)?!0:Bw.call(uE,t)?!1:Q5.test(t)?fE[t]=!0:(uE[t]=!0,!1)}function ez(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tz(t,e,n,r){if(e===null||typeof e>"u"||ez(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pn[t]=new Sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pn[e]=new Sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pn[t]=new Sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pn[t]=new Sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pn[t]=new Sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pn[t]=new Sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pn[t]=new Sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pn[t]=new Sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pn[t]=new Sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wx=/[\-:]([a-z])/g;function jx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wx,jx);Pn[e]=new Sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wx,jx);Pn[e]=new Sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wx,jx);Pn[e]=new Sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pn[t]=new Sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Pn.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pn[t]=new Sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function qx(t,e,n,r){var i=Pn.hasOwnProperty(e)?Pn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tz(e,n,i,r)&&(n=null),r||i===null?X5(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $s=CO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wg=Symbol.for("react.element"),af=Symbol.for("react.portal"),uf=Symbol.for("react.fragment"),Jx=Symbol.for("react.strict_mode"),Iw=Symbol.for("react.profiler"),TO=Symbol.for("react.provider"),OO=Symbol.for("react.context"),Kx=Symbol.for("react.forward_ref"),Fw=Symbol.for("react.suspense"),zw=Symbol.for("react.suspense_list"),Gx=Symbol.for("react.memo"),ll=Symbol.for("react.lazy"),RO=Symbol.for("react.offscreen"),cE=Symbol.iterator;function rh(t){return t===null||typeof t!="object"?null:(t=cE&&t[cE]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,d1;function vh(t){if(d1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);d1=e&&e[1]||""}return`
`+d1+t}var p1=!1;function g1(t,e){if(!t||p1)return"";p1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{p1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vh(t):""}function nz(t){switch(t.tag){case 5:return vh(t.type);case 16:return vh("Lazy");case 13:return vh("Suspense");case 19:return vh("SuspenseList");case 0:case 2:case 15:return t=g1(t.type,!1),t;case 11:return t=g1(t.type.render,!1),t;case 1:return t=g1(t.type,!0),t;default:return""}}function $w(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uf:return"Fragment";case af:return"Portal";case Iw:return"Profiler";case Jx:return"StrictMode";case Fw:return"Suspense";case zw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case OO:return(t.displayName||"Context")+".Consumer";case TO:return(t._context.displayName||"Context")+".Provider";case Kx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gx:return e=t.displayName||null,e!==null?e:$w(t.type)||"Memo";case ll:e=t._payload,t=t._init;try{return $w(t(e))}catch{}}return null}function rz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $w(e);case 8:return e===Jx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $l(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function MO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iz(t){var e=MO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _g(t){t._valueTracker||(t._valueTracker=iz(t))}function LO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=MO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Dm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hw(t,e){var n=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function hE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$l(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NO(t,e){e=e.checked,e!=null&&qx(t,"checked",e,!1)}function Vw(t,e){NO(t,e);var n=$l(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uw(t,e.type,$l(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uw(t,e,n){(e!=="number"||Dm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yh=Array.isArray;function Sf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$l(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ww(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(yh(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$l(n)}}function DO(t,e){var n=$l(e.value),r=$l(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xg,BO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xg=xg||document.createElement("div"),xg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Th={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oz=["Webkit","ms","Moz","O"];Object.keys(Th).forEach(function(t){oz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Th[e]=Th[t]})});function IO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Th.hasOwnProperty(t)&&Th[t]?(""+e).trim():e+"px"}function FO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var sz=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qw(t,e){if(e){if(sz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Jw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kw=null;function Zx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gw=null,kf=null,Ef=null;function mE(t){if(t=$d(t)){if(typeof Gw!="function")throw Error(re(280));var e=t.stateNode;e&&(e=Y0(e),Gw(t.stateNode,t.type,e))}}function zO(t){kf?Ef?Ef.push(t):Ef=[t]:kf=t}function $O(){if(kf){var t=kf,e=Ef;if(Ef=kf=null,mE(t),e)for(t=0;t<e.length;t++)mE(e[t])}}function HO(t,e){return t(e)}function VO(){}var m1=!1;function UO(t,e,n){if(m1)return t(e,n);m1=!0;try{return HO(t,e,n)}finally{m1=!1,(kf!==null||Ef!==null)&&(VO(),$O())}}function Qh(t,e){var n=t.stateNode;if(n===null)return null;var r=Y0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var Zw=!1;if(Ns)try{var ih={};Object.defineProperty(ih,"passive",{get:function(){Zw=!0}}),window.addEventListener("test",ih,ih),window.removeEventListener("test",ih,ih)}catch{Zw=!1}function lz(t,e,n,r,i,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Oh=!1,Pm=null,Bm=!1,Yw=null,az={onError:function(t){Oh=!0,Pm=t}};function uz(t,e,n,r,i,o,s,l,u){Oh=!1,Pm=null,lz.apply(az,arguments)}function fz(t,e,n,r,i,o,s,l,u){if(uz.apply(this,arguments),Oh){if(Oh){var c=Pm;Oh=!1,Pm=null}else throw Error(re(198));Bm||(Bm=!0,Yw=c)}}function du(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vE(t){if(du(t)!==t)throw Error(re(188))}function cz(t){var e=t.alternate;if(!e){if(e=du(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return vE(i),t;if(o===r)return vE(i),e;o=o.sibling}throw Error(re(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function jO(t){return t=cz(t),t!==null?qO(t):null}function qO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qO(t);if(e!==null)return e;t=t.sibling}return null}var JO=ai.unstable_scheduleCallback,yE=ai.unstable_cancelCallback,hz=ai.unstable_shouldYield,dz=ai.unstable_requestPaint,Kt=ai.unstable_now,pz=ai.unstable_getCurrentPriorityLevel,Yx=ai.unstable_ImmediatePriority,KO=ai.unstable_UserBlockingPriority,Im=ai.unstable_NormalPriority,gz=ai.unstable_LowPriority,GO=ai.unstable_IdlePriority,J0=null,Wo=null;function mz(t){if(Wo&&typeof Wo.onCommitFiberRoot=="function")try{Wo.onCommitFiberRoot(J0,t,void 0,(t.current.flags&128)===128)}catch{}}var so=Math.clz32?Math.clz32:wz,vz=Math.log,yz=Math.LN2;function wz(t){return t>>>=0,t===0?32:31-(vz(t)/yz|0)|0}var bg=64,Sg=4194304;function wh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=wh(l):(o&=s,o!==0&&(r=wh(o)))}else s=n&~i,s!==0?r=wh(s):o!==0&&(r=wh(o));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-so(e),i=1<<n,r|=t[n],e&=~i;return r}function _z(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xz(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-so(o),l=1<<s,u=i[s];u===-1?((l&n)===0||(l&r)!==0)&&(i[s]=_z(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Qw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZO(){var t=bg;return bg<<=1,(bg&4194240)===0&&(bg=64),t}function v1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-so(e),t[e]=n}function bz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-so(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Qx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-so(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ft=0;function YO(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var QO,Xx,XO,eR,tR,Xw=!1,kg=[],El=null,Cl=null,Al=null,Xh=new Map,ed=new Map,cl=[],Sz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wE(t,e){switch(t){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":Cl=null;break;case"mouseover":case"mouseout":Al=null;break;case"pointerover":case"pointerout":Xh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ed.delete(e.pointerId)}}function oh(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=$d(e),e!==null&&Xx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kz(t,e,n,r,i){switch(e){case"focusin":return El=oh(El,t,e,n,r,i),!0;case"dragenter":return Cl=oh(Cl,t,e,n,r,i),!0;case"mouseover":return Al=oh(Al,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Xh.set(o,oh(Xh.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ed.set(o,oh(ed.get(o)||null,t,e,n,r,i)),!0}return!1}function nR(t){var e=Va(t.target);if(e!==null){var n=du(e);if(n!==null){if(e=n.tag,e===13){if(e=WO(n),e!==null){t.blockedOn=e,tR(t.priority,function(){XO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=e_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kw=r,n.target.dispatchEvent(r),Kw=null}else return e=$d(n),e!==null&&Xx(e),t.blockedOn=n,!1;e.shift()}return!0}function _E(t,e,n){lm(t)&&n.delete(e)}function Ez(){Xw=!1,El!==null&&lm(El)&&(El=null),Cl!==null&&lm(Cl)&&(Cl=null),Al!==null&&lm(Al)&&(Al=null),Xh.forEach(_E),ed.forEach(_E)}function sh(t,e){t.blockedOn===e&&(t.blockedOn=null,Xw||(Xw=!0,ai.unstable_scheduleCallback(ai.unstable_NormalPriority,Ez)))}function td(t){function e(i){return sh(i,t)}if(0<kg.length){sh(kg[0],t);for(var n=1;n<kg.length;n++){var r=kg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(El!==null&&sh(El,t),Cl!==null&&sh(Cl,t),Al!==null&&sh(Al,t),Xh.forEach(e),ed.forEach(e),n=0;n<cl.length;n++)r=cl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cl.length&&(n=cl[0],n.blockedOn===null);)nR(n),n.blockedOn===null&&cl.shift()}var Cf=$s.ReactCurrentBatchConfig,zm=!0;function Cz(t,e,n,r){var i=ft,o=Cf.transition;Cf.transition=null;try{ft=1,eb(t,e,n,r)}finally{ft=i,Cf.transition=o}}function Az(t,e,n,r){var i=ft,o=Cf.transition;Cf.transition=null;try{ft=4,eb(t,e,n,r)}finally{ft=i,Cf.transition=o}}function eb(t,e,n,r){if(zm){var i=e_(t,e,n,r);if(i===null)A1(t,e,r,$m,n),wE(t,r);else if(kz(i,t,e,n,r))r.stopPropagation();else if(wE(t,r),e&4&&-1<Sz.indexOf(t)){for(;i!==null;){var o=$d(i);if(o!==null&&QO(o),o=e_(t,e,n,r),o===null&&A1(t,e,r,$m,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else A1(t,e,r,null,n)}}var $m=null;function e_(t,e,n,r){if($m=null,t=Zx(r),t=Va(t),t!==null)if(e=du(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $m=t,null}function rR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pz()){case Yx:return 1;case KO:return 4;case Im:case gz:return 16;case GO:return 536870912;default:return 16}default:return 16}}var gl=null,tb=null,am=null;function iR(){if(am)return am;var t,e=tb,n=e.length,r,i="value"in gl?gl.value:gl.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return am=i.slice(t,1<r?1-r:void 0)}function um(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eg(){return!0}function xE(){return!1}function hi(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Eg:xE,this.isPropagationStopped=xE,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eg)},persist:function(){},isPersistent:Eg}),e}var lc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nb=hi(lc),zd=Bt({},lc,{view:0,detail:0}),Tz=hi(zd),y1,w1,lh,K0=Bt({},zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lh&&(lh&&t.type==="mousemove"?(y1=t.screenX-lh.screenX,w1=t.screenY-lh.screenY):w1=y1=0,lh=t),y1)},movementY:function(t){return"movementY"in t?t.movementY:w1}}),bE=hi(K0),Oz=Bt({},K0,{dataTransfer:0}),Rz=hi(Oz),Mz=Bt({},zd,{relatedTarget:0}),_1=hi(Mz),Lz=Bt({},lc,{animationName:0,elapsedTime:0,pseudoElement:0}),Nz=hi(Lz),Dz=Bt({},lc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pz=hi(Dz),Bz=Bt({},lc,{data:0}),SE=hi(Bz),Iz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $z(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zz[t])?!!e[t]:!1}function rb(){return $z}var Hz=Bt({},zd,{key:function(t){if(t.key){var e=Iz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=um(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rb,charCode:function(t){return t.type==="keypress"?um(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?um(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vz=hi(Hz),Uz=Bt({},K0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kE=hi(Uz),Wz=Bt({},zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rb}),jz=hi(Wz),qz=Bt({},lc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jz=hi(qz),Kz=Bt({},K0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gz=hi(Kz),Zz=[9,13,27,32],ib=Ns&&"CompositionEvent"in window,Rh=null;Ns&&"documentMode"in document&&(Rh=document.documentMode);var Yz=Ns&&"TextEvent"in window&&!Rh,oR=Ns&&(!ib||Rh&&8<Rh&&11>=Rh),EE=String.fromCharCode(32),CE=!1;function sR(t,e){switch(t){case"keyup":return Zz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ff=!1;function Qz(t,e){switch(t){case"compositionend":return lR(e);case"keypress":return e.which!==32?null:(CE=!0,EE);case"textInput":return t=e.data,t===EE&&CE?null:t;default:return null}}function Xz(t,e){if(ff)return t==="compositionend"||!ib&&sR(t,e)?(t=iR(),am=tb=gl=null,ff=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oR&&e.locale!=="ko"?null:e.data;default:return null}}var e9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!e9[t.type]:e==="textarea"}function aR(t,e,n,r){zO(r),e=Hm(e,"onChange"),0<e.length&&(n=new nb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mh=null,nd=null;function t9(t){wR(t,0)}function G0(t){var e=df(t);if(LO(e))return t}function n9(t,e){if(t==="change")return e}var uR=!1;if(Ns){var x1;if(Ns){var b1="oninput"in document;if(!b1){var TE=document.createElement("div");TE.setAttribute("oninput","return;"),b1=typeof TE.oninput=="function"}x1=b1}else x1=!1;uR=x1&&(!document.documentMode||9<document.documentMode)}function OE(){Mh&&(Mh.detachEvent("onpropertychange",fR),nd=Mh=null)}function fR(t){if(t.propertyName==="value"&&G0(nd)){var e=[];aR(e,nd,t,Zx(t)),UO(t9,e)}}function r9(t,e,n){t==="focusin"?(OE(),Mh=e,nd=n,Mh.attachEvent("onpropertychange",fR)):t==="focusout"&&OE()}function i9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return G0(nd)}function o9(t,e){if(t==="click")return G0(e)}function s9(t,e){if(t==="input"||t==="change")return G0(e)}function l9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uo=typeof Object.is=="function"?Object.is:l9;function rd(t,e){if(uo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Bw.call(e,i)||!uo(t[i],e[i]))return!1}return!0}function RE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ME(t,e){var n=RE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RE(n)}}function cR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hR(){for(var t=window,e=Dm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dm(t.document)}return e}function ob(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function a9(t){var e=hR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cR(n.ownerDocument.documentElement,n)){if(r!==null&&ob(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ME(n,o);var s=ME(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var u9=Ns&&"documentMode"in document&&11>=document.documentMode,cf=null,t_=null,Lh=null,n_=!1;function LE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;n_||cf==null||cf!==Dm(r)||(r=cf,"selectionStart"in r&&ob(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lh&&rd(Lh,r)||(Lh=r,r=Hm(t_,"onSelect"),0<r.length&&(e=new nb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=cf)))}function Cg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hf={animationend:Cg("Animation","AnimationEnd"),animationiteration:Cg("Animation","AnimationIteration"),animationstart:Cg("Animation","AnimationStart"),transitionend:Cg("Transition","TransitionEnd")},S1={},dR={};Ns&&(dR=document.createElement("div").style,"AnimationEvent"in window||(delete hf.animationend.animation,delete hf.animationiteration.animation,delete hf.animationstart.animation),"TransitionEvent"in window||delete hf.transitionend.transition);function Z0(t){if(S1[t])return S1[t];if(!hf[t])return t;var e=hf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dR)return S1[t]=e[n];return t}var pR=Z0("animationend"),gR=Z0("animationiteration"),mR=Z0("animationstart"),vR=Z0("transitionend"),yR=new Map,NE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function na(t,e){yR.set(t,e),hu(e,[t])}for(var k1=0;k1<NE.length;k1++){var E1=NE[k1],f9=E1.toLowerCase(),c9=E1[0].toUpperCase()+E1.slice(1);na(f9,"on"+c9)}na(pR,"onAnimationEnd");na(gR,"onAnimationIteration");na(mR,"onAnimationStart");na("dblclick","onDoubleClick");na("focusin","onFocus");na("focusout","onBlur");na(vR,"onTransitionEnd");If("onMouseEnter",["mouseout","mouseover"]);If("onMouseLeave",["mouseout","mouseover"]);If("onPointerEnter",["pointerout","pointerover"]);If("onPointerLeave",["pointerout","pointerover"]);hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h9=new Set("cancel close invalid load scroll toggle".split(" ").concat(_h));function DE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fz(r,e,void 0,t),t.currentTarget=null}function wR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;DE(i,l,c),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;DE(i,l,c),o=u}}}if(Bm)throw t=Yw,Bm=!1,Yw=null,t}function _t(t,e){var n=e[l_];n===void 0&&(n=e[l_]=new Set);var r=t+"__bubble";n.has(r)||(_R(e,t,2,!1),n.add(r))}function C1(t,e,n){var r=0;e&&(r|=4),_R(n,t,r,e)}var Ag="_reactListening"+Math.random().toString(36).slice(2);function id(t){if(!t[Ag]){t[Ag]=!0,AO.forEach(function(n){n!=="selectionchange"&&(h9.has(n)||C1(n,!1,t),C1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ag]||(e[Ag]=!0,C1("selectionchange",!1,e))}}function _R(t,e,n,r){switch(rR(e)){case 1:var i=Cz;break;case 4:i=Az;break;default:i=eb}n=i.bind(null,e,n,t),i=void 0,!Zw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function A1(t,e,n,r,i){var o=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Va(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}UO(function(){var c=o,h=Zx(n),p=[];e:{var g=yR.get(t);if(g!==void 0){var v=nb,y=t;switch(t){case"keypress":if(um(n)===0)break e;case"keydown":case"keyup":v=Vz;break;case"focusin":y="focus",v=_1;break;case"focusout":y="blur",v=_1;break;case"beforeblur":case"afterblur":v=_1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=bE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Rz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=jz;break;case pR:case gR:case mR:v=Nz;break;case vR:v=Jz;break;case"scroll":v=Tz;break;case"wheel":v=Gz;break;case"copy":case"cut":case"paste":v=Pz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=kE}var A=(e&4)!==0,O=!A&&t==="scroll",x=A?g!==null?g+"Capture":null:g;A=[];for(var k=c,b;k!==null;){b=k;var T=b.stateNode;if(b.tag===5&&T!==null&&(b=T,x!==null&&(T=Qh(k,x),T!=null&&A.push(od(k,T,b)))),O)break;k=k.return}0<A.length&&(g=new v(g,y,null,n,h),p.push({event:g,listeners:A}))}}if((e&7)===0){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==Kw&&(y=n.relatedTarget||n.fromElement)&&(Va(y)||y[Ds]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=c,y=y?Va(y):null,y!==null&&(O=du(y),y!==O||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(A=bE,T="onMouseLeave",x="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(A=kE,T="onPointerLeave",x="onPointerEnter",k="pointer"),O=v==null?g:df(v),b=y==null?g:df(y),g=new A(T,k+"leave",v,n,h),g.target=O,g.relatedTarget=b,T=null,Va(h)===c&&(A=new A(x,k+"enter",y,n,h),A.target=b,A.relatedTarget=O,T=A),O=T,v&&y)t:{for(A=v,x=y,k=0,b=A;b;b=ef(b))k++;for(b=0,T=x;T;T=ef(T))b++;for(;0<k-b;)A=ef(A),k--;for(;0<b-k;)x=ef(x),b--;for(;k--;){if(A===x||x!==null&&A===x.alternate)break t;A=ef(A),x=ef(x)}A=null}else A=null;v!==null&&PE(p,g,v,A,!1),y!==null&&O!==null&&PE(p,O,y,A,!0)}}e:{if(g=c?df(c):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var N=n9;else if(AE(g))if(uR)N=s9;else{N=i9;var B=r9}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=o9);if(N&&(N=N(t,c))){aR(p,N,n,h);break e}B&&B(t,g,c),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&Uw(g,"number",g.value)}switch(B=c?df(c):window,t){case"focusin":(AE(B)||B.contentEditable==="true")&&(cf=B,t_=c,Lh=null);break;case"focusout":Lh=t_=cf=null;break;case"mousedown":n_=!0;break;case"contextmenu":case"mouseup":case"dragend":n_=!1,LE(p,n,h);break;case"selectionchange":if(u9)break;case"keydown":case"keyup":LE(p,n,h)}var D;if(ib)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else ff?sR(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(oR&&n.locale!=="ko"&&(ff||$!=="onCompositionStart"?$==="onCompositionEnd"&&ff&&(D=iR()):(gl=h,tb="value"in gl?gl.value:gl.textContent,ff=!0)),B=Hm(c,$),0<B.length&&($=new SE($,t,null,n,h),p.push({event:$,listeners:B}),D?$.data=D:(D=lR(n),D!==null&&($.data=D)))),(D=Yz?Qz(t,n):Xz(t,n))&&(c=Hm(c,"onBeforeInput"),0<c.length&&(h=new SE("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=D))}wR(p,e)})}function od(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Qh(t,n),o!=null&&r.unshift(od(t,o,i)),o=Qh(t,e),o!=null&&r.push(od(t,o,i))),t=t.return}return r}function ef(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PE(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Qh(n,o),u!=null&&s.unshift(od(n,u,l))):i||(u=Qh(n,o),u!=null&&s.push(od(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var d9=/\r\n?/g,p9=/\u0000|\uFFFD/g;function BE(t){return(typeof t=="string"?t:""+t).replace(d9,`
`).replace(p9,"")}function Tg(t,e,n){if(e=BE(e),BE(t)!==e&&n)throw Error(re(425))}function Vm(){}var r_=null,i_=null;function o_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var s_=typeof setTimeout=="function"?setTimeout:void 0,g9=typeof clearTimeout=="function"?clearTimeout:void 0,IE=typeof Promise=="function"?Promise:void 0,m9=typeof queueMicrotask=="function"?queueMicrotask:typeof IE<"u"?function(t){return IE.resolve(null).then(t).catch(v9)}:s_;function v9(t){setTimeout(function(){throw t})}function T1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),td(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);td(e)}function Tl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function FE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ac=Math.random().toString(36).slice(2),Bo="__reactFiber$"+ac,sd="__reactProps$"+ac,Ds="__reactContainer$"+ac,l_="__reactEvents$"+ac,y9="__reactListeners$"+ac,w9="__reactHandles$"+ac;function Va(t){var e=t[Bo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ds]||n[Bo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=FE(t);t!==null;){if(n=t[Bo])return n;t=FE(t)}return e}t=n,n=t.parentNode}return null}function $d(t){return t=t[Bo]||t[Ds],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function df(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function Y0(t){return t[sd]||null}var a_=[],pf=-1;function ra(t){return{current:t}}function bt(t){0>pf||(t.current=a_[pf],a_[pf]=null,pf--)}function yt(t,e){pf++,a_[pf]=t.current,t.current=e}var Hl={},er=ra(Hl),Ir=ra(!1),nu=Hl;function Ff(t,e){var n=t.type.contextTypes;if(!n)return Hl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fr(t){return t=t.childContextTypes,t!=null}function Um(){bt(Ir),bt(er)}function zE(t,e,n){if(er.current!==Hl)throw Error(re(168));yt(er,e),yt(Ir,n)}function xR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(re(108,rz(t)||"Unknown",i));return Bt({},n,r)}function Wm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hl,nu=er.current,yt(er,t),yt(Ir,Ir.current),!0}function $E(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=xR(t,e,nu),r.__reactInternalMemoizedMergedChildContext=t,bt(Ir),bt(er),yt(er,t)):bt(Ir),yt(Ir,n)}var bs=null,Q0=!1,O1=!1;function bR(t){bs===null?bs=[t]:bs.push(t)}function _9(t){Q0=!0,bR(t)}function ia(){if(!O1&&bs!==null){O1=!0;var t=0,e=ft;try{var n=bs;for(ft=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bs=null,Q0=!1}catch(i){throw bs!==null&&(bs=bs.slice(t+1)),JO(Yx,ia),i}finally{ft=e,O1=!1}}return null}var gf=[],mf=0,jm=null,qm=0,Ri=[],Mi=0,ru=null,Es=1,Cs="";function Ba(t,e){gf[mf++]=qm,gf[mf++]=jm,jm=t,qm=e}function SR(t,e,n){Ri[Mi++]=Es,Ri[Mi++]=Cs,Ri[Mi++]=ru,ru=t;var r=Es;t=Cs;var i=32-so(r)-1;r&=~(1<<i),n+=1;var o=32-so(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Es=1<<32-so(e)+i|n<<i|r,Cs=o+t}else Es=1<<o|n<<i|r,Cs=t}function sb(t){t.return!==null&&(Ba(t,1),SR(t,1,0))}function lb(t){for(;t===jm;)jm=gf[--mf],gf[mf]=null,qm=gf[--mf],gf[mf]=null;for(;t===ru;)ru=Ri[--Mi],Ri[Mi]=null,Cs=Ri[--Mi],Ri[Mi]=null,Es=Ri[--Mi],Ri[Mi]=null}var si=null,ri=null,At=!1,no=null;function kR(t,e){var n=Di(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function HE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,si=t,ri=Tl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,si=t,ri=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ru!==null?{id:Es,overflow:Cs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Di(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,si=t,ri=null,!0):!1;default:return!1}}function u_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function f_(t){if(At){var e=ri;if(e){var n=e;if(!HE(t,e)){if(u_(t))throw Error(re(418));e=Tl(n.nextSibling);var r=si;e&&HE(t,e)?kR(r,n):(t.flags=t.flags&-4097|2,At=!1,si=t)}}else{if(u_(t))throw Error(re(418));t.flags=t.flags&-4097|2,At=!1,si=t}}}function VE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;si=t}function Og(t){if(t!==si)return!1;if(!At)return VE(t),At=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!o_(t.type,t.memoizedProps)),e&&(e=ri)){if(u_(t))throw ER(),Error(re(418));for(;e;)kR(t,e),e=Tl(e.nextSibling)}if(VE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ri=Tl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ri=null}}else ri=si?Tl(t.stateNode.nextSibling):null;return!0}function ER(){for(var t=ri;t;)t=Tl(t.nextSibling)}function zf(){ri=si=null,At=!1}function ab(t){no===null?no=[t]:no.push(t)}var x9=$s.ReactCurrentBatchConfig;function eo(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Jm=ra(null),Km=null,vf=null,ub=null;function fb(){ub=vf=Km=null}function cb(t){var e=Jm.current;bt(Jm),t._currentValue=e}function c_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Af(t,e){Km=t,ub=vf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Dr=!0),t.firstContext=null)}function Fi(t){var e=t._currentValue;if(ub!==t)if(t={context:t,memoizedValue:e,next:null},vf===null){if(Km===null)throw Error(re(308));vf=t,Km.dependencies={lanes:0,firstContext:t}}else vf=vf.next=t;return e}var Ua=null;function hb(t){Ua===null?Ua=[t]:Ua.push(t)}function CR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hb(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ps(t,r)}function Ps(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var al=!1;function db(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Os(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ol(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Ze&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ps(t,n)}return i=r.interleaved,i===null?(e.next=e,hb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ps(t,n)}function fm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qx(t,n)}}function UE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gm(t,e,n,r){var i=t.updateQueue;al=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,h=c=u=null,l=o;do{var g=l.lane,v=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,A=l;switch(g=e,v=n,A.tag){case 1:if(y=A.payload,typeof y=="function"){p=y.call(v,p,g);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=A.payload,g=typeof y=="function"?y.call(v,p,g):y,g==null)break e;p=Bt({},p,g);break e;case 2:al=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else v={eventTime:v,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=v,u=p):h=h.next=v,s|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ou|=s,t.lanes=s,t.memoizedState=p}}function WE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(re(191,i));i.call(r)}}}var TR=new CO.Component().refs;function h_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var X0={isMounted:function(t){return(t=t._reactInternals)?du(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vr(),i=Ml(t),o=Os(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ol(t,o,i),e!==null&&(lo(e,t,i,r),fm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vr(),i=Ml(t),o=Os(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ol(t,o,i),e!==null&&(lo(e,t,i,r),fm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vr(),r=Ml(t),i=Os(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ol(t,i,r),e!==null&&(lo(e,t,r,n),fm(e,t,r))}};function jE(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!rd(n,r)||!rd(i,o):!0}function OR(t,e,n){var r=!1,i=Hl,o=e.contextType;return typeof o=="object"&&o!==null?o=Fi(o):(i=Fr(e)?nu:er.current,r=e.contextTypes,o=(r=r!=null)?Ff(t,i):Hl),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=X0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function qE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&X0.enqueueReplaceState(e,e.state,null)}function d_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=TR,db(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Fi(o):(o=Fr(e)?nu:er.current,i.context=Ff(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(h_(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&X0.enqueueReplaceState(i,i.state,null),Gm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ah(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;l===TR&&(l=i.refs={}),s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function Rg(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function JE(t){var e=t._init;return e(t._payload)}function RR(t){function e(x,k){if(t){var b=x.deletions;b===null?(x.deletions=[k],x.flags|=16):b.push(k)}}function n(x,k){if(!t)return null;for(;k!==null;)e(x,k),k=k.sibling;return null}function r(x,k){for(x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function i(x,k){return x=Ll(x,k),x.index=0,x.sibling=null,x}function o(x,k,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<k?(x.flags|=2,k):b):(x.flags|=2,k)):(x.flags|=1048576,k)}function s(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,k,b,T){return k===null||k.tag!==6?(k=B1(b,x.mode,T),k.return=x,k):(k=i(k,b),k.return=x,k)}function u(x,k,b,T){var N=b.type;return N===uf?h(x,k,b.props.children,T,b.key):k!==null&&(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ll&&JE(N)===k.type)?(T=i(k,b.props),T.ref=ah(x,k,b),T.return=x,T):(T=mm(b.type,b.key,b.props,null,x.mode,T),T.ref=ah(x,k,b),T.return=x,T)}function c(x,k,b,T){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=I1(b,x.mode,T),k.return=x,k):(k=i(k,b.children||[]),k.return=x,k)}function h(x,k,b,T,N){return k===null||k.tag!==7?(k=Xa(b,x.mode,T,N),k.return=x,k):(k=i(k,b),k.return=x,k)}function p(x,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=B1(""+k,x.mode,b),k.return=x,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case wg:return b=mm(k.type,k.key,k.props,null,x.mode,b),b.ref=ah(x,null,k),b.return=x,b;case af:return k=I1(k,x.mode,b),k.return=x,k;case ll:var T=k._init;return p(x,T(k._payload),b)}if(yh(k)||rh(k))return k=Xa(k,x.mode,b,null),k.return=x,k;Rg(x,k)}return null}function g(x,k,b,T){var N=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:l(x,k,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wg:return b.key===N?u(x,k,b,T):null;case af:return b.key===N?c(x,k,b,T):null;case ll:return N=b._init,g(x,k,N(b._payload),T)}if(yh(b)||rh(b))return N!==null?null:h(x,k,b,T,null);Rg(x,b)}return null}function v(x,k,b,T,N){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(b)||null,l(k,x,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case wg:return x=x.get(T.key===null?b:T.key)||null,u(k,x,T,N);case af:return x=x.get(T.key===null?b:T.key)||null,c(k,x,T,N);case ll:var B=T._init;return v(x,k,b,B(T._payload),N)}if(yh(T)||rh(T))return x=x.get(b)||null,h(k,x,T,N,null);Rg(k,T)}return null}function y(x,k,b,T){for(var N=null,B=null,D=k,$=k=0,G=null;D!==null&&$<b.length;$++){D.index>$?(G=D,D=null):G=D.sibling;var W=g(x,D,b[$],T);if(W===null){D===null&&(D=G);break}t&&D&&W.alternate===null&&e(x,D),k=o(W,k,$),B===null?N=W:B.sibling=W,B=W,D=G}if($===b.length)return n(x,D),At&&Ba(x,$),N;if(D===null){for(;$<b.length;$++)D=p(x,b[$],T),D!==null&&(k=o(D,k,$),B===null?N=D:B.sibling=D,B=D);return At&&Ba(x,$),N}for(D=r(x,D);$<b.length;$++)G=v(D,x,$,b[$],T),G!==null&&(t&&G.alternate!==null&&D.delete(G.key===null?$:G.key),k=o(G,k,$),B===null?N=G:B.sibling=G,B=G);return t&&D.forEach(function(oe){return e(x,oe)}),At&&Ba(x,$),N}function A(x,k,b,T){var N=rh(b);if(typeof N!="function")throw Error(re(150));if(b=N.call(b),b==null)throw Error(re(151));for(var B=N=null,D=k,$=k=0,G=null,W=b.next();D!==null&&!W.done;$++,W=b.next()){D.index>$?(G=D,D=null):G=D.sibling;var oe=g(x,D,W.value,T);if(oe===null){D===null&&(D=G);break}t&&D&&oe.alternate===null&&e(x,D),k=o(oe,k,$),B===null?N=oe:B.sibling=oe,B=oe,D=G}if(W.done)return n(x,D),At&&Ba(x,$),N;if(D===null){for(;!W.done;$++,W=b.next())W=p(x,W.value,T),W!==null&&(k=o(W,k,$),B===null?N=W:B.sibling=W,B=W);return At&&Ba(x,$),N}for(D=r(x,D);!W.done;$++,W=b.next())W=v(D,x,$,W.value,T),W!==null&&(t&&W.alternate!==null&&D.delete(W.key===null?$:W.key),k=o(W,k,$),B===null?N=W:B.sibling=W,B=W);return t&&D.forEach(function(ve){return e(x,ve)}),At&&Ba(x,$),N}function O(x,k,b,T){if(typeof b=="object"&&b!==null&&b.type===uf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case wg:e:{for(var N=b.key,B=k;B!==null;){if(B.key===N){if(N=b.type,N===uf){if(B.tag===7){n(x,B.sibling),k=i(B,b.props.children),k.return=x,x=k;break e}}else if(B.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ll&&JE(N)===B.type){n(x,B.sibling),k=i(B,b.props),k.ref=ah(x,B,b),k.return=x,x=k;break e}n(x,B);break}else e(x,B);B=B.sibling}b.type===uf?(k=Xa(b.props.children,x.mode,T,b.key),k.return=x,x=k):(T=mm(b.type,b.key,b.props,null,x.mode,T),T.ref=ah(x,k,b),T.return=x,x=T)}return s(x);case af:e:{for(B=b.key;k!==null;){if(k.key===B)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){n(x,k.sibling),k=i(k,b.children||[]),k.return=x,x=k;break e}else{n(x,k);break}else e(x,k);k=k.sibling}k=I1(b,x.mode,T),k.return=x,x=k}return s(x);case ll:return B=b._init,O(x,k,B(b._payload),T)}if(yh(b))return y(x,k,b,T);if(rh(b))return A(x,k,b,T);Rg(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(n(x,k.sibling),k=i(k,b),k.return=x,x=k):(n(x,k),k=B1(b,x.mode,T),k.return=x,x=k),s(x)):n(x,k)}return O}var $f=RR(!0),MR=RR(!1),Hd={},jo=ra(Hd),ld=ra(Hd),ad=ra(Hd);function Wa(t){if(t===Hd)throw Error(re(174));return t}function pb(t,e){switch(yt(ad,e),yt(ld,t),yt(jo,Hd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jw(e,t)}bt(jo),yt(jo,e)}function Hf(){bt(jo),bt(ld),bt(ad)}function LR(t){Wa(ad.current);var e=Wa(jo.current),n=jw(e,t.type);e!==n&&(yt(ld,t),yt(jo,n))}function gb(t){ld.current===t&&(bt(jo),bt(ld))}var Nt=ra(0);function Zm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var R1=[];function mb(){for(var t=0;t<R1.length;t++)R1[t]._workInProgressVersionPrimary=null;R1.length=0}var cm=$s.ReactCurrentDispatcher,M1=$s.ReactCurrentBatchConfig,iu=0,Pt=null,on=null,mn=null,Ym=!1,Nh=!1,ud=0,b9=0;function jn(){throw Error(re(321))}function vb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!uo(t[n],e[n]))return!1;return!0}function yb(t,e,n,r,i,o){if(iu=o,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cm.current=t===null||t.memoizedState===null?C9:A9,t=n(r,i),Nh){o=0;do{if(Nh=!1,ud=0,25<=o)throw Error(re(301));o+=1,mn=on=null,e.updateQueue=null,cm.current=T9,t=n(r,i)}while(Nh)}if(cm.current=Qm,e=on!==null&&on.next!==null,iu=0,mn=on=Pt=null,Ym=!1,e)throw Error(re(300));return t}function wb(){var t=ud!==0;return ud=0,t}function No(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Pt.memoizedState=mn=t:mn=mn.next=t,mn}function zi(){if(on===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var e=mn===null?Pt.memoizedState:mn.next;if(e!==null)mn=e,on=t;else{if(t===null)throw Error(re(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},mn===null?Pt.memoizedState=mn=t:mn=mn.next=t}return mn}function fd(t,e){return typeof e=="function"?e(t):e}function L1(t){var e=zi(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=on,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((iu&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,Pt.lanes|=h,ou|=h}c=c.next}while(c!==null&&c!==o);u===null?s=r:u.next=l,uo(r,e.memoizedState)||(Dr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Pt.lanes|=o,ou|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function N1(t){var e=zi(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);uo(o,e.memoizedState)||(Dr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function NR(){}function DR(t,e){var n=Pt,r=zi(),i=e(),o=!uo(r.memoizedState,i);if(o&&(r.memoizedState=i,Dr=!0),r=r.queue,_b(IR.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||mn!==null&&mn.memoizedState.tag&1){if(n.flags|=2048,cd(9,BR.bind(null,n,r,i,e),void 0,null),yn===null)throw Error(re(349));(iu&30)!==0||PR(n,e,i)}return i}function PR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BR(t,e,n,r){e.value=n,e.getSnapshot=r,FR(e)&&zR(t)}function IR(t,e,n){return n(function(){FR(e)&&zR(t)})}function FR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!uo(t,n)}catch{return!0}}function zR(t){var e=Ps(t,1);e!==null&&lo(e,t,1,-1)}function KE(t){var e=No();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:t},e.queue=t,t=t.dispatch=E9.bind(null,Pt,t),[e.memoizedState,t]}function cd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $R(){return zi().memoizedState}function hm(t,e,n,r){var i=No();Pt.flags|=t,i.memoizedState=cd(1|e,n,void 0,r===void 0?null:r)}function ev(t,e,n,r){var i=zi();r=r===void 0?null:r;var o=void 0;if(on!==null){var s=on.memoizedState;if(o=s.destroy,r!==null&&vb(r,s.deps)){i.memoizedState=cd(e,n,o,r);return}}Pt.flags|=t,i.memoizedState=cd(1|e,n,o,r)}function GE(t,e){return hm(8390656,8,t,e)}function _b(t,e){return ev(2048,8,t,e)}function HR(t,e){return ev(4,2,t,e)}function VR(t,e){return ev(4,4,t,e)}function UR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WR(t,e,n){return n=n!=null?n.concat([t]):null,ev(4,4,UR.bind(null,e,t),n)}function xb(){}function jR(t,e){var n=zi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qR(t,e){var n=zi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function JR(t,e,n){return(iu&21)===0?(t.baseState&&(t.baseState=!1,Dr=!0),t.memoizedState=n):(uo(n,e)||(n=ZO(),Pt.lanes|=n,ou|=n,t.baseState=!0),e)}function S9(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var r=M1.transition;M1.transition={};try{t(!1),e()}finally{ft=n,M1.transition=r}}function KR(){return zi().memoizedState}function k9(t,e,n){var r=Ml(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GR(t))ZR(e,n);else if(n=CR(t,e,n,r),n!==null){var i=vr();lo(n,t,r,i),YR(n,e,r)}}function E9(t,e,n){var r=Ml(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GR(t))ZR(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,uo(l,s)){var u=e.interleaved;u===null?(i.next=i,hb(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=CR(t,e,i,r),n!==null&&(i=vr(),lo(n,t,r,i),YR(n,e,r))}}function GR(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function ZR(t,e){Nh=Ym=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YR(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qx(t,n)}}var Qm={readContext:Fi,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},C9={readContext:Fi,useCallback:function(t,e){return No().memoizedState=[t,e===void 0?null:e],t},useContext:Fi,useEffect:GE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hm(4194308,4,UR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hm(4194308,4,t,e)},useInsertionEffect:function(t,e){return hm(4,2,t,e)},useMemo:function(t,e){var n=No();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=No();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=k9.bind(null,Pt,t),[r.memoizedState,t]},useRef:function(t){var e=No();return t={current:t},e.memoizedState=t},useState:KE,useDebugValue:xb,useDeferredValue:function(t){return No().memoizedState=t},useTransition:function(){var t=KE(!1),e=t[0];return t=S9.bind(null,t[1]),No().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pt,i=No();if(At){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),yn===null)throw Error(re(349));(iu&30)!==0||PR(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,GE(IR.bind(null,r,o,t),[t]),r.flags|=2048,cd(9,BR.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=No(),e=yn.identifierPrefix;if(At){var n=Cs,r=Es;n=(r&~(1<<32-so(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ud++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=b9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A9={readContext:Fi,useCallback:jR,useContext:Fi,useEffect:_b,useImperativeHandle:WR,useInsertionEffect:HR,useLayoutEffect:VR,useMemo:qR,useReducer:L1,useRef:$R,useState:function(){return L1(fd)},useDebugValue:xb,useDeferredValue:function(t){var e=zi();return JR(e,on.memoizedState,t)},useTransition:function(){var t=L1(fd)[0],e=zi().memoizedState;return[t,e]},useMutableSource:NR,useSyncExternalStore:DR,useId:KR,unstable_isNewReconciler:!1},T9={readContext:Fi,useCallback:jR,useContext:Fi,useEffect:_b,useImperativeHandle:WR,useInsertionEffect:HR,useLayoutEffect:VR,useMemo:qR,useReducer:N1,useRef:$R,useState:function(){return N1(fd)},useDebugValue:xb,useDeferredValue:function(t){var e=zi();return on===null?e.memoizedState=t:JR(e,on.memoizedState,t)},useTransition:function(){var t=N1(fd)[0],e=zi().memoizedState;return[t,e]},useMutableSource:NR,useSyncExternalStore:DR,useId:KR,unstable_isNewReconciler:!1};function Vf(t,e){try{var n="",r=e;do n+=nz(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function D1(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function p_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var O9=typeof WeakMap=="function"?WeakMap:Map;function QR(t,e,n){n=Os(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){e0||(e0=!0,k_=r),p_(t,e)},n}function XR(t,e,n){n=Os(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){p_(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){p_(t,e),typeof r!="function"&&(Rl===null?Rl=new Set([this]):Rl.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function ZE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new O9;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=U9.bind(null,t,e,n),e.then(t,t))}function YE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function QE(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Os(-1,1),e.tag=2,Ol(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var R9=$s.ReactCurrentOwner,Dr=!1;function hr(t,e,n,r){e.child=t===null?MR(e,null,n,r):$f(e,t.child,n,r)}function XE(t,e,n,r,i){n=n.render;var o=e.ref;return Af(e,i),r=yb(t,e,n,r,o,i),n=wb(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bs(t,e,i)):(At&&n&&sb(e),e.flags|=1,hr(t,e,r,i),e.child)}function eC(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Ob(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,eM(t,e,o,r,i)):(t=mm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,(t.lanes&i)===0){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:rd,n(s,r)&&t.ref===e.ref)return Bs(t,e,i)}return e.flags|=1,t=Ll(o,r),t.ref=e.ref,t.return=e,e.child=t}function eM(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(rd(o,r)&&t.ref===e.ref)if(Dr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Dr=!0);else return e.lanes=t.lanes,Bs(t,e,i)}return g_(t,e,n,r,i)}function tM(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(wf,Xr),Xr|=n;else{if((n&1073741824)===0)return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yt(wf,Xr),Xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,yt(wf,Xr),Xr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,yt(wf,Xr),Xr|=r;return hr(t,e,i,n),e.child}function nM(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function g_(t,e,n,r,i){var o=Fr(n)?nu:er.current;return o=Ff(e,o),Af(e,i),n=yb(t,e,n,r,o,i),r=wb(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bs(t,e,i)):(At&&r&&sb(e),e.flags|=1,hr(t,e,n,i),e.child)}function tC(t,e,n,r,i){if(Fr(n)){var o=!0;Wm(e)}else o=!1;if(Af(e,i),e.stateNode===null)dm(t,e),OR(e,n,r),d_(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fi(c):(c=Fr(n)?nu:er.current,c=Ff(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==c)&&qE(e,s,r,c),al=!1;var g=e.memoizedState;s.state=g,Gm(e,r,s,i),u=e.memoizedState,l!==r||g!==u||Ir.current||al?(typeof h=="function"&&(h_(e,n,h,r),u=e.memoizedState),(l=al||jE(e,n,l,r,g,u,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,AR(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:eo(e.type,l),s.props=c,p=e.pendingProps,g=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Fi(u):(u=Fr(n)?nu:er.current,u=Ff(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||g!==u)&&qE(e,s,r,u),al=!1,g=e.memoizedState,s.state=g,Gm(e,r,s,i);var y=e.memoizedState;l!==p||g!==y||Ir.current||al?(typeof v=="function"&&(h_(e,n,v,r),y=e.memoizedState),(c=al||jE(e,n,c,r,g,y,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),s.props=r,s.state=y,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return m_(t,e,n,r,o,i)}function m_(t,e,n,r,i,o){nM(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&$E(e,n,!1),Bs(t,e,o);r=e.stateNode,R9.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=$f(e,t.child,null,o),e.child=$f(e,null,l,o)):hr(t,e,l,o),e.memoizedState=r.state,i&&$E(e,n,!0),e.child}function rM(t){var e=t.stateNode;e.pendingContext?zE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zE(t,e.context,!1),pb(t,e.containerInfo)}function nC(t,e,n,r,i){return zf(),ab(i),e.flags|=256,hr(t,e,n,r),e.child}var v_={dehydrated:null,treeContext:null,retryLane:0};function y_(t){return{baseLanes:t,cachePool:null,transitions:null}}function iM(t,e,n){var r=e.pendingProps,i=Nt.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),yt(Nt,i&1),t===null)return f_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=s):o=rv(s,r,0,null),t=Xa(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=y_(n),e.memoizedState=v_,t):bb(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return M9(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return(s&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ll(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Ll(l,o):(o=Xa(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?y_(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=v_,r}return o=t.child,t=o.sibling,r=Ll(o,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bb(t,e){return e=rv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mg(t,e,n,r){return r!==null&&ab(r),$f(e,t.child,null,n),t=bb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function M9(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=D1(Error(re(422))),Mg(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=rv({mode:"visible",children:r.children},i,0,null),o=Xa(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,(e.mode&1)!==0&&$f(e,t.child,null,s),e.child.memoizedState=y_(s),e.memoizedState=v_,o);if((e.mode&1)===0)return Mg(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(re(419)),r=D1(o,r,void 0),Mg(t,e,s,r)}if(l=(s&t.childLanes)!==0,Dr||l){if(r=yn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|s))!==0?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ps(t,i),lo(r,t,i,-1))}return Tb(),r=D1(Error(re(421))),Mg(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=W9.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ri=Tl(i.nextSibling),si=e,At=!0,no=null,t!==null&&(Ri[Mi++]=Es,Ri[Mi++]=Cs,Ri[Mi++]=ru,Es=t.id,Cs=t.overflow,ru=e),e=bb(e,r.children),e.flags|=4096,e)}function rC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),c_(t.return,e,n)}function P1(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function oM(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(hr(t,e,r.children,n),r=Nt.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rC(t,n,e);else if(t.tag===19)rC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(yt(Nt,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Zm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),P1(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}P1(e,!0,n,null,o);break;case"together":P1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dm(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ou|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=Ll(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ll(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function L9(t,e,n){switch(e.tag){case 3:rM(e),zf();break;case 5:LR(e);break;case 1:Fr(e.type)&&Wm(e);break;case 4:pb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;yt(Jm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yt(Nt,Nt.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?iM(t,e,n):(yt(Nt,Nt.current&1),t=Bs(t,e,n),t!==null?t.sibling:null);yt(Nt,Nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return oM(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yt(Nt,Nt.current),r)break;return null;case 22:case 23:return e.lanes=0,tM(t,e,n)}return Bs(t,e,n)}var sM,w_,lM,aM;sM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};w_=function(){};lM=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Wa(jo.current);var o=null;switch(n){case"input":i=Hw(t,i),r=Hw(t,r),o=[];break;case"select":i=Bt({},i,{value:void 0}),r=Bt({},r,{value:void 0}),o=[];break;case"textarea":i=Ww(t,i),r=Ww(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vm)}qw(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zh.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zh.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&_t("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};aM=function(t,e,n,r){n!==r&&(e.flags|=4)};function uh(t,e){if(!At)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function N9(t,e,n){var r=e.pendingProps;switch(lb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(e),null;case 1:return Fr(e.type)&&Um(),qn(e),null;case 3:return r=e.stateNode,Hf(),bt(Ir),bt(er),mb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Og(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,no!==null&&(A_(no),no=null))),w_(t,e),qn(e),null;case 5:gb(e);var i=Wa(ad.current);if(n=e.type,t!==null&&e.stateNode!=null)lM(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return qn(e),null}if(t=Wa(jo.current),Og(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Bo]=e,r[sd]=o,t=(e.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(i=0;i<_h.length;i++)_t(_h[i],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":hE(r,o),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},_t("invalid",r);break;case"textarea":pE(r,o),_t("invalid",r)}qw(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Tg(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Tg(r.textContent,l,t),i=["children",""+l]):Zh.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&_t("scroll",r)}switch(n){case"input":_g(r),dE(r,o,!0);break;case"textarea":_g(r),gE(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Vm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Bo]=e,t[sd]=r,sM(t,e,!1,!1),e.stateNode=t;e:{switch(s=Jw(n,r),n){case"dialog":_t("cancel",t),_t("close",t),i=r;break;case"iframe":case"object":case"embed":_t("load",t),i=r;break;case"video":case"audio":for(i=0;i<_h.length;i++)_t(_h[i],t);i=r;break;case"source":_t("error",t),i=r;break;case"img":case"image":case"link":_t("error",t),_t("load",t),i=r;break;case"details":_t("toggle",t),i=r;break;case"input":hE(t,r),i=Hw(t,r),_t("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Bt({},r,{value:void 0}),_t("invalid",t);break;case"textarea":pE(t,r),i=Ww(t,r),_t("invalid",t);break;default:i=r}qw(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?FO(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&BO(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Yh(t,u):typeof u=="number"&&Yh(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Zh.hasOwnProperty(o)?u!=null&&o==="onScroll"&&_t("scroll",t):u!=null&&qx(t,o,u,s))}switch(n){case"input":_g(t),dE(t,r,!1);break;case"textarea":_g(t),gE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$l(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Sf(t,!!r.multiple,o,!1):r.defaultValue!=null&&Sf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qn(e),null;case 6:if(t&&e.stateNode!=null)aM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=Wa(ad.current),Wa(jo.current),Og(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bo]=e,(o=r.nodeValue!==n)&&(t=si,t!==null))switch(t.tag){case 3:Tg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tg(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bo]=e,e.stateNode=r}return qn(e),null;case 13:if(bt(Nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&ri!==null&&(e.mode&1)!==0&&(e.flags&128)===0)ER(),zf(),e.flags|=98560,o=!1;else if(o=Og(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(re(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(re(317));o[Bo]=e}else zf(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;qn(e),o=!1}else no!==null&&(A_(no),no=null),o=!0;if(!o)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Nt.current&1)!==0?an===0&&(an=3):Tb())),e.updateQueue!==null&&(e.flags|=4),qn(e),null);case 4:return Hf(),w_(t,e),t===null&&id(e.stateNode.containerInfo),qn(e),null;case 10:return cb(e.type._context),qn(e),null;case 17:return Fr(e.type)&&Um(),qn(e),null;case 19:if(bt(Nt),o=e.memoizedState,o===null)return qn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)uh(o,!1);else{if(an!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(s=Zm(t),s!==null){for(e.flags|=128,uh(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yt(Nt,Nt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Kt()>Uf&&(e.flags|=128,r=!0,uh(o,!1),e.lanes=4194304)}else{if(!r)if(t=Zm(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!At)return qn(e),null}else 2*Kt()-o.renderingStartTime>Uf&&n!==1073741824&&(e.flags|=128,r=!0,uh(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Kt(),e.sibling=null,n=Nt.current,yt(Nt,r?n&1|2:n&1),e):(qn(e),null);case 22:case 23:return Ab(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(Xr&1073741824)!==0&&(qn(e),e.subtreeFlags&6&&(e.flags|=8192)):qn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function D9(t,e){switch(lb(e),e.tag){case 1:return Fr(e.type)&&Um(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hf(),bt(Ir),bt(er),mb(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return gb(e),null;case 13:if(bt(Nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));zf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(Nt),null;case 4:return Hf(),null;case 10:return cb(e.type._context),null;case 22:case 23:return Ab(),null;case 24:return null;default:return null}}var Lg=!1,Qn=!1,P9=typeof WeakSet=="function"?WeakSet:Set,fe=null;function yf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(t,e,r)}else n.current=null}function __(t,e,n){try{n()}catch(r){Ht(t,e,r)}}var iC=!1;function B9(t,e){if(r_=zm,t=hR(),ob(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,p=t,g=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)g=p,p=v;for(;;){if(p===t)break t;if(g===n&&++c===i&&(l=s),g===o&&++h===r&&(u=s),(v=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(i_={focusedElem:t,selectionRange:n},zm=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var y=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var A=y.memoizedProps,O=y.memoizedState,x=e.stateNode,k=x.getSnapshotBeforeUpdate(e.elementType===e.type?A:eo(e.type,A),O);x.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(T){Ht(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return y=iC,iC=!1,y}function Dh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&__(e,n,o)}i=i.next}while(i!==r)}}function tv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function x_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uM(t){var e=t.alternate;e!==null&&(t.alternate=null,uM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bo],delete e[sd],delete e[l_],delete e[y9],delete e[w9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fM(t){return t.tag===5||t.tag===3||t.tag===4}function oC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function b_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vm));else if(r!==4&&(t=t.child,t!==null))for(b_(t,e,n),t=t.sibling;t!==null;)b_(t,e,n),t=t.sibling}function S_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(S_(t,e,n),t=t.sibling;t!==null;)S_(t,e,n),t=t.sibling}var En=null,to=!1;function rl(t,e,n){for(n=n.child;n!==null;)cM(t,e,n),n=n.sibling}function cM(t,e,n){if(Wo&&typeof Wo.onCommitFiberUnmount=="function")try{Wo.onCommitFiberUnmount(J0,n)}catch{}switch(n.tag){case 5:Qn||yf(n,e);case 6:var r=En,i=to;En=null,rl(t,e,n),En=r,to=i,En!==null&&(to?(t=En,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):En.removeChild(n.stateNode));break;case 18:En!==null&&(to?(t=En,n=n.stateNode,t.nodeType===8?T1(t.parentNode,n):t.nodeType===1&&T1(t,n),td(t)):T1(En,n.stateNode));break;case 4:r=En,i=to,En=n.stateNode.containerInfo,to=!0,rl(t,e,n),En=r,to=i;break;case 0:case 11:case 14:case 15:if(!Qn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&((o&2)!==0||(o&4)!==0)&&__(n,e,s),i=i.next}while(i!==r)}rl(t,e,n);break;case 1:if(!Qn&&(yf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ht(n,e,l)}rl(t,e,n);break;case 21:rl(t,e,n);break;case 22:n.mode&1?(Qn=(r=Qn)||n.memoizedState!==null,rl(t,e,n),Qn=r):rl(t,e,n);break;default:rl(t,e,n)}}function sC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new P9),e.forEach(function(r){var i=j9.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:En=l.stateNode,to=!1;break e;case 3:En=l.stateNode.containerInfo,to=!0;break e;case 4:En=l.stateNode.containerInfo,to=!0;break e}l=l.return}if(En===null)throw Error(re(160));cM(o,s,i),En=null,to=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ht(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hM(e,t),e=e.sibling}function hM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qi(e,t),Co(t),r&4){try{Dh(3,t,t.return),tv(3,t)}catch(A){Ht(t,t.return,A)}try{Dh(5,t,t.return)}catch(A){Ht(t,t.return,A)}}break;case 1:Qi(e,t),Co(t),r&512&&n!==null&&yf(n,n.return);break;case 5:if(Qi(e,t),Co(t),r&512&&n!==null&&yf(n,n.return),t.flags&32){var i=t.stateNode;try{Yh(i,"")}catch(A){Ht(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&NO(i,o),Jw(l,s);var c=Jw(l,o);for(s=0;s<u.length;s+=2){var h=u[s],p=u[s+1];h==="style"?FO(i,p):h==="dangerouslySetInnerHTML"?BO(i,p):h==="children"?Yh(i,p):qx(i,h,p,c)}switch(l){case"input":Vw(i,o);break;case"textarea":DO(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Sf(i,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?Sf(i,!!o.multiple,o.defaultValue,!0):Sf(i,!!o.multiple,o.multiple?[]:"",!1))}i[sd]=o}catch(A){Ht(t,t.return,A)}}break;case 6:if(Qi(e,t),Co(t),r&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(A){Ht(t,t.return,A)}}break;case 3:if(Qi(e,t),Co(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{td(e.containerInfo)}catch(A){Ht(t,t.return,A)}break;case 4:Qi(e,t),Co(t);break;case 13:Qi(e,t),Co(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Eb=Kt())),r&4&&sC(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Qn=(c=Qn)||h,Qi(e,t),Qn=c):Qi(e,t),Co(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&(t.mode&1)!==0)for(fe=t,h=t.child;h!==null;){for(p=fe=h;fe!==null;){switch(g=fe,v=g.child,g.tag){case 0:case 11:case 14:case 15:Dh(4,g,g.return);break;case 1:yf(g,g.return);var y=g.stateNode;if(typeof y.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(A){Ht(r,n,A)}}break;case 5:yf(g,g.return);break;case 22:if(g.memoizedState!==null){aC(p);continue}}v!==null?(v.return=g,fe=v):aC(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=IO("display",s))}catch(A){Ht(t,t.return,A)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(A){Ht(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Qi(e,t),Co(t),r&4&&sC(t);break;case 21:break;default:Qi(e,t),Co(t)}}function Co(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fM(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yh(i,""),r.flags&=-33);var o=oC(t);S_(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=oC(t);b_(t,l,s);break;default:throw Error(re(161))}}catch(u){Ht(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I9(t,e,n){fe=t,dM(t)}function dM(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var i=fe,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Lg;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Qn;l=Lg;var c=Qn;if(Lg=s,(Qn=u)&&!c)for(fe=i;fe!==null;)s=fe,u=s.child,s.tag===22&&s.memoizedState!==null?uC(i):u!==null?(u.return=s,fe=u):uC(i);for(;o!==null;)fe=o,dM(o),o=o.sibling;fe=i,Lg=l,Qn=c}lC(t)}else(i.subtreeFlags&8772)!==0&&o!==null?(o.return=i,fe=o):lC(t)}}function lC(t){for(;fe!==null;){var e=fe;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Qn||tv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:eo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&WE(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}WE(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&td(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Qn||e.flags&512&&x_(e)}catch(g){Ht(e,e.return,g)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function aC(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function uC(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tv(4,e)}catch(u){Ht(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ht(e,i,u)}}var o=e.return;try{x_(e)}catch(u){Ht(e,o,u)}break;case 5:var s=e.return;try{x_(e)}catch(u){Ht(e,s,u)}}}catch(u){Ht(e,e.return,u)}if(e===t){fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,fe=l;break}fe=e.return}}var F9=Math.ceil,Xm=$s.ReactCurrentDispatcher,Sb=$s.ReactCurrentOwner,Bi=$s.ReactCurrentBatchConfig,Ze=0,yn=null,Qt=null,Ln=0,Xr=0,wf=ra(0),an=0,hd=null,ou=0,nv=0,kb=0,Ph=null,Lr=null,Eb=0,Uf=1/0,xs=null,e0=!1,k_=null,Rl=null,Ng=!1,ml=null,t0=0,Bh=0,E_=null,pm=-1,gm=0;function vr(){return(Ze&6)!==0?Kt():pm!==-1?pm:pm=Kt()}function Ml(t){return(t.mode&1)===0?1:(Ze&2)!==0&&Ln!==0?Ln&-Ln:x9.transition!==null?(gm===0&&(gm=ZO()),gm):(t=ft,t!==0||(t=window.event,t=t===void 0?16:rR(t.type)),t)}function lo(t,e,n,r){if(50<Bh)throw Bh=0,E_=null,Error(re(185));Fd(t,n,r),((Ze&2)===0||t!==yn)&&(t===yn&&((Ze&2)===0&&(nv|=n),an===4&&hl(t,Ln)),zr(t,r),n===1&&Ze===0&&(e.mode&1)===0&&(Uf=Kt()+500,Q0&&ia()))}function zr(t,e){var n=t.callbackNode;xz(t,e);var r=Fm(t,t===yn?Ln:0);if(r===0)n!==null&&yE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yE(n),e===1)t.tag===0?_9(fC.bind(null,t)):bR(fC.bind(null,t)),m9(function(){(Ze&6)===0&&ia()}),n=null;else{switch(YO(r)){case 1:n=Yx;break;case 4:n=KO;break;case 16:n=Im;break;case 536870912:n=GO;break;default:n=Im}n=xM(n,pM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pM(t,e){if(pm=-1,gm=0,(Ze&6)!==0)throw Error(re(327));var n=t.callbackNode;if(Tf()&&t.callbackNode!==n)return null;var r=Fm(t,t===yn?Ln:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=n0(t,r);else{e=r;var i=Ze;Ze|=2;var o=mM();(yn!==t||Ln!==e)&&(xs=null,Uf=Kt()+500,Qa(t,e));do try{H9();break}catch(l){gM(t,l)}while(1);fb(),Xm.current=o,Ze=i,Qt!==null?e=0:(yn=null,Ln=0,e=an)}if(e!==0){if(e===2&&(i=Qw(t),i!==0&&(r=i,e=C_(t,i))),e===1)throw n=hd,Qa(t,0),hl(t,r),zr(t,Kt()),n;if(e===6)hl(t,r);else{if(i=t.current.alternate,(r&30)===0&&!z9(i)&&(e=n0(t,r),e===2&&(o=Qw(t),o!==0&&(r=o,e=C_(t,o))),e===1))throw n=hd,Qa(t,0),hl(t,r),zr(t,Kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:Ia(t,Lr,xs);break;case 3:if(hl(t,r),(r&130023424)===r&&(e=Eb+500-Kt(),10<e)){if(Fm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=s_(Ia.bind(null,t,Lr,xs),e);break}Ia(t,Lr,xs);break;case 4:if(hl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-so(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F9(r/1960))-r,10<r){t.timeoutHandle=s_(Ia.bind(null,t,Lr,xs),r);break}Ia(t,Lr,xs);break;case 5:Ia(t,Lr,xs);break;default:throw Error(re(329))}}}return zr(t,Kt()),t.callbackNode===n?pM.bind(null,t):null}function C_(t,e){var n=Ph;return t.current.memoizedState.isDehydrated&&(Qa(t,e).flags|=256),t=n0(t,e),t!==2&&(e=Lr,Lr=n,e!==null&&A_(e)),t}function A_(t){Lr===null?Lr=t:Lr.push.apply(Lr,t)}function z9(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!uo(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hl(t,e){for(e&=~kb,e&=~nv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-so(e),r=1<<n;t[n]=-1,e&=~r}}function fC(t){if((Ze&6)!==0)throw Error(re(327));Tf();var e=Fm(t,0);if((e&1)===0)return zr(t,Kt()),null;var n=n0(t,e);if(t.tag!==0&&n===2){var r=Qw(t);r!==0&&(e=r,n=C_(t,r))}if(n===1)throw n=hd,Qa(t,0),hl(t,e),zr(t,Kt()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ia(t,Lr,xs),zr(t,Kt()),null}function Cb(t,e){var n=Ze;Ze|=1;try{return t(e)}finally{Ze=n,Ze===0&&(Uf=Kt()+500,Q0&&ia())}}function su(t){ml!==null&&ml.tag===0&&(Ze&6)===0&&Tf();var e=Ze;Ze|=1;var n=Bi.transition,r=ft;try{if(Bi.transition=null,ft=1,t)return t()}finally{ft=r,Bi.transition=n,Ze=e,(Ze&6)===0&&ia()}}function Ab(){Xr=wf.current,bt(wf)}function Qa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,g9(n)),Qt!==null)for(n=Qt.return;n!==null;){var r=n;switch(lb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Um();break;case 3:Hf(),bt(Ir),bt(er),mb();break;case 5:gb(r);break;case 4:Hf();break;case 13:bt(Nt);break;case 19:bt(Nt);break;case 10:cb(r.type._context);break;case 22:case 23:Ab()}n=n.return}if(yn=t,Qt=t=Ll(t.current,null),Ln=Xr=e,an=0,hd=null,kb=nv=ou=0,Lr=Ph=null,Ua!==null){for(e=0;e<Ua.length;e++)if(n=Ua[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ua=null}return t}function gM(t,e){do{var n=Qt;try{if(fb(),cm.current=Qm,Ym){for(var r=Pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ym=!1}if(iu=0,mn=on=Pt=null,Nh=!1,ud=0,Sb.current=null,n===null||n.return===null){an=1,hd=e,Qt=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Ln,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,p=h.tag;if((h.mode&1)===0&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=YE(s);if(v!==null){v.flags&=-257,QE(v,s,l,o,e),v.mode&1&&ZE(o,c,e),e=v,u=c;var y=e.updateQueue;if(y===null){var A=new Set;A.add(u),e.updateQueue=A}else y.add(u);break e}else{if((e&1)===0){ZE(o,c,e),Tb();break e}u=Error(re(426))}}else if(At&&l.mode&1){var O=YE(s);if(O!==null){(O.flags&65536)===0&&(O.flags|=256),QE(O,s,l,o,e),ab(Vf(u,l));break e}}o=u=Vf(u,l),an!==4&&(an=2),Ph===null?Ph=[o]:Ph.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=QR(o,u,e);UE(o,x);break e;case 1:l=u;var k=o.type,b=o.stateNode;if((o.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Rl===null||!Rl.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=XR(o,l,e);UE(o,T);break e}}o=o.return}while(o!==null)}yM(n)}catch(N){e=N,Qt===n&&n!==null&&(Qt=n=n.return);continue}break}while(1)}function mM(){var t=Xm.current;return Xm.current=Qm,t===null?Qm:t}function Tb(){(an===0||an===3||an===2)&&(an=4),yn===null||(ou&268435455)===0&&(nv&268435455)===0||hl(yn,Ln)}function n0(t,e){var n=Ze;Ze|=2;var r=mM();(yn!==t||Ln!==e)&&(xs=null,Qa(t,e));do try{$9();break}catch(i){gM(t,i)}while(1);if(fb(),Ze=n,Xm.current=r,Qt!==null)throw Error(re(261));return yn=null,Ln=0,an}function $9(){for(;Qt!==null;)vM(Qt)}function H9(){for(;Qt!==null&&!hz();)vM(Qt)}function vM(t){var e=_M(t.alternate,t,Xr);t.memoizedProps=t.pendingProps,e===null?yM(t):Qt=e,Sb.current=null}function yM(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=N9(n,e,Xr),n!==null){Qt=n;return}}else{if(n=D9(n,e),n!==null){n.flags&=32767,Qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{an=6,Qt=null;return}}if(e=e.sibling,e!==null){Qt=e;return}Qt=e=t}while(e!==null);an===0&&(an=5)}function Ia(t,e,n){var r=ft,i=Bi.transition;try{Bi.transition=null,ft=1,V9(t,e,n,r)}finally{Bi.transition=i,ft=r}return null}function V9(t,e,n,r){do Tf();while(ml!==null);if((Ze&6)!==0)throw Error(re(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(bz(t,o),t===yn&&(Qt=yn=null,Ln=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Ng||(Ng=!0,xM(Im,function(){return Tf(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=Bi.transition,Bi.transition=null;var s=ft;ft=1;var l=Ze;Ze|=4,Sb.current=null,B9(t,n),hM(n,t),a9(i_),zm=!!r_,i_=r_=null,t.current=n,I9(n),dz(),Ze=l,ft=s,Bi.transition=o}else t.current=n;if(Ng&&(Ng=!1,ml=t,t0=i),o=t.pendingLanes,o===0&&(Rl=null),mz(n.stateNode),zr(t,Kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(e0)throw e0=!1,t=k_,k_=null,t;return(t0&1)!==0&&t.tag!==0&&Tf(),o=t.pendingLanes,(o&1)!==0?t===E_?Bh++:(Bh=0,E_=t):Bh=0,ia(),null}function Tf(){if(ml!==null){var t=YO(t0),e=Bi.transition,n=ft;try{if(Bi.transition=null,ft=16>t?16:t,ml===null)var r=!1;else{if(t=ml,ml=null,t0=0,(Ze&6)!==0)throw Error(re(331));var i=Ze;for(Ze|=4,fe=t.current;fe!==null;){var o=fe,s=o.child;if((fe.flags&16)!==0){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(fe=c;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:Dh(8,h,o)}var p=h.child;if(p!==null)p.return=h,fe=p;else for(;fe!==null;){h=fe;var g=h.sibling,v=h.return;if(uM(h),h===c){fe=null;break}if(g!==null){g.return=v,fe=g;break}fe=v}}}var y=o.alternate;if(y!==null){var A=y.child;if(A!==null){y.child=null;do{var O=A.sibling;A.sibling=null,A=O}while(A!==null)}}fe=o}}if((o.subtreeFlags&2064)!==0&&s!==null)s.return=o,fe=s;else e:for(;fe!==null;){if(o=fe,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Dh(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,fe=x;break e}fe=o.return}}var k=t.current;for(fe=k;fe!==null;){s=fe;var b=s.child;if((s.subtreeFlags&2064)!==0&&b!==null)b.return=s,fe=b;else e:for(s=k;fe!==null;){if(l=fe,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:tv(9,l)}}catch(N){Ht(l,l.return,N)}if(l===s){fe=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,fe=T;break e}fe=l.return}}if(Ze=i,ia(),Wo&&typeof Wo.onPostCommitFiberRoot=="function")try{Wo.onPostCommitFiberRoot(J0,t)}catch{}r=!0}return r}finally{ft=n,Bi.transition=e}}return!1}function cC(t,e,n){e=Vf(n,e),e=QR(t,e,1),t=Ol(t,e,1),e=vr(),t!==null&&(Fd(t,1,e),zr(t,e))}function Ht(t,e,n){if(t.tag===3)cC(t,t,n);else for(;e!==null;){if(e.tag===3){cC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rl===null||!Rl.has(r))){t=Vf(n,t),t=XR(e,t,1),e=Ol(e,t,1),t=vr(),e!==null&&(Fd(e,1,t),zr(e,t));break}}e=e.return}}function U9(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vr(),t.pingedLanes|=t.suspendedLanes&n,yn===t&&(Ln&n)===n&&(an===4||an===3&&(Ln&130023424)===Ln&&500>Kt()-Eb?Qa(t,0):kb|=n),zr(t,e)}function wM(t,e){e===0&&((t.mode&1)===0?e=1:(e=Sg,Sg<<=1,(Sg&130023424)===0&&(Sg=4194304)));var n=vr();t=Ps(t,e),t!==null&&(Fd(t,e,n),zr(t,n))}function W9(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wM(t,n)}function j9(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),wM(t,n)}var _M;_M=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ir.current)Dr=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Dr=!1,L9(t,e,n);Dr=(t.flags&131072)!==0}else Dr=!1,At&&(e.flags&1048576)!==0&&SR(e,qm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dm(t,e),t=e.pendingProps;var i=Ff(e,er.current);Af(e,n),i=yb(null,e,r,t,i,n);var o=wb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fr(r)?(o=!0,Wm(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,db(e),i.updater=X0,e.stateNode=i,i._reactInternals=e,d_(e,r,t,n),e=m_(null,e,r,!0,o,n)):(e.tag=0,At&&o&&sb(e),hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=J9(r),t=eo(r,t),i){case 0:e=g_(null,e,r,t,n);break e;case 1:e=tC(null,e,r,t,n);break e;case 11:e=XE(null,e,r,t,n);break e;case 14:e=eC(null,e,r,eo(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:eo(r,i),g_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:eo(r,i),tC(t,e,r,i,n);case 3:e:{if(rM(e),t===null)throw Error(re(387));r=e.pendingProps,o=e.memoizedState,i=o.element,AR(t,e),Gm(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Vf(Error(re(423)),e),e=nC(t,e,r,n,i);break e}else if(r!==i){i=Vf(Error(re(424)),e),e=nC(t,e,r,n,i);break e}else for(ri=Tl(e.stateNode.containerInfo.firstChild),si=e,At=!0,no=null,n=MR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zf(),r===i){e=Bs(t,e,n);break e}hr(t,e,r,n)}e=e.child}return e;case 5:return LR(e),t===null&&f_(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,o_(r,i)?s=null:o!==null&&o_(r,o)&&(e.flags|=32),nM(t,e),hr(t,e,s,n),e.child;case 6:return t===null&&f_(e),null;case 13:return iM(t,e,n);case 4:return pb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$f(e,null,r,n):hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:eo(r,i),XE(t,e,r,i,n);case 7:return hr(t,e,e.pendingProps,n),e.child;case 8:return hr(t,e,e.pendingProps.children,n),e.child;case 12:return hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,yt(Jm,r._currentValue),r._currentValue=s,o!==null)if(uo(o.value,s)){if(o.children===i.children&&!Ir.current){e=Bs(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Os(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),c_(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(re(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),c_(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Af(e,n),i=Fi(i),r=r(i),e.flags|=1,hr(t,e,r,n),e.child;case 14:return r=e.type,i=eo(r,e.pendingProps),i=eo(r.type,i),eC(t,e,r,i,n);case 15:return eM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:eo(r,i),dm(t,e),e.tag=1,Fr(r)?(t=!0,Wm(e)):t=!1,Af(e,n),OR(e,r,i),d_(e,r,i,n),m_(null,e,r,!0,t,n);case 19:return oM(t,e,n);case 22:return tM(t,e,n)}throw Error(re(156,e.tag))};function xM(t,e){return JO(t,e)}function q9(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(t,e,n,r){return new q9(t,e,n,r)}function Ob(t){return t=t.prototype,!(!t||!t.isReactComponent)}function J9(t){if(typeof t=="function")return Ob(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kx)return 11;if(t===Gx)return 14}return 2}function Ll(t,e){var n=t.alternate;return n===null?(n=Di(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mm(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Ob(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case uf:return Xa(n.children,i,o,e);case Jx:s=8,i|=8;break;case Iw:return t=Di(12,n,e,i|2),t.elementType=Iw,t.lanes=o,t;case Fw:return t=Di(13,n,e,i),t.elementType=Fw,t.lanes=o,t;case zw:return t=Di(19,n,e,i),t.elementType=zw,t.lanes=o,t;case RO:return rv(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TO:s=10;break e;case OO:s=9;break e;case Kx:s=11;break e;case Gx:s=14;break e;case ll:s=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Di(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Xa(t,e,n,r){return t=Di(7,t,r,e),t.lanes=n,t}function rv(t,e,n,r){return t=Di(22,t,r,e),t.elementType=RO,t.lanes=n,t.stateNode={isHidden:!1},t}function B1(t,e,n){return t=Di(6,t,null,e),t.lanes=n,t}function I1(t,e,n){return e=Di(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function K9(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=v1(0),this.expirationTimes=v1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=v1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rb(t,e,n,r,i,o,s,l,u){return t=new K9(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Di(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},db(o),t}function G9(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:af,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bM(t){if(!t)return Hl;t=t._reactInternals;e:{if(du(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(Fr(n))return xR(t,n,e)}return e}function SM(t,e,n,r,i,o,s,l,u){return t=Rb(n,r,!0,t,i,o,s,l,u),t.context=bM(null),n=t.current,r=vr(),i=Ml(n),o=Os(r,i),o.callback=e!=null?e:null,Ol(n,o,i),t.current.lanes=i,Fd(t,i,r),zr(t,r),t}function iv(t,e,n,r){var i=e.current,o=vr(),s=Ml(i);return n=bM(n),e.context===null?e.context=n:e.pendingContext=n,e=Os(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ol(i,e,s),t!==null&&(lo(t,i,s,o),fm(t,i,s)),s}function r0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mb(t,e){hC(t,e),(t=t.alternate)&&hC(t,e)}function Z9(){return null}var kM=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lb(t){this._internalRoot=t}ov.prototype.render=Lb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));iv(t,e,null,null)};ov.prototype.unmount=Lb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;su(function(){iv(null,t,null,null)}),e[Ds]=null}};function ov(t){this._internalRoot=t}ov.prototype.unstable_scheduleHydration=function(t){if(t){var e=eR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cl.length&&e!==0&&e<cl[n].priority;n++);cl.splice(n,0,t),n===0&&nR(t)}};function Nb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dC(){}function Y9(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=r0(s);o.call(c)}}var s=SM(e,r,t,0,null,!1,!1,"",dC);return t._reactRootContainer=s,t[Ds]=s.current,id(t.nodeType===8?t.parentNode:t),su(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=r0(u);l.call(c)}}var u=Rb(t,0,!1,null,null,!1,!1,"",dC);return t._reactRootContainer=u,t[Ds]=u.current,id(t.nodeType===8?t.parentNode:t),su(function(){iv(e,u,n,r)}),u}function lv(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=r0(s);l.call(u)}}iv(e,s,t,i)}else s=Y9(n,e,t,i,r);return r0(s)}QO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wh(e.pendingLanes);n!==0&&(Qx(e,n|1),zr(e,Kt()),(Ze&6)===0&&(Uf=Kt()+500,ia()))}break;case 13:su(function(){var r=Ps(t,1);if(r!==null){var i=vr();lo(r,t,1,i)}}),Mb(t,1)}};Xx=function(t){if(t.tag===13){var e=Ps(t,134217728);if(e!==null){var n=vr();lo(e,t,134217728,n)}Mb(t,134217728)}};XO=function(t){if(t.tag===13){var e=Ml(t),n=Ps(t,e);if(n!==null){var r=vr();lo(n,t,e,r)}Mb(t,e)}};eR=function(){return ft};tR=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};Gw=function(t,e,n){switch(e){case"input":if(Vw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Y0(r);if(!i)throw Error(re(90));LO(r),Vw(r,i)}}}break;case"textarea":DO(t,n);break;case"select":e=n.value,e!=null&&Sf(t,!!n.multiple,e,!1)}};HO=Cb;VO=su;var Q9={usingClientEntryPoint:!1,Events:[$d,df,Y0,zO,$O,Cb]},fh={findFiberByHostInstance:Va,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},X9={bundleType:fh.bundleType,version:fh.version,rendererPackageName:fh.rendererPackageName,rendererConfig:fh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$s.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jO(t),t===null?null:t.stateNode},findFiberByHostInstance:fh.findFiberByHostInstance||Z9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dg.isDisabled&&Dg.supportsFiber)try{J0=Dg.inject(X9),Wo=Dg}catch{}}ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q9;ci.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nb(e))throw Error(re(200));return G9(t,e,null,n)};ci.createRoot=function(t,e){if(!Nb(t))throw Error(re(299));var n=!1,r="",i=kM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rb(t,1,!1,null,null,n,!1,r,i),t[Ds]=e.current,id(t.nodeType===8?t.parentNode:t),new Lb(e)};ci.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=jO(e),t=t===null?null:t.stateNode,t};ci.flushSync=function(t){return su(t)};ci.hydrate=function(t,e,n){if(!sv(e))throw Error(re(200));return lv(null,t,e,!0,n)};ci.hydrateRoot=function(t,e,n){if(!Nb(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=kM;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=SM(e,null,t,1,n!=null?n:null,i,!1,o,s),t[Ds]=e.current,id(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ov(e)};ci.render=function(t,e,n){if(!sv(e))throw Error(re(200));return lv(null,t,e,!1,n)};ci.unmountComponentAtNode=function(t){if(!sv(t))throw Error(re(40));return t._reactRootContainer?(su(function(){lv(null,null,t,!1,function(){t._reactRootContainer=null,t[Ds]=null})}),!0):!1};ci.unstable_batchedUpdates=Cb;ci.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sv(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return lv(t,e,n,!1,r)};ci.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=ci})(SO);var pC=SO.exports;Pw.createRoot=pC.createRoot,Pw.hydrateRoot=pC.hydrateRoot;function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}var ja;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ja||(ja={}));var gC=function(t){return t},mC="beforeunload",e$="popstate";function t$(t){t===void 0&&(t={});var e=t,n=e.window,r=n===void 0?document.defaultView:n,i=r.history;function o(){var D=r.location,$=D.pathname,G=D.search,W=D.hash,oe=i.state||{};return[oe.idx,gC({pathname:$,search:G,hash:W,state:oe.usr||null,key:oe.key||"default"})]}var s=null;function l(){if(s)v.call(s),s=null;else{var D=ja.Pop,$=o(),G=$[0],W=$[1];if(v.length){if(G!=null){var oe=h-G;oe&&(s={action:D,location:W,retry:function(){N(oe*-1)}},N(oe))}}else k(D)}}r.addEventListener(e$,l);var u=ja.Pop,c=o(),h=c[0],p=c[1],g=yC(),v=yC();h==null&&(h=0,i.replaceState(dd({},i.state,{idx:h}),""));function y(D){return typeof D=="string"?D:r$(D)}function A(D,$){return $===void 0&&($=null),gC(dd({pathname:p.pathname,hash:"",search:""},typeof D=="string"?av(D):D,{state:$,key:n$()}))}function O(D,$){return[{usr:D.state,key:D.key,idx:$},y(D)]}function x(D,$,G){return!v.length||(v.call({action:D,location:$,retry:G}),!1)}function k(D){u=D;var $=o();h=$[0],p=$[1],g.call({action:u,location:p})}function b(D,$){var G=ja.Push,W=A(D,$);function oe(){b(D,$)}if(x(G,W,oe)){var ve=O(W,h+1),_e=ve[0],ze=ve[1];try{i.pushState(_e,"",ze)}catch{r.location.assign(ze)}k(G)}}function T(D,$){var G=ja.Replace,W=A(D,$);function oe(){T(D,$)}if(x(G,W,oe)){var ve=O(W,h),_e=ve[0],ze=ve[1];i.replaceState(_e,"",ze),k(G)}}function N(D){i.go(D)}var B={get action(){return u},get location(){return p},createHref:y,push:b,replace:T,go:N,back:function(){N(-1)},forward:function(){N(1)},listen:function($){return g.push($)},block:function($){var G=v.push($);return v.length===1&&r.addEventListener(mC,vC),function(){G(),v.length||r.removeEventListener(mC,vC)}}};return B}function vC(t){t.preventDefault(),t.returnValue=""}function yC(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter(function(r){return r!==n})}},call:function(n){t.forEach(function(r){return r&&r(n)})}}}function n$(){return Math.random().toString(36).substr(2,8)}function r$(t){var e=t.pathname,n=e===void 0?"/":e,r=t.search,i=r===void 0?"":r,o=t.hash,s=o===void 0?"":o;return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function av(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const i$=Je.exports.createContext(null),Db=Je.exports.createContext(null),EM=Je.exports.createContext({outlet:null,matches:[]});function Vl(t,e){if(!t)throw new Error(e)}function o$(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?av(e):e,i=AM(r.pathname||"/",n);if(i==null)return null;let o=CM(t);s$(o);let s=null;for(let l=0;s==null&&l<o.length;++l)s=g$(o[l],i);return s}function CM(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((i,o)=>{let s={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};s.relativePath.startsWith("/")&&(s.relativePath.startsWith(r)||Vl(!1),s.relativePath=s.relativePath.slice(r.length));let l=Of([r,s.relativePath]),u=n.concat(s);i.children&&i.children.length>0&&(i.index===!0&&Vl(!1),CM(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:d$(l,i.index),routesMeta:u})}),e}function s$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:p$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const l$=/^:\w+$/,a$=3,u$=2,f$=1,c$=10,h$=-2,wC=t=>t==="*";function d$(t,e){let n=t.split("/"),r=n.length;return n.some(wC)&&(r+=h$),e&&(r+=u$),n.filter(i=>!wC(i)).reduce((i,o)=>i+(l$.test(o)?a$:o===""?f$:c$),r)}function p$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function g$(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],u=s===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=m$({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c);if(!h)return null;Object.assign(r,h.params);let p=l.route;o.push({params:r,pathname:Of([i,h.pathname]),pathnameBase:TM(Of([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Of([i,h.pathnameBase]))}return o}function m$(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v$(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,h,p)=>{if(h==="*"){let g=l[p]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}return c[h]=y$(l[p]||""),c},{}),pathname:o,pathnameBase:s,pattern:t}}function v$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(s,l)=>(r.push(l),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(i,e?void 0:"i"),r]}function y$(t,e){try{return decodeURIComponent(t)}catch{return t}}function AM(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=t.charAt(e.length);return n&&n!=="/"?null:t.slice(e.length)||"/"}const Of=t=>t.join("/").replace(/\/\/+/g,"/"),TM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function Pb(){return Je.exports.useContext(Db)!=null}function w$(){return Pb()||Vl(!1),Je.exports.useContext(Db).location}function _$(t,e){Pb()||Vl(!1);let{matches:n}=Je.exports.useContext(EM),r=n[n.length-1],i=r?r.params:{};r&&r.pathname;let o=r?r.pathnameBase:"/";r&&r.route;let s=w$(),l;if(e){var u;let g=typeof e=="string"?av(e):e;o==="/"||((u=g.pathname)==null?void 0:u.startsWith(o))||Vl(!1),l=g}else l=s;let c=l.pathname||"/",h=o==="/"?c:c.slice(o.length)||"/",p=o$(t,{pathname:h});return x$(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},i,g.params),pathname:Of([o,g.pathname]),pathnameBase:g.pathnameBase==="/"?o:Of([o,g.pathnameBase])})),n)}function x$(t,e){return e===void 0&&(e=[]),t==null?null:t.reduceRight((n,r,i)=>Je.exports.createElement(EM.Provider,{children:r.route.element!==void 0?r.route.element:n,value:{outlet:n,matches:e.concat(t.slice(0,i+1))}}),null)}function T_(t){Vl(!1)}function b$(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ja.Pop,navigator:o,static:s=!1}=t;Pb()&&Vl(!1);let l=TM(e),u=Je.exports.useMemo(()=>({basename:l,navigator:o,static:s}),[l,o,s]);typeof r=="string"&&(r=av(r));let{pathname:c="/",search:h="",hash:p="",state:g=null,key:v="default"}=r,y=Je.exports.useMemo(()=>{let A=AM(c,l);return A==null?null:{pathname:A,search:h,hash:p,state:g,key:v}},[l,c,h,p,g,v]);return y==null?null:Je.exports.createElement(i$.Provider,{value:u},Je.exports.createElement(Db.Provider,{children:n,value:{location:y,navigationType:i}}))}function S$(t){let{children:e,location:n}=t;return _$(O_(e),n)}function O_(t){let e=[];return Je.exports.Children.forEach(t,n=>{if(!Je.exports.isValidElement(n))return;if(n.type===Je.exports.Fragment){e.push.apply(e,O_(n.props.children));return}n.type!==T_&&Vl(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=O_(n.props.children)),e.push(r)}),e}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function k$(t){let{basename:e,children:n,window:r}=t,i=Je.exports.useRef();i.current==null&&(i.current=t$({window:r}));let o=i.current,[s,l]=Je.exports.useState({action:o.action,location:o.location});return Je.exports.useLayoutEffect(()=>o.listen(l),[o]),Je.exports.createElement(b$,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:o})}var Bb={exports:{}},uv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E$=Je.exports,C$=Symbol.for("react.element"),A$=Symbol.for("react.fragment"),T$=Object.prototype.hasOwnProperty,O$=E$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R$={key:!0,ref:!0,__self:!0,__source:!0};function OM(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)T$.call(e,r)&&!R$.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:C$,type:t,key:o,ref:s,props:i,_owner:O$.current}}uv.Fragment=A$;uv.jsx=OM;uv.jsxs=OM;(function(t){t.exports=uv})(Bb);const Pe=Bb.exports.jsx,dr=Bb.exports.jsxs;class M$ extends q0.Component{render(){return dr("div",{className:"row",children:[Pe("h1",{className:"teal-text text-darken-3",children:"Tools"}),Pe("hr",{className:"teal-text text-darken-3"}),Pe("p",{children:"A set of development tools to help our daily lives"}),Pe("div",{className:"col s12 l12",children:Pe("ul",{className:"collection",children:dr("li",{className:"collection-item",children:[Pe("a",{href:"/devplayground/validate-avro-schema",children:"Avro schema validator"}),": An Avro schema validator to help devs to define schemas"]})})})]})}}const Wf=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};var Io=[],Oi=[],L$=typeof Uint8Array<"u"?Uint8Array:Array,Ib=!1;function RM(){Ib=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)Io[e]=t[e],Oi[t.charCodeAt(e)]=e;Oi["-".charCodeAt(0)]=62,Oi["_".charCodeAt(0)]=63}function N$(t){Ib||RM();var e,n,r,i,o,s,l=t.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=t[l-2]==="="?2:t[l-1]==="="?1:0,s=new L$(l*3/4-o),r=o>0?l-4:l;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)i=Oi[t.charCodeAt(e)]<<18|Oi[t.charCodeAt(e+1)]<<12|Oi[t.charCodeAt(e+2)]<<6|Oi[t.charCodeAt(e+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=i&255;return o===2?(i=Oi[t.charCodeAt(e)]<<2|Oi[t.charCodeAt(e+1)]>>4,s[u++]=i&255):o===1&&(i=Oi[t.charCodeAt(e)]<<10|Oi[t.charCodeAt(e+1)]<<4|Oi[t.charCodeAt(e+2)]>>2,s[u++]=i>>8&255,s[u++]=i&255),s}function D$(t){return Io[t>>18&63]+Io[t>>12&63]+Io[t>>6&63]+Io[t&63]}function P$(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(D$(r));return i.join("")}function _C(t){Ib||RM();for(var e,n=t.length,r=n%3,i="",o=[],s=16383,l=0,u=n-r;l<u;l+=s)o.push(P$(t,l,l+s>u?u:l+s));return r===1?(e=t[n-1],i+=Io[e>>2],i+=Io[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Io[e>>10],i+=Io[e>>4&63],i+=Io[e<<2&63],i+="="),o.push(i),o.join("")}function fv(t,e,n,r,i){var o,s,l=i*8-r-1,u=(1<<l)-1,c=u>>1,h=-7,p=n?i-1:0,g=n?-1:1,v=t[e+p];for(p+=g,o=v&(1<<-h)-1,v>>=-h,h+=l;h>0;o=o*256+t[e+p],p+=g,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=s*256+t[e+p],p+=g,h-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(v?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-c}return(v?-1:1)*s*Math.pow(2,o-r)}function MM(t,e,n,r,i,o){var s,l,u,c=o*8-i-1,h=(1<<c)-1,p=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:o-1,y=r?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+p>=1?e+=g/u:e+=g*Math.pow(2,1-p),e*u>=2&&(s++,u/=2),s+p>=h?(l=0,s=h):s+p>=1?(l=(e*u-1)*Math.pow(2,i),s=s+p):(l=e*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;t[n+v]=l&255,v+=y,l/=256,i-=8);for(s=s<<i|l,c+=i;c>0;t[n+v]=s&255,v+=y,s/=256,c-=8);t[n+v-y]|=A*128}var B$={}.toString,LM=Array.isArray||function(t){return B$.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var NM=50;U.TYPED_ARRAY_SUPPORT=Wf.TYPED_ARRAY_SUPPORT!==void 0?Wf.TYPED_ARRAY_SUPPORT:!0;var I$=i0();function i0(){return U.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function As(t,e){if(i0()<e)throw new RangeError("Invalid typed array length");return U.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=U.prototype):(t===null&&(t=new U(e)),t.length=e),t}function U(t,e,n){if(!U.TYPED_ARRAY_SUPPORT&&!(this instanceof U))return new U(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Fb(this,t)}return DM(this,t,e,n)}U.poolSize=8192;U._augment=function(t){return t.__proto__=U.prototype,t};function DM(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?$$(t,e,n,r):typeof e=="string"?z$(t,e,n):H$(t,e)}U.from=function(t,e,n){return DM(null,t,e,n)};U.TYPED_ARRAY_SUPPORT&&(U.prototype.__proto__=Uint8Array.prototype,U.__proto__=Uint8Array);function PM(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function F$(t,e,n,r){return PM(e),e<=0?As(t,e):n!==void 0?typeof r=="string"?As(t,e).fill(n,r):As(t,e).fill(n):As(t,e)}U.alloc=function(t,e,n){return F$(null,t,e,n)};function Fb(t,e){if(PM(e),t=As(t,e<0?0:zb(e)|0),!U.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}U.allocUnsafe=function(t){return Fb(null,t)};U.allocUnsafeSlow=function(t){return Fb(null,t)};function z$(t,e,n){if((typeof n!="string"||n==="")&&(n="utf8"),!U.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=BM(e,n)|0;t=As(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function R_(t,e){var n=e.length<0?0:zb(e.length)|0;t=As(t,n);for(var r=0;r<n;r+=1)t[r]=e[r]&255;return t}function $$(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return n===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,n):e=new Uint8Array(e,n,r),U.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=U.prototype):t=R_(t,e),t}function H$(t,e){if(Go(e)){var n=zb(e.length)|0;return t=As(t,n),t.length===0||e.copy(t,0,0,n),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||lH(e.length)?As(t,0):R_(t,e);if(e.type==="Buffer"&&LM(e.data))return R_(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function zb(t){if(t>=i0())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i0().toString(16)+" bytes");return t|0}function V$(t){return+t!=t&&(t=0),U.alloc(+t)}U.isBuffer=WM;function Go(t){return!!(t!=null&&t._isBuffer)}U.compare=function(e,n){if(!Go(e)||!Go(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,i=n.length,o=0,s=Math.min(r,i);o<s;++o)if(e[o]!==n[o]){r=e[o],i=n[o];break}return r<i?-1:i<r?1:0};U.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};U.concat=function(e,n){if(!LM(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return U.alloc(0);var r;if(n===void 0)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var i=U.allocUnsafe(n),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!Go(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i};function BM(t,e){if(Go(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return o0(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return UM(t).length;default:if(r)return o0(t).length;e=(""+e).toLowerCase(),r=!0}}U.byteLength=BM;function U$(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return X$(this,e,n);case"utf8":case"utf-8":return zM(this,e,n);case"ascii":return Y$(this,e,n);case"latin1":case"binary":return Q$(this,e,n);case"base64":return G$(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return eH(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}U.prototype._isBuffer=!0;function qa(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}U.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)qa(this,n,n+1);return this};U.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)qa(this,n,n+3),qa(this,n+1,n+2);return this};U.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)qa(this,n,n+7),qa(this,n+1,n+6),qa(this,n+2,n+5),qa(this,n+3,n+4);return this};U.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?zM(this,0,e):U$.apply(this,arguments)};U.prototype.equals=function(e){if(!Go(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:U.compare(this,e)===0};U.prototype.inspect=function(){var e="",n=NM;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"};U.prototype.compare=function(e,n,r,i,o){if(!Go(e))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),n<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var s=o-i,l=r-n,u=Math.min(s,l),c=this.slice(i,o),h=e.slice(n,r),p=0;p<u;++p)if(c[p]!==h[p]){s=c[p],l=h[p];break}return s<l?-1:l<s?1:0};function IM(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0)if(i)n=0;else return-1;if(typeof e=="string"&&(e=U.from(e,r)),Go(e))return e.length===0?-1:xC(t,e,n,r,i);if(typeof e=="number")return e=e&255,U.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):xC(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function xC(t,e,n,r,i){var o=1,s=t.length,l=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,l/=2,n/=2}function u(v,y){return o===1?v[y]:v.readUInt16BE(y*o)}var c;if(i){var h=-1;for(c=n;c<s;c++)if(u(t,c)===u(e,h===-1?0:c-h)){if(h===-1&&(h=c),c-h+1===l)return h*o}else h!==-1&&(c-=c-h),h=-1}else for(n+l>s&&(n=s-l),c=n;c>=0;c--){for(var p=!0,g=0;g<l;g++)if(u(t,c+g)!==u(e,g)){p=!1;break}if(p)return c}return-1}U.prototype.includes=function(e,n,r){return this.indexOf(e,n,r)!==-1};U.prototype.indexOf=function(e,n,r){return IM(this,e,n,r,!0)};U.prototype.lastIndexOf=function(e,n,r){return IM(this,e,n,r,!1)};function W$(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var l=parseInt(e.substr(s*2,2),16);if(isNaN(l))return s;t[n+s]=l}return s}function j$(t,e,n,r){return dv(o0(e,t.length-n),t,n,r)}function FM(t,e,n,r){return dv(oH(e),t,n,r)}function q$(t,e,n,r){return FM(t,e,n,r)}function J$(t,e,n,r){return dv(UM(e),t,n,r)}function K$(t,e,n,r){return dv(sH(e,t.length-n),t,n,r)}U.prototype.write=function(e,n,r,i){if(n===void 0)i="utf8",r=this.length,n=0;else if(r===void 0&&typeof n=="string")i=n,r=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(r)?(r=r|0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-n;if((r===void 0||r>o)&&(r=o),e.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return W$(this,e,n,r);case"utf8":case"utf-8":return j$(this,e,n,r);case"ascii":return FM(this,e,n,r);case"latin1":case"binary":return q$(this,e,n,r);case"base64":return J$(this,e,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K$(this,e,n,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};U.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G$(t,e,n){return e===0&&n===t.length?_C(t):_C(t.slice(e,n))}function zM(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],s=null,l=o>239?4:o>223?3:o>191?2:1;if(i+l<=n){var u,c,h,p;switch(l){case 1:o<128&&(s=o);break;case 2:u=t[i+1],(u&192)===128&&(p=(o&31)<<6|u&63,p>127&&(s=p));break;case 3:u=t[i+1],c=t[i+2],(u&192)===128&&(c&192)===128&&(p=(o&15)<<12|(u&63)<<6|c&63,p>2047&&(p<55296||p>57343)&&(s=p));break;case 4:u=t[i+1],c=t[i+2],h=t[i+3],(u&192)===128&&(c&192)===128&&(h&192)===128&&(p=(o&15)<<18|(u&63)<<12|(c&63)<<6|h&63,p>65535&&p<1114112&&(s=p))}}s===null?(s=65533,l=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),i+=l}return Z$(r)}var bC=4096;function Z$(t){var e=t.length;if(e<=bC)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=bC));return n}function Y$(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]&127);return r}function Q$(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function X$(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=iH(t[o]);return i}function eH(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+r[o+1]*256);return i}U.prototype.slice=function(e,n){var r=this.length;e=~~e,n=n===void 0?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);var i;if(U.TYPED_ARRAY_SUPPORT)i=this.subarray(e,n),i.__proto__=U.prototype;else{var o=n-e;i=new U(o,void 0);for(var s=0;s<o;++s)i[s]=this[s+e]}return i};function _n(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}U.prototype.readUIntLE=function(e,n,r){e=e|0,n=n|0,r||_n(e,n,this.length);for(var i=this[e],o=1,s=0;++s<n&&(o*=256);)i+=this[e+s]*o;return i};U.prototype.readUIntBE=function(e,n,r){e=e|0,n=n|0,r||_n(e,n,this.length);for(var i=this[e+--n],o=1;n>0&&(o*=256);)i+=this[e+--n]*o;return i};U.prototype.readUInt8=function(e,n){return n||_n(e,1,this.length),this[e]};U.prototype.readUInt16LE=function(e,n){return n||_n(e,2,this.length),this[e]|this[e+1]<<8};U.prototype.readUInt16BE=function(e,n){return n||_n(e,2,this.length),this[e]<<8|this[e+1]};U.prototype.readUInt32LE=function(e,n){return n||_n(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};U.prototype.readUInt32BE=function(e,n){return n||_n(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};U.prototype.readIntLE=function(e,n,r){e=e|0,n=n|0,r||_n(e,n,this.length);for(var i=this[e],o=1,s=0;++s<n&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*n)),i};U.prototype.readIntBE=function(e,n,r){e=e|0,n=n|0,r||_n(e,n,this.length);for(var i=n,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*n)),s};U.prototype.readInt8=function(e,n){return n||_n(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};U.prototype.readInt16LE=function(e,n){n||_n(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};U.prototype.readInt16BE=function(e,n){n||_n(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};U.prototype.readInt32LE=function(e,n){return n||_n(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};U.prototype.readInt32BE=function(e,n){return n||_n(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};U.prototype.readFloatLE=function(e,n){return n||_n(e,4,this.length),fv(this,e,!0,23,4)};U.prototype.readFloatBE=function(e,n){return n||_n(e,4,this.length),fv(this,e,!1,23,4)};U.prototype.readDoubleLE=function(e,n){return n||_n(e,8,this.length),fv(this,e,!0,52,8)};U.prototype.readDoubleBE=function(e,n){return n||_n(e,8,this.length),fv(this,e,!1,52,8)};function Wr(t,e,n,r,i,o){if(!Go(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}U.prototype.writeUIntLE=function(e,n,r,i){if(e=+e,n=n|0,r=r|0,!i){var o=Math.pow(2,8*r)-1;Wr(this,e,n,r,o,0)}var s=1,l=0;for(this[n]=e&255;++l<r&&(s*=256);)this[n+l]=e/s&255;return n+r};U.prototype.writeUIntBE=function(e,n,r,i){if(e=+e,n=n|0,r=r|0,!i){var o=Math.pow(2,8*r)-1;Wr(this,e,n,r,o,0)}var s=r-1,l=1;for(this[n+s]=e&255;--s>=0&&(l*=256);)this[n+s]=e/l&255;return n+r};U.prototype.writeUInt8=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,1,255,0),U.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e&255,n+1};function cv(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>(r?i:1-i)*8}U.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,2,65535,0),U.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):cv(this,e,n,!0),n+2};U.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,2,65535,0),U.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):cv(this,e,n,!1),n+2};function hv(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>(r?i:3-i)*8&255}U.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,4,4294967295,0),U.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e&255):hv(this,e,n,!0),n+4};U.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,4,4294967295,0),U.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):hv(this,e,n,!1),n+4};U.prototype.writeIntLE=function(e,n,r,i){if(e=+e,n=n|0,!i){var o=Math.pow(2,8*r-1);Wr(this,e,n,r,o-1,-o)}var s=0,l=1,u=0;for(this[n]=e&255;++s<r&&(l*=256);)e<0&&u===0&&this[n+s-1]!==0&&(u=1),this[n+s]=(e/l>>0)-u&255;return n+r};U.prototype.writeIntBE=function(e,n,r,i){if(e=+e,n=n|0,!i){var o=Math.pow(2,8*r-1);Wr(this,e,n,r,o-1,-o)}var s=r-1,l=1,u=0;for(this[n+s]=e&255;--s>=0&&(l*=256);)e<0&&u===0&&this[n+s+1]!==0&&(u=1),this[n+s]=(e/l>>0)-u&255;return n+r};U.prototype.writeInt8=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,1,127,-128),U.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=e&255,n+1};U.prototype.writeInt16LE=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,2,32767,-32768),U.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):cv(this,e,n,!0),n+2};U.prototype.writeInt16BE=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,2,32767,-32768),U.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):cv(this,e,n,!1),n+2};U.prototype.writeInt32LE=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,4,2147483647,-2147483648),U.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):hv(this,e,n,!0),n+4};U.prototype.writeInt32BE=function(e,n,r){return e=+e,n=n|0,r||Wr(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),U.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):hv(this,e,n,!1),n+4};function $M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function HM(t,e,n,r,i){return i||$M(t,e,n,4),MM(t,e,n,r,23,4),n+4}U.prototype.writeFloatLE=function(e,n,r){return HM(this,e,n,!0,r)};U.prototype.writeFloatBE=function(e,n,r){return HM(this,e,n,!1,r)};function VM(t,e,n,r,i){return i||$M(t,e,n,8),MM(t,e,n,r,52,8),n+8}U.prototype.writeDoubleLE=function(e,n,r){return VM(this,e,n,!0,r)};U.prototype.writeDoubleBE=function(e,n,r){return VM(this,e,n,!1,r)};U.prototype.copy=function(e,n,r,i){if(r||(r=0),!i&&i!==0&&(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var o=i-r,s;if(this===e&&r<n&&n<i)for(s=o-1;s>=0;--s)e[s+n]=this[s+r];else if(o<1e3||!U.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)e[s+n]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),n);return o};U.prototype.fill=function(e,n,r,i){if(typeof e=="string"){if(typeof n=="string"?(i=n,n=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!U.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n=n>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var s;if(typeof e=="number")for(s=n;s<r;++s)this[s]=e;else{var l=Go(e)?e:o0(new U(e,i).toString()),u=l.length;for(s=0;s<r-n;++s)this[s+n]=l[s%u]}return this};var tH=/[^+\/0-9A-Za-z-_]/g;function nH(t){if(t=rH(t).replace(tH,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function rH(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function iH(t){return t<16?"0"+t.toString(16):t.toString(16)}function o0(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return o}function oH(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n)&255);return e}function sH(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function UM(t){return N$(nH(t))}function dv(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function lH(t){return t!==t}function WM(t){return t!=null&&(!!t._isBuffer||jM(t)||aH(t))}function jM(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function aH(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&jM(t.slice(0,0))}const uH=Object.freeze(Object.defineProperty({__proto__:null,Buffer:U,INSPECT_MAX_BYTES:NM,SlowBuffer:V$,isBuffer:WM,kMaxLength:I$},Symbol.toStringTag,{value:"Module"}));function fH(){throw new Error("fingerprinting not supported in the browser")}var cH={createHash:fH},hH=cH;function dH(t){return t.charAt(0).toUpperCase()+t.slice(1)}function pH(t,e){return t===e?0:t<e?-1:1}function gH(t,e){e=e||"md5";var n=hH.createHash(e);return n.end(t),n.read()}function mH(t,e){var n=-1,r,i;if(!t)return-1;for(r=0,i=t.length;r<i;r++)if(t[r]===e){if(n>=0)return-2;n=r}return n}function vH(t,e){var n={},r,i;for(r=0;r<t.length;r++)i=t[r],n[e(i)]=i;return n}function yH(t,e){var n={},r,i,o;for(r=0,i=t.length;r<i;r++){if(o=t[r],e&&(o=e(o)),n[o])return!0;n[o]=!0}return!1}function wH(){throw new Error("abstract")}function pu(t){var e=1103515245,n=12345,r=Math.pow(2,31),i=Math.floor(t||Math.random()*(r-1));this._max=r,this._nextInt=function(){return i=(e*i+n)%r,i}}pu.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};pu.prototype.nextInt=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?this._max:e,t+Math.floor(this.nextFloat()*(e-t))};pu.prototype.nextFloat=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?1:e,t+(e-t)*this._nextInt()/this._max};pu.prototype.nextString=function(t,e){t|=0,e=e||"aA";var n="";e.indexOf("a")>-1&&(n+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(n+="0123456789"),e.indexOf("!")>-1&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var r=[],i=0;i<t;i++)r.push(this.choice(n));return r.join("")};pu.prototype.nextBuffer=function(t){var e=[],n;for(n=0;n<t;n++)e.push(this.nextInt(256));return U.from(e)};pu.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]};function $b(){this._index=0,this._items=[]}$b.prototype.push=function(t){var e=this._items,n=e.length|0,r;for(e.push(t);n>0&&e[n].index<e[r=n-1>>1].index;)t=e[n],e[n]=e[r],e[r]=t,n=r};$b.prototype.pop=function(){var t=this._items,e=t.length-1|0,n=t[0];if(!n||n.index>this._index)return null;if(this._index++,!e)return t.pop(),n;t[0]=t.pop();for(var r=e>>1,i=0,o,s,l,u,c,h,p;i<r&&(u=t[i],o=(i<<1)+1,s=i+1<<1,h=t[o],p=t[s],!p||h.index<=p.index?(c=h,l=o):(c=p,l=s),!(c.index>=u.index));)t[l]=u,t[i]=c,i=l;return n};function Ie(t,e){this.buf=t,this.pos=e|0}Ie.prototype.isValid=function(){return this.pos<=this.buf.length};Ie.prototype.getValue=function(){return this.buf.slice(0,this.pos)};Ie.prototype.readBoolean=function(){return!!this.buf[this.pos++]};Ie.prototype.skipBoolean=function(){this.pos++};Ie.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t};Ie.prototype.readInt=Ie.prototype.readLong=function(){var t=0,e=0,n=this.buf,r,i,o,s;do r=n[this.pos++],i=r&128,t|=(r&127)<<e,e+=7;while(i&&e<28);if(i){o=t,s=268435456;do r=n[this.pos++],o+=(r&127)*s,s*=128;while(r&128);return(o%2?-(o+1):o)/2}return t>>1^-(t&1)};Ie.prototype.skipInt=Ie.prototype.skipLong=function(){for(var t=this.buf;t[this.pos++]&128;);};Ie.prototype.writeInt=Ie.prototype.writeLong=function(t){var e=this.buf,n,r;if(t>=-1073741824&&t<1073741824){r=t>=0?t<<1:~t<<1|1;do e[this.pos]=r&127,r>>=7;while(r&&(e[this.pos++]|=128))}else{n=t>=0?t*2:-t*2-1;do e[this.pos]=n&127,n/=128;while(n>=1&&(e[this.pos++]|=128))}this.pos++};Ie.prototype.readFloat=function(){var t=this.buf,e=this.pos;if(this.pos+=4,!(this.pos>t.length))return this.buf.readFloatLE(e)};Ie.prototype.skipFloat=function(){this.pos+=4};Ie.prototype.writeFloat=function(t){var e=this.buf,n=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,n)};Ie.prototype.readDouble=function(){var t=this.buf,e=this.pos;if(this.pos+=8,!(this.pos>t.length))return this.buf.readDoubleLE(e)};Ie.prototype.skipDouble=function(){this.pos+=8};Ie.prototype.writeDouble=function(t){var e=this.buf,n=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,n)};Ie.prototype.readFixed=function(t){var e=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var n=U.alloc(t);return this.buf.copy(n,0,e,e+t),n}};Ie.prototype.skipFixed=function(t){this.pos+=t};Ie.prototype.writeFixed=function(t,e){e=e||t.length;var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&t.copy(this.buf,n,0,e)};Ie.prototype.readBytes=function(){return this.readFixed(this.readLong())};Ie.prototype.skipBytes=function(){var t=this.readLong();this.pos+=t};Ie.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)};Ie.prototype.readString=function(){var t=this.readLong(),e=this.pos,n=this.buf;if(this.pos+=t,!(this.pos>n.length))return this.buf.utf8Slice(e,e+t)};Ie.prototype.skipString=function(){var t=this.readLong();this.pos+=t};Ie.prototype.writeString=function(t){var e=U.byteLength(t);this.writeLong(e);var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.utf8Write(t,n,e)};Ie.prototype.writeBinary=function(t,e){var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,n,e,"binary")};Ie.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]};Ie.prototype.matchInt=Ie.prototype.matchLong=function(t){var e=this.readLong(),n=t.readLong();return e===n?0:e<n?-1:1};Ie.prototype.matchFloat=function(t){var e=this.readFloat(),n=t.readFloat();return e===n?0:e<n?-1:1};Ie.prototype.matchDouble=function(t){var e=this.readDouble(),n=t.readDouble();return e===n?0:e<n?-1:1};Ie.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))};Ie.prototype.matchBytes=Ie.prototype.matchString=function(t){var e=this.readLong(),n=this.pos;this.pos+=e;var r=t.readLong(),i=t.pos;t.pos+=r;var o=this.buf.slice(n,this.pos),s=t.buf.slice(i,t.pos);return o.compare(s)};Ie.prototype.unpackLongBytes=function(){var t=U.alloc(8),e=0,n=0,r=6,i=this.buf,o,s;for(o=i[this.pos++],s=o&1,t.fill(0),e|=(o&127)>>1;o&128;)o=i[this.pos++],e|=(o&127)<<r,r+=7,r>=8&&(r-=8,t[n++]=e,e>>=8);return t[n]=e,s&&M_(t,8),t};Ie.prototype.packLongBytes=function(t){var e=(t[7]&128)>>7,n=this.buf,r=1,i=0,o=3,s;e?(M_(t,8),s=1):s=0;for(var l=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];o&&!l[--o];);for(;i<o;)for(s|=l[i++]<<r,r+=24;r>7;)n[this.pos++]=s&127|128,s>>=7,r-=7;s|=l[o]<<r;do n[this.pos]=s&127,s>>=7;while(s&&(n[this.pos++]|=128));this.pos++,e&&M_(t,8)};function M_(t,e){for(;e--;)t[e]=~t[e]}var qM={abstractFunction:wH,capitalize:dH,compare:pH,getHash:gH,toMap:vH,singleIndexOf:mH,hasDuplicates:yH,Lcg:pu,OrderedQueue:$b,Tap:Ie};const Hb=oc(uH);function JM(){throw new Error("setTimeout has not been defined")}function KM(){throw new Error("clearTimeout has not been defined")}var il=JM,ol=KM;typeof Wf.setTimeout=="function"&&(il=setTimeout);typeof Wf.clearTimeout=="function"&&(ol=clearTimeout);function GM(t){if(il===setTimeout)return setTimeout(t,0);if((il===JM||!il)&&setTimeout)return il=setTimeout,setTimeout(t,0);try{return il(t,0)}catch{try{return il.call(null,t,0)}catch{return il.call(this,t,0)}}}function _H(t){if(ol===clearTimeout)return clearTimeout(t);if((ol===KM||!ol)&&clearTimeout)return ol=clearTimeout,clearTimeout(t);try{return ol(t)}catch{try{return ol.call(null,t)}catch{return ol.call(this,t)}}}var Ts=[],Rf=!1,Ja,vm=-1;function xH(){!Rf||!Ja||(Rf=!1,Ja.length?Ts=Ja.concat(Ts):vm=-1,Ts.length&&ZM())}function ZM(){if(!Rf){var t=GM(xH);Rf=!0;for(var e=Ts.length;e;){for(Ja=Ts,Ts=[];++vm<e;)Ja&&Ja[vm].run();vm=-1,e=Ts.length}Ja=null,Rf=!1,_H(t)}}function di(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ts.push(new YM(t,e)),Ts.length===1&&!Rf&&GM(ZM)}function YM(t,e){this.fun=t,this.array=e}YM.prototype.run=function(){this.fun.apply(null,this.array)};var bH="browser",SH="browser",kH=!0,EH={},CH=[],AH="",TH={},OH={},RH={};function gu(){}var MH=gu,LH=gu,NH=gu,DH=gu,PH=gu,BH=gu,IH=gu;function FH(t){throw new Error("process.binding is not supported")}function zH(){return"/"}function $H(t){throw new Error("process.chdir is not supported")}function HH(){return 0}var of=Wf.performance||{},VH=of.now||of.mozNow||of.msNow||of.oNow||of.webkitNow||function(){return new Date().getTime()};function UH(t){var e=VH.call(of)*.001,n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}var WH=new Date;function jH(){var t=new Date,e=t-WH;return e/1e3}var ct={nextTick:di,title:bH,browser:kH,env:EH,argv:CH,version:AH,versions:TH,on:MH,addListener:LH,once:NH,off:DH,removeListener:PH,removeAllListeners:BH,emit:IH,binding:FH,cwd:zH,chdir:$H,umask:HH,hrtime:UH,platform:SH,release:OH,config:RH,uptime:jH},L_;typeof Object.create=="function"?L_=function(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:L_=function(e,n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e};const rr=L_;var qH=/%[sdj%]/g;function pv(t){if(!Ud(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(qo(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(t).replace(qH,function(l){if(l==="%%")return"%";if(n>=i)return l;switch(l){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return l}}),s=r[n];n<i;s=r[++n])Vd(s)||!mu(s)?o+=" "+s:o+=" "+qo(s);return o}function gv(t,e){if($o(Wf.process))return function(){return gv(t,e).apply(this,arguments)};if(ct.noDeprecation===!0)return t;var n=!1;function r(){if(!n){if(ct.throwDeprecation)throw new Error(e);ct.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}return r}var Pg={},F1;function Vb(t){if($o(F1)&&(F1=ct.env.NODE_DEBUG||""),t=t.toUpperCase(),!Pg[t])if(new RegExp("\\b"+t+"\\b","i").test(F1)){var e=0;Pg[t]=function(){var n=pv.apply(null,arguments);console.error("%s %d: %s",t,e,n)}}else Pg[t]=function(){};return Pg[t]}function qo(t,e){var n={seen:[],stylize:KH};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),mv(e)?n.showHidden=e:e&&qb(n,e),$o(n.showHidden)&&(n.showHidden=!1),$o(n.depth)&&(n.depth=2),$o(n.colors)&&(n.colors=!1),$o(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=JH),s0(n,t,n.depth)}qo.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};qo.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function JH(t,e){var n=qo.styles[e];return n?"\x1B["+qo.colors[n][0]+"m"+t+"\x1B["+qo.colors[n][1]+"m":t}function KH(t,e){return t}function GH(t){var e={};return t.forEach(function(n,r){e[n]=!0}),e}function s0(t,e,n){if(t.customInspect&&e&&zh(e.inspect)&&e.inspect!==qo&&!(e.constructor&&e.constructor.prototype===e)){var r=e.inspect(n,t);return Ud(r)||(r=s0(t,r,n)),r}var i=ZH(t,e);if(i)return i;var o=Object.keys(e),s=GH(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),Fh(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return z1(e);if(o.length===0){if(zh(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(Ih(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(l0(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Fh(e))return z1(e)}var u="",c=!1,h=["{","}"];if(Ub(e)&&(c=!0,h=["[","]"]),zh(e)){var p=e.name?": "+e.name:"";u=" [Function"+p+"]"}if(Ih(e)&&(u=" "+RegExp.prototype.toString.call(e)),l0(e)&&(u=" "+Date.prototype.toUTCString.call(e)),Fh(e)&&(u=" "+z1(e)),o.length===0&&(!c||e.length==0))return h[0]+u+h[1];if(n<0)return Ih(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var g;return c?g=YH(t,e,n,s,o):g=o.map(function(v){return N_(t,e,n,s,v,c)}),t.seen.pop(),QH(g,u,h)}function ZH(t,e){if($o(e))return t.stylize("undefined","undefined");if(Ud(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(Wb(e))return t.stylize(""+e,"number");if(mv(e))return t.stylize(""+e,"boolean");if(Vd(e))return t.stylize("null","null")}function z1(t){return"["+Error.prototype.toString.call(t)+"]"}function YH(t,e,n,r,i){for(var o=[],s=0,l=e.length;s<l;++s)rL(e,String(s))?o.push(N_(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(u){u.match(/^\d+$/)||o.push(N_(t,e,n,r,u,!0))}),o}function N_(t,e,n,r,i,o){var s,l,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?u.set?l=t.stylize("[Getter/Setter]","special"):l=t.stylize("[Getter]","special"):u.set&&(l=t.stylize("[Setter]","special")),rL(r,i)||(s="["+i+"]"),l||(t.seen.indexOf(u.value)<0?(Vd(n)?l=s0(t,u.value,null):l=s0(t,u.value,n-1),l.indexOf(`
`)>-1&&(o?l=l.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):l=`
`+l.split(`
`).map(function(c){return"   "+c}).join(`
`))):l=t.stylize("[Circular]","special")),$o(s)){if(o&&i.match(/^\d+$/))return l;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+l}function QH(t,e,n){var r=t.reduce(function(i,o){return o.indexOf(`
`)>=0,i+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function Ub(t){return Array.isArray(t)}function mv(t){return typeof t=="boolean"}function Vd(t){return t===null}function QM(t){return t==null}function Wb(t){return typeof t=="number"}function Ud(t){return typeof t=="string"}function XM(t){return typeof t=="symbol"}function $o(t){return t===void 0}function Ih(t){return mu(t)&&jb(t)==="[object RegExp]"}function mu(t){return typeof t=="object"&&t!==null}function l0(t){return mu(t)&&jb(t)==="[object Date]"}function Fh(t){return mu(t)&&(jb(t)==="[object Error]"||t instanceof Error)}function zh(t){return typeof t=="function"}function eL(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}function tL(t){return U.isBuffer(t)}function jb(t){return Object.prototype.toString.call(t)}function $1(t){return t<10?"0"+t.toString(10):t.toString(10)}var XH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function eV(){var t=new Date,e=[$1(t.getHours()),$1(t.getMinutes()),$1(t.getSeconds())].join(":");return[t.getDate(),XH[t.getMonth()],e].join(" ")}function nL(){console.log("%s - %s",eV(),pv.apply(null,arguments))}function qb(t,e){if(!e||!mu(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function rL(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const tV={inherits:rr,_extend:qb,log:nL,isBuffer:tL,isPrimitive:eL,isFunction:zh,isError:Fh,isDate:l0,isObject:mu,isRegExp:Ih,isUndefined:$o,isSymbol:XM,isString:Ud,isNumber:Wb,isNullOrUndefined:QM,isNull:Vd,isBoolean:mv,isArray:Ub,inspect:qo,deprecate:gv,format:pv,debuglog:Vb},nV=Object.freeze(Object.defineProperty({__proto__:null,format:pv,deprecate:gv,debuglog:Vb,inspect:qo,isArray:Ub,isBoolean:mv,isNull:Vd,isNullOrUndefined:QM,isNumber:Wb,isString:Ud,isSymbol:XM,isUndefined:$o,isRegExp:Ih,isObject:mu,isDate:l0,isError:Fh,isFunction:zh,isPrimitive:eL,isBuffer:tL,log:nL,inherits:rr,_extend:qb,default:tV},Symbol.toStringTag,{value:"Module"})),oa=oc(nV);var mt=qM,rV=Hb,cn=oa,jf=mt.Tap,Ke=cn.format,Ii=rV.Buffer,a0={array:Hr,boolean:Hs,bytes:kr,double:fo,enum:yr,error:en,fixed:wr,float:Hi,int:ji,long:Bn,map:_r,null:$i,record:en,request:en,string:Vi,union:ir},Jb=/^[A-Za-z_][A-Za-z0-9_]*$/,Xn=new mt.Lcg,Mo=new jf(Ii.allocUnsafeSlow(1024)),pt=[],pd=null;function vu(t,e){if(t instanceof Ae)return t;e=yu(t,e);var n;if(typeof t=="string"){if(e.namespace&&!~t.indexOf(".")&&!P_(t)&&(t=e.namespace+"."+t),n=e.registry[t],n)return n;if(P_(t))return n=e.registry[t]=vu({type:t},e),n;throw new Error(Ke("undefined type name: %s",t))}if(e.typeHook&&(n=e.typeHook(t,e))){if(!(n instanceof Ae))throw new Error(Ke("invalid typehook return value: %j",n));return n}if(t.logicalType&&!pd){var r=e.logicalTypes[t.logicalType];if(r){var i={};Object.keys(e.registry).forEach(function(o){i[o]=e.registry[o]});try{return new r(t,e)}catch(o){if(e.assertLogicalTypes)throw o;pd=null,e.registry=i}}}return t instanceof Array?n=new ir(t,e):n=function(o){var s=a0[o];if(s===void 0)throw new Error(Ke("unknown type: %j",o));return new s(t,e)}(t.type),n}function Ae(t){var e=this._name,n=pd||this;if(pd=null,!(t===void 0||e===void 0)){var r=t[e];if(r!==void 0)throw new Error(Ke("duplicate type name: %s",e));t[e]=n}}Ae.__reset=function(t){Mo.buf=Ii.allocUnsafeSlow(t)};Ae.prototype.createResolver=function(t,e){if(!(t instanceof Ae))throw new Error(Ke("not a type: %j",t));if(t instanceof tr&&!(this instanceof tr))return this.createResolver(t._underlyingType,e);e=e||{},e.registry=e.registry||{};var n,r;if(this instanceof en&&t instanceof en&&(r=this._name+":"+t._name,n=e.registry[r],n))return n;if(n=new iL(this),r&&(e.registry[r]=n),t instanceof ir){var i=t._types.map(function(o){return this.createResolver(o,e)},this);n._read=function(o){var s=o.readLong(),l=i[s];if(l===void 0)throw new Error(Ke("invalid union index: %s",s));return i[s]._read(o)}}else this._updateResolver(n,t,e);if(!n._read)throw new Error(Ke("cannot read %s as %s",t,this));return n};Ae.prototype.decode=function(t,e,n){var r=new jf(t);r.pos=e|0;var i=oL(this,r,n);return r.isValid()?{value:i,offset:r.pos}:{value:void 0,offset:-1}};Ae.prototype.encode=function(t,e,n){var r=new jf(e);return r.pos=n|0,this._write(r,t),r.isValid()?r.pos:e.length-r.pos};Ae.prototype.fromBuffer=function(t,e,n){var r=new jf(t),i=oL(this,r,e,n);if(!r.isValid())throw new Error("truncated buffer");if(!n&&r.pos<t.length)throw new Error("trailing data");return i};Ae.prototype.toBuffer=function(t){Mo.pos=0,this._write(Mo,t),Mo.isValid()||(Ae.__reset(2*Mo.pos),Mo.pos=0,this._write(Mo,t));var e=Ii.alloc(Mo.pos);return Mo.buf.copy(e,0,0,Mo.pos),e};Ae.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})};Ae.prototype.toString=function(t){return t===void 0?this.getSchema(!0):JSON.stringify(this._copy(t,{coerce:3}))};Ae.prototype.clone=function(t,e){return e&&(e={coerce:!!e.coerceBuffers|0,fieldHook:e.fieldHook,wrap:!!e.wrapUnions|0}),this._copy(t,e)};Ae.prototype.isValid=function(t,e){for(;pt.length;)pt.pop();return this._check(t,e&&e.errorHook)};Ae.prototype.compareBuffers=function(t,e){return this._match(new jf(t),new jf(e))};Ae.prototype.getName=function(t){return t?D_(this):this._name};Ae.prototype.getSchema=function(t){return sL(this,t)};Ae.prototype.getFingerprint=function(t){return mt.getHash(this.getSchema(),t)};Ae.prototype.inspect=function(){if(this instanceof Ft)return Ke("<%s>",this.constructor.name);var t=JSON.parse(this.getSchema(!0));return typeof t=="object"&&(t.type=void 0),Ke("<%s %j>",this.constructor.name,t)};Ae.prototype._check=mt.abstractFunction;Ae.prototype._copy=mt.abstractFunction;Ae.prototype._match=mt.abstractFunction;Ae.prototype._read=mt.abstractFunction;Ae.prototype._skip=mt.abstractFunction;Ae.prototype._updateResolver=mt.abstractFunction;Ae.prototype._write=mt.abstractFunction;Ae.prototype.compare=mt.abstractFunction;Ae.prototype.random=mt.abstractFunction;function Ft(){Ae.call(this)}cn.inherits(Ft,Ae);Ft.prototype._updateResolver=function(t,e){e.constructor===this.constructor&&(t._read=this._read)};Ft.prototype._copy=function(t){return this._check(t,Tt),t};Ft.prototype.compare=mt.compare;function $i(){Ft.call(this)}cn.inherits($i,Ft);$i.prototype._check=function(t,e){var n=t===null;return!n&&e&&e(pt.slice(),t,this),n};$i.prototype._read=function(){return null};$i.prototype._skip=function(){};$i.prototype._write=function(t,e){e!==null&&Tt(null,e,this)};$i.prototype._match=function(){return 0};$i.prototype.compare=$i.prototype._match;$i.prototype.random=$i.prototype._read;$i.prototype.toJSON=function(){return"null"};function Hs(){Ft.call(this)}cn.inherits(Hs,Ft);Hs.prototype._check=function(t,e){var n=typeof t=="boolean";return!n&&e&&e(pt.slice(),t,this),n};Hs.prototype._read=function(t){return t.readBoolean()};Hs.prototype._skip=function(t){t.skipBoolean()};Hs.prototype._write=function(t,e){typeof e!="boolean"&&Tt(null,e,this),t.writeBoolean(e)};Hs.prototype._match=function(t,e){return t.matchBoolean(e)};Hs.prototype.random=function(){return Xn.nextBoolean()};Hs.prototype.toJSON=function(){return"boolean"};function ji(){Ft.call(this)}cn.inherits(ji,Ft);ji.prototype._check=function(t,e){var n=t===(t|0);return!n&&e&&e(pt.slice(),t,this),n};ji.prototype._read=function(t){return t.readInt()};ji.prototype._skip=function(t){t.skipInt()};ji.prototype._write=function(t,e){e!==(e|0)&&Tt(null,e,this),t.writeInt(e)};ji.prototype._match=function(t,e){return t.matchInt(e)};ji.prototype.random=function(){return Xn.nextInt(1e3)|0};ji.prototype.toJSON=function(){return"int"};function Bn(){Ft.call(this)}cn.inherits(Bn,Ft);Bn.prototype._check=function(t,e){var n=typeof t=="number"&&t%1===0&&Kb(t);return!n&&e&&e(pt.slice(),t,this),n};Bn.prototype._read=function(t){var e=t.readLong();if(!Kb(e))throw new Error("potential precision loss");return e};Bn.prototype._skip=function(t){t.skipLong()};Bn.prototype._write=function(t,e){(typeof e!="number"||e%1||!Kb(e))&&Tt(null,e,this),t.writeLong(e)};Bn.prototype._match=function(t,e){return t.matchLong(e)};Bn.prototype._updateResolver=function(t,e){(e instanceof Bn||e instanceof ji)&&(t._read=e._read)};Bn.prototype.random=function(){return Xn.nextInt()};Bn.prototype.toJSON=function(){return"long"};Bn.using=function(t,e){t=t||{};var n={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},r=new pi(e);return Object.keys(n).forEach(function(i){if(t[i]===void 0)throw new Error(Ke("missing method implementation: %s",i));r[n[i]]=t[i]}),r};function Hi(){Ft.call(this)}cn.inherits(Hi,Ft);Hi.prototype._check=function(t,e){var n=typeof t=="number";return!n&&e&&e(pt.slice(),t,this),n};Hi.prototype._read=function(t){return t.readFloat()};Hi.prototype._skip=function(t){t.skipFloat()};Hi.prototype._write=function(t,e){typeof e!="number"&&Tt(null,e,this),t.writeFloat(e)};Hi.prototype._match=function(t,e){return t.matchFloat(e)};Hi.prototype._updateResolver=function(t,e){(e instanceof Hi||e instanceof Bn||e instanceof ji)&&(t._read=e._read)};Hi.prototype.random=function(){return Xn.nextFloat(1e3)};Hi.prototype.toJSON=function(){return"float"};function fo(){Ft.call(this)}cn.inherits(fo,Ft);fo.prototype._check=function(t,e){var n=typeof t=="number";return!n&&e&&e(pt.slice(),t,this),n};fo.prototype._read=function(t){return t.readDouble()};fo.prototype._skip=function(t){t.skipDouble()};fo.prototype._write=function(t,e){typeof e!="number"&&Tt(null,e,this),t.writeDouble(e)};fo.prototype._match=function(t,e){return t.matchDouble(e)};fo.prototype._updateResolver=function(t,e){(e instanceof fo||e instanceof Hi||e instanceof Bn||e instanceof ji)&&(t._read=e._read)};fo.prototype.random=function(){return Xn.nextFloat()};fo.prototype.toJSON=function(){return"double"};function Vi(){Ft.call(this)}cn.inherits(Vi,Ft);Vi.prototype._check=function(t,e){var n=typeof t=="string";return!n&&e&&e(pt.slice(),t,this),n};Vi.prototype._read=function(t){return t.readString()};Vi.prototype._skip=function(t){t.skipString()};Vi.prototype._write=function(t,e){typeof e!="string"&&Tt(null,e,this),t.writeString(e)};Vi.prototype._match=function(t,e){return t.matchString(e)};Vi.prototype._updateResolver=function(t,e){(e instanceof Vi||e instanceof kr)&&(t._read=this._read)};Vi.prototype.random=function(){return Xn.nextString(Xn.nextInt(32))};Vi.prototype.toJSON=function(){return"string"};function kr(){Ft.call(this)}cn.inherits(kr,Ft);kr.prototype._check=function(t,e){var n=Ii.isBuffer(t);return!n&&e&&e(pt.slice(),t,this),n};kr.prototype._read=function(t){return t.readBytes()};kr.prototype._skip=function(t){t.skipBytes()};kr.prototype._write=function(t,e){Ii.isBuffer(e)||Tt(null,e,this),t.writeBytes(e)};kr.prototype._match=function(t,e){return t.matchBytes(e)};kr.prototype._updateResolver=Vi.prototype._updateResolver;kr.prototype._copy=function(t,e){var n;switch((e&&e.coerce)|0){case 3:return this._check(t,Tt),t.toString("binary");case 2:if(typeof t!="string")throw new Error(Ke("cannot coerce to buffer: %j",t));return n=Ii.from(t,"binary"),this._check(n,Tt),n;case 1:if(!t||t.type!=="Buffer"||!(t.data instanceof Array))throw new Error(Ke("cannot coerce to buffer: %j",t));return n=Ii.from(t.data),this._check(n,Tt),n;default:return this._check(t,Tt),Ii.from(t)}};kr.prototype.compare=Ii.compare;kr.prototype.random=function(){return Xn.nextBuffer(Xn.nextInt(32))};kr.prototype.toJSON=function(){return"bytes"};function ir(t,e){if(!(t instanceof Array))throw new Error(Ke("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");console.log(t,e),e=yu(t,e),Ae.call(this),this._types=t.map(function(n){return vu(n,e)}),this._indices={},this._types.forEach(function(n,r){if(n instanceof ir)throw new Error("unions cannot be directly nested");var i=n._name||D_(n);if(this._indices[i]!==void 0)throw new Error(Ke("duplicate union name: %j",i));this._indices[i]=r},this),this._constructors=this._types.map(function(n){var r=n._name||D_(n);if(r==="null")return null;var i;return~r.indexOf(".")?i="this['"+r+"'] = val;":i="this."+r+" = val;",new Function("val",i)})}cn.inherits(ir,Ae);ir.prototype._check=function(t,e){var n=!1;if(t===null)n=this._indices.null!==void 0;else if(typeof t=="object"){var r=Object.keys(t);if(r.length===1){var i=r[0],o=this._indices[i];if(o!==void 0)return pt.push(i),n=this._types[o]._check(t[i],e),pt.pop(),n}}return!n&&e&&e(pt.slice(),t,this),n};ir.prototype._read=function(t){var e=t.readLong(),n=this._constructors[e];if(n)return new n(this._types[e]._read(t));if(n===null)return null;throw new Error(Ke("invalid union index: %s",e))};ir.prototype._skip=function(t){this._types[t.readLong()]._skip(t)};ir.prototype._write=function(t,e){var n,r,i;e===null?(n=this._indices.null,n===void 0&&Tt(null,e,this),t.writeLong(n)):(r=Object.keys(e),r.length===1&&(i=r[0],n=this._indices[i]),n===void 0&&Tt(null,e,this),t.writeLong(n),this._types[n]._write(t,e[i]))};ir.prototype._match=function(t,e){var n=t.readLong(),r=e.readLong();return n===r?this._types[n]._match(t,e):n<r?-1:1};ir.prototype._updateResolver=function(t,e,n){var r,i,o,s;for(r=0,i=this._types.length;r<i;r++){try{o=this._types[r].createResolver(e,n)}catch{continue}s=this._constructors[r],s?t._read=function(l){return new s(o._read(l))}:t._read=function(){return null};return}};ir.prototype._copy=function(t,e){var n=e&&e.wrap|0;if(n===2)return t===null&&this._constructors[0]===null?null:new this._constructors[0](this._types[0]._copy(t,e));if(t===null&&this._indices.null!==void 0)return null;var r,i,o;if(typeof t=="object"){var s=Object.keys(t);if(s.length===1){var l=s[0];if(r=this._indices[l],r===void 0){var u,c;for(u=0,i=this._types.length;u<i;u++)if(c=this._types[u],c._name&&l===la(c._name)){r=u;break}}r!==void 0&&(o=this._types[r]._copy(t[l],e))}}if(n===1&&o===void 0)for(r=0,i=this._types.length;r<i&&o===void 0;)try{o=this._types[r]._copy(t,e)}catch{r++}if(o!==void 0)return new this._constructors[r](o);Tt(null,t,this)};ir.prototype.compare=function(t,e){var n=t===null?"null":Object.keys(t)[0],r=e===null?"null":Object.keys(e)[0],i=this._indices[n];return n===r?n==="null"?0:this._types[i].compare(t[n],e[n]):mt.compare(i,this._indices[r])};ir.prototype.getTypes=function(){return this._types.slice()};ir.prototype.random=function(){var t=Xn.nextInt(this._types.length),e=this._constructors[t];return e?new e(this._types[t].random()):null};ir.prototype.toJSON=function(){return this._types};function yr(t,e){if(!(t.symbols instanceof Array)||!t.symbols.length)throw new Error(Ke("invalid %j enum symbols: %j",t.name,t));e=yu(t,e);var n=vv(t,e.namespace);this._name=n.name,this._symbols=t.symbols,this._aliases=n.aliases,Ae.call(this,e.registry),this._indices={},this._symbols.forEach(function(r,i){if(!Jb.test(r))throw new Error(Ke("invalid %s symbol: %j",this,r));if(this._indices[r]!==void 0)throw new Error(Ke("duplicate %s symbol: %j",this,r));this._indices[r]=i},this)}cn.inherits(yr,Ae);yr.prototype._check=function(t,e){var n=this._indices[t]!==void 0;return!n&&e&&e(pt.slice(),t,this),n};yr.prototype._read=function(t){var e=t.readLong(),n=this._symbols[e];if(n===void 0)throw new Error(Ke("invalid %s enum index: %s",this._name,e));return n};yr.prototype._skip=function(t){t.skipLong()};yr.prototype._write=function(t,e){var n=this._indices[e];n===void 0&&Tt(null,e,this),t.writeLong(n)};yr.prototype._match=function(t,e){return t.matchLong(e)};yr.prototype.compare=function(t,e){return mt.compare(this._indices[t],this._indices[e])};yr.prototype._updateResolver=function(t,e){var n=this._symbols;e instanceof yr&&~u0(this).indexOf(e._name)&&e._symbols.every(function(r){return~n.indexOf(r)})&&(t._symbols=e._symbols,t._read=e._read)};yr.prototype._copy=function(t){return this._check(t,Tt),t};yr.prototype.getAliases=function(){return this._aliases};yr.prototype.getSymbols=function(){return this._symbols.slice()};yr.prototype.random=function(){return Xn.choice(this._symbols)};yr.prototype.toJSON=function(){return{name:this._name,type:"enum",symbols:this._symbols}};function wr(t,e){if(t.size!==(t.size|0)||t.size<1)throw new Error(Ke("invalid %j fixed size: %j",t.name,t.size));e=yu(t,e);var n=vv(t,e.namespace);this._name=n.name,this._size=t.size|0,this._aliases=n.aliases,Ae.call(this,e.registry)}cn.inherits(wr,Ae);wr.prototype._check=function(t,e){var n=Ii.isBuffer(t)&&t.length===this._size;return!n&&e&&e(pt.slice(),t,this),n};wr.prototype._read=function(t){return t.readFixed(this._size)};wr.prototype._skip=function(t){t.skipFixed(this._size)};wr.prototype._write=function(t,e){(!Ii.isBuffer(e)||e.length!==this._size)&&Tt(null,e,this),t.writeFixed(e,this._size)};wr.prototype._match=function(t,e){return t.matchFixed(e,this._size)};wr.prototype.compare=Ii.compare;wr.prototype._updateResolver=function(t,e){e instanceof wr&&this._size===e._size&&~u0(this).indexOf(e._name)&&(t._size=this._size,t._read=this._read)};wr.prototype._copy=kr.prototype._copy;wr.prototype.getAliases=function(){return this._aliases};wr.prototype.getSize=function(){return this._size};wr.prototype.random=function(){return Xn.nextBuffer(this._size)};wr.prototype.toJSON=function(){return{name:this._name,type:"fixed",size:this._size}};function _r(t,e){if(!t.values)throw new Error(Ke("missing map values: %j",t));e=yu(t,e),Ae.call(this),this._values=vu(t.values,e)}cn.inherits(_r,Ae);_r.prototype.getValuesType=function(){return this._values};_r.prototype._check=function(t,e){if(!t||typeof t!="object"||t instanceof Array)return e&&e(pt.slice(),t,this),!1;var n=Object.keys(t),r=!0,i,o,s,l;if(e){for(s=pt.length,pt.push(""),i=0,o=n.length;i<o;i++)l=pt[s]=n[i],this._values._check(t[l],e)||(r=!1);pt.pop()}else for(i=0,o=n.length;i<o;i++)if(!this._values._check(t[n[i]],e))return!1;return r};_r.prototype._read=function(t){for(var e=this._values,n={},r;r=B_(t);)for(;r--;){var i=t.readString();n[i]=e._read(t)}return n};_r.prototype._skip=function(t){for(var e=this._values,n,r;r=t.readLong();)if(r<0)n=t.readLong(),t.pos+=n;else for(;r--;)t.skipString(),e._skip(t)};_r.prototype._write=function(t,e){(!e||typeof e!="object"||e instanceof Array)&&Tt(null,e,this);var n=this._values,r=Object.keys(e),i=r.length,o,s;if(i)for(t.writeLong(i),o=0;o<i;o++)s=r[o],t.writeString(s),n._write(t,e[s]);t.writeLong(0)};_r.prototype._match=function(){throw new Error("maps cannot be compared")};_r.prototype._updateResolver=function(t,e,n){e instanceof _r&&(t._values=this._values.createResolver(e._values,n),t._read=this._read)};_r.prototype._copy=function(t,e){if(t&&typeof t=="object"&&!(t instanceof Array)){var n=this._values,r=Object.keys(t),i,o,s,l={};for(i=0,o=r.length;i<o;i++)s=r[i],l[s]=n._copy(t[s],e);return l}Tt(null,t,this)};_r.prototype.compare=_r.prototype._match;_r.prototype.random=function(){var t={},e,n;for(e=0,n=Xn.nextInt(10);e<n;e++)t[Xn.nextString(Xn.nextInt(20))]=this._values.random();return t};_r.prototype.toJSON=function(){return{type:"map",values:this._values}};function Hr(t,e){if(!t.items)throw new Error(Ke("missing array items: %j",t));e=yu(t,e),this._items=vu(t.items,e),Ae.call(this)}cn.inherits(Hr,Ae);Hr.prototype._check=function(t,e){if(!(t instanceof Array))return e&&e(pt.slice(),t,this),!1;var n=!0,r,i,o;if(e){for(o=pt.length,pt.push(""),r=0,i=t.length;r<i;r++)pt[o]=""+r,this._items._check(t[r],e)||(n=!1);pt.pop()}else for(r=0,i=t.length;r<i;r++)if(!this._items._check(t[r],e))return!1;return n};Hr.prototype._read=function(t){for(var e=this._items,n=[],r;r=t.readLong();)for(r<0&&(r=-r,t.skipLong());r--;)n.push(e._read(t));return n};Hr.prototype._skip=function(t){for(var e,n;n=t.readLong();)if(n<0)e=t.readLong(),t.pos+=e;else for(;n--;)this._items._skip(t)};Hr.prototype._write=function(t,e){e instanceof Array||Tt(null,e,this);var n=e.length,r;if(n)for(t.writeLong(n),r=0;r<n;r++)this._items._write(t,e[r]);t.writeLong(0)};Hr.prototype._match=function(t,e){for(var n=t.readLong(),r=e.readLong(),i;n&&r;){if(i=this._items._match(t,e),i)return i;--n||(n=B_(t)),--r||(r=B_(e))}return mt.compare(n,r)};Hr.prototype._updateResolver=function(t,e,n){e instanceof Hr&&(t._items=this._items.createResolver(e._items,n),t._read=this._read)};Hr.prototype._copy=function(t,e){t instanceof Array||Tt(null,t,this);var n=[],r,i;for(r=0,i=t.length;r<i;r++)n.push(this._items._copy(t[r],e));return n};Hr.prototype.compare=function(t,e){var n=t.length,r=e.length,i,o,s;for(i=0,o=Math.min(n,r);i<o;i++)if(s=this._items.compare(t[i],e[i]))return s;return mt.compare(n,r)};Hr.prototype.getItemsType=function(){return this._items};Hr.prototype.random=function(){var t=[],e,n;for(e=0,n=Xn.nextInt(10);e<n;e++)t.push(this._items.random());return t};Hr.prototype.toJSON=function(){return{type:"array",items:this._items}};function en(t,e){e=yu(t,e);var n=vv(t,e.namespace);if(this._name=n.name,this._aliases=n.aliases,this._type=t.type,Ae.call(this,this._type==="request"?void 0:e.registry),!(t.fields instanceof Array))throw new Error(Ke("non-array %s fields",this._name));if(this._fields=t.fields.map(function(i){return new sa(i,e)}),mt.hasDuplicates(t.fields,function(i){return i.name}))throw new Error(Ke("duplicate %s field name",this._name));var r=t.type==="error";this._constructor=this._createConstructor(r),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker()}cn.inherits(en,Ae);en.prototype._createConstructor=function(t){var e=[],n=[],r=[],i=t?`  Error.call(this);
`:"",o,s,l,u,c;for(o=0,s=this._fields.length;o<s;o++)l=this._fields[o],c=l.getDefault,u=l._name,n.push("v"+o),i+="  ",c()===void 0?i+="this."+u+" = v"+o+`;
`:(i+="if (v"+o+" === undefined) { ",i+="this."+u+" = d"+r.length+"(); ",i+="} else { this."+u+" = v"+o+`; }
`,e.push("d"+r.length),r.push(c));var h="return function "+la(this._name)+"(";h+=n.join()+`) {
`+i+"};";var p=new Function(e.join(),h).apply(void 0,r),g=this;return p.getType=function(){return g},p.prototype={constructor:p,$clone:function(v){return g.clone(this,v)},$compare:function(v){return g.compare(this,v)},$getType:p.getType,$isValid:function(v){return g.isValid(this,v)},$toBuffer:function(){return g.toBuffer(this)},$toString:function(v){return g.toString(this,v)}},t&&cn.inherits(p,Error),p};en.prototype._createChecker=function(){var t=["t","P"],e=[this,pt],n="return function check"+la(this._name)+`(val, cb) {
`;if(n+=`  if (val === null || typeof val != 'object') {
`,n+=`    if (cb) { cb(P.slice(), val, t); }
`,n+=`    return false;
`,n+=`  }
`,!this._fields.length)n+=`  return true;
`;else{for(r=0,i=this._fields.length;r<i;r++)o=this._fields[r],t.push("t"+r),e.push(o._type),o.getDefault()!==void 0&&(n+="  var v"+r+" = val."+o._name+`;
`);n+=`  if (cb) {
`,n+=`    var b = 1;
`,n+=`    var j = P.length;
`,n+=`    P.push('');
`;var r,i,o;for(r=0,i=this._fields.length;r<i;r++)o=this._fields[r],n+="    P[j] = '"+o._name+`';
`,o.getDefault()===void 0?n+="    b &= t"+r+"._check(val."+o._name+`, cb);
`:(n+="    b &= v"+r+" === undefined || ",n+="t"+r+"._check(v"+r+`, cb);
`);n+=`    P.pop();
`,n+=`    return !!b;
`,n+=`  } else {
    return (
      `,n+=this._fields.map(function(s,l){return s.getDefault()===void 0?"t"+l+"._check(val."+s._name+")":"(v"+l+" === undefined || t"+l+"._check(v"+l+"))"}).join(` &&
      `),n+=`
    );
  }
`}return n+="};",new Function(t.join(),n).apply(void 0,e)};en.prototype._createReader=function(){var t=la(this._name),e=[],n=[this._constructor],r,i;for(r=0,i=this._fields.length;r<i;r++)e.push("t"+r),n.push(this._fields[r]._type);var o="return function read"+t+`(tap) {
`;return o+="  return new "+t+"(",o+=e.map(function(s){return s+"._read(tap)"}).join(),o+=`);
};`,e.unshift(t),new Function(e.join(),o).apply(void 0,n)};en.prototype._createSkipper=function(){var t=[],e="return function skip"+la(this._name)+`(tap) {
`,n=[],r,i;for(r=0,i=this._fields.length;r<i;r++)t.push("t"+r),n.push(this._fields[r]._type),e+="  t"+r+`._skip(tap);
`;return e+="}",new Function(t.join(),e).apply(void 0,n)};en.prototype._createWriter=function(){var t=[],e="return function write"+la(this._name)+`(tap, val) {
`,n=[],r,i,o,s;for(r=0,i=this._fields.length;r<i;r++)o=this._fields[r],t.push("t"+r),n.push(o._type),e+="  ",o.getDefault()===void 0?e+="t"+r+"._write(tap, val."+o._name+`);
`:(s=o._type.toBuffer(o.getDefault()).toString("binary"),t.push("d"+r),n.push(s),e+="var v"+r+" = val."+o._name+"; ",e+="if (v"+r+" === undefined) { ",e+="tap.writeBinary(d"+r+", "+s.length+");",e+=" } else { t"+r+"._write(tap, v"+r+`); }
`);return e+="}",new Function(t.join(),e).apply(void 0,n)};en.prototype._updateResolver=function(t,e,n){if(!~u0(this).indexOf(e._name))throw new Error(Ke("no alias for %s in %s",e._name,this._name));var r=this._fields,i=e._fields,o=mt.toMap(i,function(b){return b._name}),s=[],l={},u,c,h,p,g,v;for(u=0;u<r.length;u++){for(h=r[u],g=u0(h),v=[],c=0;c<g.length;c++)p=g[c],o[p]&&v.push(p);if(v.length>1)throw new Error(Ke("multiple matches for %s",h.name));if(v.length)p=v[0],l[p]={resolver:h._type.createResolver(o[p]._type,n),name:h._name},s.push(h._name);else{if(h.getDefault()===void 0)throw new Error(Ke("no match for default-less %s",h.name));s.push("undefined")}}var y=-1;for(u=i.length;u&&l[i[--u]._name]===void 0;)y=u;var A=la(this._name),O=[A],x=[this._constructor],k="  return function read"+A+`(tap,lazy) {
`;for(u=0;u<i.length;u++)u===y&&(k+=`  if (!lazy) {
`),h=e._fields[u],p=h._name,k+=~y&&u>=y?"    ":"  ",l[p]===void 0?(O.push("t"+u),x.push(h._type),k+="t"+u+`._skip(tap);
`):(O.push("t"+u),x.push(l[p].resolver),k+="var "+l[p].name+" = ",k+="t"+u+`._read(tap);
`);~y&&(k+=`  }
`),k+="  return new "+A+"("+s.join()+`);
};`,t._read=new Function(O.join(),k).apply(void 0,x)};en.prototype._match=function(t,e){var n=this._fields,r,i,o,s,l;for(r=0,i=n.length;r<i;r++)if(o=n[r],s=o._order,l=o._type,s){if(s*=l._match(t,e),s)return s}else l._skip(t),l._skip(e);return 0};en.prototype._copy=function(t,e){var n=e&&e.fieldHook,r=[void 0],i,o,s,l;for(i=0,o=this._fields.length;i<o;i++)s=this._fields[i],l=s._type._copy(typeof t[s._name]>"u"?s.getDefault():t[s._name],e),n&&(l=n(s,l,this)),r.push(l);return new(this._constructor.bind.apply(this._constructor,r))};en.prototype.compare=function(t,e){var n=this._fields,r,i,o,s,l,u;for(r=0,i=n.length;r<i;r++)if(o=n[r],s=o._name,l=o._order,u=o._type,l&&(l*=u.compare(t[s],e[s]),l))return l;return 0};en.prototype.random=function(){var t=this._fields.map(function(e){return e._type.random()});return t.unshift(void 0),new(this._constructor.bind.apply(this._constructor,t))};en.prototype.getAliases=function(){return this._aliases};en.prototype.getFields=function(){return this._fields.slice()};en.prototype.getRecordConstructor=function(){return this._constructor};en.prototype.toJSON=function(){return{name:this._name,type:"record",fields:this._fields}};function tr(t,e,n){if(Ae.call(this),pd=this,this._underlyingType=vu(t,e),n&&!~n.indexOf(this._underlyingType.constructor)){var r=t.logicalType,i=this._underlyingType;throw new Error(Ke("invalid underlying type for %s: %s",r,i))}}cn.inherits(tr,Ae);tr.prototype.getUnderlyingType=function(){return this._underlyingType};tr.prototype._read=function(t){return this._fromValue(this._underlyingType._read(t))};tr.prototype._write=function(t,e){this._underlyingType._write(t,this._toValue(e))};tr.prototype._check=function(t,e){var n;try{n=this._toValue(t)}catch{return e&&e(pt.slice(),t,this),!1}return this._underlyingType._check(n,e)};tr.prototype._copy=function(t,e){var n=this._underlyingType;switch(e&&e.coerce){case 3:return n._copy(this._toValue(t),e);case 2:return this._fromValue(n._copy(t,e));default:return this._fromValue(n._copy(this._toValue(t),e))}};tr.prototype._updateResolver=function(t,e,n){var r=this._resolve(e,n);r&&(t._read=function(i){return r(e._read(i))})};tr.prototype.random=function(){return this._fromValue(this._underlyingType.random())};tr.prototype.compare=function(t,e){var n=this._toValue(t),r=this._toValue(e);return this._underlyingType.compare(n,r)};tr.prototype.toJSON=function(){return this._underlyingType.toJSON()};tr.prototype._fromValue=mt.abstractFunction;tr.prototype._toValue=mt.abstractFunction;tr.prototype._resolve=mt.abstractFunction;function pi(t){Bn.call(this),this._noUnpack=!!t}cn.inherits(pi,Bn);pi.prototype._check=function(t,e){var n=this._isValid(t);return!n&&e&&e(pt.slice(),t,this),n};pi.prototype._read=function(t){var e,n;if(this._noUnpack?(n=t.pos,t.skipLong(),e=t.buf.slice(n,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)};pi.prototype._write=function(t,e){this._isValid(e)||Tt(null,e,this);var n=this._toBuffer(e);this._noUnpack?t.writeFixed(n):t.packLongBytes(n)};pi.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(JSON.parse(JSON.stringify(this._toJSON(t))))}};pi.prototype.random=function(){return this._fromJSON(Bn.prototype.random())};pi.prototype._fromBuffer=mt.abstractFunction;pi.prototype._toBuffer=mt.abstractFunction;pi.prototype._fromJSON=mt.abstractFunction;pi.prototype._toJSON=mt.abstractFunction;pi.prototype._isValid=mt.abstractFunction;pi.prototype.compare=mt.abstractFunction;function sa(t,e){var n=t.name;if(typeof n!="string"||!Jb.test(n))throw new Error(Ke("invalid field name: %s",n));this._name=n,this._type=vu(t.type,e),this._aliases=t.aliases||[],this._order=function(s){switch(s){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(Ke("invalid order: %j",s))}}(t.order===void 0?"ascending":t.order);var r=t.default;if(r!==void 0){var i=this._type,o=i._copy(r,{coerce:2,wrap:2});i instanceof Ft&&!(i instanceof kr)?this.getDefault=function(){return o}:this.getDefault=function(){return i._copy(o)}}}sa.prototype.getAliases=function(){return this._aliases};sa.prototype.getDefault=function(){};sa.prototype.getName=function(){return this._name};sa.prototype.getOrder=function(){return["descending","ignore","ascending"][this._order+1]};sa.prototype.getType=function(){return this._type};sa.prototype.inspect=function(){return Ke("<Field %j>",this._name)};function iL(t){this._readerType=t,this._items=null,this._read=null,this._size=0,this._symbols=null,this._values=null}iL.prototype.inspect=function(){return"<Resolver>"};function oL(t,e,n,r){if(n){if(n._readerType!==t)throw new Error("invalid resolver");return n._read(e,r)}else return t._read(e)}function yu(t,e){if(t===null)throw new Error('invalid type: null (did you mean "null"?)');return e=e||{},e.registry=e.registry||{},e.namespace=t.namespace||e.namespace,e.logicalTypes=e.logicalTypes||{},e}function vv(t,e,n){e=t.namespace||e,n=n||"name";var r=t[n];if(!r)throw new Error(Ke("missing %s property in schema: %j",n,t));return{name:i(r),aliases:t.aliases?t.aliases.map(i):[]};function i(o){!~o.indexOf(".")&&e&&(o=e+"."+o);var s=la(o);if(P_(s))throw new Error(Ke("cannot rename primitive type: %j",s));return o.split(".").forEach(function(l){if(!Jb.test(l))throw new Error(Ke("invalid name: %j",o))}),o}}function la(t){var e=t.split(".");return e[e.length-1]}function u0(t){var e=[t._name],n=t._aliases,r,i;for(r=0,i=n.length;r<i;r++)e.push(n[r]);return e}function D_(t){var e=t.toJSON();return typeof e=="string"?e:e.type}function P_(t){var e=a0[t];return e!==void 0&&e.prototype instanceof Ft}function B_(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function sL(t,e){return function(n){return JSON.stringify(t,function(r,i){if(i instanceof sa)return{name:i._name,type:i._type};if(i&&i.name){var o=i.name;if(e||n[o])return o;n[o]=!0}return i})}({})}function Kb(t){return t>=-9007199254740990&&t<=9007199254740990}function Tt(t,e,n){throw new Error(Ke("invalid %s: %j",n,e))}var iV={createType:vu,resolveNames:vv,stringify:sL,types:function(){var t={Type:Ae,LogicalType:tr},e=Object.keys(a0),n,r,i;for(n=0,r=e.length;n<r;n++)i=a0[e[n]],t[i.name]=i;return t}()},lL={},aL={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Po,function(){var n="1.13.4",r=typeof self=="object"&&self.self===self&&self||typeof Po=="object"&&Po.global===Po&&Po||Function("return this")()||{},i=Array.prototype,o=Object.prototype,s=typeof Symbol<"u"?Symbol.prototype:null,l=i.push,u=i.slice,c=o.toString,h=o.hasOwnProperty,p=typeof ArrayBuffer<"u",g=typeof DataView<"u",v=Array.isArray,y=Object.keys,A=Object.create,O=p&&ArrayBuffer.isView,x=isNaN,k=isFinite,b=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],N=Math.pow(2,53)-1;function B(w,S){return S=S==null?w.length-1:+S,function(){for(var R=Math.max(arguments.length-S,0),M=Array(R),V=0;V<R;V++)M[V]=arguments[V+S];switch(S){case 0:return w.call(this,M);case 1:return w.call(this,arguments[0],M);case 2:return w.call(this,arguments[0],arguments[1],M)}var I=Array(S+1);for(V=0;V<S;V++)I[V]=arguments[V];return I[S]=M,w.apply(this,I)}}function D(w){var S=typeof w;return S==="function"||S==="object"&&!!w}function $(w){return w===void 0}function G(w){return w===!0||w===!1||c.call(w)==="[object Boolean]"}function W(w){var S="[object "+w+"]";return function(R){return c.call(R)===S}}var oe=W("String"),ve=W("Number"),_e=W("Date"),ze=W("RegExp"),Qe=W("Error"),Ce=W("Symbol"),ye=W("ArrayBuffer"),F=W("Function"),J=r.document&&r.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof J!="function"&&(F=function(w){return typeof w=="function"||!1});var ie=F,Se=W("Object"),$e=g&&Se(new DataView(new ArrayBuffer(8))),bn=typeof Map<"u"&&Se(new Map),tn=W("DataView"),lr=$e?function(w){return w!=null&&ie(w.getInt8)&&ye(w.buffer)}:tn,Yt=v||W("Array");function ar(w,S){return w!=null&&h.call(w,S)}var ss=W("Arguments");(function(){ss(arguments)||(ss=function(w){return ar(w,"callee")})})();var ls=ss;function sp(w){return ve(w)&&x(w)}function da(w){return function(){return w}}function pa(w){return function(S){var R=w(S);return typeof R=="number"&&R>=0&&R<=N}}function vc(w){return function(S){return S==null?void 0:S[w]}}var $n=vc("byteLength"),ga=pa($n),qv=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,yi=p?function(w){return O?O(w)&&!lr(w):ga(w)&&qv.test(c.call(w))}:da(!1),Sn=vc("length");function lp(w,S){S=function(j){for(var Y={},ce=j.length,ke=0;ke<ce;++ke)Y[j[ke]]=!0;return{contains:function(ot){return Y[ot]===!0},push:function(ot){return Y[ot]=!0,j.push(ot)}}}(S);var R=T.length,M=w.constructor,V=ie(M)&&M.prototype||o,I="constructor";for(ar(w,I)&&!S.contains(I)&&S.push(I);R--;)(I=T[R])in w&&w[I]!==V[I]&&!S.contains(I)&&S.push(I)}function St(w){if(!D(w))return[];if(y)return y(w);var S=[];for(var R in w)ar(w,R)&&S.push(R);return b&&lp(w,S),S}function Cr(w,S){var R=St(S),M=R.length;if(w==null)return!M;for(var V=Object(w),I=0;I<M;I++){var j=R[I];if(S[j]!==V[j]||!(j in V))return!1}return!0}function He(w){return w instanceof He?w:this instanceof He?void(this._wrapped=w):new He(w)}function ma(w){return new Uint8Array(w.buffer||w,w.byteOffset||0,$n(w))}He.VERSION=n,He.prototype.value=function(){return this._wrapped},He.prototype.valueOf=He.prototype.toJSON=He.prototype.value,He.prototype.toString=function(){return String(this._wrapped)};var ap="[object DataView]";function as(w,S,R,M){if(w===S)return w!==0||1/w==1/S;if(w==null||S==null)return!1;if(w!=w)return S!=S;var V=typeof w;return(V==="function"||V==="object"||typeof S=="object")&&function I(j,Y,ce,ke){j instanceof He&&(j=j._wrapped),Y instanceof He&&(Y=Y._wrapped);var ot=c.call(j);if(ot!==c.call(Y))return!1;if($e&&ot=="[object Object]"&&lr(j)){if(!lr(Y))return!1;ot=ap}switch(ot){case"[object RegExp]":case"[object String]":return""+j==""+Y;case"[object Number]":return+j!=+j?+Y!=+Y:+j==0?1/+j==1/Y:+j==+Y;case"[object Date]":case"[object Boolean]":return+j==+Y;case"[object Symbol]":return s.valueOf.call(j)===s.valueOf.call(Y);case"[object ArrayBuffer]":case ap:return I(ma(j),ma(Y),ce,ke)}var hn=ot==="[object Array]";if(!hn&&yi(j)){if($n(j)!==$n(Y))return!1;if(j.buffer===Y.buffer&&j.byteOffset===Y.byteOffset)return!0;hn=!0}if(!hn){if(typeof j!="object"||typeof Y!="object")return!1;var xo=j.constructor,bo=Y.constructor;if(xo!==bo&&!(ie(xo)&&xo instanceof xo&&ie(bo)&&bo instanceof bo)&&"constructor"in j&&"constructor"in Y)return!1}ke=ke||[];for(var Ar=(ce=ce||[]).length;Ar--;)if(ce[Ar]===j)return ke[Ar]===Y;if(ce.push(j),ke.push(Y),hn){if((Ar=j.length)!==Y.length)return!1;for(;Ar--;)if(!as(j[Ar],Y[Ar],ce,ke))return!1}else{var dn,Lp=St(j);if(Ar=Lp.length,St(Y).length!==Ar)return!1;for(;Ar--;)if(dn=Lp[Ar],!ar(Y,dn)||!as(j[dn],Y[dn],ce,ke))return!1}return ce.pop(),ke.pop(),!0}(w,S,R,M)}function va(w){if(!D(w))return[];var S=[];for(var R in w)S.push(R);return b&&lp(w,S),S}function us(w){var S=Sn(w);return function(R){if(R==null)return!1;var M=va(R);if(Sn(M))return!1;for(var V=0;V<S;V++)if(!ie(R[w[V]]))return!1;return w!==Ou||!ie(R[yo])}}var yo="forEach",Au="has",ya=["clear","delete"],Tu=["get",Au,"set"],yc=ya.concat(yo,Tu),Ou=ya.concat(Tu),wc=["add"].concat(ya,yo,Au),_c=bn?us(yc):W("Map"),xc=bn?us(Ou):W("WeakMap"),bc=bn?us(wc):W("Set"),Jv=W("WeakSet");function qs(w){for(var S=St(w),R=S.length,M=Array(R),V=0;V<R;V++)M[V]=w[S[V]];return M}function up(w){for(var S={},R=St(w),M=0,V=R.length;M<V;M++)S[w[R[M]]]=R[M];return S}function Ru(w){var S=[];for(var R in w)ie(w[R])&&S.push(R);return S.sort()}function Mu(w,S){return function(R){var M=arguments.length;if(S&&(R=Object(R)),M<2||R==null)return R;for(var V=1;V<M;V++)for(var I=arguments[V],j=w(I),Y=j.length,ce=0;ce<Y;ce++){var ke=j[ce];S&&R[ke]!==void 0||(R[ke]=I[ke])}return R}}var fp=Mu(va),Lu=Mu(St),cp=Mu(va,!0);function hp(w){if(!D(w))return{};if(A)return A(w);var S=function(){};S.prototype=w;var R=new S;return S.prototype=null,R}function Sc(w){return Yt(w)?w:[w]}function wa(w){return He.toPath(w)}function kc(w,S){for(var R=S.length,M=0;M<R;M++){if(w==null)return;w=w[S[M]]}return R?w:void 0}function dp(w,S,R){var M=kc(w,wa(S));return $(M)?R:M}function _a(w){return w}function xa(w){return w=Lu({},w),function(S){return Cr(S,w)}}function ba(w){return w=wa(w),function(S){return kc(S,w)}}function Sa(w,S,R){if(S===void 0)return w;switch(R==null?3:R){case 1:return function(M){return w.call(S,M)};case 3:return function(M,V,I){return w.call(S,M,V,I)};case 4:return function(M,V,I,j){return w.call(S,M,V,I,j)}}return function(){return w.apply(S,arguments)}}function pp(w,S,R){return w==null?_a:ie(w)?Sa(w,S,R):D(w)&&!Yt(w)?xa(w):ba(w)}function Ec(w,S){return pp(w,S,1/0)}function Hn(w,S,R){return He.iteratee!==Ec?He.iteratee(w,S):pp(w,S,R)}function gp(){}function Cc(w,S){return S==null&&(S=w,w=0),w+Math.floor(Math.random()*(S-w+1))}He.toPath=Sc,He.iteratee=Ec;var ka=Date.now||function(){return new Date().getTime()};function mp(w){var S=function(I){return w[I]},R="(?:"+St(w).join("|")+")",M=RegExp(R),V=RegExp(R,"g");return function(I){return I=I==null?"":""+I,M.test(I)?I.replace(V,S):I}}var Ac={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Kv=mp(Ac),Gv=mp(up(Ac)),Zv=He.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Tc=/(.)^/,Yv={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Qv=/\\|'|\r|\n|\u2028|\u2029/g;function Nu(w){return"\\"+Yv[w]}var Xv=/^\s*(\w|\$)+\s*$/,Du=0;function vp(w,S,R,M,V){if(!(M instanceof S))return w.apply(R,V);var I=hp(w.prototype),j=w.apply(I,V);return D(j)?j:I}var Js=B(function(w,S){var R=Js.placeholder,M=function(){for(var V=0,I=S.length,j=Array(I),Y=0;Y<I;Y++)j[Y]=S[Y]===R?arguments[V++]:S[Y];for(;V<arguments.length;)j.push(arguments[V++]);return vp(w,M,this,this,j)};return M});Js.placeholder=He;var yp=B(function(w,S,R){if(!ie(w))throw new TypeError("Bind must be called on a function");var M=B(function(V){return vp(w,M,S,this,R.concat(V))});return M}),Vn=pa(Sn);function wo(w,S,R,M){if(M=M||[],S||S===0){if(S<=0)return M.concat(w)}else S=1/0;for(var V=M.length,I=0,j=Sn(w);I<j;I++){var Y=w[I];if(Vn(Y)&&(Yt(Y)||ls(Y)))if(S>1)wo(Y,S-1,R,M),V=M.length;else for(var ce=0,ke=Y.length;ce<ke;)M[V++]=Y[ce++];else R||(M[V++]=Y)}return M}var wp=B(function(w,S){var R=(S=wo(S,!1,!1)).length;if(R<1)throw new Error("bindAll must be passed function names");for(;R--;){var M=S[R];w[M]=yp(w[M],w)}return w}),_p=B(function(w,S,R){return setTimeout(function(){return w.apply(null,R)},S)}),ey=Js(_p,He,1);function Oc(w){return function(){return!w.apply(this,arguments)}}function xp(w,S){var R;return function(){return--w>0&&(R=S.apply(this,arguments)),w<=1&&(S=null),R}}var bp=Js(xp,2);function Rc(w,S,R){S=Hn(S,R);for(var M,V=St(w),I=0,j=V.length;I<j;I++)if(S(w[M=V[I]],M,w))return M}function Mc(w){return function(S,R,M){R=Hn(R,M);for(var V=Sn(S),I=w>0?0:V-1;I>=0&&I<V;I+=w)if(R(S[I],I,S))return I;return-1}}var Ea=Mc(1),Sp=Mc(-1);function Lc(w,S,R,M){for(var V=(R=Hn(R,M,1))(S),I=0,j=Sn(w);I<j;){var Y=Math.floor((I+j)/2);R(w[Y])<V?I=Y+1:j=Y}return I}function Ca(w,S,R){return function(M,V,I){var j=0,Y=Sn(M);if(typeof I=="number")w>0?j=I>=0?I:Math.max(I+Y,j):Y=I>=0?Math.min(I+1,Y):I+Y+1;else if(R&&I&&Y)return M[I=R(M,V)]===V?I:-1;if(V!=V)return(I=S(u.call(M,j,Y),sp))>=0?I+j:-1;for(I=w>0?j:Y-1;I>=0&&I<Y;I+=w)if(M[I]===V)return I;return-1}}var Nc=Ca(1,Ea,Lc),ty=Ca(-1,Sp);function Pu(w,S,R){var M=(Vn(w)?Ea:Rc)(w,S,R);if(M!==void 0&&M!==-1)return w[M]}function wi(w,S,R){var M,V;if(S=Sa(S,R),Vn(w))for(M=0,V=w.length;M<V;M++)S(w[M],M,w);else{var I=St(w);for(M=0,V=I.length;M<V;M++)S(w[I[M]],I[M],w)}return w}function Ji(w,S,R){S=Hn(S,R);for(var M=!Vn(w)&&St(w),V=(M||w).length,I=Array(V),j=0;j<V;j++){var Y=M?M[j]:j;I[j]=S(w[Y],Y,w)}return I}function kp(w){var S=function(R,M,V,I){var j=!Vn(R)&&St(R),Y=(j||R).length,ce=w>0?0:Y-1;for(I||(V=R[j?j[ce]:ce],ce+=w);ce>=0&&ce<Y;ce+=w){var ke=j?j[ce]:ce;V=M(V,R[ke],ke,R)}return V};return function(R,M,V,I){var j=arguments.length>=3;return S(R,Sa(M,I,4),V,j)}}var Bu=kp(1),Iu=kp(-1);function _o(w,S,R){var M=[];return S=Hn(S,R),wi(w,function(V,I,j){S(V,I,j)&&M.push(V)}),M}function fs(w,S,R){S=Hn(S,R);for(var M=!Vn(w)&&St(w),V=(M||w).length,I=0;I<V;I++){var j=M?M[I]:I;if(!S(w[j],j,w))return!1}return!0}function Dc(w,S,R){S=Hn(S,R);for(var M=!Vn(w)&&St(w),V=(M||w).length,I=0;I<V;I++){var j=M?M[I]:I;if(S(w[j],j,w))return!0}return!1}function _i(w,S,R,M){return Vn(w)||(w=qs(w)),(typeof R!="number"||M)&&(R=0),Nc(w,S,R)>=0}var ny=B(function(w,S,R){var M,V;return ie(S)?V=S:(S=wa(S),M=S.slice(0,-1),S=S[S.length-1]),Ji(w,function(I){var j=V;if(!j){if(M&&M.length&&(I=kc(I,M)),I==null)return;j=I[S]}return j==null?j:j.apply(I,R)})});function Fu(w,S){return Ji(w,ba(S))}function Pc(w,S,R){var M,V,I=-1/0,j=-1/0;if(S==null||typeof S=="number"&&typeof w[0]!="object"&&w!=null)for(var Y=0,ce=(w=Vn(w)?w:qs(w)).length;Y<ce;Y++)(M=w[Y])!=null&&M>I&&(I=M);else S=Hn(S,R),wi(w,function(ke,ot,hn){((V=S(ke,ot,hn))>j||V===-1/0&&I===-1/0)&&(I=ke,j=V)});return I}var Ep=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Bc(w){return w?Yt(w)?u.call(w):oe(w)?w.match(Ep):Vn(w)?Ji(w,_a):qs(w):[]}function Cp(w,S,R){if(S==null||R)return Vn(w)||(w=qs(w)),w[Cc(w.length-1)];var M=Bc(w),V=Sn(M);S=Math.max(Math.min(S,V),0);for(var I=V-1,j=0;j<S;j++){var Y=Cc(j,I),ce=M[j];M[j]=M[Y],M[Y]=ce}return M.slice(0,S)}function zu(w,S){return function(R,M,V){var I=S?[[],[]]:{};return M=Hn(M,V),wi(R,function(j,Y){var ce=M(j,Y,R);w(I,j,ce)}),I}}var ry=zu(function(w,S,R){ar(w,R)?w[R].push(S):w[R]=[S]}),Ap=zu(function(w,S,R){w[R]=S}),iy=zu(function(w,S,R){ar(w,R)?w[R]++:w[R]=1}),oy=zu(function(w,S,R){w[R?0:1].push(S)},!0);function sy(w,S,R){return S in R}var Tp=B(function(w,S){var R={},M=S[0];if(w==null)return R;ie(M)?(S.length>1&&(M=Sa(M,S[1])),S=va(w)):(M=sy,S=wo(S,!1,!1),w=Object(w));for(var V=0,I=S.length;V<I;V++){var j=S[V],Y=w[j];M(Y,j,w)&&(R[j]=Y)}return R}),Ic=B(function(w,S){var R,M=S[0];return ie(M)?(M=Oc(M),S.length>1&&(R=S[1])):(S=Ji(wo(S,!1,!1),String),M=function(V,I){return!_i(S,I)}),Tp(w,M,R)});function Op(w,S,R){return u.call(w,0,Math.max(0,w.length-(S==null||R?1:S)))}function Fc(w,S,R){return w==null||w.length<1?S==null||R?void 0:[]:S==null||R?w[0]:Op(w,w.length-S)}function $u(w,S,R){return u.call(w,S==null||R?1:S)}var Rp=B(function(w,S){return S=wo(S,!0,!0),_o(w,function(R){return!_i(S,R)})}),ly=B(function(w,S){return Rp(w,S)});function it(w,S,R,M){G(S)||(M=R,R=S,S=!1),R!=null&&(R=Hn(R,M));for(var V=[],I=[],j=0,Y=Sn(w);j<Y;j++){var ce=w[j],ke=R?R(ce,j,w):ce;S&&!R?(j&&I===ke||V.push(ce),I=ke):R?_i(I,ke)||(I.push(ke),V.push(ce)):_i(V,ce)||V.push(ce)}return V}var dt=B(function(w){return it(wo(w,!0,!0))});function zc(w){for(var S=w&&Pc(w,Sn).length||0,R=Array(S),M=0;M<S;M++)R[M]=Fu(w,M);return R}var ay=B(zc);function $c(w,S){return w._chain?He(S).chain():S}function Mp(w){return wi(Ru(w),function(S){var R=He[S]=w[S];He.prototype[S]=function(){var M=[this._wrapped];return l.apply(M,arguments),$c(this,R.apply(He,M))}}),He}wi(["pop","push","reverse","shift","sort","splice","unshift"],function(w){var S=i[w];He.prototype[w]=function(){var R=this._wrapped;return R!=null&&(S.apply(R,arguments),w!=="shift"&&w!=="splice"||R.length!==0||delete R[0]),$c(this,R)}}),wi(["concat","join","slice"],function(w){var S=i[w];He.prototype[w]=function(){var R=this._wrapped;return R!=null&&(R=S.apply(R,arguments)),$c(this,R)}});var Hc=Mp({__proto__:null,VERSION:n,restArguments:B,isObject:D,isNull:function(w){return w===null},isUndefined:$,isBoolean:G,isElement:function(w){return!(!w||w.nodeType!==1)},isString:oe,isNumber:ve,isDate:_e,isRegExp:ze,isError:Qe,isSymbol:Ce,isArrayBuffer:ye,isDataView:lr,isArray:Yt,isFunction:ie,isArguments:ls,isFinite:function(w){return!Ce(w)&&k(w)&&!isNaN(parseFloat(w))},isNaN:sp,isTypedArray:yi,isEmpty:function(w){if(w==null)return!0;var S=Sn(w);return typeof S=="number"&&(Yt(w)||oe(w)||ls(w))?S===0:Sn(St(w))===0},isMatch:Cr,isEqual:function(w,S){return as(w,S)},isMap:_c,isWeakMap:xc,isSet:bc,isWeakSet:Jv,keys:St,allKeys:va,values:qs,pairs:function(w){for(var S=St(w),R=S.length,M=Array(R),V=0;V<R;V++)M[V]=[S[V],w[S[V]]];return M},invert:up,functions:Ru,methods:Ru,extend:fp,extendOwn:Lu,assign:Lu,defaults:cp,create:function(w,S){var R=hp(w);return S&&Lu(R,S),R},clone:function(w){return D(w)?Yt(w)?w.slice():fp({},w):w},tap:function(w,S){return S(w),w},get:dp,has:function(w,S){for(var R=(S=wa(S)).length,M=0;M<R;M++){var V=S[M];if(!ar(w,V))return!1;w=w[V]}return!!R},mapObject:function(w,S,R){S=Hn(S,R);for(var M=St(w),V=M.length,I={},j=0;j<V;j++){var Y=M[j];I[Y]=S(w[Y],Y,w)}return I},identity:_a,constant:da,noop:gp,toPath:Sc,property:ba,propertyOf:function(w){return w==null?gp:function(S){return dp(w,S)}},matcher:xa,matches:xa,times:function(w,S,R){var M=Array(Math.max(0,w));S=Sa(S,R,1);for(var V=0;V<w;V++)M[V]=S(V);return M},random:Cc,now:ka,escape:Kv,unescape:Gv,templateSettings:Zv,template:function(w,S,R){!S&&R&&(S=R),S=cp({},S,He.templateSettings);var M=RegExp([(S.escape||Tc).source,(S.interpolate||Tc).source,(S.evaluate||Tc).source].join("|")+"|$","g"),V=0,I="__p+='";w.replace(M,function(ke,ot,hn,xo,bo){return I+=w.slice(V,bo).replace(Qv,Nu),V=bo+ke.length,ot?I+=`'+
((__t=(`+ot+`))==null?'':_.escape(__t))+
'`:hn?I+=`'+
((__t=(`+hn+`))==null?'':__t)+
'`:xo&&(I+=`';
`+xo+`
__p+='`),ke}),I+=`';
`;var j,Y=S.variable;if(Y){if(!Xv.test(Y))throw new Error("variable is not a bare identifier: "+Y)}else I=`with(obj||{}){
`+I+`}
`,Y="obj";I=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+I+`return __p;
`;try{j=new Function(Y,"_",I)}catch(ke){throw ke.source=I,ke}var ce=function(ke){return j.call(this,ke,He)};return ce.source="function("+Y+`){
`+I+"}",ce},result:function(w,S,R){var M=(S=wa(S)).length;if(!M)return ie(R)?R.call(w):R;for(var V=0;V<M;V++){var I=w==null?void 0:w[S[V]];I===void 0&&(I=R,V=M),w=ie(I)?I.call(w):I}return w},uniqueId:function(w){var S=++Du+"";return w?w+S:S},chain:function(w){var S=He(w);return S._chain=!0,S},iteratee:Ec,partial:Js,bind:yp,bindAll:wp,memoize:function(w,S){var R=function(M){var V=R.cache,I=""+(S?S.apply(this,arguments):M);return ar(V,I)||(V[I]=w.apply(this,arguments)),V[I]};return R.cache={},R},delay:_p,defer:ey,throttle:function(w,S,R){var M,V,I,j,Y=0;R||(R={});var ce=function(){Y=R.leading===!1?0:ka(),M=null,j=w.apply(V,I),M||(V=I=null)},ke=function(){var ot=ka();Y||R.leading!==!1||(Y=ot);var hn=S-(ot-Y);return V=this,I=arguments,hn<=0||hn>S?(M&&(clearTimeout(M),M=null),Y=ot,j=w.apply(V,I),M||(V=I=null)):M||R.trailing===!1||(M=setTimeout(ce,hn)),j};return ke.cancel=function(){clearTimeout(M),Y=0,M=V=I=null},ke},debounce:function(w,S,R){var M,V,I,j,Y,ce=function(){var ot=ka()-V;S>ot?M=setTimeout(ce,S-ot):(M=null,R||(j=w.apply(Y,I)),M||(I=Y=null))},ke=B(function(ot){return Y=this,I=ot,V=ka(),M||(M=setTimeout(ce,S),R&&(j=w.apply(Y,I))),j});return ke.cancel=function(){clearTimeout(M),M=I=Y=null},ke},wrap:function(w,S){return Js(S,w)},negate:Oc,compose:function(){var w=arguments,S=w.length-1;return function(){for(var R=S,M=w[S].apply(this,arguments);R--;)M=w[R].call(this,M);return M}},after:function(w,S){return function(){if(--w<1)return S.apply(this,arguments)}},before:xp,once:bp,findKey:Rc,findIndex:Ea,findLastIndex:Sp,sortedIndex:Lc,indexOf:Nc,lastIndexOf:ty,find:Pu,detect:Pu,findWhere:function(w,S){return Pu(w,xa(S))},each:wi,forEach:wi,map:Ji,collect:Ji,reduce:Bu,foldl:Bu,inject:Bu,reduceRight:Iu,foldr:Iu,filter:_o,select:_o,reject:function(w,S,R){return _o(w,Oc(Hn(S)),R)},every:fs,all:fs,some:Dc,any:Dc,contains:_i,includes:_i,include:_i,invoke:ny,pluck:Fu,where:function(w,S){return _o(w,xa(S))},max:Pc,min:function(w,S,R){var M,V,I=1/0,j=1/0;if(S==null||typeof S=="number"&&typeof w[0]!="object"&&w!=null)for(var Y=0,ce=(w=Vn(w)?w:qs(w)).length;Y<ce;Y++)(M=w[Y])!=null&&M<I&&(I=M);else S=Hn(S,R),wi(w,function(ke,ot,hn){((V=S(ke,ot,hn))<j||V===1/0&&I===1/0)&&(I=ke,j=V)});return I},shuffle:function(w){return Cp(w,1/0)},sample:Cp,sortBy:function(w,S,R){var M=0;return S=Hn(S,R),Fu(Ji(w,function(V,I,j){return{value:V,index:M++,criteria:S(V,I,j)}}).sort(function(V,I){var j=V.criteria,Y=I.criteria;if(j!==Y){if(j>Y||j===void 0)return 1;if(j<Y||Y===void 0)return-1}return V.index-I.index}),"value")},groupBy:ry,indexBy:Ap,countBy:iy,partition:oy,toArray:Bc,size:function(w){return w==null?0:Vn(w)?w.length:St(w).length},pick:Tp,omit:Ic,first:Fc,head:Fc,take:Fc,initial:Op,last:function(w,S,R){return w==null||w.length<1?S==null||R?void 0:[]:S==null||R?w[w.length-1]:$u(w,Math.max(0,w.length-S))},rest:$u,tail:$u,drop:$u,compact:function(w){return _o(w,Boolean)},flatten:function(w,S){return wo(w,S,!1)},without:ly,uniq:it,unique:it,union:dt,intersection:function(w){for(var S=[],R=arguments.length,M=0,V=Sn(w);M<V;M++){var I=w[M];if(!_i(S,I)){var j;for(j=1;j<R&&_i(arguments[j],I);j++);j===R&&S.push(I)}}return S},difference:Rp,unzip:zc,transpose:zc,zip:ay,object:function(w,S){for(var R={},M=0,V=Sn(w);M<V;M++)S?R[w[M]]=S[M]:R[w[M][0]]=w[M][1];return R},range:function(w,S,R){S==null&&(S=w||0,w=0),R||(R=S<w?-1:1);for(var M=Math.max(Math.ceil((S-w)/R),0),V=Array(M),I=0;I<M;I++,w+=R)V[I]=w;return V},chunk:function(w,S){if(S==null||S<1)return[];for(var R=[],M=0,V=w.length;M<V;)R.push(u.call(w,M,M+=S));return R},mixin:Mp,default:He});return Hc._=Hc,Hc})})(aL);(function(t){var e=aL.exports,n=oa,r="Validator API is deprecated. Please use the type API instead.";x=n.deprecate(x,r),k=n.deprecate(k,r);var i={PrimitiveTypes:["null","boolean","int","long","float","double","bytes","string"],ComplexTypes:["record","enum","array","map","union","fixed"]};i.Types=i.PrimitiveTypes.concat(i.ComplexTypes);var o=function(b){return new Error("InvalidSchemaError: "+b)},s=function(b){return new Error("InvalidProtocolError: "+b)},l=function(b){return new Error("ValidationError: "+b)},u=function(b){return new Error("ProtocolValidationError: "+b)};function c(b,T,N){function B(D,$,G){if(!e.isString(D))throw new o("Record name must be string");if(!e.isNull($)&&!e.isUndefined($)&&!e.isString($))throw new o("Record namespace must be string or null");if(!e.isArray(G))throw new o("Record name must be string")}B(b,T,N),this.name=b,this.namespace=T,this.fields=N}function h(b,T){var N=null;if(e.isString(b))N=b;else if(e.isObject(b))e.isString(b.namespace)&&(T=b.namespace),e.isString(b.name)?N=b.name:e.isString(b.type)&&(N=b.type);else throw new o("unable to determine fully qualified type name from schema "+JSON.stringify(b)+" in namespace "+T);if(!e.isString(N))throw new o("unable to determine type name from schema "+JSON.stringify(b)+" in namespace "+T);return N.indexOf(".")!==-1||e.contains(i.PrimitiveTypes,N)?N:e.isString(T)?T+"."+N:N}function p(b,T){this.branchNames=function(){return e.map(b,function(B){return h(B,T)})};function N(B){if(!e.isArray(B)||e.isEmpty(B))throw new o("Union must have at least 1 branch")}N(b),this.typeSchemas=b,this.namespace=T}function g(b){function T(N){if(!e.isArray(N))throw new o("Enum must have array of symbols, got "+JSON.stringify(N));if(!e.all(N,function(B){return e.isString(B)}))throw new o("Enum symbols must be strings, got "+JSON.stringify(N))}T(b),this.symbols=b}function v(b){function T(N){if(e.isNull(N)||e.isUndefined(N))throw new o('Array "items" schema should not be null or undefined')}T(b),this.itemSchema=b}function y(b){function T(N){if(e.isNull(N)||e.isUndefined(N))throw new o('Map "values" schema should not be null or undefined')}T(b),this.valueSchema=b}function A(b,T){this.name=b,this.schema=T}function O(b){function T(N){if(!e.isString(N))throw new o("Primitive type name must be a string");if(!e.contains(i.PrimitiveTypes,N))throw new o("Primitive type must be one of: "+JSON.stringify(i.PrimitiveTypes)+"; got "+N)}T(b),this.type=b}function x(b,T,N){this.validate=function(F){return B(this.schema,F)};var B=function(F,J){if(F instanceof c)return D(F,J);if(F instanceof p)return $(F,J);if(F instanceof g)return G(F,J);if(F instanceof v)return W(F,J);if(F instanceof y)return oe(F,J);if(F instanceof O)return ve(F,J);throw new o("validation not yet implemented: "+JSON.stringify(F))},D=function(F,J){if(!e.isObject(J)||e.isArray(J))throw new l("Expected record Javascript type to be non-array object, got "+JSON.stringify(J));var ie=e.pluck(F.fields,"name").sort(),Se=e.keys(J).sort();if(!e.isEqual(ie,Se))throw new l("Expected record fields "+JSON.stringify(ie)+"; got "+JSON.stringify(Se));return e.all(F.fields,function($e){return B($e.schema,J[$e.name])})},$=function(F,J){if(e.isObject(J)){if(e.isArray(J))throw new l("Expected union Javascript type to be non-array object (or null), got "+JSON.stringify(J));if(e.size(J)!==1)throw new l("Expected union Javascript object to be object with exactly 1 key (or null), got "+JSON.stringify(J));var ie=e.keys(J)[0];if(ie==="")throw new l("Expected union Javascript object to contain non-empty string branch, got "+JSON.stringify(J));if(e.contains(F.branchNames(),ie))return!0;throw new l("Expected union branch to be one of "+JSON.stringify(F.branchNames())+"; got "+JSON.stringify(ie))}else if(e.isNull(J)){if(e.contains(F.branchNames(),"null"))return!0;throw new l("Expected union branch to be one of "+JSON.stringify(F.branchNames())+"; got "+JSON.stringify(J))}else throw new l("Expected union Javascript object to be non-array object of size 1 or null, got "+JSON.stringify(J))},G=function(F,J){if(e.isString(J)){if(e.contains(F.symbols,J))return!0;throw new l("Expected enum value to be one of "+JSON.stringify(F.symbols)+"; got "+JSON.stringify(J))}else throw new l("Expected enum Javascript object to be string, got "+JSON.stringify(J))},W=function(F,J){if(e.isArray(J))return e.all(J,function(ie){return B(F.itemSchema,ie)});throw new l("Expected array Javascript object to be array, got "+JSON.stringify(J))},oe=function(F,J){if(e.isObject(J)&&!e.isArray(J))return e.all(J,function(ie){return B(F.valueSchema,ie)});throw e.isArray(J)?new l("Expected map Javascript object to be non-array object, got array "+JSON.stringify(J)):new l("Expected map Javascript object to be non-array object, got "+JSON.stringify(J))},ve=function(F,J){switch(F.type){case"null":if(e.isNull(J)||e.isUndefined(J))return!0;throw new l("Expected Javascript null or undefined for Avro null, got "+JSON.stringify(J));case"boolean":if(e.isBoolean(J))return!0;throw new l("Expected Javascript boolean for Avro boolean, got "+JSON.stringify(J));case"int":if(e.isNumber(J)&&Math.floor(J)===J&&Math.abs(J)<=Math.pow(2,31))return!0;throw new l("Expected Javascript int32 number for Avro int, got "+JSON.stringify(J));case"long":if(e.isNumber(J)&&Math.floor(J)===J&&Math.abs(J)<=Math.pow(2,63))return!0;throw new l("Expected Javascript int64 number for Avro long, got "+JSON.stringify(J));case"float":if(e.isNumber(J))return!0;throw new l("Expected Javascript float number for Avro float, got "+JSON.stringify(J));case"double":if(e.isNumber(J))return!0;throw new l("Expected Javascript double number for Avro double, got "+JSON.stringify(J));case"bytes":throw new o("not yet implemented: "+F.type);case"string":if(e.isString(J))return!0;throw new l("Expected Javascript string for Avro string, got "+JSON.stringify(J));default:throw new o("unrecognized primitive type: "+F.type)}},_e=N||{},ze=function(F,J){if(e.has(_e,F)){if(!e.isEqual(_e[F],J))throw new o("conflicting definitions for type "+F+": "+JSON.stringify(_e[F])+" and "+JSON.stringify(J))}else _e[F]=J},Qe=function(F){return e.has(_e,F)?_e[F]:null},Ce=function(F,J){if(e.contains(i.PrimitiveTypes,F))return new O(F);if(e.isNull(Qe(h(F,J))))throw new o("unknown type name: "+JSON.stringify(F)+"; known type names are "+JSON.stringify(e.keys(_e)));return Qe(h(F,J))},ye=function(F,J,ie){if(e.isNull(F)||e.isUndefined(F))throw new o("schema is null, in parentSchema: "+JSON.stringify(J));if(e.isString(F))return Ce(F,ie);if(e.isObject(F)&&!e.isArray(F))if(F.type==="record"){var Se=new c(F.name,F.namespace,e.map(F.fields,function(tn){return new A(tn.name,ye(tn.type,F,F.namespace||ie))}));return ze(h(F,ie),Se),Se}else if(F.type==="enum")if(e.has(F,"symbols")){var $e=new g(F.symbols);return ze(h(F,ie),$e),$e}else throw new o("enum must specify symbols, got "+JSON.stringify(F));else if(F.type==="array"){if(e.has(F,"items"))return new v(ye(F.items,F,ie));throw new o('array must specify "items" schema, got '+JSON.stringify(F))}else if(F.type==="map"){if(e.has(F,"values"))return new y(ye(F.values,F,ie));throw new o('map must specify "values" schema, got '+JSON.stringify(F))}else{if(e.has(F,"type")&&e.contains(i.PrimitiveTypes,F.type))return Ce(F.type,ie);throw new o("not yet implemented: "+F.type)}else if(e.isArray(F)){if(e.isEmpty(F))throw new o("unions must have at least 1 branch");var bn=e.map(F,function(tn){return ye(tn,F,ie)});return new p(bn,ie)}else throw new o("unexpected Javascript type for schema: "+typeof F)};this.rawSchema=b,this.schema=ye(b,null,T)}x.validate=function(b,T){return new x(b).validate(T)};function k(b){this.validate=function(B,D){var $=h(B,b.namespace);if(!e.has(T,$))throw new u("Protocol does not contain definition for type "+JSON.stringify($)+' (fully qualified from input "'+B+'"); known types are '+JSON.stringify(e.keys(T)));return T[$].validate(D)};var T={},N=function(B){var D={};if(!e.has(B,"protocol")||!e.isString(B.protocol))throw new s('Protocol must contain a "protocol" attribute with a string value');e.isArray(B.types)&&e.each(B.types,function($){var G=new x($,B.namespace,D),W=h($,B.namespace);T[W]=G})};N(b)}k.validate=function(b,T,N){return new k(b).validate(T,N)},t.Validator=x,t.ProtocolValidator=k})(lL);var Gb=qM.Tap,uL=iV,SC=lL,oV=Hb.Buffer;function sV(t,e){var n;if(typeof t=="string")try{n=JSON.parse(t)}catch{}return n===void 0&&(n=t),uL.createType(n,e)}Gb.prototype.readString=function(){var t=this.readLong(),e=this.pos,n=this.buf;if(this.pos+=t,!(this.pos>n.length))return this.buf.slice(e,e+t).toString()};Gb.prototype.writeString=function(t){var e=oV.byteLength(t);this.writeLong(e);var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,n)};Gb.prototype.writeBinary=function(t,e){var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,n,e,"binary")};var H1={parse:sV,types:uL.types,Validator:SC.Validator,ProtocolValidator:SC.ProtocolValidator};function lV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}class at{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Fo.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let r=[];return this.decompose(e,n,r,0),Fo.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new $h(this),o=new $h(e);for(let s=n,l=n;;){if(i.next(s),o.next(s),s=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(l+=i.value.length,i.done||l>=r)return!0}}iter(e=1){return new $h(this,e)}iterRange(e,n=this.length){return new fL(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new cL(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?at.empty:e.length<=32?new Jt(e):Fo.from(Jt.split(e,[]))}}class Jt extends at{constructor(e,n=aV(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let o=0;;o++){let s=this.text[o],l=i+s.length;if((n?r:l)>=e)return new uV(i,l,r,s);i=l+1,r++}}decompose(e,n,r,i){let o=e<=0&&n>=this.length?this:new Jt(kC(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let s=r.pop(),l=ym(o.text,s.text.slice(),0,o.length);if(l.length<=32)r.push(new Jt(l,s.length+o.length));else{let u=l.length>>1;r.push(new Jt(l.slice(0,u)),new Jt(l.slice(u)))}}else r.push(o)}replace(e,n,r){if(!(r instanceof Jt))return super.replace(e,n,r);let i=ym(this.text,ym(r.text,kC(this.text,0,e)),n),o=this.length+r.length-(n-e);return i.length<=32?new Jt(i,o):Fo.from(Jt.split(i,[]),o)}sliceString(e,n=this.length,r=`
`){let i="";for(let o=0,s=0;o<=n&&s<this.text.length;s++){let l=this.text[s],u=o+l.length;o>e&&s&&(i+=r),e<u&&n>o&&(i+=l.slice(Math.max(0,e-o),n-o)),o=u+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(n.push(new Jt(r,i)),r=[],i=-1);return i>-1&&n.push(new Jt(r,i)),n}}class Fo extends at{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let o=0;;o++){let s=this.children[o],l=i+s.length,u=r+s.lines-1;if((n?u:l)>=e)return s.lineInner(e,n,r,i);i=l+1,r=u+1}}decompose(e,n,r,i){for(let o=0,s=0;s<=n&&o<this.children.length;o++){let l=this.children[o],u=s+l.length;if(e<=u&&n>=s){let c=i&((s<=e?1:0)|(u>=n?2:0));s>=e&&u<=n&&!c?r.push(l):l.decompose(e-s,n-s,r,c)}s=u+1}}replace(e,n,r){if(r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],l=o+s.length;if(e>=o&&n<=l){let u=s.replace(e-o,n-o,r),c=this.lines-s.lines+u.lines;if(u.lines<c>>5-1&&u.lines>c>>5+1){let h=this.children.slice();return h[i]=u,new Fo(h,this.length-(n-e)+r.length)}return super.replace(o,l,u)}o=l+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){let i="";for(let o=0,s=0;o<this.children.length&&s<=n;o++){let l=this.children[o],u=s+l.length;s>e&&o&&(i+=r),e<u&&n>s&&(i+=l.sliceString(e-s,n-s,r)),s=u+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Fo))return 0;let r=0,[i,o,s,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==s||o==l)return r;let u=this.children[i],c=e.children[o];if(u!=c)return r+u.scanIdentical(c,n);r+=u.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let v of e)r+=v.lines;if(r<32){let v=[];for(let y of e)y.flatten(v);return new Jt(v,n)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,l=[],u=0,c=-1,h=[];function p(v){let y;if(v.lines>o&&v instanceof Fo)for(let A of v.children)p(A);else v.lines>s&&(u>s||!u)?(g(),l.push(v)):v instanceof Jt&&u&&(y=h[h.length-1])instanceof Jt&&v.lines+y.lines<=32?(u+=v.lines,c+=v.length+1,h[h.length-1]=new Jt(y.text.concat(v.text),y.length+1+v.length)):(u+v.lines>i&&g(),u+=v.lines,c+=v.length+1,h.push(v))}function g(){u!=0&&(l.push(h.length==1?h[0]:Fo.from(h,c)),c=-1,u=h.length=0)}for(let v of e)p(v);return g(),l.length==1?l[0]:new Fo(l,n)}}at.empty=new Jt([""],0);function aV(t){let e=-1;for(let n of t)e+=n.length+1;return e}function ym(t,e,n=0,r=1e9){for(let i=0,o=0,s=!0;o<t.length&&i<=r;o++){let l=t[o],u=i+l.length;u>=n&&(u>r&&(l=l.slice(0,r-i)),i<n&&(l=l.slice(n-i)),s?(e[e.length-1]+=l,s=!1):e.push(l)),i=u+1}return e}function kC(t,e,n){return ym(t,[""],e,n)}class $h{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Jt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],s=o>>1,l=i instanceof Jt?i.text.length:i.children.length;if(s==(n>0?l:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Jt){let u=i.text[s+(n<0?-1:0)];if(this.offsets[r]+=n,u.length>Math.max(0,e))return this.value=e==0?u:n>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[s+(n<0?-1:0)];e>u.length?(e-=u.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(u),this.offsets.push(n>0?1:(u instanceof Jt?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class fL{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new $h(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class cL{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(at.prototype[Symbol.iterator]=function(){return this.iter()},$h.prototype[Symbol.iterator]=fL.prototype[Symbol.iterator]=cL.prototype[Symbol.iterator]=function(){return this});class uV{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}let Mf="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Mf.length;t++)Mf[t]+=Mf[t-1];function fV(t){for(let e=1;e<Mf.length;e+=2)if(Mf[e]>t)return Mf[e-1]<=t;return!1}function EC(t){return t>=127462&&t<=127487}const CC=8205;function ii(t,e,n=!0,r=!0){return(n?hL:cV)(t,e,r)}function hL(t,e,n){if(e==t.length)return e;e&&dL(t.charCodeAt(e))&&pL(t.charCodeAt(e-1))&&e--;let r=An(t,e);for(e+=ti(r);e<t.length;){let i=An(t,e);if(r==CC||i==CC||n&&fV(i))e+=ti(i),r=i;else if(EC(i)){let o=0,s=e-2;for(;s>=0&&EC(An(t,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function cV(t,e,n){for(;e>0;){let r=hL(t,e-2,n);if(r<e)return r;e--}return 0}function dL(t){return t>=56320&&t<57344}function pL(t){return t>=55296&&t<56320}function An(t,e){let n=t.charCodeAt(e);if(!pL(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dL(r)?(n-55296<<10)+(r-56320)+65536:n}function Zb(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ti(t){return t<65536?1:2}const I_=/\r\n?|\n/;var pr=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(pr||(pr={}));class Jo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let o=this.sections[n++],s=this.sections[n++];s<0?(e(r,i,o),i+=o):i+=s,r+=o}}iterChangedRanges(e,n=!1){F_(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Jo(e)}composeDesc(e){return this.empty?e:e.empty?this:gL(this,e)}mapDesc(e,n=!1){return e.empty?this:z_(this,e,n)}mapPos(e,n=-1,r=pr.Simple){let i=0,o=0;for(let s=0;s<this.sections.length;){let l=this.sections[s++],u=this.sections[s++],c=i+l;if(u<0){if(c>e)return o+(e-i);o+=l}else{if(r!=pr.Simple&&c>=e&&(r==pr.TrackDel&&i<e&&c>e||r==pr.TrackBefore&&i<e||r==pr.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!l)return e==i||n<0?o:o+u;o+=u}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let o=this.sections[r++],s=this.sections[r++],l=i+o;if(s>=0&&i<=n&&l>=e)return i<e&&l>n?"cover":!0;i=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Jo(e)}static create(e){return new Jo(e)}}class sn extends Jo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return F_(this,(n,r,i,o,s)=>e=e.replace(i,i+(r-n),s),!1),e}mapDesc(e,n=!1){return z_(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,o=0;i<n.length;i+=2){let s=n[i],l=n[i+1];if(l>=0){n[i]=l,n[i+1]=s;let u=i>>1;for(;r.length<u;)r.push(at.empty);r.push(s?e.slice(o,o+s):at.empty)}o+=s}return new sn(n,r)}compose(e){return this.empty?e:e.empty?this:gL(this,e,!0)}map(e,n=!1){return e.empty?this:z_(this,e,n,!0)}iterChanges(e,n=!1){F_(this,e,n)}get desc(){return Jo.create(this.sections)}filter(e){let n=[],r=[],i=[],o=new gd(this);e:for(let s=0,l=0;;){let u=s==e.length?1e9:e[s++];for(;l<u||l==u&&o.len==0;){if(o.done)break e;let h=Math.min(o.len,u-l);Yn(i,h,-1);let p=o.ins==-1?-1:o.off==0?o.ins:0;Yn(n,h,p),p>0&&vl(r,n,o.text),o.forward(h),l+=h}let c=e[s++];for(;l<c;){if(o.done)break e;let h=Math.min(o.len,c-l);Yn(n,h,-1),Yn(i,h,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(h),l+=h}}return{changes:new sn(n,r),filtered:Jo.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],o=[],s=0,l=null;function u(h=!1){if(!h&&!i.length)return;s<n&&Yn(i,n-s,-1);let p=new sn(i,o);l=l?l.compose(p.map(l)):p,i=[],o=[],s=0}function c(h){if(Array.isArray(h))for(let p of h)c(p);else if(h instanceof sn){if(h.length!=n)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${n})`);u(),l=l?l.compose(h.map(l)):h}else{let{from:p,to:g=p,insert:v}=h;if(p>g||p<0||g>n)throw new RangeError(`Invalid change range ${p} to ${g} (in doc of length ${n})`);let y=v?typeof v=="string"?at.of(v.split(r||I_)):v:at.empty,A=y.length;if(p==g&&A==0)return;p<s&&u(),p>s&&Yn(i,p-s,-1),Yn(i,g-p,A),vl(o,i,y),s=g}}return c(e),u(!l),l}static empty(e){return new sn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,l)=>l&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;r.length<i;)r.push(at.empty);r[i]=at.of(o.slice(1)),n.push(o[0],r[i].length)}}}return new sn(n,r)}static createSet(e,n){return new sn(e,n)}}function Yn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function vl(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(at.empty);t.push(n)}}function F_(t,e,n){let r=t.inserted;for(let i=0,o=0,s=0;s<t.sections.length;){let l=t.sections[s++],u=t.sections[s++];if(u<0)i+=l,o+=l;else{let c=i,h=o,p=at.empty;for(;c+=l,h+=u,u&&r&&(p=p.append(r[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)l=t.sections[s++],u=t.sections[s++];e(i,c,o,h,p),i=c,o=h}}}function z_(t,e,n,r=!1){let i=[],o=r?[]:null,s=new gd(t),l=new gd(e);for(let u=-1;;)if(s.ins==-1&&l.ins==-1){let c=Math.min(s.len,l.len);Yn(i,c,-1),s.forward(c),l.forward(c)}else if(l.ins>=0&&(s.ins<0||u==s.i||s.off==0&&(l.len<s.len||l.len==s.len&&!n))){let c=l.len;for(Yn(i,l.ins,-1);c;){let h=Math.min(s.len,c);s.ins>=0&&u<s.i&&s.len<=h&&(Yn(i,0,s.ins),o&&vl(o,i,s.text),u=s.i),s.forward(h),c-=h}l.next()}else if(s.ins>=0){let c=0,h=s.len;for(;h;)if(l.ins==-1){let p=Math.min(h,l.len);c+=p,h-=p,l.forward(p)}else if(l.ins==0&&l.len<h)h-=l.len,l.next();else break;Yn(i,c,u<s.i?s.ins:0),o&&u<s.i&&vl(o,i,s.text),u=s.i,s.forward(s.len-h)}else{if(s.done&&l.done)return o?sn.createSet(i,o):Jo.create(i);throw new Error("Mismatched change set lengths")}}function gL(t,e,n=!1){let r=[],i=n?[]:null,o=new gd(t),s=new gd(e);for(let l=!1;;){if(o.done&&s.done)return i?sn.createSet(r,i):Jo.create(r);if(o.ins==0)Yn(r,o.len,0,l),o.next();else if(s.len==0&&!s.done)Yn(r,0,s.ins,l),i&&vl(i,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let u=Math.min(o.len2,s.len),c=r.length;if(o.ins==-1){let h=s.ins==-1?-1:s.off?0:s.ins;Yn(r,u,h,l),i&&h&&vl(i,r,s.text)}else s.ins==-1?(Yn(r,o.off?0:o.len,u,l),i&&vl(i,r,o.textBit(u))):(Yn(r,o.off?0:o.len,s.off?0:s.ins,l),i&&!s.off&&vl(i,r,s.text));l=(o.ins>u||s.ins>=0&&s.len>u)&&(l||r.length>c),o.forward2(u),s.forward(u)}}}}class gd{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?at.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?at.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ka{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Ka(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return te.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return te.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return te.range(e.anchor,e.head)}static create(e,n,r){return new Ka(e,n,r)}}class te{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:te.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new te([this.main],0)}addRange(e,n=!0){return te.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,te.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new te(e.ranges.map(n=>Ka.fromJSON(n)),e.main)}static single(e,n=e){return new te([te.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return te.normalized(e.slice(),n);r=o.to}return new te(e,n)}static cursor(e,n=0,r,i){return Ka.create(e,e,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(i!=null?i:33554431)<<5)}static range(e,n,r){let i=(r!=null?r:33554431)<<5;return n<e?Ka.create(n,e,16|i|8):Ka.create(e,n,i|(n>e?4:0))}static normalized(e,n=0){let r=e[n];e.sort((i,o)=>i.from-o.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],s=e[i-1];if(o.empty?o.from<=s.to:o.from<s.to){let l=s.from,u=Math.max(o.to,s.to);i<=n&&n--,e.splice(--i,2,o.anchor>o.head?te.range(u,l):te.range(l,u))}}return new te(e,n)}}function mL(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Yb=0;class ge{constructor(e,n,r,i,o){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Yb++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new ge(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Qb),!!e.static,e.enables)}of(e){return new wm([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new wm(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new wm(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Qb(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class wm{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Yb++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,o=this.id,s=e[o]>>1,l=this.type==2,u=!1,c=!1,h=[];for(let p of this.dependencies)p=="doc"?u=!0:p=="selection"?c=!0:(((n=e[p.id])!==null&&n!==void 0?n:1)&1)==0&&h.push(e[p.id]);return{create(p){return p.values[s]=r(p),1},update(p,g){if(u&&g.docChanged||c&&(g.docChanged||g.selection)||$_(p,h)){let v=r(p);if(l?!AC(v,p.values[s],i):!i(v,p.values[s]))return p.values[s]=v,1}return 0},reconfigure:(p,g)=>{let v=r(p),y=g.config.address[o];if(y!=null){let A=c0(g,y);if(this.dependencies.every(O=>O instanceof ge?g.facet(O)===p.facet(O):O instanceof Fn?g.field(O,!1)==p.field(O,!1):!0)||(l?AC(v,A,i):i(v,A)))return p.values[s]=A,0}return p.values[s]=v,1}}}}function AC(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function $_(t,e){let n=!1;for(let r of e)Hh(t,r)&1&&(n=!0);return n}function hV(t,e,n){let r=n.map(u=>t[u.id]),i=n.map(u=>u.type),o=r.filter(u=>!(u&1)),s=t[e.id]>>1;function l(u){let c=[];for(let h=0;h<r.length;h++){let p=c0(u,r[h]);if(i[h]==2)for(let g of p)c.push(g);else c.push(p)}return e.combine(c)}return{create(u){for(let c of r)Hh(u,c);return u.values[s]=l(u),1},update(u,c){if(!$_(u,o))return 0;let h=l(u);return e.compare(h,u.values[s])?0:(u.values[s]=h,1)},reconfigure(u,c){let h=$_(u,r),p=c.config.facets[e.id],g=c.facet(e);if(p&&!h&&Qb(n,p))return u.values[s]=g,0;let v=l(u);return e.compare(v,g)?(u.values[s]=g,0):(u.values[s]=v,1)}}}const TC=ge.define({static:!0});class Fn{constructor(e,n,r,i,o){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let n=new Fn(Yb++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(TC).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let o=r.values[n],s=this.updateF(o,i);return this.compareF(o,s)?0:(r.values[n]=s,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,TC.of({field:this,create:e})]}get extension(){return this}}const za={lowest:4,low:3,default:2,high:1,highest:0};function ch(t){return e=>new vL(e,t)}const uc={highest:ch(za.highest),high:ch(za.high),default:ch(za.default),low:ch(za.low),lowest:ch(za.lowest)};class vL{constructor(e,n){this.inner=e,this.prec=n}}class yv{of(e){return new H_(this,e)}reconfigure(e){return yv.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class H_{constructor(e,n){this.compartment=e,this.inner=n}}class f0{constructor(e,n,r,i,o,s){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],o=Object.create(null),s=new Map;for(let g of dV(e,n,s))g instanceof Fn?i.push(g):(o[g.facet.id]||(o[g.facet.id]=[])).push(g);let l=Object.create(null),u=[],c=[];for(let g of i)l[g.id]=c.length<<1,c.push(v=>g.slot(v));let h=r==null?void 0:r.config.facets;for(let g in o){let v=o[g],y=v[0].facet,A=h&&h[g]||[];if(v.every(O=>O.type==0))if(l[y.id]=u.length<<1|1,Qb(A,v))u.push(r.facet(y));else{let O=y.combine(v.map(x=>x.value));u.push(r&&y.compare(O,r.facet(y))?r.facet(y):O)}else{for(let O of v)O.type==0?(l[O.id]=u.length<<1|1,u.push(O.value)):(l[O.id]=c.length<<1,c.push(x=>O.dynamicSlot(x)));l[y.id]=c.length<<1,c.push(O=>hV(O,y,v))}}let p=c.map(g=>g(l));return new f0(e,s,p,l,u,o)}}function dV(t,e,n){let r=[[],[],[],[],[]],i=new Map;function o(s,l){let u=i.get(s);if(u!=null){if(u<=l)return;let c=r[u].indexOf(s);c>-1&&r[u].splice(c,1),s instanceof H_&&n.delete(s.compartment)}if(i.set(s,l),Array.isArray(s))for(let c of s)o(c,l);else if(s instanceof H_){if(n.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(s.compartment)||s.inner;n.set(s.compartment,c),o(c,l)}else if(s instanceof vL)o(s.inner,s.prec);else if(s instanceof Fn)r[l].push(s),s.provides&&o(s.provides,l);else if(s instanceof wm)r[l].push(s),s.facet.extensions&&o(s.facet.extensions,za.default);else{let c=s.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,l)}}return o(t,za.default),r.reduce((s,l)=>s.concat(l))}function Hh(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function c0(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const yL=ge.define(),wL=ge.define({combine:t=>t.some(e=>e),static:!0}),_L=ge.define({combine:t=>t.length?t[0]:void 0,static:!0}),xL=ge.define(),bL=ge.define(),SL=ge.define(),kL=ge.define({combine:t=>t.length?t[0]:!1});class wu{constructor(e,n){this.type=e,this.value=n}static define(){return new pV}}class pV{of(e){return new wu(this,e)}}class gV{constructor(e){this.map=e}of(e){return new Me(this,e)}}class Me{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Me(this.type,n)}is(e){return this.type==e}static define(e={}){return new gV(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(n);o&&r.push(o)}return r}}Me.reconfigure=Me.define();Me.appendConfig=Me.define();class un{constructor(e,n,r,i,o,s){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&mL(r,n.newLength),o.some(l=>l.type==un.time)||(this.annotations=o.concat(un.time.of(Date.now())))}static create(e,n,r,i,o,s){return new un(e,n,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(un.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}un.time=wu.define();un.userEvent=wu.define();un.addToHistory=wu.define();un.remote=wu.define();function mV(t,e){let n=[];for(let r=0,i=0;;){let o,s;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],s=t[r++];else if(i<e.length)o=e[i++],s=e[i++];else return n;!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function EL(t,e,n){var r;let i,o,s;return n?(i=e.changes,o=sn.empty(e.changes.length),s=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Me.mapEffects(t.effects,i).concat(Me.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function V_(t,e,n){let r=e.selection,i=Lf(e.annotations);return e.userEvent&&(i=i.concat(un.userEvent.of(e.userEvent))),{changes:e.changes instanceof sn?e.changes:sn.of(e.changes||[],n,t.facet(_L)),selection:r&&(r instanceof te?r:te.single(r.anchor,r.head)),effects:Lf(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function CL(t,e,n){let r=V_(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let s=!!e[o].sequential;r=EL(r,V_(t,e[o],s?r.changes.newLength:t.doc.length),s)}let i=un.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return yV(n?vV(i):i)}function vV(t){let e=t.startState,n=!0;for(let i of e.facet(xL)){let o=i(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:mV(n,o))}if(n!==!0){let i,o;if(n===!1)o=t.changes.invertedDesc,i=sn.empty(e.doc.length);else{let s=t.changes.filter(n);i=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}t=un.create(e,i,t.selection&&t.selection.map(o),Me.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let r=e.facet(bL);for(let i=r.length-1;i>=0;i--){let o=r[i](t);o instanceof un?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof un?t=o[0]:t=CL(e,Lf(o),!1)}return t}function yV(t){let e=t.startState,n=e.facet(SL),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=EL(t,V_(e,o,t.changes.newLength),!0))}return r==t?t:un.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const wV=[];function Lf(t){return t==null?wV:Array.isArray(t)?t:[t]}var gr=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(gr||(gr={}));const _V=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let U_;try{U_=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function xV(t){if(U_)return U_.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||_V.test(n)))return!0}return!1}function bV(t){return e=>{if(!/\S/.test(e))return gr.Space;if(xV(e))return gr.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return gr.Word;return gr.Other}}class Ge{constructor(e,n,r,i,o,s){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Hh(this,l<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Hh(this,r),c0(this,r)}update(...e){return CL(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let s of e.effects)s.is(yv.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,u)=>i.set(u,l)),n=null),i.set(s.value.compartment,s.value.extension)):s.is(Me.reconfigure)?(n=null,r=s.value):s.is(Me.appendConfig)&&(n=null,r=Lf(r).concat(s.value));let o;n?o=e.startState.values.slice():(n=f0.resolve(r,i,this),o=new Ge(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values),new Ge(n,e.newDoc,e.newSelection,o,(s,l)=>l.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:te.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),o=[r.range],s=Lf(r.effects);for(let l=1;l<n.ranges.length;l++){let u=e(n.ranges[l]),c=this.changes(u.changes),h=c.map(i);for(let g=0;g<l;g++)o[g]=o[g].map(h);let p=i.mapDesc(c,!0);o.push(u.range.map(p)),i=i.compose(h),s=Me.mapEffects(s,h).concat(Me.mapEffects(Lf(u.effects),p))}return{changes:i,selection:te.create(o,n.mainIndex),effects:s}}changes(e=[]){return e instanceof sn?e:sn.of(e,this.doc.length,this.facet(Ge.lineSeparator))}toText(e){return at.of(e.split(this.facet(Ge.lineSeparator)||I_))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Hh(this,n),c0(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Fn&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let s=r[o],l=e[o];i.push(s.init(u=>s.spec.fromJSON(l,u)))}}return Ge.create({doc:e.doc,selection:te.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=f0.resolve(e.extensions||[],new Map),r=e.doc instanceof at?e.doc:at.of((e.doc||"").split(n.staticFacet(Ge.lineSeparator)||I_)),i=e.selection?e.selection instanceof te?e.selection:te.single(e.selection.anchor,e.selection.head):te.single(0);return mL(i,r.length),n.staticFacet(wL)||(i=i.asSingle()),new Ge(n,r,i,n.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(Ge.tabSize)}get lineBreak(){return this.facet(Ge.lineSeparator)||`
`}get readOnly(){return this.facet(kL)}phrase(e,...n){for(let r of this.facet(Ge.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>n.length?r:n[o-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let o of this.facet(yL))for(let s of o(this,n,r))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return bV(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-r,l=e-r;for(;s>0;){let u=ii(n,s,!1);if(o(n.slice(u,s))!=gr.Word)break;s=u}for(;l<i;){let u=ii(n,l);if(o(n.slice(l,u))!=gr.Word)break;l=u}return s==l?null:te.range(s+r,l+r)}}Ge.allowMultipleSelections=wL;Ge.tabSize=ge.define({combine:t=>t.length?t[0]:4});Ge.lineSeparator=_L;Ge.readOnly=kL;Ge.phrases=ge.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Ge.languageData=yL;Ge.changeFilter=xL;Ge.transactionFilter=bL;Ge.transactionExtender=SL;yv.reconfigure=Me.define();function Vs(t,e,n={}){let r={};for(let i of t)for(let o of Object.keys(i)){let s=i[o],l=r[o];if(l===void 0)r[o]=s;else if(!(l===s||s===void 0))if(Object.hasOwnProperty.call(n,o))r[o]=n[o](l,s);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class lu{eq(e){return this==e}range(e,n=e){return md.create(e,n,this)}}lu.prototype.startSide=lu.prototype.endSide=0;lu.prototype.point=!1;lu.prototype.mapMode=pr.TrackDel;class md{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new md(e,n,r)}}function W_(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Xb{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let o=r?this.to:this.from;for(let s=i,l=o.length;;){if(s==l)return s;let u=s+l>>1,c=o[u]-e||(r?this.value[u].endSide:this.value[u].startSide)-n;if(u==s)return c>=0?s:l;c>=0?l=u:s=u+1}}between(e,n,r,i){for(let o=this.findIndex(n,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let r=[],i=[],o=[],s=-1,l=-1;for(let u=0;u<this.value.length;u++){let c=this.value[u],h=this.from[u]+e,p=this.to[u]+e,g,v;if(h==p){let y=n.mapPos(h,c.startSide,c.mapMode);if(y==null||(g=v=y,c.startSide!=c.endSide&&(v=n.mapPos(h,c.endSide),v<g)))continue}else if(g=n.mapPos(h,c.startSide),v=n.mapPos(p,c.endSide),g>v||g==v&&c.startSide>0&&c.endSide<=0)continue;(v-g||c.endSide-c.startSide)<0||(s<0&&(s=g),c.point&&(l=Math.max(l,v-g)),r.push(c),i.push(g-s),o.push(v-s))}return{mapped:r.length?new Xb(i,o,r,l):null,pos:s}}}class ut{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ut(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,s=e.filter;if(n.length==0&&!s)return this;if(r&&(n=n.slice().sort(W_)),this.isEmpty)return n.length?ut.of(n):this;let l=new AL(this,null,-1).goto(0),u=0,c=[],h=new Ul;for(;l.value||u<n.length;)if(u<n.length&&(l.from-n[u].from||l.startSide-n[u].value.startSide)>=0){let p=n[u++];h.addInner(p.from,p.to,p.value)||c.push(p)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(u==n.length||this.chunkEnd(l.chunkIndex)<n[u].from)&&(!s||i>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&h.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!s||i>l.to||o<l.from||s(l.from,l.to,l.value))&&(h.addInner(l.from,l.to,l.value)||c.push(md.create(l.from,l.to,l.value))),l.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?ut.empty:this.nextLayer.update({add:c,filter:s,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],u=this.chunk[s],c=e.touchesRange(l,l+u.length);if(c===!1)i=Math.max(i,u.maxPoint),n.push(u),r.push(e.mapPos(l));else if(c===!0){let{mapped:h,pos:p}=u.map(l,e);h&&(i=Math.max(i,h.maxPoint),n.push(h),r.push(p))}}let o=this.nextLayer.map(e);return n.length==0?o:new ut(r,n,o||ut.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i];if(n>=o&&e<=o+s.length&&s.between(o,e-o,n-o,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return vd.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return vd.from(e).goto(n)}static compare(e,n,r,i,o=-1){let s=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),l=n.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),u=OC(s,l,r),c=new hh(s,u,o),h=new hh(l,u,o);r.iterGaps((p,g,v)=>RC(c,p,h,g,v,i)),r.empty&&r.length==0&&RC(c,0,h,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=1e9);let o=e.filter(h=>!h.isEmpty&&n.indexOf(h)<0),s=n.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let l=OC(o,s),u=new hh(o,l,0).goto(r),c=new hh(s,l,0).goto(r);for(;;){if(u.to!=c.to||!j_(u.active,c.active)||u.point&&(!c.point||!u.point.eq(c.point)))return!1;if(u.to>i)return!0;u.next(),c.next()}}static spans(e,n,r,i,o=-1){let s=new hh(e,null,o).goto(n),l=n,u=s.openStart;for(;;){let c=Math.min(s.to,r);if(s.point?(i.point(l,c,s.point,s.activeForPoint(s.to),u,s.pointRank),u=s.openEnd(c)+(s.to>c?1:0)):c>l&&(i.span(l,c,s.active,u),u=s.openEnd(c)),s.to>r)break;l=s.to,s.next()}return u}static of(e,n=!1){let r=new Ul;for(let i of e instanceof md?[e]:n?SV(e):e)r.add(i.from,i.to,i.value);return r.finish()}}ut.empty=new ut([],[],null,-1);function SV(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(W_(e,r)>0)return t.slice().sort(W_);e=r}return t}ut.empty.nextLayer=ut.empty;class Ul{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Xb(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Ul)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ut.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ut.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function OC(t,e,n){let r=new Map;for(let o of t)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let i=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let l=r.get(o.chunk[s]);l!=null&&(n?n.mapPos(l):l)==o.chunkPos[s]&&!(n!=null&&n.touchesRange(l,l+o.chunk[s].length))&&i.add(o.chunk[s])}return i}class AL{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class vd{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&i.push(new AL(s,n,r,o));return i.length==1?i[0]:new vd(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)V1(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)V1(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),V1(this.heap,0)}}}function V1(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class hh{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=vd.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Bg(this.active,e),Bg(this.activeTo,e),Bg(this.activeRank,e),this.minActive=MC(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:o}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=o;)n++;Ig(this.active,n,r),Ig(this.activeTo,n,i),Ig(this.activeRank,n,o),e&&Ig(e,n,this.cursor.from),this.minActive=MC(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null,i=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),r&&Bg(r,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.from<e&&this.cursor.to>e&&i++,this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<e&&(i=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){let o=0;for(;o<r.length&&r[o]<e;)o++;this.openStart=o+i}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function RC(t,e,n,r,i,o){t.goto(e),n.goto(r);let s=r+i,l=r,u=r-e;for(;;){let c=t.to+u-n.to||t.endSide-n.endSide,h=c<0?t.to+u:n.to,p=Math.min(h,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&j_(t.activeForPoint(t.to+u),n.activeForPoint(n.to))||o.comparePoint(l,p,t.point,n.point):p>l&&!j_(t.active,n.active)&&o.compareRange(l,p,t.active,n.active),h>s)break;l=h,c<=0&&t.next(),c>=0&&n.next()}}function j_(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Bg(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Ig(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function MC(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Wd(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=ii(t,i));return r}function q_(t,e,n,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=t.charCodeAt(i)==9?n-o%n:1,i=ii(t,i)}return r===!0?-1:t.length}const J_="\u037C",LC=typeof Symbol>"u"?"__"+J_:Symbol.for(J_),K_=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),NC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Wl{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,l,u,c){let h=[],p=/^@(\w+)\b/.exec(s[0]),g=p&&p[1]=="keyframes";if(p&&l==null)return u.push(s[0]+";");for(let v in l){let y=l[v];if(/&/.test(v))o(v.split(/,\s*/).map(A=>s.map(O=>A.replace(/&/,O))).reduce((A,O)=>A.concat(O)),y,u);else if(y&&typeof y=="object"){if(!p)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(i(v),y,h,g)}else y!=null&&h.push(v.replace(/_.*/,"").replace(/[A-Z]/g,A=>"-"+A.toLowerCase())+": "+y+";")}(h.length||g)&&u.push((r&&!p&&!c?s.map(r):s).join(", ")+" {"+h.join(" ")+"}")}for(let s in e)o(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=NC[LC]||1;return NC[LC]=e+1,J_+e.toString(36)}static mount(e,n){(e[K_]||new kV(e)).mount(Array.isArray(n)?n:[n])}}let Fg=null;class kV{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Fg)return e.adoptedStyleSheets=[Fg.sheet].concat(e.adoptedStyleSheets),e[K_]=Fg;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Fg=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let n=e.head||e;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],e[K_]=this}mount(e){let n=this.sheet,r=0,i=0;for(let o=0;o<e.length;o++){let s=e[o],l=this.modules.indexOf(s);if(l<i&&l>-1&&(this.modules.splice(l,1),i--,l=-1),l==-1){if(this.modules.splice(i++,0,s),n)for(let u=0;u<s.rules.length;u++)n.insertRule(s.rules[u],r++)}else{for(;i<l;)r+=this.modules[i++].rules.length;r+=s.rules.length,i++}}if(!n){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}}var jl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},DC=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var EV=typeof navigator<"u"&&/Mac/.test(navigator.platform),CV=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),AV=EV||DC&&+DC[1]<57;for(var Tn=0;Tn<10;Tn++)jl[48+Tn]=jl[96+Tn]=String(Tn);for(var Tn=1;Tn<=24;Tn++)jl[Tn+111]="F"+Tn;for(var Tn=65;Tn<=90;Tn++)jl[Tn]=String.fromCharCode(Tn+32),qf[Tn]=String.fromCharCode(Tn);for(var U1 in jl)qf.hasOwnProperty(U1)||(qf[U1]=jl[U1]);function TV(t){var e=AV&&(t.ctrlKey||t.altKey||t.metaKey)||CV&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?qf:jl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function h0(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Jf(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function OV(){let t=document.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function _m(t,e){if(!e.anchorNode)return!1;try{return Jf(t,e.anchorNode)}catch{return!1}}function yd(t){return t.nodeType==3?Kf(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function d0(t,e,n,r){return n?PC(t,e,n,r,-1)||PC(t,e,n,r,1):!1}function p0(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function PC(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:wd(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=p0(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?wd(t):0}else return!1}}function wd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}const TL={left:0,right:0,top:0,bottom:0};function wv(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function RV(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function MV(t,e,n,r,i,o,s,l){let u=t.ownerDocument,c=u.defaultView;for(let h=t;h;)if(h.nodeType==1){let p,g=h==u.body;if(g)p=RV(c);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.parentNode;continue}let A=h.getBoundingClientRect();p={left:A.left,right:A.left+h.clientWidth,top:A.top,bottom:A.top+h.clientHeight}}let v=0,y=0;if(i=="nearest")e.top<p.top?(y=-(p.top-e.top+s),n>0&&e.bottom>p.bottom+y&&(y=e.bottom-p.bottom+y+s)):e.bottom>p.bottom&&(y=e.bottom-p.bottom+s,n<0&&e.top-y<p.top&&(y=-(p.top+y-e.top+s)));else{let A=e.bottom-e.top,O=p.bottom-p.top;y=(i=="center"&&A<=O?e.top+A/2-O/2:i=="start"||i=="center"&&n<0?e.top-s:e.bottom-O+s)-p.top}if(r=="nearest"?e.left<p.left?(v=-(p.left-e.left+o),n>0&&e.right>p.right+v&&(v=e.right-p.right+v+o)):e.right>p.right&&(v=e.right-p.right+o,n<0&&e.left<p.left+v&&(v=-(p.left+v-e.left+o))):v=(r=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:r=="start"==l?e.left-o:e.right-(p.right-p.left)+o)-p.left,v||y)if(g)c.scrollBy(v,y);else{if(y){let A=h.scrollTop;h.scrollTop+=y,y=h.scrollTop-A}if(v){let A=h.scrollLeft;h.scrollLeft+=v,v=h.scrollLeft-A}e={left:e.left-v,top:e.top-y,right:e.right-v,bottom:e.bottom-y}}if(g)break;h=h.assignedSlot||h.parentNode,r=i="nearest"}else if(h.nodeType==11)h=h.host;else break}class LV{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let tf=null;function OL(t){if(t.setActive)return t.setActive();if(tf)return t.focus(tf);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(tf==null?{get preventScroll(){return tf={preventScroll:!0},!0}}:void 0),!tf){tf=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],o=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let BC;function Kf(t,e,n=e){let r=BC||(BC=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Vh(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function NV(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function RL(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function DV(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(;;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=wd(n))}else{if(n==t)return!0;r=p0(n),n=n.parentNode}}class Rn{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Rn(e.parentNode,p0(e),n)}static after(e,n){return new Rn(e.parentNode,p0(e)+1,n)}}const eS=[];class Ot{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,n){return null}sync(e){if(this.dirty&2){let n=this.dom,r=null,i;for(let o of this.children){if(o.dirty){if(!o.dom&&(i=r?r.nextSibling:n.firstChild)){let s=Ot.get(i);(!s||!s.parent&&s.constructor==o.constructor)&&o.reuseDOM(i)}o.sync(e),o.dirty=0}if(i=r?r.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&i!=o.dom&&(e.written=!0),o.dom.parentNode==n)for(;i&&i!=o.dom;)i=IC(i);else n.insertBefore(o.dom,i);r=o.dom}for(i=r?r.nextSibling:n.firstChild,i&&e&&e.node==n&&(e.written=!0);i;)i=IC(i)}else if(this.dirty&1)for(let n of this.children)n.dirty&&(n.sync(e),n.dirty=0)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=wd(e)==0?0:n==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Ot.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let s=this.children[i];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,o=-1,s=-1,l=-1;for(let u=0,c=r,h=r;u<this.children.length;u++){let p=this.children[u],g=c+p.length;if(c<e&&g>n)return p.domBoundsAround(e,n,c);if(g>=e&&i==-1&&(i=u,o=c),c>n&&p.dom.parentNode==this.dom){s=u,l=h;break}h=g,c=g+p.breakAfter}return{from:o,to:l<0?r+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.dirty|=2),n.dirty&1)return;n.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=eS){this.markDirty();for(let i=e;i<n;i++){let o=this.children[i];o.parent==this&&o.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ML(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,n,r,i,o,s){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}Ot.prototype.breakAfter=0;function IC(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ML{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function LL(t,e,n,r,i,o,s,l,u){let{children:c}=t,h=c.length?c[e]:null,p=o.length?o[o.length-1]:null,g=p?p.breakAfter:s;if(!(e==r&&h&&!s&&!g&&o.length<2&&h.merge(n,i,o.length?p:null,n==0,l,u))){if(r<c.length){let v=c[r];v&&i<v.length?(e==r&&(v=v.split(i),i=0),!g&&p&&v.merge(0,i,p,!0,0,u)?o[o.length-1]=v:(i&&v.merge(0,i,null,!1,0,u),o.push(v))):v!=null&&v.breakAfter&&(p?p.breakAfter=1:s=1),r++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,l,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(n,h.length,null,!1,l,0),e++));e<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),u=o.length?0:l;else if(c[e].become(o[0]))e++,o.shift(),l=o.length?0:u;else break;!o.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,l,u)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function NL(t,e,n,r,i,o){let s=t.childCursor(),{i:l,off:u}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),p=e-n;for(let g of r)p+=g.length;t.length+=p,LL(t,c,h,l,u,r,0,i,o)}let ni=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},G_=typeof document<"u"?document:{documentElement:{style:{}}};const Z_=/Edge\/(\d+)/.exec(ni.userAgent),DL=/MSIE \d/.test(ni.userAgent),Y_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ni.userAgent),_v=!!(DL||Y_||Z_),FC=!_v&&/gecko\/(\d+)/i.test(ni.userAgent),W1=!_v&&/Chrome\/(\d+)/.exec(ni.userAgent),zC="webkitFontSmoothing"in G_.documentElement.style,PL=!_v&&/Apple Computer/.test(ni.vendor),$C=PL&&(/Mobile\/\w+/.test(ni.userAgent)||ni.maxTouchPoints>2);var pe={mac:$C||/Mac/.test(ni.platform),windows:/Win/.test(ni.platform),linux:/Linux|X11/.test(ni.platform),ie:_v,ie_version:DL?G_.documentMode||6:Y_?+Y_[1]:Z_?+Z_[1]:0,gecko:FC,gecko_version:FC?+(/Firefox\/(\d+)/.exec(ni.userAgent)||[0,0])[1]:0,chrome:!!W1,chrome_version:W1?+W1[1]:0,ios:$C,android:/Android\b/.test(ni.userAgent),webkit:zC,safari:PL,webkit_version:zC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:G_.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const PV=256;class ql extends Ot{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return r&&(!(r instanceof ql)||this.length-(n-e)+r.length>PV)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new ql(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Rn(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Q_(this.dom,e,n)}}class Zo extends Ot{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(RL(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,n,r,i,o,s){return r&&(!(r instanceof Zo&&r.mark.eq(this.mark))||e&&o<=0||n<this.length&&s<=0)?!1:(NL(this,e,n,r?r.children:[],o-1,s-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,o=0;for(let l of this.children){let u=r+l.length;u>e&&n.push(r<e?l.split(e-r):l),i<0&&r>=e&&(i=o),r=u,o++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Zo(this.mark,n,s)}domAtPos(e){return FL(this.dom,this.children,e)}coordsAt(e,n){return $L(this,e,n)}}function Q_(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;e==0&&n<0||e==r&&n>=0?pe.chrome||pe.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let l=Kf(t,i,o).getClientRects();if(!l.length)return TL;let u=l[(s?s<0:n>=0)?0:l.length-1];return pe.safari&&!s&&u.width==0&&(u=Array.prototype.find.call(l,c=>c.width)||u),s?wv(u,s<0):u||null}class yl extends Ot{constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}static create(e,n,r){return new(e.customView||yl)(e,n,r)}split(e){let n=yl.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,r,i,o,s){return r&&(!(r instanceof yl)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e.length==this.length&&e instanceof yl&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return at.empty;let e=this;for(;e.parent;)e=e.parent;let n=e.editorView,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):at.empty}domAtPos(e){return e==0?Rn.before(this.dom):Rn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.dom.getClientRects(),i=null;if(!r.length)return TL;for(let o=e>0?r.length-1:0;i=r[o],!(e>0?o==0:o==r.length-1||i.top<i.bottom);o+=e>0?-1:1);return e==0&&n>0||e==this.length&&n<=0?i:wv(i,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class BL extends yl{domAtPos(e){let{topView:n,text:r}=this.widget;return n?X_(e,0,n,r,(i,o)=>i.domAtPos(o),i=>new Rn(r,Math.min(i,r.nodeValue.length))):new Rn(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,n){let{topView:r,text:i}=this.widget;return r?IL(e,n,r,i):Math.min(n,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,n){let{topView:r,text:i}=this.widget;return r?X_(e,n,r,i,(o,s,l)=>o.coordsAt(s,l),(o,s)=>Q_(i,o,s)):Q_(i,e,n)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function X_(t,e,n,r,i,o){if(n instanceof Zo){for(let s of n.children){let l=Jf(s.dom,r),u=l?r.nodeValue.length:s.length;if(t<u||t==u&&s.getSide()<=0)return l?X_(t,e,s,r,i,o):i(s,t,e);t-=u}return i(n,n.length,-1)}else return n.dom==r?o(t,e):i(n,t,e)}function IL(t,e,n,r){if(n instanceof Zo)for(let i of n.children){let o=0,s=Jf(i.dom,r);if(Jf(i.dom,t))return o+(s?IL(t,e,i,r):i.localPosFromDOM(t,e));o+=s?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(e,r.nodeValue.length);return n.localPosFromDOM(t,e)}class Gf extends Ot{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Gf&&e.side==this.side}split(){return new Gf(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Rn.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let n=this.dom.getBoundingClientRect(),r=BV(this,this.side>0?-1:1);return r&&r.top<n.bottom&&r.bottom>n.top?{left:n.left,right:n.right,top:r.top,bottom:r.bottom}:n}get overrideDOMText(){return at.empty}}ql.prototype.children=yl.prototype.children=Gf.prototype.children=eS;function BV(t,e){let n=t.parent,r=n?n.children.indexOf(t):-1;for(;n&&r>=0;)if(e<0?r>0:r<n.children.length){let i=n.children[r+e];if(i instanceof ql){let o=i.coordsAt(e<0?i.length:0,e);if(o)return o}r+=e}else if(n instanceof Zo&&n.parent)r=n.parent.children.indexOf(n)+(e<0?0:1),n=n.parent;else{let i=n.dom.lastChild;if(i&&i.nodeName=="BR")return i.getClientRects()[0];break}}function FL(t,e,n){let r=0;for(let i=0;r<e.length;r++){let o=e[r],s=i+o.length;if(!(s==i&&o.getSide()<=0)){if(n>i&&n<s&&o.dom.parentNode==t)return o.domAtPos(n-i);if(n<=i)break;i=s}}for(;r>0;r--){let i=e[r-1].dom;if(i.parentNode==t)return Rn.after(i)}return new Rn(t,0)}function zL(t,e,n){let r,{children:i}=t;n>0&&e instanceof Zo&&i.length&&(r=i[i.length-1])instanceof Zo&&r.mark.eq(e.mark)?zL(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function $L(t,e,n){for(let o=0,s=0;s<t.children.length;s++){let l=t.children[s],u=o+l.length,c;if((n<=0||u==t.length||l.getSide()>0?u>=e:u>e)&&(e<u||s+1==t.children.length||(c=t.children[s+1]).length||c.getSide()>0)){let h=0;if(u==o){if(l.getSide()<=0)continue;h=n=-l.getSide()}let p=l.coordsAt(Math.max(0,e-o),n);return h&&p?wv(p,n<0):p}o=u}let r=t.dom.lastChild;if(!r)return t.dom.getBoundingClientRect();let i=yd(r);return i[i.length-1]||null}function ex(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}function tS(t,e){if(t==e)return!0;if(!t||!e)return!1;let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i of n)if(r.indexOf(i)==-1||t[i]!==e[i])return!1;return!0}function tx(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}class Us{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var wt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(wt||(wt={}));class me extends lu{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new xv(e)}static widget(e){let n=e.side||0,r=!!e.block;return n+=r?n>0?3e8:-4e8:n>0?1e8:-1e8,new au(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:s}=HL(e,n);r=(o?n?-3e8:-1:5e8)-1,i=(s?n?2e8:1:-6e8)+1}return new au(e,r,i,n,e.widget||null,!0)}static line(e){return new jd(e)}static set(e,n=!1){return ut.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}me.none=ut.empty;class xv extends me{constructor(e){let{start:n,end:r}=HL(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof xv&&this.tagName==e.tagName&&this.class==e.class&&tS(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}xv.prototype.point=!1;class jd extends me{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof jd&&tS(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}jd.prototype.mapMode=pr.TrackBefore;jd.prototype.point=!0;class au extends me{constructor(e,n,r,i,o,s){super(n,r,o,e),this.block=i,this.isReplace=s,this.mapMode=i?n<=0?pr.TrackBefore:pr.TrackAfter:pr.TrackDel}get type(){return this.startSide<this.endSide?wt.WidgetRange:this.startSide<=0?wt.WidgetBefore:wt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof au&&IV(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}au.prototype.point=!0;function HL(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n!=null?n:e,end:r!=null?r:e}}function IV(t,e){return t==e||!!(t&&e&&t.compare(e))}function nx(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class mr extends Ot{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,o,s){if(r){if(!(r instanceof mr))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),NL(this,e,n,r?r.children:[],o,s),!0}split(e){let n=new mr;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)n.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){tS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){zL(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=ex(n,this.attrs||{})),r&&(this.attrs=ex({class:r},this.attrs||{}))}domAtPos(e){return FL(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var n;this.dom?this.dirty&4&&(RL(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(tx(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let r=this.dom.lastChild;for(;r&&Ot.get(r)instanceof Zo;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((n=Ot.get(r))===null||n===void 0?void 0:n.isEditable)==!1&&(!pe.ios||!this.children.some(i=>i instanceof ql))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let n of this.children){if(!(n instanceof ql)||/[^ -~]/.test(n.text))return null;let r=yd(n.dom);if(r.length!=1)return null;e+=r[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,n){return $L(this,e,n)}become(e){return!1}get type(){return wt.Text}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],s=i+o.length;if(s>=n){if(o instanceof mr)return o;if(s>n)break}i=s+o.breakAfter}return null}}class eu extends Ot{constructor(e,n,r){super(),this.widget=e,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,o,s){return r&&(!(r instanceof eu)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Rn.before(this.dom):Rn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new eu(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return eS}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):at.empty}domBoundsAround(){return null}become(e){return e instanceof eu&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nS{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof eu&&e.type==wt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new mr),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(zg(new Gf(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(0,r)),this.getLine().append(zg(new ql(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof au){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(r instanceof au)if(r.block){let{type:u}=r;u==wt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new eu(r.widget||new HC("div"),l,u))}else{let u=yl.create(r.widget||new HC("span"),l,r.startSide),c=this.atCursorPos&&!u.isEditable&&o<=i.length&&(e<n||r.startSide>0),h=!u.isEditable&&(e<n||r.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(p.append(zg(new Gf(1),i),o),o=i.length+Math.max(0,o-i.length)),p.append(zg(u,i),o),this.atCursorPos=h,this.pendingBuffer=h?e<n?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=o)}static build(e,n,r,i,o){let s=new nS(e,n,r,o);return s.openEnd=ut.spans(i,n,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function zg(t,e){for(let n of e)t=new Zo(n,[t],t.length);return t}class HC extends Us{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const VL=ge.define(),UL=ge.define(),WL=ge.define(),jL=ge.define(),rx=ge.define(),qL=ge.define(),JL=ge.define({combine:t=>t.some(e=>e)});class g0{constructor(e,n="nearest",r="nearest",i=5,o=5){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o}map(e){return e.empty?this:new g0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const VC=Me.define({map:(t,e)=>t.map(e)});function li(t,e,n){let r=t.facet(jL);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const bv=ge.define({combine:t=>t.length?t[0]:!0});let FV=0;const xh=ge.define();class Zt{constructor(e,n,r,i){this.id=e,this.create=n,this.domEventHandlers=r,this.extension=i(this)}static define(e,n){const{eventHandlers:r,provide:i,decorations:o}=n||{};return new Zt(FV++,e,r,s=>{let l=[xh.of(s)];return o&&l.push(_d.of(u=>{let c=u.plugin(s);return c?o(c):me.none})),i&&l.push(i(s)),l})}static fromClass(e,n){return Zt.define(r=>new e(r),n)}}class j1{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(li(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){li(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){li(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const KL=ge.define(),GL=ge.define(),_d=ge.define(),ZL=ge.define(),YL=ge.define(),bh=ge.define();class Rs{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Rs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,o=0,s=0,l=0;;i++){let u=i==e.length?null:e[i],c=s-l,h=u?u.fromB:1e9;for(;o<n.length&&n[o]<h;){let p=n[o],g=n[o+1],v=Math.max(l,p),y=Math.min(h,g);if(v<=y&&new Rs(v+c,y+c,v,y).addToSet(r),g>h)break;o+=2}if(!u)return r;new Rs(u.fromA,u.toA,u.fromB,u.toB).addToSet(r),s=u.toA,l=u.toB}}}class m0{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=sn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,u,c)=>i.push(new Rs(s,l,u,c))),this.changedRanges=i;let o=e.hasFocus;o!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=o,this.flags|=1)}static create(e,n,r){return new m0(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Dt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Dt||(Dt={}));const ix=Dt.LTR,zV=Dt.RTL;function QL(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const $V=QL("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),HV=QL("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ox=Object.create(null),Ao=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);ox[e]=n,ox[n]=-e}function VV(t){return t<=247?$V[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?HV[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203||t==8204?256:1}const UV=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Nf{constructor(e,n,r){this.from=e,this.to=n,this.level=r}get dir(){return this.level%2?zV:ix}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,r,i){let o=-1;for(let s=0;s<e.length;s++){let l=e[s];if(l.from<=n&&l.to>=n){if(l.level==r)return s;(o<0||(i!=0?i<0?l.from<n:l.to>n:e[o].level>l.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}const Lt=[];function WV(t,e){let n=t.length,r=e==ix?1:2,i=e==ix?2:1;if(!t||r==1&&!UV.test(t))return XL(n);for(let s=0,l=r,u=r;s<n;s++){let c=VV(t.charCodeAt(s));c==512?c=l:c==8&&u==4&&(c=16),Lt[s]=c==4?2:c,c&7&&(u=c),l=c}for(let s=0,l=r,u=r;s<n;s++){let c=Lt[s];if(c==128)s<n-1&&l==Lt[s+1]&&l&24?c=Lt[s]=l:Lt[s]=256;else if(c==64){let h=s+1;for(;h<n&&Lt[h]==64;)h++;let p=s&&l==8||h<n&&Lt[h]==8?u==1?1:8:256;for(let g=s;g<h;g++)Lt[g]=p;s=h-1}else c==8&&u==1&&(Lt[s]=1);l=c,c&7&&(u=c)}for(let s=0,l=0,u=0,c,h,p;s<n;s++)if(h=ox[c=t.charCodeAt(s)])if(h<0){for(let g=l-3;g>=0;g-=3)if(Ao[g+1]==-h){let v=Ao[g+2],y=v&2?r:v&4?v&1?i:r:0;y&&(Lt[s]=Lt[Ao[g]]=y),l=g;break}}else{if(Ao.length==189)break;Ao[l++]=s,Ao[l++]=c,Ao[l++]=u}else if((p=Lt[s])==2||p==1){let g=p==r;u=g?0:1;for(let v=l-3;v>=0;v-=3){let y=Ao[v+2];if(y&2)break;if(g)Ao[v+2]|=2;else{if(y&4)break;Ao[v+2]|=4}}}for(let s=0;s<n;s++)if(Lt[s]==256){let l=s+1;for(;l<n&&Lt[l]==256;)l++;let u=(s?Lt[s-1]:r)==1,c=(l<n?Lt[l]:r)==1,h=u==c?u?1:2:r;for(let p=s;p<l;p++)Lt[p]=h;s=l-1}let o=[];if(r==1)for(let s=0;s<n;){let l=s,u=Lt[s++]!=1;for(;s<n&&u==(Lt[s]!=1);)s++;if(u)for(let c=s;c>l;){let h=c,p=Lt[--c]!=2;for(;c>l&&p==(Lt[c-1]!=2);)c--;o.push(new Nf(c,h,p?2:1))}else o.push(new Nf(l,s,0))}else for(let s=0;s<n;){let l=s,u=Lt[s++]==2;for(;s<n&&u==(Lt[s]==2);)s++;o.push(new Nf(l,s,u?1:2))}return o}function XL(t){return[new Nf(0,t,0)]}let e3="";function jV(t,e,n,r,i){var o;let s=r.head-t.from,l=-1;if(s==0){if(!i||!t.length)return null;e[0].level!=n&&(s=e[0].side(!1,n),l=0)}else if(s==t.length){if(i)return null;let g=e[e.length-1];g.level!=n&&(s=g.side(!0,n),l=e.length-1)}l<0&&(l=Nf.find(e,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc));let u=e[l];s==u.side(i,n)&&(u=e[l+=i?1:-1],s=u.side(!i,n));let c=i==(u.dir==n),h=ii(t.text,s,c);if(e3=t.text.slice(Math.min(s,h),Math.max(s,h)),h!=u.side(i,n))return te.cursor(h+t.from,c?-1:1,u.level);let p=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return!p&&u.level!=n?te.cursor(i?t.to:t.from,i?-1:1,n):p&&p.level<u.level?te.cursor(p.side(!i,n)+t.from,i?1:-1,p.level):te.cursor(h+t.from,i?-1:1,u.level)}const wl="\uFFFF";class t3{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Ge.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=wl}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let o=i.nextSibling;if(o==n)break;let s=Ot.get(i),l=Ot.get(o);(s&&l?s.breakAfter:(s?s.breakAfter:UC(i))||UC(o)&&(i.nodeName!="BR"||i.cmIgnore))&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,l;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(l=i.exec(n))&&(o=l.index,s=l[0].length),this.append(n.slice(r,o<0?n.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let n=Ot.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function UC(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class WC{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class jC extends Ot{constructor(e){super(),this.view=e,this.compositionDeco=me.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new mr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Rs(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:s,toA:l})=>l<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=me.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=JV(this.view,e.changes)),(pe.ie||pe.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,i=this.updateDeco(),o=YV(r,i,e.changes);return n=Rs.extendWithRanges(n,o),this.dirty==0&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=pe.chrome||pe.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof eu&&o.widget instanceof qC&&i.push(o.dom);r.updateGaps(i)}updateChildren(e,n){let r=this.childCursor(n);for(let i=e.length-1;;i--){let o=i>=0?e[i]:null;if(!o)break;let{fromA:s,toA:l,fromB:u,toB:c}=o,{content:h,breakAtStart:p,openStart:g,openEnd:v}=nS.build(this.view.state.doc,u,c,this.decorations,this.dynamicDecorationMap),{i:y,off:A}=r.findPos(l,1),{i:O,off:x}=r.findPos(s,-1);LL(this,O,x,y,A,h,p,g,v)}}updateSelection(e=!1,n=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(n||this.mayControlSelection())||pe.ios&&this.view.inputState.rapidCompositionStart)return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,o=this.domAtPos(i.anchor),s=i.empty?o:this.domAtPos(i.head);if(pe.gecko&&i.empty&&qV(o)){let u=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(u,o.node.childNodes[o.offset]||null)),o=s=new Rn(u,0),r=!0}let l=this.view.observer.selectionRange;(r||!l.focusNode||!d0(o.node,o.offset,l.anchorNode,l.anchorOffset)||!d0(s.node,s.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{pe.android&&pe.chrome&&this.dom.contains(l.focusNode)&&QV(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=h0(this.view.root);if(u)if(i.empty){if(pe.gecko){let c=GV(o.node,o.offset);if(c&&c!=3){let h=r3(o.node,o.offset,c==1?1:-1);h&&(o=new Rn(h,c==1?0:h.nodeValue.length))}}u.collapse(o.node,o.offset),i.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=i.bidiLevel)}else if(u.extend)u.collapse(o.node,o.offset),u.extend(s.node,s.offset);else{let c=document.createRange();i.anchor>i.head&&([o,s]=[s,o]),c.setEnd(s.node,s.offset),c.setStart(o.node,o.offset),u.removeAllRanges(),u.addRange(c)}}),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new Rn(l.anchorNode,l.anchorOffset),this.impreciseHead=s.precise?null:new Rn(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,n=h0(this.view.root);if(!n||!e.empty||!e.assoc||!n.modify)return;let r=mr.find(this,e.head);if(!r)return;let i=r.posAtStart;if(e.head==i||e.head==i+r.length)return;let o=this.coordsAt(e.head,-1),s=this.coordsAt(e.head,1);if(!o||!s||o.bottom>s.top)return;let l=this.domAtPos(e.head+e.assoc);n.collapse(l.node,l.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||_m(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let n=e;n;){let r=Ot.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof mr)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){for(let r=this.length,i=this.children.length-1;;i--){let o=this.children[i],s=r-o.breakAfter-o.length;if(e>s||e==s&&o.type!=wt.WidgetBefore&&o.type!=wt.WidgetAfter&&(!i||n==2||this.children[i-1].breakAfter||this.children[i-1].type==wt.WidgetBefore&&n>-2))return o.coordsAt(e-s,n);r=s}}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,u=this.view.textDirection==Dt.LTR;for(let c=0,h=0;h<this.children.length;h++){let p=this.children[h],g=c+p.length;if(g>i)break;if(c>=r){let v=p.dom.getBoundingClientRect();if(n.push(v.height),s){let y=p.dom.lastChild,A=y?yd(y):[];if(A.length){let O=A[A.length-1],x=u?O.right-v.left:v.right-O.left;x>l&&(l=x,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=g)}}}c=g+p.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Dt.RTL:Dt.LTR}measureTextSize(){for(let i of this.children)if(i instanceof mr){let o=i.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=yd(e.firstChild)[0];n=e.getBoundingClientRect().height,r=i?i.width/27:7,e.remove()}),{lineHeight:n,charWidth:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ML(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let o=i==n.viewports.length?null:n.viewports[i],s=o?o.from-1:this.length;if(s>r){let l=n.lineBlockAt(s).bottom-n.lineBlockAt(r).top;e.push(me.replace({widget:new qC(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return me.set(e)}updateDeco(){let e=this.view.state.facet(_d).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=0,s=0,l=0,u=0;for(let h of this.view.state.facet(YL).map(p=>p(this.view)))if(h){let{left:p,right:g,top:v,bottom:y}=h;p!=null&&(o=Math.max(o,p)),g!=null&&(s=Math.max(s,g)),v!=null&&(l=Math.max(l,v)),y!=null&&(u=Math.max(u,y))}let c={left:r.left-o,top:r.top-l,right:r.right+s,bottom:r.bottom+u};MV(this.view.scrollDOM,c,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Dt.LTR)}}function qV(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class qC extends Us{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function n3(t){let e=t.observer.selectionRange,n=e.focusNode&&r3(e.focusNode,e.focusOffset,0);if(!n)return null;let r=t.docView.nearest(n);if(!r)return null;if(r instanceof mr){let i=n;for(;i.parentNode!=r.dom;)i=i.parentNode;let o=i.previousSibling;for(;o&&!Ot.get(o);)o=o.previousSibling;let s=o?Ot.get(o).posAtEnd:r.posAtStart;return{from:s,to:s,node:i,text:n}}else{for(;;){let{parent:o}=r;if(!o)return null;if(o instanceof mr)break;r=o}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:n}}}function JV(t,e){let n=n3(t);if(!n)return me.none;let{from:r,to:i,node:o,text:s}=n,l=e.mapPos(r,1),u=Math.max(l,e.mapPos(i,-1)),{state:c}=t,h=o.nodeType==3?o.nodeValue:new t3([],c).readRange(o.firstChild,null).text;if(u-l<h.length)if(c.doc.sliceString(l,Math.min(c.doc.length,l+h.length),wl)==h)u=l+h.length;else if(c.doc.sliceString(Math.max(0,u-h.length),u,wl)==h)l=u-h.length;else return me.none;else if(c.doc.sliceString(l,u,wl)!=h)return me.none;let p=Ot.get(o);return p instanceof BL?p=p.widget.topView:p&&(p.parent=null),me.set(me.replace({widget:new KV(o,s,p),inclusive:!0}).range(l,u))}class KV extends Us{constructor(e,n,r){super(),this.top=e,this.text=n,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return BL}}function r3(t,e,n){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0&&n<=0)t=t.childNodes[e-1],e=wd(t);else if(t.nodeType==1&&e<t.childNodes.length&&n>=0)t=t.childNodes[e],e=0;else return null}}function GV(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class ZV{constructor(){this.changes=[]}compareRange(e,n){nx(e,n,this.changes)}comparePoint(e,n){nx(e,n,this.changes)}}function YV(t,e,n){let r=new ZV;return ut.compare(t,e,n,r),r.changes}function QV(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function XV(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return te.cursor(e);o==0?n=1:o==i.length&&(n=-1);let s=o,l=o;n<0?s=ii(i.text,o,!1):l=ii(i.text,o);let u=r(i.text.slice(s,l));for(;s>0;){let c=ii(i.text,s,!1);if(r(i.text.slice(c,s))!=u)break;s=c}for(;l<i.length;){let c=ii(i.text,l);if(r(i.text.slice(l,c))!=u)break;l=c}return te.range(s+i.from,l+i.from)}function e7(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function t7(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function q1(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function JC(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function KC(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function sx(t,e,n){let r,i,o,s,l=!1,u,c,h,p;for(let y=t.firstChild;y;y=y.nextSibling){let A=yd(y);for(let O=0;O<A.length;O++){let x=A[O];i&&q1(i,x)&&(x=JC(KC(x,i.bottom),i.top));let k=e7(e,x),b=t7(n,x);if(k==0&&b==0)return y.nodeType==3?GC(y,e,n):sx(y,e,n);(!r||s>b||s==b&&o>k)&&(r=y,i=x,o=k,s=b,l=!k||(k>0?O<A.length-1:O>0)),k==0?n>x.bottom&&(!h||h.bottom<x.bottom)?(u=y,h=x):n<x.top&&(!p||p.top>x.top)&&(c=y,p=x):h&&q1(h,x)?h=KC(h,x.bottom):p&&q1(p,x)&&(p=JC(p,x.top))}}if(h&&h.bottom>=n?(r=u,i=h):p&&p.top<=n&&(r=c,i=p),!r)return{node:t,offset:0};let g=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return GC(r,g,n);if(l&&r.contentEditable!="false")return sx(r,g,n);let v=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:v}}function GC(t,e,n){let r=t.nodeValue.length,i=-1,o=1e9,s=0;for(let l=0;l<r;l++){let u=Kf(t,l,l+1).getClientRects();for(let c=0;c<u.length;c++){let h=u[c];if(h.top==h.bottom)continue;s||(s=e-h.left);let p=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&p<o){let g=e>=(h.left+h.right)/2,v=g;if((pe.chrome||pe.gecko)&&Kf(t,l).getBoundingClientRect().left==h.right&&(v=!g),p<=0)return{node:t,offset:l+(v?1:0)};i=l+(v?1:0),o=p}}}return{node:t,offset:i>-1?i:s>0?t.nodeValue.length:0}}function i3(t,{x:e,y:n},r,i=-1){var o;let s=t.contentDOM.getBoundingClientRect(),l=s.top+t.viewState.paddingTop,u,{docHeight:c}=t.viewState,h=n-l;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let x=t.defaultLineHeight/2,k=!1;u=t.elementAtHeight(h),u.type!=wt.Text;)for(;h=i>0?u.bottom+x:u.top-x,!(h>=0&&h<=c);){if(k)return r?null:0;k=!0,i=-i}n=l+h;let p=u.from;if(p<t.viewport.from)return t.viewport.from==0?0:r?null:ZC(t,s,u,e,n);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:r?null:ZC(t,s,u,e,n);let g=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:g,y=v.elementFromPoint(e,n);y&&!t.contentDOM.contains(y)&&(y=null),y||(e=Math.max(s.left+1,Math.min(s.right-1,e)),y=v.elementFromPoint(e,n),y&&!t.contentDOM.contains(y)&&(y=null));let A,O=-1;if(y&&((o=t.docView.nearest(y))===null||o===void 0?void 0:o.isEditable)!=!1){if(g.caretPositionFromPoint){let x=g.caretPositionFromPoint(e,n);x&&({offsetNode:A,offset:O}=x)}else if(g.caretRangeFromPoint){let x=g.caretRangeFromPoint(e,n);x&&({startContainer:A,startOffset:O}=x,(!t.contentDOM.contains(A)||pe.safari&&n7(A,O,e)||pe.chrome&&r7(A,O,e))&&(A=void 0))}}if(!A||!t.docView.dom.contains(A)){let x=mr.find(t.docView,p);if(!x)return h>u.top+u.height/2?u.to:u.from;({node:A,offset:O}=sx(x.dom,e,n))}return t.docView.posFromDOM(A,O)}function ZC(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);t.lineWrapping&&n.height>t.defaultLineHeight*1.5&&(o+=Math.floor((i-n.top)/t.defaultLineHeight)*t.viewState.heightOracle.lineLength);let s=t.state.sliceDoc(n.from,n.to);return n.from+q_(s,o,t.state.tabSize)}function n7(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Kf(t,r-1,r).getBoundingClientRect().left>n}function r7(t,e,n){if(e!=0)return!1;for(let i=t;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=t.nodeType==1?t.getBoundingClientRect():Kf(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function i7(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=!r||!t.lineWrapping?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let u=t.dom.getBoundingClientRect(),c=t.textDirectionAt(i.from),h=t.posAtCoords({x:n==(c==Dt.LTR)?u.right-1:u.left+1,y:(o.top+o.bottom)/2});if(h!=null)return te.cursor(h,n?-1:1)}let s=mr.find(t.docView,e.head),l=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return te.cursor(l,n?-1:1)}function YC(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),s=t.textDirectionAt(i.from);for(let l=e,u=null;;){let c=jV(i,o,s,l,n),h=e3;if(!c){if(i.number==(n?t.state.doc.lines:1))return l;h=`
`,i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),c=te.cursor(n?i.from:i.to)}if(u){if(!u(h))return l}else{if(!r)return c;u=r(h)}l=c}}function o7(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return o=>{let s=r(o);return i==gr.Space&&(i=s),i==s}}function s7(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return te.cursor(i,e.assoc);let s=e.goalColumn,l,u=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i),h=t.documentTop;if(c)s==null&&(s=c.left-u.left),l=o<0?c.top:c.bottom;else{let v=t.viewState.lineBlockAt(i);s==null&&(s=Math.min(u.right-u.left,t.defaultCharacterWidth*(i-v.from))),l=(o<0?v.top:v.bottom)+h}let p=u.left+s,g=r!=null?r:t.defaultLineHeight>>1;for(let v=0;;v+=10){let y=l+(g+v)*o,A=i3(t,{x:p,y},!1,o);if(y<u.top||y>u.bottom||(o<0?A<i:A>i))return te.cursor(A,e.assoc,void 0,s)}}function J1(t,e,n){let r=t.state.facet(ZL).map(i=>i(t));for(;;){let i=!1;for(let o of r)o.between(n.from-1,n.from+1,(s,l,u)=>{n.from>s&&n.from<l&&(n=e.from>n.from?te.cursor(s,1):te.cursor(l,-1),i=!0)});if(!i)return n}}class l7{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let n in wn){let r=wn[n];e.contentDOM.addEventListener(n,i=>{!QC(e,i)||this.ignoreDuringComposition(i)||n=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(n,e,i)?i.preventDefault():r(e,i))},lx[n]),this.registeredEvents.push(n)}pe.chrome&&pe.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,pe.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var r;let i;this.customHandlers=[];for(let o of n)if(i=(r=o.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:i});for(let s in i)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),e.contentDOM.addEventListener(s,l=>{!QC(e,l)||this.runCustomHandlers(s,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,n,r){for(let i of this.customHandlers){let o=i.handlers[e];if(o)try{if(o.call(i.plugin,r,n)||r.defaultPrevented)return!0}catch(s){li(n.state,s)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,n,e)}catch(o){li(e.state,o)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(pe.android&&pe.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return pe.ios&&(r=o3.find(i=>i.keyCode==n.keyCode))&&!(n.ctrlKey||n.altKey||n.metaKey)&&!n.synthetic?(this.pendingIOSKey=r,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,Vh(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:pe.safari&&!pe.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!pe.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const o3=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],s3=[16,17,18,20,91,92,224,225];class a7{constructor(e,n,r,i){this.view=e,this.style=r,this.mustSelect=i,this.lastEvent=n;let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ge.allowMultipleSelections)&&u7(e,n),this.dragMove=f7(e,n),this.dragging=c7(e,n)&&rS(n)==1?null:!1,this.dragging===!1&&(n.preventDefault(),this.select(n))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let n=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!n.eq(this.view.state.selection)||n.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:n,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function u7(t,e){let n=t.state.facet(VL);return n.length?n[0](e):pe.mac?e.metaKey:e.ctrlKey}function f7(t,e){let n=t.state.facet(UL);return n.length?n[0](e):pe.mac?!e.altKey:!e.ctrlKey}function c7(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=h0(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let s=i[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function QC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Ot.get(n))&&r.ignoreEvent(e))return!1;return!0}const wn=Object.create(null),lx=Object.create(null),l3=pe.ie&&pe.ie_version<15||pe.ios&&pe.webkit_version<604;function h7(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),a3(t,n.value)},50)}function a3(t,e){let{state:n}=t,r,i=1,o=n.toText(e),s=o.lines==n.selection.ranges.length;if(ax!=null&&n.selection.ranges.every(u=>u.empty)&&ax==o.toString()){let u=-1;r=n.changeByRange(c=>{let h=n.doc.lineAt(c.from);if(h.from==u)return{range:c};u=h.from;let p=n.toText((s?o.line(i++).text:e)+n.lineBreak);return{changes:{from:h.from,insert:p},range:te.cursor(c.from+p.length)}})}else s?r=n.changeByRange(u=>{let c=o.line(i++);return{changes:{from:u.from,to:u.to,insert:c.text},range:te.cursor(u.from+c.length)}}):r=n.replaceSelection(o);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}wn.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27?t.inputState.lastEscPress=Date.now():s3.indexOf(e.keyCode)<0&&(t.inputState.lastEscPress=0)};wn.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};wn.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};lx.touchstart=lx.touchmove={passive:!0};wn.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3&&rS(e)==1)return;let n=null;for(let r of t.state.facet(WL))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=g7(t,e)),n){let r=t.root.activeElement!=t.contentDOM;r&&t.observer.ignore(()=>OL(t.contentDOM)),t.inputState.startMouseSelection(new a7(t,e,n,r))}};function XC(t,e,n,r){if(r==1)return te.cursor(e,n);if(r==2)return XV(t.state,e,n);{let i=mr.find(t.docView,e),o=t.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:o.from,l=i?i.posAtEnd:o.to;return l<t.state.doc.length&&l==o.to&&l++,te.range(s,l)}}let u3=(t,e)=>t>=e.top&&t<=e.bottom,eA=(t,e,n)=>u3(e,n)&&t>=n.left&&t<=n.right;function d7(t,e,n,r){let i=mr.find(t.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&eA(n,r,s))return-1;let l=i.coordsAt(o,1);return l&&eA(n,r,l)?1:s&&u3(r,s)?-1:1}function tA(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:d7(t,n,e.clientX,e.clientY)}}const p7=pe.ie&&pe.ie_version<=11;let nA=null,rA=0,iA=0;function rS(t){if(!p7)return t.detail;let e=nA,n=iA;return nA=t,iA=Date.now(),rA=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(rA+1)%3:1}function g7(t,e){let n=tA(t,e),r=rS(e),i=t.state.selection,o=n,s=e;return{update(l){l.docChanged&&(n&&(n.pos=l.changes.mapPos(n.pos)),i=i.map(l.changes),s=null)},get(l,u,c){let h;if(s&&l.clientX==s.clientX&&l.clientY==s.clientY?h=o:(h=o=tA(t,l),s=l),!h||!n)return i;let p=XC(t,h.pos,h.bias,r);if(n.pos!=h.pos&&!u){let g=XC(t,n.pos,n.bias,r),v=Math.min(g.from,p.from),y=Math.max(g.to,p.to);p=v<p.from?te.range(v,y):te.range(y,v)}return u?i.replaceRange(i.main.extend(p.from,p.to)):c&&i.ranges.length>1&&i.ranges.some(g=>g.eq(p))?m7(i,p):c?i.addRange(p):te.create([p])}}}function m7(t,e){for(let n=0;;n++)if(t.ranges[n].eq(e))return te.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}wn.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function oA(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=t.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,l={from:i,insert:n},u=t.state.changes(s?[s,l]:l);t.focus(),t.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}wn.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&oA(t,e,r.filter(s=>s!=null).join(t.state.lineBreak),!1)};for(let s=0;s<n.length;s++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[s]=l.result),o()},l.readAsText(n[s])}}else oA(t,e,e.dataTransfer.getData("Text"),!0)};wn.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=l3?null:e.clipboardData;n?(a3(t,n.getData("text/plain")),e.preventDefault()):h7(t)};function v7(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function y7(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let s=t.doc.lineAt(o);s.number>i&&(e.push(s.text),n.push({from:s.from,to:Math.min(t.doc.length,s.to+1)})),i=s.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let ax=null;wn.copy=wn.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=y7(t.state);if(!n&&!i)return;ax=i?n:null;let o=l3?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",n)):v7(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};function f3(t){setTimeout(()=>{t.hasFocus!=t.inputState.notifiedFocused&&t.update([])},10)}wn.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),f3(t)};wn.blur=t=>{t.observer.clearSelectionRange(),f3(t)};function c3(t,e){if(t.docView.compositionDeco.size){t.inputState.rapidCompositionStart=e;try{t.update([])}finally{t.inputState.rapidCompositionStart=!1}}}wn.compositionstart=wn.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0,t.docView.compositionDeco.size&&(t.observer.flush(),c3(t,!0)))};wn.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionFirstChange=null,setTimeout(()=>{t.inputState.composing<0&&c3(t,!1)},50)};wn.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};wn.beforeinput=(t,e)=>{var n;let r;if(pe.chrome&&pe.android&&(r=o3.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const sA=["pre-wrap","normal","pre-line","break-spaces"];class w7{constructor(){this.doc=at.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return sA.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,o){let s=sA.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=n,this.charWidth=r,this.lineLength=i,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class _7{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class _l{constructor(e,n,r,i,o){this.from=e,this.length=n,this.top=r,this.height=i,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new _l(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var xt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(xt||(xt={}));const xm=.001;class $r{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>xm&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return $r.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let o=this;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:u,fromB:c,toB:h}=i[s],p=o.lineAt(l,xt.ByPosNoHeight,n,0,0),g=p.to>=u?p:o.lineAt(u,xt.ByPosNoHeight,n,0,0);for(h+=g.to-u,u=g.to;s>0&&p.from<=i[s-1].toA;)l=i[s-1].fromA,c=i[s-1].fromB,s--,l<p.from&&(p=o.lineAt(l,xt.ByPosNoHeight,n,0,0));c+=p.from-l,l=p.from;let v=iS.build(r,e,c,h);o=o.replace(l,u,v)}return o.updateHeight(r,0)}static empty(){return new ei(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,o=0;for(;;)if(n==r)if(i>o*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),r+=1+l.break,i-=l.size}else if(o>i*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,o-=l.size}else break;else if(i<o){let l=e[n++];l&&(i+=l.size)}else{let l=e[--r];l&&(o+=l.size)}let s=0;return e[n-1]==null?(s=1,n--):e[n]==null&&(s=1,r++),new x7($r.of(e.slice(0,n)),s,$r.of(e.slice(r)))}}$r.prototype.size=1;class h3 extends $r{constructor(e,n,r){super(e,n),this.type=r}blockAt(e,n,r,i){return new _l(i,this.length,r,this.height,this.type)}lineAt(e,n,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,n,r,i,o,s){e<=o+this.length&&n>=o&&s(this.blockAt(0,r,i,o))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ei extends h3{constructor(e,n){super(e,n,wt.Text),this.collapsed=0,this.widgetHeight=0}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof ei||i instanceof Cn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Cn?i=new ei(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):$r.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Cn extends $r{constructor(e){super(e,0)}lines(e,n){let r=e.lineAt(n).number,i=e.lineAt(n+this.length).number;return{firstLine:r,lastLine:i,lineHeight:this.height/(i-r+1)}}blockAt(e,n,r,i){let{firstLine:o,lastLine:s,lineHeight:l}=this.lines(n,i),u=Math.max(0,Math.min(s-o,Math.floor((e-r)/l))),{from:c,length:h}=n.line(o+u);return new _l(c,h,r+l*u,l,wt.Text)}lineAt(e,n,r,i,o){if(n==xt.ByHeight)return this.blockAt(e,r,i,o);if(n==xt.ByPosNoHeight){let{from:p,to:g}=r.lineAt(e);return new _l(p,g-p,0,0,wt.Text)}let{firstLine:s,lineHeight:l}=this.lines(r,o),{from:u,length:c,number:h}=r.lineAt(e);return new _l(u,c,i+l*(h-s),l,wt.Text)}forEachLine(e,n,r,i,o,s){let{firstLine:l,lineHeight:u}=this.lines(r,o);for(let c=Math.max(e,o),h=Math.min(o+this.length,n);c<=h;){let p=r.lineAt(c);c==e&&(i+=u*(p.number-l)),s(new _l(p.from,p.length,i,u,wt.Text)),i+=u,c=p.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let o=r[r.length-1];o instanceof Cn?r[r.length-1]=new Cn(o.length+i):r.push(null,new Cn(i-1))}if(e>0){let o=r[0];o instanceof Cn?r[0]=new Cn(e+o.length):r.unshift(new Cn(e-1),null)}return $r.of(r)}decomposeLeft(e,n){n.push(new Cn(e-1),null)}decomposeRight(e,n){n.push(null,new Cn(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let o=n+this.length;if(i&&i.from<=n+this.length&&i.more){let s=[],l=Math.max(n,i.from),u=-1,c=e.heightChanged;for(i.from>n&&s.push(new Cn(i.from-n-1).updateHeight(e,n));l<=o&&i.more;){let p=e.doc.lineAt(l).length;s.length&&s.push(null);let g=i.heights[i.index++];u==-1?u=g:Math.abs(g-u)>=xm&&(u=-2);let v=new ei(p,g);v.outdated=!1,s.push(v),l+=p+1}l<=o&&s.push(null,new Cn(o-l).updateHeight(e,l));let h=$r.of(s);return e.heightChanged=c||u<0||Math.abs(h.height-this.height)>=xm||Math.abs(u-this.lines(e.doc,n).lineHeight)>=xm,h}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class x7 extends $r{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,o,i+this.left.length+this.break)}lineAt(e,n,r,i,o){let s=i+this.left.height,l=o+this.left.length+this.break,u=n==xt.ByHeight?e<s:e<l,c=u?this.left.lineAt(e,n,r,i,o):this.right.lineAt(e,n,r,s,l);if(this.break||(u?c.to<l:c.from>l))return c;let h=n==xt.ByPosNoHeight?xt.ByPosNoHeight:xt.ByPos;return u?c.join(this.right.lineAt(l,h,r,s,l)):this.left.lineAt(l,h,r,i,o).join(c)}forEachLine(e,n,r,i,o,s){let l=i+this.left.height,u=o+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,n,r,i,o,s),n>=u&&this.right.forEachLine(e,n,r,l,u,s);else{let c=this.lineAt(u,xt.ByPos,r,i,o);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,o,s),c.to>=e&&c.from<=n&&s(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,l,u,s)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let l of r)o.push(l);if(e>0&&lA(o,s-1),n<this.length){let l=o.length;this.decomposeRight(n,o),lA(o,l)}return $r.of(o)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?$r.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:o,right:s}=this,l=n+o.length+this.break,u=null;return i&&i.from<=n+o.length&&i.more?u=o=o.updateHeight(e,n,r,i):o.updateHeight(e,n,r),i&&i.from<=l+s.length&&i.more?u=s=s.updateHeight(e,l,r,i):s.updateHeight(e,l,r),u?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function lA(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Cn&&(r=t[e+1])instanceof Cn&&t.splice(e-1,3,new Cn(n.length+1+r.length))}const b7=5;class iS{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ei?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ei(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new h3(o,i,r.type)):(o||i>=b7)&&this.addLineDeco(i,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ei(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Cn(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ei)return e;let n=new ei(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine(),e.type==wt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=wt.WidgetBefore&&(this.covering=e)}addLineDeco(e,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+n}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ei)&&!this.isCovered?this.nodes.push(new ei(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof ei&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let o=new iS(r,e);return ut.spans(n,r,i,o,0),o.finish(r)}}function S7(t,e,n){let r=new k7;return ut.compare(t,e,n,r,0),r.changes}class k7{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&nx(e,n,this.changes,5)}}function E7(t,e){let n=t.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),o=Math.max(0,n.top),s=Math.min(innerHeight,n.bottom),l=t.ownerDocument.body;for(let u=t.parentNode;u&&u!=l;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let p=c.getBoundingClientRect();r=Math.max(r,p.left),i=Math.min(i,p.right),o=Math.max(o,p.top),s=u==t.parentNode?p.bottom:Math.min(s,p.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:r-n.left,right:Math.max(r,i)-n.left,top:o-(n.top+e),bottom:Math.max(o,s)-(n.top+e)}}function C7(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class K1{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e){return me.replace({widget:new A7(this.size,e)}).range(this.from,this.to)}}class A7 extends Us{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class aA{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new w7,this.scaler=cA,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Dt.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(_d).filter(n=>typeof n!="function"),this.heightMap=$r.empty().applyChanges(this.stateDeco,at.empty,this.heightOracle.setDoc(e.doc),[new Rs(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=me.set(this.lineGaps.map(n=>n.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:o,to:s})=>i>=o&&i<=s)){let{from:o,to:s}=this.lineBlockAt(i);e.push(new $g(o,s))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?cA:new R7(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Sh(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(_d).filter(c=>typeof c!="function");let i=e.changedRanges,o=Rs.extendWithRanges(i,S7(r,this.stateDeco,e?e.changes:sn.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(e.flags|=2);let l=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Dt.RTL:Dt.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),l=s||this.mustMeasureContent||this.contentDOMHeight!=n.clientHeight;this.contentDOMHeight=n.clientHeight,this.mustMeasureContent=!1;let u=0,c=0,h=parseInt(r.paddingTop)||0,p=parseInt(r.paddingBottom)||0;(this.paddingTop!=h||this.paddingBottom!=p)&&(this.paddingTop=h,this.paddingBottom=p,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let g=(this.printing?C7:E7)(n,this.paddingTop),v=g.top-this.pixelViewport.top,y=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let A=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(A!=this.inView&&(this.inView=A,A&&(l=!0)),!this.inView)return 0;let O=n.clientWidth;if((this.contentDOMWidth!=O||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=O,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(s=!0),s||i.lineWrapping&&Math.abs(O-this.contentDOMWidth)>i.charWidth){let{lineHeight:b,charWidth:T}=e.docView.measureTextSize();s=i.refresh(o,b,T,O/T,k),s&&(e.docView.minWidth=0,u|=8)}v>0&&y>0?c=Math.max(v,y):v<0&&y<0&&(c=Math.min(v,y)),i.heightChanged=!1;for(let b of this.viewports){let T=b.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(b);this.heightMap=this.heightMap.updateHeight(i,0,s,new _7(b.from,T))}i.heightChanged&&(u|=2)}let x=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.state.doc,{visibleTop:s,visibleBottom:l}=this,u=new $g(i.lineAt(s-r*1e3,xt.ByHeight,o,0,0).from,i.lineAt(l+(1-r)*1e3,xt.ByHeight,o,0,0).to);if(n){let{head:c}=n.range;if(c<u.from||c>u.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=i.lineAt(c,xt.ByPos,o,0,0),g;n.y=="center"?g=(p.top+p.bottom)/2-h/2:n.y=="start"||n.y=="nearest"&&c<u.from?g=p.top:g=p.bottom-h,u=new $g(i.lineAt(g-1e3/2,xt.ByHeight,o,0,0).from,i.lineAt(g+h+1e3/2,xt.ByHeight,o,0,0).to)}}return u}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new $g(this.heightMap.lineAt(r,xt.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,xt.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,xt.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(n,xt.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:l}=this;return(e==0||i<=s-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=l+Math.max(10,Math.min(r,250)))&&i>s-2*1e3&&o<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new K1(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e){let n=[];if(this.defaultTextDirection!=Dt.LTR)return n;for(let r of this.viewportLines){if(r.length<4e3)continue;let i=T7(r.from,r.to,this.stateDeco);if(i.total<4e3)continue;let o,s;if(this.heightOracle.lineWrapping){let c=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;o=Hg(i,(this.visibleTop-r.top-c)/r.height),s=Hg(i,(this.visibleBottom-r.top+c)/r.height)}else{let c=i.total*this.heightOracle.charWidth,h=2e3*this.heightOracle.charWidth;o=Hg(i,(this.pixelViewport.left-h)/c),s=Hg(i,(this.pixelViewport.right+h)/c)}let l=[];o>r.from&&l.push({from:r.from,to:o}),s<r.to&&l.push({from:s,to:r.to});let u=this.state.selection.main;u.from>=r.from&&u.from<=r.to&&fA(l,u.from-10,u.from+10),!u.empty&&u.to>=r.from&&u.to<=r.to&&fA(l,u.to-10,u.to+10);for(let{from:c,to:h}of l)h-c>1e3&&n.push(O7(e,p=>p.from>=r.from&&p.to<=r.to&&Math.abs(p.from-c)<1e3&&Math.abs(p.to-h)<1e3)||new K1(c,h,this.gapSize(r,c,h,i)))}return n}gapSize(e,n,r,i){let o=uA(i,r)-uA(i,n);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){K1.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=me.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ut.spans(e,this.viewport.from,this.viewport.to,{span(i,o){n.push({from:i,to:o})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,o)=>i.from!=n[o].from||i.to!=n[o].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Sh(this.heightMap.lineAt(e,xt.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Sh(this.heightMap.lineAt(this.scaler.fromDOM(e),xt.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Sh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class $g{constructor(e,n){this.from=e,this.to=n}}function T7(t,e,n){let r=[],i=t,o=0;return ut.spans(n,t,e,{span(){},point(s,l){s>i&&(r.push({from:i,to:s}),o+=s-i),i=l}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function Hg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:o,to:s}=e[i],l=s-o;if(r<=l)return o+r;r-=l}}function uA(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function fA(t,e,n){for(let r=0;r<t.length;r++){let i=t[r];if(i.from<n&&i.to>e){let o=[];i.from<e&&o.push({from:i.from,to:e}),i.to>n&&o.push({from:n,to:i.to}),t.splice(r,1,...o),r+=o.length-1}}}function O7(t,e){for(let n of t)if(e(n))return n}const cA={toDOM(t){return t},fromDOM(t){return t},scale:1};class R7{constructor(e,n,r){let i=0,o=0,s=0;this.viewports=r.map(({from:l,to:u})=>{let c=n.lineAt(l,xt.ByPos,e,0,0).top,h=n.lineAt(u,xt.ByPos,e,0,0).bottom;return i+=h-c,{from:l,to:u,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let l of this.viewports)l.domTop=s+(l.top-o)*this.scale,s=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}}function Sh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new _l(t.from,t.length,n,r-n,Array.isArray(t.type)?t.type.map(i=>Sh(i,e)):t.type)}const Vg=ge.define({combine:t=>t.join(" ")}),ux=ge.define({combine:t=>t.indexOf(!0)>-1}),fx=Wl.newName(),d3=Wl.newName(),p3=Wl.newName(),g3={"&light":"."+d3,"&dark":"."+p3};function cx(t,e,n){return new Wl(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const M7=cx("."+fx,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},g3),L7={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},G1=pe.ie&&pe.ie_version<=11;class N7{constructor(e,n,r){this.view=e,this.onChange=n,this.onScrollChanged=r,this.active=!1,this.selectionRange=new LV,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let o of i)this.queue.push(o);(pe.ie&&pe.ie_version<=11||pe.ios&&e.composing)&&i.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),G1&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.win=e.dom.ownerDocument.defaultView,this.addWindowListeners(this.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(bv)?n.root.activeElement!=this.dom:!_m(n.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)||((pe.ie&&pe.ie_version<=11||pe.android&&pe.chrome)&&!n.state.selection.main.empty&&r.focusNode&&d0(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{view:e}=this,n=pe.safari&&e.root.nodeType==11&&OV()==this.dom&&D7(this.view)||h0(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=_m(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&DV(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,L7),G1&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),G1&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){this.delayedAndroidKey||requestAnimationFrame(()=>{let r=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Vh(this.dom,r.key,r.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let o of this.observer.takeRecords())e.push(o);e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let o of e){let s=this.readMutation(o);!s||(s.typeOver&&(i=!0),n==-1?{from:n,to:r}=s:(n=Math.min(s.from,n),r=Math.max(s.to,r)))}return{from:n,to:r,typeOver:i}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:n,to:r,typeOver:i}=this.processRecords(),o=this.selectionChanged&&_m(this.dom,this.selectionRange);if(n<0&&!o)return;this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=this.view.state,l=this.onChange(n,r,i);return this.view.state==s&&this.view.update([]),l}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.dirty|=4),e.type=="childList"){let r=hA(n,e.previousSibling||e.target.previousSibling,-1),i=hA(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resize)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function hA(t,e,n){for(;e;){let r=Ot.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function D7(t){let e=null;function n(u){u.preventDefault(),u.stopImmediatePropagation(),e=u.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return d0(l.node,l.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function P7(t,e,n,r){let i,o,s=t.state.selection.main;if(e>-1){let l=t.docView.domBoundsAround(e,n,0);if(!l||t.state.readOnly)return!1;let{from:u,to:c}=l,h=t.docView.impreciseHead||t.docView.impreciseAnchor?[]:I7(t),p=new t3(h,t.state);p.readRange(l.startDOM,l.endDOM);let g=s.from,v=null;(t.inputState.lastKeyCode===8&&t.inputState.lastKeyTime>Date.now()-100||pe.android&&p.text.length<c-u)&&(g=s.to,v="end");let y=B7(t.state.doc.sliceString(u,c,wl),p.text,g-u,v);y&&(pe.chrome&&t.inputState.lastKeyCode==13&&y.toB==y.from+2&&p.text.slice(y.from,y.toB)==wl+wl&&y.toB--,i={from:u+y.from,to:u+y.toA,insert:at.of(p.text.slice(y.from,y.toB).split(wl))}),o=F7(h,u)}else if(t.hasFocus||!t.state.facet(bv)){let l=t.observer.selectionRange,{impreciseHead:u,impreciseAnchor:c}=t.docView,h=u&&u.node==l.focusNode&&u.offset==l.focusOffset||!Jf(t.contentDOM,l.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(l.focusNode,l.focusOffset),p=c&&c.node==l.anchorNode&&c.offset==l.anchorOffset||!Jf(t.contentDOM,l.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(l.anchorNode,l.anchorOffset);(h!=s.head||p!=s.anchor)&&(o=te.single(p,h))}if(!i&&!o)return!1;if(!i&&r&&!s.empty&&o&&o.main.empty?i={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4?i={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,i.from).append(i.insert).append(t.state.doc.slice(i.to,s.to))}:(pe.mac||pe.android)&&i&&i.from==i.to&&i.from==s.head-1&&i.insert.toString()=="."&&(i={from:s.from,to:s.to,insert:at.of([" "])}),i){let l=t.state;if(pe.ios&&t.inputState.flushIOSKey(t)||pe.android&&(i.from==s.from&&i.to==s.to&&i.insert.length==1&&i.insert.lines==2&&Vh(t.contentDOM,"Enter",13)||i.from==s.from-1&&i.to==s.to&&i.insert.length==0&&Vh(t.contentDOM,"Backspace",8)||i.from==s.from&&i.to==s.to+1&&i.insert.length==0&&Vh(t.contentDOM,"Delete",46)))return!0;let u=i.insert.toString();if(t.state.facet(qL).some(p=>p(t,i.from,i.to,u)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let c;if(i.from>=s.from&&i.to<=s.to&&i.to-i.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&t.inputState.composing<0){let p=s.from<i.from?l.sliceDoc(s.from,i.from):"",g=s.to>i.to?l.sliceDoc(i.to,s.to):"";c=l.replaceSelection(t.state.toText(p+i.insert.sliceString(0,void 0,t.state.lineBreak)+g))}else{let p=l.changes(i),g=o&&!l.selection.main.eq(o.main)&&o.main.to<=p.newLength?o.main:void 0;if(l.selection.ranges.length>1&&t.inputState.composing>=0&&i.to<=s.to&&i.to>=s.to-10){let v=t.state.sliceDoc(i.from,i.to),y=n3(t)||t.state.doc.lineAt(s.head),A=s.to-i.to,O=s.to-s.from;c=l.changeByRange(x=>{if(x.from==s.from&&x.to==s.to)return{changes:p,range:g||x.map(p)};let k=x.to-A,b=k-v.length;if(x.to-x.from!=O||t.state.sliceDoc(b,k)!=v||y&&x.to>=y.from&&x.from<=y.to)return{range:x};let T=l.changes({from:b,to:k,insert:i.insert}),N=x.to-s.to;return{changes:T,range:g?te.range(Math.max(0,g.anchor+N),Math.max(0,g.head+N)):x.map(T)}})}else c={changes:p,selection:g&&l.selection.replaceRange(g)}}let h="input.type";return t.composing&&(h+=".compose",t.inputState.compositionFirstChange&&(h+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(c,{scrollIntoView:!0,userEvent:h}),!0}else if(o&&!o.main.eq(s)){let l=!1,u="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),u=t.inputState.lastSelectionOrigin),t.dispatch({selection:o,scrollIntoView:l,userEvent:u}),!0}else return!1}function B7(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let s=t.length,l=e.length;for(;s>0&&l>0&&t.charCodeAt(s-1)==e.charCodeAt(l-1);)s--,l--;if(r=="end"){let u=Math.max(0,o-Math.min(s,l));n-=s+u-o}return s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,l=o+(l-s),s=o):l<o&&(o-=n<=o&&n>=l?o-n:0,s=o+(s-l),l=o),{from:o,toA:s,toB:l}}function I7(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new WC(n,r)),(i!=n||o!=r)&&e.push(new WC(i,o))),e}function F7(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?te.single(n+e,r+e):null}class de{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||NV(e.parent)||document,this.viewState=new aA(e.state||Ge.create(e)),this.plugins=this.state.facet(xh).map(n=>new j1(n));for(let n of this.plugins)n.update(this);this.observer=new N7(this,(n,r,i)=>P7(this,n,r,i),n=>{this.inputState.runScrollHandlers(this,n),this.observer.intersecting&&this.measure()}),this.inputState=new l7(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new jC(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof un?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,o=this.state;for(let l of e){if(l.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=l.state}if(this.destroyed){this.viewState.state=o;return}if(this.observer.clear(),o.facet(Ge.phrases)!=this.state.facet(Ge.phrases))return this.setState(o);i=m0.create(this,o,e);let s=this.viewState.scrollTarget;try{this.updateState=2;for(let l of e){if(s&&(s=s.map(l.changes)),l.scrollIntoView){let{main:u}=l.state.selection;s=new g0(u.empty?u:te.cursor(u.head,u.head>u.anchor?-1:1))}for(let u of l.effects)u.is(VC)&&(s=u.value)}this.viewState.update(i,s),this.bidiCache=v0.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(bh)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(l=>l.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Vg)!=i.state.facet(Vg)&&(this.viewState.mustMeasureContent=!0),(n||r||s||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let l of this.state.facet(rx))l(i)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new aA(e),this.plugins=e.facet(xh).map(r=>new j1(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new jC(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(xh),r=e.state.facet(xh);if(n!=r){let i=[];for(let o of r){let s=n.indexOf(o);if(s<0)i.push(new j1(o));else{let l=this.plugins[s];l.mustUpdate=e,i.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,{scrollHeight:r,scrollTop:i,clientHeight:o}=this.scrollDOM,s=i>r-o-4?r:i;try{for(let l=0;;l++){this.updateState=1;let u=this.viewport,c=this.viewState.lineBlockAtHeight(s),h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let g=p.map(O=>{try{return O.read(this)}catch(x){return li(this.state,x),dA}}),v=m0.create(this,this.state,[]),y=!1,A=!1;v.flags|=h,n?n.flags|=h:n=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),y=this.docView.update(v));for(let O=0;O<p.length;O++)if(g[O]!=dA)try{let x=p[O];x.write&&x.write(g[O],this)}catch(x){li(this.state,x)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,A=!0;else{let O=this.viewState.lineBlockAt(c.from).top-c.top;(O>1||O<-1)&&(this.scrollDOM.scrollTop+=O,A=!0)}if(y&&this.docView.updateSelection(!0),this.viewport.from==u.from&&this.viewport.to==u.to&&!A&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(rx))l(n)}get themeClasses(){return fx+" "+(this.state.facet(ux)?p3:d3)+" "+this.state.facet(Vg)}updateAttrs(){let e=pA(this,KL,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(bv)?"true":"false",class:"cm-content",style:`${pe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),pA(this,GL,n);let r=this.observer.ignore(()=>{let i=tx(this.contentDOM,this.contentAttrs,n),o=tx(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(de.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(bh),Wl.mount(this.root,this.styleModules.concat(M7).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return J1(this,e,YC(this,e,n,r))}moveByGroup(e,n){return J1(this,e,YC(this,e,n,r=>o7(this,e.head,r)))}moveToLineBoundary(e,n,r=!0){return i7(this,e,n,r)}moveVertically(e,n,r){return J1(this,e,s7(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),i3(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),s=o[Nf.find(o,e-i.from,-1,n)];return wv(r,s.dir==Dt.LTR==n>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(JL)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>z7)return XL(e.length);let n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n)return i.order;let r=WV(e.text,n);return this.bidiCache.push(new v0(e.from,e.to,n,r)),r}get hasFocus(){var e;return(document.hasFocus()||pe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{OL(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return VC.of(new g0(typeof e=="number"?te.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Zt.define(()=>({}),{eventHandlers:e})}static theme(e,n){let r=Wl.newName(),i=[Vg.of(r),bh.of(cx(`.${r}`,e))];return n&&n.dark&&i.push(ux.of(!0)),i}static baseTheme(e){return uc.lowest(bh.of(cx("."+fx,e,g3)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Ot.get(r)||Ot.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}de.styleModule=bh;de.inputHandler=qL;de.perLineTextDirection=JL;de.exceptionSink=jL;de.updateListener=rx;de.editable=bv;de.mouseSelectionStyle=WL;de.dragMovesSelection=UL;de.clickAddsSelectionRange=VL;de.decorations=_d;de.atomicRanges=ZL;de.scrollMargins=YL;de.darkTheme=ux;de.contentAttributes=GL;de.editorAttributes=KL;de.lineWrapping=de.contentAttributes.of({class:"cm-lineWrapping"});de.announce=Me.define();const z7=4096,dA={};class v0{constructor(e,n,r,i){this.from=e,this.to=n,this.dir=r,this.order=i}static update(e,n){if(n.empty)return e;let r=[],i=e.length?e[e.length-1].dir:Dt.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==i&&!n.touchesRange(s.from,s.to)&&r.push(new v0(n.mapPos(s.from,1),n.mapPos(s.to,-1),s.dir,s.order))}return r}}function pA(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],s=typeof o=="function"?o(t):o;s&&ex(s,n)}return n}const $7=pe.mac?"mac":pe.windows?"win":pe.linux?"linux":"key";function H7(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,o,s,l;for(let u=0;u<n.length-1;++u){const c=n[u];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),l&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Ug(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const V7=uc.default(de.domEventHandlers({keydown(t,e){return v3(m3(e.state),t,e,"editor")}})),Sv=ge.define({enables:V7}),gA=new WeakMap;function m3(t){let e=t.facet(Sv),n=gA.get(e);return n||gA.set(e,n=j7(e.reduce((r,i)=>r.concat(i),[]))),n}function U7(t,e,n){return v3(m3(t.state),e,t,n)}let dl=null;const W7=4e3;function j7(t,e=$7){let n=Object.create(null),r=Object.create(null),i=(s,l)=>{let u=r[s];if(u==null)r[s]=l;else if(u!=l)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,l,u,c)=>{let h=n[s]||(n[s]=Object.create(null)),p=l.split(/ (?!$)/).map(y=>H7(y,e));for(let y=1;y<p.length;y++){let A=p.slice(0,y).join(" ");i(A,!0),h[A]||(h[A]={preventDefault:!0,commands:[O=>{let x=dl={view:O,prefix:A,scope:s};return setTimeout(()=>{dl==x&&(dl=null)},W7),!0}]})}let g=p.join(" ");i(g,!1);let v=h[g]||(h[g]={preventDefault:!1,commands:[]});v.commands.push(u),c&&(v.preventDefault=!0)};for(let s of t){let l=s[e]||s.key;if(!!l)for(let u of s.scope?s.scope.split(" "):["editor"])o(u,l,s.run,s.preventDefault),s.shift&&o(u,"Shift-"+l,s.shift,s.preventDefault)}return n}function v3(t,e,n,r){let i=TV(e),o=An(i,0),s=ti(o)==i.length&&i!=" ",l="",u=!1;dl&&dl.view==n&&dl.scope==r&&(l=dl.prefix+" ",(u=s3.indexOf(e.keyCode)<0)&&(dl=null));let c=g=>{if(g){for(let v of g.commands)if(v(n))return!0;g.preventDefault&&(u=!0)}return!1},h=t[r],p;if(h){if(c(h[l+Ug(i,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey||o>127)&&(p=jl[e.keyCode])&&p!=i){if(c(h[l+Ug(p,e,!0)]))return!0;if(e.shiftKey&&qf[e.keyCode]!=p&&c(h[l+Ug(qf[e.keyCode],e,!1)]))return!0}else if(s&&e.shiftKey&&c(h[l+Ug(i,e,!0)]))return!0}return u}const y3=!pe.ios,kh=ge.define({combine(t){return Vs(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function q7(t={}){return[kh.of(t),J7,K7]}class w3{constructor(e,n,r,i,o){this.left=e,this.top=n,this.width=r,this.height=i,this.className=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const J7=Zt.fromClass(class{constructor(t){this.view=t,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=t.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=t.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),t.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(kh).cursorBlinkRate+"ms"}update(t){let e=t.startState.facet(kh)!=t.state.facet(kh);(e||t.selectionSet||t.geometryChanged||t.viewportChanged)&&this.view.requestMeasure(this.measureReq),t.transactions.some(n=>n.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:t}=this.view,e=t.facet(kh),n=t.selection.ranges.map(i=>i.empty?[]:G7(this.view,i)).reduce((i,o)=>i.concat(o)),r=[];for(let i of t.selection.ranges){let o=i==t.selection.main;if(i.empty?!o||y3:e.drawRangeCursor){let s=Z7(this.view,i,o);s&&r.push(s)}}return{rangePieces:n,cursors:r}}drawSel({rangePieces:t,cursors:e}){if(t.length!=this.rangePieces.length||t.some((n,r)=>!n.eq(this.rangePieces[r]))){this.selectionLayer.textContent="";for(let n of t)this.selectionLayer.appendChild(n.draw());this.rangePieces=t}if(e.length!=this.cursors.length||e.some((n,r)=>!n.eq(this.cursors[r]))){let n=this.cursorLayer.children;if(n.length!==e.length){this.cursorLayer.textContent="";for(const r of e)this.cursorLayer.appendChild(r.draw())}else e.forEach((r,i)=>r.adjust(n[i]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),_3={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};y3&&(_3[".cm-line"].caretColor="transparent !important");const K7=uc.highest(de.theme(_3));function x3(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Dt.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function mA(t,e,n){let r=te.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:wt.Text}}function vA(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==wt.Text))return r}return n}function G7(t,e){if(e.to<=t.viewport.from||e.from>=t.viewport.to)return[];let n=Math.max(e.from,t.viewport.from),r=Math.min(e.to,t.viewport.to),i=t.textDirection==Dt.LTR,o=t.contentDOM,s=o.getBoundingClientRect(),l=x3(t),u=window.getComputedStyle(o.firstChild),c=s.left+parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)),h=s.right-parseInt(u.paddingRight),p=vA(t,n),g=vA(t,r),v=p.type==wt.Text?p:null,y=g.type==wt.Text?g:null;if(t.lineWrapping&&(v&&(v=mA(t,n,v)),y&&(y=mA(t,r,y))),v&&y&&v.from==y.from)return O(x(e.from,e.to,v));{let b=v?x(e.from,null,v):k(p,!1),T=y?x(null,e.to,y):k(g,!0),N=[];return(v||p).to<(y||g).from-1?N.push(A(c,b.bottom,h,T.top)):b.bottom<T.top&&t.elementAtHeight((b.bottom+T.top)/2).type==wt.Text&&(b.bottom=T.top=(b.bottom+T.top)/2),O(b).concat(N).concat(O(T))}function A(b,T,N,B){return new w3(b-l.left,T-l.top-.01,N-b,B-T+.01,"cm-selectionBackground")}function O({top:b,bottom:T,horizontal:N}){let B=[];for(let D=0;D<N.length;D+=2)B.push(A(N[D],b,N[D+1],T));return B}function x(b,T,N){let B=1e9,D=-1e9,$=[];function G(ve,_e,ze,Qe,Ce){let ye=t.coordsAtPos(ve,ve==N.to?-2:2),F=t.coordsAtPos(ze,ze==N.from?2:-2);B=Math.min(ye.top,F.top,B),D=Math.max(ye.bottom,F.bottom,D),Ce==Dt.LTR?$.push(i&&_e?c:ye.left,i&&Qe?h:F.right):$.push(!i&&Qe?c:F.left,!i&&_e?h:ye.right)}let W=b!=null?b:N.from,oe=T!=null?T:N.to;for(let ve of t.visibleRanges)if(ve.to>W&&ve.from<oe)for(let _e=Math.max(ve.from,W),ze=Math.min(ve.to,oe);;){let Qe=t.state.doc.lineAt(_e);for(let Ce of t.bidiSpans(Qe)){let ye=Ce.from+Qe.from,F=Ce.to+Qe.from;if(ye>=ze)break;F>_e&&G(Math.max(ye,_e),b==null&&ye<=W,Math.min(F,ze),T==null&&F>=oe,Ce.dir)}if(_e=Qe.to+1,_e>=ze)break}return $.length==0&&G(W,b==null,oe,T==null,t.textDirection),{top:B,bottom:D,horizontal:$}}function k(b,T){let N=s.top+(T?b.top:b.bottom);return{top:N,bottom:N,horizontal:[]}}}function Z7(t,e,n){let r=t.coordsAtPos(e.head,e.assoc||1);if(!r)return null;let i=x3(t);return new w3(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const b3=Me.define({map(t,e){return t==null?null:e.mapPos(t)}}),Eh=Fn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(b3)?r.value:n,t)}}),Y7=Zt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Eh);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Eh)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Eh),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Eh)!=t&&this.view.dispatch({effects:b3.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Q7(){return[Eh,Y7]}function yA(t,e,n,r,i){e.lastIndex=0;for(let o=t.iterRange(n,r),s=n,l;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)i(s+l.index,l)}function X7(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class eU{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:o,maxLength:s=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(l,u,c,h)=>i(h,c,c+l[0].length,l,u);else if(r){let l=typeof r=="function"?r:()=>r;this.addMatch=(u,c,h,p)=>p(h,h+u[0].length,l(u,c,h))}else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let n=new Ul,r=n.add.bind(n);for(let{from:i,to:o}of X7(e,this.maxLength))yA(e.state.doc,this.regexp,i,o,(s,l)=>this.addMatch(l,e,s,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,s,l,u)=>{u>e.view.viewport.from&&l<e.view.viewport.to&&(r=Math.min(l,r),i=Math.max(u,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let o of e.visibleRanges){let s=Math.max(o.from,r),l=Math.min(o.to,i);if(l>s){let u=e.state.doc.lineAt(s),c=u.to<l?e.state.doc.lineAt(l):u,h=Math.max(o.from,u.from),p=Math.min(o.to,c.to);if(this.boundary){for(;s>u.from;s--)if(this.boundary.test(u.text[s-1-u.from])){h=s;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){p=l;break}}let g=[],v,y=(A,O,x)=>g.push(x.range(A,O));if(u==c)for(this.regexp.lastIndex=h-u.from;(v=this.regexp.exec(u.text))&&v.index<p-u.from;)this.addMatch(v,e,v.index+u.from,y);else yA(e.state.doc,this.regexp,h,p,(A,O)=>this.addMatch(O,e,A,y));n=n.update({filterFrom:h,filterTo:p,filter:(A,O)=>A<h||O>p,add:g})}}return n}}const hx=/x/.unicode!=null?"gu":"g",tU=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,hx),nU={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Z1=null;function rU(){var t;if(Z1==null&&typeof document<"u"&&document.body){let e=document.body.style;Z1=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Z1||!1}const bm=ge.define({combine(t){let e=Vs(t,{render:null,specialChars:tU,addSpecialChars:null});return(e.replaceTabs=!rU())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,hx)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,hx)),e}});function iU(t={}){return[bm.of(t),oU()]}let wA=null;function oU(){return wA||(wA=Zt.fromClass(class{constructor(t){this.view=t,this.decorations=me.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(bm)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new eU({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=An(e[0],0);if(o==9){let s=i.lineAt(r),l=n.state.tabSize,u=Wd(s.text,l,r-s.from);return me.replace({widget:new uU((l-u%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=me.replace({widget:new aU(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(bm);t.startState.facet(bm)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const sU="\u2022";function lU(t){return t>=32?sU:t==10?"\u2424":String.fromCharCode(9216+t)}class aU extends Us{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=lU(this.code),r=e.state.phrase("Control character")+" "+(nU[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class uU extends Us{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function fU(){return hU}const cU=me.line({class:"cm-activeLine"}),hU=Zt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){if(!r.empty)return me.none;let i=t.lineBlockAt(r.head);i.from>e&&(n.push(cU.range(i.from)),e=i.from)}return me.set(n)}},{decorations:t=>t.decorations});class dU extends Us{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function pU(t){return Zt.fromClass(class{constructor(e){this.view=e,this.placeholder=me.set([me.widget({widget:new dU(t),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?me.none:this.placeholder}},{decorations:e=>e.decorations})}const dx=2e3;function gU(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>dx||n.off>dx||e.col<0||n.col<0){let s=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let u=r;u<=i;u++){let c=t.doc.line(u);c.length<=l&&o.push(te.range(c.from+s,c.to+l))}}else{let s=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let u=r;u<=i;u++){let c=t.doc.line(u),h=q_(c.text,s,t.tabSize,!0);if(h>-1){let p=q_(c.text,l,t.tabSize);o.push(te.range(c.from+h,c.from+p))}}}return o}function mU(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function _A(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>dx?-1:i==r.length?mU(t,e.clientX):Wd(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function vU(t,e){let n=_A(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(n.line).from),s=i.state.doc.lineAt(o);n={line:s.number,col:n.col,off:Math.min(n.off,s.length)},r=r.map(i.changes)}},get(i,o,s){let l=_A(t,i);if(!l)return r;let u=gU(t.state,n,l);return u.length?s?te.create(u.concat(r.ranges)):te.create(u):r}}:null}function yU(t){let e=(t==null?void 0:t.eventFilter)||(n=>n.altKey&&n.button==0);return de.mouseSelectionStyle.of((n,r)=>e(r)?vU(n,r):null)}const wU={Alt:[18,t=>t.altKey],Control:[17,t=>t.ctrlKey],Shift:[16,t=>t.shiftKey],Meta:[91,t=>t.metaKey]},_U={style:"cursor: crosshair"};function xU(t={}){let[e,n]=wU[t.key||"Alt"],r=Zt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)}}});return[r,de.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?_U:null})]}const Y1="-10000px";class S3{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){let n=e.state.facet(this.facet),r=n.filter(o=>o);if(n===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let i=[];for(let o=0;o<r.length;o++){let s=r[o],l=-1;if(!!s){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==s.create&&(l=u)}if(l<0)i[o]=this.createTooltipView(s);else{let u=i[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)i.indexOf(o)<0&&o.dom.remove();return this.input=n,this.tooltips=r,this.tooltipViews=i,!0}}function bU(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const Q1=ge.define({combine:t=>{var e,n,r;return{position:pe.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||bU}}}),k3=Zt.fromClass(class{constructor(t){var e;this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let n=t.state.facet(Q1);this.position=n.position,this.parent=n.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new S3(t,oS,r=>this.createTooltip(r)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=t.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(Q1);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Y1,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;(t=this.view.dom.ownerDocument.defaultView)===null||t===void 0||t.removeEventListener("resize",this.measureSoon);for(let{dom:n}of this.manager.tooltipViews)n.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Q1).tooltipSpace(this.view)}}writeMeasure(t){let{editor:e,space:n}=t,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:l}=s,u=t.pos[i],c=t.size[i];if(!u||u.bottom<=Math.max(e.top,n.top)||u.top>=Math.min(e.bottom,n.bottom)||u.right<Math.max(e.left,n.left)-.1||u.left>Math.min(e.right,n.right)+.1){l.style.top=Y1;continue}let h=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,g=c.right-c.left,v=c.bottom-c.top,y=s.offset||kU,A=this.view.textDirection==Dt.LTR,O=c.width>n.right-n.left?A?n.left:n.right-c.width:A?Math.min(u.left-(h?14:0)+y.x,n.right-g):Math.max(n.left,u.left-g+(h?14:0)-y.x),x=!!o.above;!o.strictSide&&(x?u.top-(c.bottom-c.top)-y.y<n.top:u.bottom+(c.bottom-c.top)+y.y>n.bottom)&&x==n.bottom-u.bottom>u.top-n.top&&(x=!x);let k=x?u.top-v-p-y.y:u.bottom+p+y.y,b=O+g;if(s.overlap!==!0)for(let T of r)T.left<b&&T.right>O&&T.top<k+v&&T.bottom>k&&(k=x?T.top-v-2-p:T.bottom+p+2);this.position=="absolute"?(l.style.top=k-t.parent.top+"px",l.style.left=O-t.parent.left+"px"):(l.style.top=k+"px",l.style.left=O+"px"),h&&(h.style.left=`${u.left+(A?y.x:-y.x)-(O+14-7)}px`),s.overlap!==!0&&r.push({left:O,top:k,right:b,bottom:k+v}),l.classList.toggle("cm-tooltip-above",x),l.classList.toggle("cm-tooltip-below",!x),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Y1}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),SU=de.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),kU={x:0,y:0},oS=ge.define({enables:[k3,SU]}),y0=ge.define();class sS{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new S3(e,y0,n=>this.createHostedView(n))}static create(e){return new sS(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const EU=oS.compute([y0],t=>{let e=t.facet(y0).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:sS.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class CU{constructor(e,n,r,i,o){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(l=>l.from<=n&&l.to>=n),o=i&&i.dir==Dt.RTL?-1:1,s=this.source(this.view,n,e.x<r.left?-o:o);if(s!=null&&s.then){let l=this.pending={pos:n};s.then(u=>{this.pending==l&&(this.pending=null,u&&this.view.dispatch({effects:this.setHover.of(u)}))},u=>li(this.view.state,u,"hover tooltip"))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!AU(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,o=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:i;(i==o?this.view.posAtCoords(this.lastMove)!=i:!TU(this.view,i,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function AU(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function TU(t,e,n,r,i,o){let s=document.createRange(),l=t.domAtPos(e),u=t.domAtPos(n);s.setEnd(u.node,u.offset),s.setStart(l.node,l.offset);let c=s.getClientRects();s.detach();for(let h=0;h<c.length;h++){let p=c[h];if(Math.max(p.top-i,i-p.bottom,p.left-r,r-p.right)<=o)return!0}return!1}function OU(t,e={}){let n=Me.define(),r=Fn.define({create(){return null},update(i,o){if(i&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,i)))return null;if(i&&o.docChanged){let s=o.changes.mapPos(i.pos,-1,pr.TrackDel);if(s==null)return null;let l=Object.assign(Object.create(null),i);l.pos=s,i.end!=null&&(l.end=o.changes.mapPos(i.end)),i=l}for(let s of o.effects)s.is(n)&&(i=s.value),s.is(MU)&&(i=null);return i},provide:i=>y0.from(i)});return[r,Zt.define(i=>new CU(i,t,r,n,e.hoverTime||300)),EU]}function RU(t,e){let n=t.plugin(k3);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const MU=Me.define(),xA=ge.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function xd(t,e){let n=t.plugin(E3),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const E3=Zt.fromClass(class{constructor(t){this.input=t.state.facet(bd),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(xA);this.top=new Wg(t,!0,e.topContainer),this.bottom=new Wg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(xA);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Wg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Wg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(bd);if(n!=this.input){let r=n.filter(u=>u),i=[],o=[],s=[],l=[];for(let u of r){let c=this.specs.indexOf(u),h;c<0?(h=u(t.view),l.push(h)):(h=this.panels[c],h.update&&h.update(t)),i.push(h),(h.top?o:s).push(h)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(s);for(let u of l)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>de.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Wg{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=bA(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=bA(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function bA(t){let e=t.nextSibling;return t.remove(),e}const bd=ge.define({enables:E3});class Is extends lu{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Is.prototype.elementClass="";Is.prototype.toDOM=void 0;Is.prototype.mapMode=pr.TrackBefore;Is.prototype.startSide=Is.prototype.endSide=-1;Is.prototype.point=!0;const Sm=ge.define(),LU={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ut.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Uh=ge.define();function NU(t){return[C3(),Uh.of(Object.assign(Object.assign({},LU),t))]}const px=ge.define({combine:t=>t.some(e=>e)});function C3(t){let e=[DU];return t&&t.fixed===!1&&e.push(px.of(!0)),e}const DU=Zt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Uh).map(e=>new kA(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(px),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(px)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ut.iter(this.view.state.facet(Sm),this.view.viewport.from),r=[],i=this.gutters.map(o=>new PU(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let s;if(Array.isArray(o.type)){for(let l of o.type)if(l.type==wt.Text){s=l;break}}else s=o.type==wt.Text?o:void 0;if(!!s){r.length&&(r=[]),A3(n,r,o.from);for(let l of i)l.line(this.view,s,r)}}for(let o of i)o.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Uh),n=t.state.facet(Uh),r=t.docChanged||t.heightChanged||t.viewportChanged||!ut.eq(t.startState.facet(Sm),t.state.facet(Sm),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let o of n){let s=e.indexOf(o);s<0?i.push(new kA(this.view,o)):(this.gutters[s].update(t),i.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>de.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Dt.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function SA(t){return Array.isArray(t)?t:[t]}function A3(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class PU{constructor(e,n,r){this.gutter=e,this.height=r,this.localMarkers=[],this.i=0,this.cursor=ut.iter(e.markers,n.from)}line(e,n,r){this.localMarkers.length&&(this.localMarkers=[]),A3(this.cursor,this.localMarkers,n.from);let i=r.length?this.localMarkers.concat(r):this.localMarkers,o=this.gutter.config.lineMarker(e,n,i);o&&i.unshift(o);let s=this.gutter;if(i.length==0&&!s.config.renderEmptyElements)return;let l=n.top-this.height;if(this.i==s.elements.length){let u=new T3(e,n.height,l,i);s.elements.push(u),s.dom.appendChild(u.dom)}else s.elements[this.i].update(e,n.height,l,i);this.height=n.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class kA{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let o=e.lineBlockAtHeight(i.clientY-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=SA(n.markers(e)),n.initialSpacer&&(this.spacer=new T3(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=SA(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ut.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class T3{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),BU(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,s=0;;){let l=s,u=o<n.length?n[o++]:null,c=!1;if(u){let h=u.elementClass;h&&(r+=" "+h);for(let p=s;p<this.markers.length;p++)if(this.markers[p].compare(u)){l=p,c=!0;break}}else l=this.markers.length;for(;s<l;){let h=this.markers[s++];if(h.toDOM){h.destroy(i);let p=i.nextSibling;i.remove(),i=p}}if(!u)break;u.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),c&&s++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function BU(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const IU=ge.define(),_f=ge.define({combine(t){return Vs(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let o=r[i],s=n[i];r[i]=o?(l,u,c)=>o(l,u,c)||s(l,u,c):s}return r}})}});class X1 extends Is{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function ew(t,e){return t.state.facet(_f).formatNumber(e,t.state)}const FU=Uh.compute([_f],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(IU)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new X1(ew(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:e=>e.startState.facet(_f)!=e.state.facet(_f),initialSpacer(e){return new X1(ew(e,EA(e.state.doc.lines)))},updateSpacer(e,n){let r=ew(n.view,EA(n.view.state.doc.lines));return r==e.number?e:new X1(r)},domEventHandlers:t.facet(_f).domEventHandlers}));function zU(t={}){return[_f.of(t),C3(),FU]}function EA(t){let e=9;for(;e<t;)e=e*10+9;return e}const $U=new class extends Is{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},HU=Sm.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges)if(r.empty){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push($U.range(i)))}return ut.of(e)});function VU(){return HU}const O3=1024;let UU=0;class tw{constructor(e,n){this.from=e,this.to=n}}class Ue{constructor(e={}){this.id=UU++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Vr.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Ue.closedBy=new Ue({deserialize:t=>t.split(" ")});Ue.openedBy=new Ue({deserialize:t=>t.split(" ")});Ue.group=new Ue({deserialize:t=>t.split(" ")});Ue.contextHash=new Ue({perNode:!0});Ue.lookAhead=new Ue({perNode:!0});Ue.mounted=new Ue({perNode:!0});const WU=Object.create(null);class Vr{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):WU,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Vr(e.name||"",n,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ue.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Ue.group),o=-1;o<(i?i.length:0);o++){let s=n[o<0?r.name:i[o]];if(s)return s}}}}Vr.none=new Vr("",Object.create(null),0,8);class lS{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let o of e){let s=o(r);s&&(i||(i=Object.assign({},r.props)),i[s[0].id]=s[1])}n.push(i?new Vr(r.name,i,r.id,r.flags):r)}return new lS(n)}}const jg=new WeakMap,CA=new WeakMap;var On;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(On||(On={}));class Xt{constructor(e,n,r,i,o){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,l]of o)this.props[typeof s=="number"?s:s.id]=l}}toString(){let e=this.prop(Ue.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new x0(this.topNode,e)}cursorAt(e,n=0,r=0){let i=jg.get(this)||this.topNode,o=new x0(i);return o.moveTo(e,n),jg.set(this,o._tree),o}get topNode(){return new Ms(this,0,0,null)}resolve(e,n=0){let r=Zf(jg.get(this)||this.topNode,e,n,!1);return jg.set(this,r),r}resolveInner(e,n=0){let r=Zf(CA.get(this)||this.topNode,e,n,!0);return CA.set(this,r),r}iterate(e){let{enter:n,leave:r,from:i=0,to:o=this.length}=e;for(let s=this.cursor((e.mode||0)|On.IncludeAnonymous);;){let l=!1;if(s.from<=o&&s.to>=i&&(s.type.isAnonymous||n(s)!==!1)){if(s.firstChild())continue;l=!0}for(;l&&r&&!s.type.isAnonymous&&r(s),!s.nextSibling();){if(!s.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:fS(Vr.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Xt(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Xt(Vr.none,n,r,i)))}static build(e){return qU(e)}}Xt.empty=new Xt(Vr.none,[],[],0);class aS{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new aS(this.buffer,this.index)}}class _u{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Vr.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,n,r,i,o){let{buffer:s}=this,l=-1;for(let u=e;u!=n&&!(R3(o,i,s[u+1],s[u+2])&&(l=u,r>0));u=s[u+3]);return l}slice(e,n,r,i){let o=this.buffer,s=new Uint16Array(n-e);for(let l=e,u=0;l<n;)s[u++]=o[l++],s[u++]=o[l++]-r,s[u++]=o[l++]-r,s[u++]=o[l++]-e;return new _u(s,i-r,this.set)}}function R3(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function M3(t,e){let n=t.childBefore(e);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}function Zf(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let s=!r&&t instanceof Ms&&t.index<0?null:t.parent;if(!s)return t;t=s}let o=r?0:On.IgnoreOverlays;if(r)for(let s=t,l=s.parent;l;s=l,l=s.parent)s instanceof Ms&&s.index<0&&((i=l.enter(e,n,o))===null||i===void 0?void 0:i.from)!=s.from&&(t=l);for(;;){let s=t.enter(e,n,o);if(!s)return t;t=s}}class Ms{constructor(e,n,r,i){this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,o=0){for(let s=this;;){for(let{children:l,positions:u}=s._tree,c=n>0?l.length:-1;e!=c;e+=n){let h=l[e],p=u[e]+s.from;if(!!R3(i,r,p,p+h.length)){if(h instanceof _u){if(o&On.ExcludeBuffers)continue;let g=h.findChild(0,h.buffer.length,n,r-p,i);if(g>-1)return new xl(new jU(s,h,e,p),null,g)}else if(o&On.IncludeAnonymous||!h.type.isAnonymous||uS(h)){let g;if(!(o&On.IgnoreMounts)&&h.props&&(g=h.prop(Ue.mounted))&&!g.overlay)return new Ms(g.tree,p,e,s);let v=new Ms(h,p,e,s);return o&On.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(n<0?h.children.length-1:0,n,r,i)}}}if(o&On.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+n:e=n<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&On.IgnoreOverlays)&&(i=this._tree.prop(Ue.mounted))&&i.overlay){let o=e-this.from;for(let{from:s,to:l}of i.overlay)if((n>0?s<=o:s<o)&&(n<0?l>=o:l>o))return new Ms(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new x0(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return Zf(this,e,n,!1)}resolveInner(e,n=0){return Zf(this,e,n,!0)}enterUnfinishedNodesBefore(e){return M3(this,e)}getChild(e,n=null,r=null){let i=w0(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return w0(this,e,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return _0(this,e)}}function w0(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function _0(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class jU{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class xl{constructor(e,n,r){this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,n,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new xl(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&On.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new xl(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new xl(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new xl(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new x0(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1],l=r.buffer[this.index+2];e.push(r.slice(i,o,s,l)),n.push(0)}return new Xt(this.type,e,n,this.to-this.from)}resolve(e,n=0){return Zf(this,e,n,!1)}resolveInner(e,n=0){return Zf(this,e,n,!0)}enterUnfinishedNodesBefore(e){return M3(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,r=null){let i=w0(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return w0(this,e,n,r)}get node(){return this}matchContext(e){return _0(this,e)}}class x0{constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ms)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ms?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&On.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&On.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&On.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let o=n+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let l=r._tree.children[o];if(this.mode&On.IncludeAnonymous||l instanceof _u||!l.type.isAnonymous||uS(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;n=s,r=o+1;break e}i=this.stack[--o]}}for(let i=r;i<this.stack.length;i++)n=new xl(this.buffer,n,this.stack[i]);return this.bufferNode=new xl(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return _0(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return _0(this.node,e,i);let s=r[n.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function uS(t){return t.children.some(e=>e instanceof _u||!e.type.isAnonymous||uS(e))}function qU(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=O3,reused:o=[],minRepeatType:s=r.types.length}=t,l=Array.isArray(n)?new aS(n,n.length):n,u=r.types,c=0,h=0;function p(T,N,B,D,$){let{id:G,start:W,end:oe,size:ve}=l,_e=h;for(;ve<0;)if(l.next(),ve==-1){let F=o[G];B.push(F),D.push(W-T);return}else if(ve==-3){c=G;return}else if(ve==-4){h=G;return}else throw new RangeError(`Unrecognized record size: ${ve}`);let ze=u[G],Qe,Ce,ye=W-T;if(oe-W<=i&&(Ce=A(l.pos-N,$))){let F=new Uint16Array(Ce.size-Ce.skip),J=l.pos-Ce.size,ie=F.length;for(;l.pos>J;)ie=O(Ce.start,F,ie);Qe=new _u(F,oe-Ce.start,r),ye=Ce.start-T}else{let F=l.pos-ve;l.next();let J=[],ie=[],Se=G>=s?G:-1,$e=0,bn=oe;for(;l.pos>F;)Se>=0&&l.id==Se&&l.size>=0?(l.end<=bn-i&&(v(J,ie,W,$e,l.end,bn,Se,_e),$e=J.length,bn=l.end),l.next()):p(W,F,J,ie,Se);if(Se>=0&&$e>0&&$e<J.length&&v(J,ie,W,$e,W,bn,Se,_e),J.reverse(),ie.reverse(),Se>-1&&$e>0){let tn=g(ze);Qe=fS(ze,J,ie,0,J.length,0,oe-W,tn,tn)}else Qe=y(ze,J,ie,oe-W,_e-oe)}B.push(Qe),D.push(ye)}function g(T){return(N,B,D)=>{let $=0,G=N.length-1,W,oe;if(G>=0&&(W=N[G])instanceof Xt){if(!G&&W.type==T&&W.length==D)return W;(oe=W.prop(Ue.lookAhead))&&($=B[G]+W.length+oe)}return y(T,N,B,D,$)}}function v(T,N,B,D,$,G,W,oe){let ve=[],_e=[];for(;T.length>D;)ve.push(T.pop()),_e.push(N.pop()+B-$);T.push(y(r.types[W],ve,_e,G-$,oe-G)),N.push($-B)}function y(T,N,B,D,$=0,G){if(c){let W=[Ue.contextHash,c];G=G?[W].concat(G):[W]}if($>25){let W=[Ue.lookAhead,$];G=G?[W].concat(G):[W]}return new Xt(T,N,B,D,G)}function A(T,N){let B=l.fork(),D=0,$=0,G=0,W=B.end-i,oe={size:0,start:0,skip:0};e:for(let ve=B.pos-T;B.pos>ve;){let _e=B.size;if(B.id==N&&_e>=0){oe.size=D,oe.start=$,oe.skip=G,G+=4,D+=4,B.next();continue}let ze=B.pos-_e;if(_e<0||ze<ve||B.start<W)break;let Qe=B.id>=s?4:0,Ce=B.start;for(B.next();B.pos>ze;){if(B.size<0)if(B.size==-3)Qe+=4;else break e;else B.id>=s&&(Qe+=4);B.next()}$=Ce,D+=_e,G+=Qe}return(N<0||D==T)&&(oe.size=D,oe.start=$,oe.skip=G),oe.size>4?oe:void 0}function O(T,N,B){let{id:D,start:$,end:G,size:W}=l;if(l.next(),W>=0&&D<s){let oe=B;if(W>4){let ve=l.pos-(W-4);for(;l.pos>ve;)B=O(T,N,B)}N[--B]=oe,N[--B]=G-T,N[--B]=$-T,N[--B]=D}else W==-3?c=D:W==-4&&(h=D);return B}let x=[],k=[];for(;l.pos>0;)p(t.start||0,t.bufferStart||0,x,k,-1);let b=(e=t.length)!==null&&e!==void 0?e:x.length?k[0]+x[0].length:0;return new Xt(u[t.topID],x.reverse(),k.reverse(),b)}const AA=new WeakMap;function km(t,e){if(!t.isAnonymous||e instanceof _u||e.type!=t)return 1;let n=AA.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Xt)){n=1;break}n+=km(t,r)}AA.set(e,n)}return n}function fS(t,e,n,r,i,o,s,l,u){let c=0;for(let y=r;y<i;y++)c+=km(t,e[y]);let h=Math.ceil(c*1.5/8),p=[],g=[];function v(y,A,O,x,k){for(let b=O;b<x;){let T=b,N=A[b],B=km(t,y[b]);for(b++;b<x;b++){let D=km(t,y[b]);if(B+D>=h)break;B+=D}if(b==T+1){if(B>h){let D=y[T];v(D.children,D.positions,0,D.children.length,A[T]+k);continue}p.push(y[T])}else{let D=A[b-1]+y[b-1].length-N;p.push(fS(t,y,A,T,b,N,D,null,u))}g.push(N+k-o)}}return v(e,n,r,i,0),(l||u)(p,g,s)}class tu{constructor(e,n,r,i,o=!1,s=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new tu(0,e.length,e,0,!1,r)];for(let o of n)o.to>e.length&&i.push(o);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let l=0,u=0,c=0;;l++){let h=l<n.length?n[l]:null,p=h?h.fromA:1e9;if(p-u>=r)for(;s&&s.from<p;){let g=s;if(u>=g.from||p<=g.to||c){let v=Math.max(g.from,u)-c,y=Math.min(g.to,p)-c;g=v>=y?null:new tu(v,y,g.tree,g.offset+c,l>0,!!h)}if(g&&i.push(g),s.to>p)break;s=o<e.length?e[o++]:null}if(!h)break;u=h.toA,c=h.toA-h.toB}return i}}class L3{startParse(e,n,r){return typeof e=="string"&&(e=new JU(e)),r=r?r.length?r.map(i=>new tw(i.from,i.to)):[new tw(0,0)]:[new tw(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let o=i.advance();if(o)return o}}}class JU{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Ue({perNode:!0});let KU=0;class Do{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=KU++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Do([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new b0;return n=>n.modified.indexOf(e)>-1?n:b0.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let GU=0;class b0{constructor(){this.instances=[],this.id=GU++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(l=>l.base==e&&ZU(n,l.modified));if(r)return r;let i=[],o=new Do(i,e,n);for(let l of n)l.instances.push(o);let s=N3(n);for(let l of e.set)for(let u of s)i.push(b0.get(l,u));return o}}function ZU(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function N3(t){let e=[t];for(let n=0;n<t.length;n++)for(let r of N3(t.slice(0,n).concat(t.slice(n+1))))e.push(r);return e}function D3(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let o=[],s=2,l=i;for(let p=0;;){if(l=="..."&&p>0&&p+3==i.length){s=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!g)throw new RangeError("Invalid path: "+i);if(o.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),p+=g[0].length,p==i.length)break;let v=i[p++];if(p==i.length&&v=="!"){s=0;break}if(v!="/")throw new RangeError("Invalid path: "+i);l=i.slice(p)}let u=o.length-1,c=o[u];if(!c)throw new RangeError("Invalid path: "+i);let h=new YU(r,s,u>0?o.slice(0,u):null);e[c]=h.sort(e[c])}}return P3.add(e)}const P3=new Ue;class YU{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function B3(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let s of o.tag)n[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let l of o)for(let u of l.set){let c=n[u.id];if(c){s=s?s+" "+c:c;break}}return s},scope:r}}function QU(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function XU(t,e,n,r=0,i=t.length){let o=new eW(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}class eW{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,o){let{type:s,from:l,to:u}=e;if(l>=r||u<=n)return;s.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(s)));let c=i,h=s.prop(P3),p=!1;for(;h;){if(!h.context||e.matchContext(h.context)){let v=QU(o,h.tags);v&&(c&&(c+=" "),c+=v,h.mode==1?i+=(i?" ":"")+v:h.mode==0&&(p=!0));break}h=h.next}if(this.startSpan(e.from,c),p)return;let g=e.tree&&e.tree.prop(Ue.mounted);if(g&&g.overlay){let v=e.node.enter(g.overlay[0].from+l,1),y=this.highlighters.filter(O=>!O.scope||O.scope(g.tree.type)),A=e.firstChild();for(let O=0,x=l;;O++){let k=O<g.overlay.length?g.overlay[O]:null,b=k?k.from+l:u,T=Math.max(n,x),N=Math.min(r,b);if(T<N&&A)for(;e.from<N&&(this.highlightRange(e,T,N,i,o),this.startSpan(Math.min(r,e.to),c),!(e.to>=b||!e.nextSibling())););if(!k||b>r)break;x=k.to+l,x>n&&(this.highlightRange(v.cursor(),Math.max(n,k.from+l),Math.min(r,x),i,y),this.startSpan(x,c))}A&&e.parent()}else if(e.firstChild()){do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,o),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}const se=Do.define,qg=se(),ul=se(),TA=se(ul),OA=se(ul),fl=se(),Jg=se(fl),nw=se(fl),Lo=se(),Pa=se(Lo),To=se(),Oo=se(),gx=se(),dh=se(gx),Kg=se(),K={comment:qg,lineComment:se(qg),blockComment:se(qg),docComment:se(qg),name:ul,variableName:se(ul),typeName:TA,tagName:se(TA),propertyName:OA,attributeName:se(OA),className:se(ul),labelName:se(ul),namespace:se(ul),macroName:se(ul),literal:fl,string:Jg,docString:se(Jg),character:se(Jg),attributeValue:se(Jg),number:nw,integer:se(nw),float:se(nw),bool:se(fl),regexp:se(fl),escape:se(fl),color:se(fl),url:se(fl),keyword:To,self:se(To),null:se(To),atom:se(To),unit:se(To),modifier:se(To),operatorKeyword:se(To),controlKeyword:se(To),definitionKeyword:se(To),moduleKeyword:se(To),operator:Oo,derefOperator:se(Oo),arithmeticOperator:se(Oo),logicOperator:se(Oo),bitwiseOperator:se(Oo),compareOperator:se(Oo),updateOperator:se(Oo),definitionOperator:se(Oo),typeOperator:se(Oo),controlOperator:se(Oo),punctuation:gx,separator:se(gx),bracket:dh,angleBracket:se(dh),squareBracket:se(dh),paren:se(dh),brace:se(dh),content:Lo,heading:Pa,heading1:se(Pa),heading2:se(Pa),heading3:se(Pa),heading4:se(Pa),heading5:se(Pa),heading6:se(Pa),contentSeparator:se(Lo),list:se(Lo),quote:se(Lo),emphasis:se(Lo),strong:se(Lo),link:se(Lo),monospace:se(Lo),strikethrough:se(Lo),inserted:se(),deleted:se(),changed:se(),invalid:se(),meta:Kg,documentMeta:se(Kg),annotation:se(Kg),processingInstruction:se(Kg),definition:Do.defineModifier(),constant:Do.defineModifier(),function:Do.defineModifier(),standard:Do.defineModifier(),local:Do.defineModifier(),special:Do.defineModifier()};B3([{tag:K.link,class:"tok-link"},{tag:K.heading,class:"tok-heading"},{tag:K.emphasis,class:"tok-emphasis"},{tag:K.strong,class:"tok-strong"},{tag:K.keyword,class:"tok-keyword"},{tag:K.atom,class:"tok-atom"},{tag:K.bool,class:"tok-bool"},{tag:K.url,class:"tok-url"},{tag:K.labelName,class:"tok-labelName"},{tag:K.inserted,class:"tok-inserted"},{tag:K.deleted,class:"tok-deleted"},{tag:K.literal,class:"tok-literal"},{tag:K.string,class:"tok-string"},{tag:K.number,class:"tok-number"},{tag:[K.regexp,K.escape,K.special(K.string)],class:"tok-string2"},{tag:K.variableName,class:"tok-variableName"},{tag:K.local(K.variableName),class:"tok-variableName tok-local"},{tag:K.definition(K.variableName),class:"tok-variableName tok-definition"},{tag:K.special(K.variableName),class:"tok-variableName2"},{tag:K.definition(K.propertyName),class:"tok-propertyName tok-definition"},{tag:K.typeName,class:"tok-typeName"},{tag:K.namespace,class:"tok-namespace"},{tag:K.className,class:"tok-className"},{tag:K.macroName,class:"tok-macroName"},{tag:K.propertyName,class:"tok-propertyName"},{tag:K.operator,class:"tok-operator"},{tag:K.comment,class:"tok-comment"},{tag:K.meta,class:"tok-meta"},{tag:K.invalid,class:"tok-invalid"},{tag:K.punctuation,class:"tok-punctuation"}]);var rw;const Sd=new Ue;function tW(t){return ge.define({combine:t?e=>e.concat(t):void 0})}class io{constructor(e,n,r=[]){this.data=e,Ge.prototype.hasOwnProperty("tree")||Object.defineProperty(Ge.prototype,"tree",{get(){return nr(this)}}),this.parser=n,this.extension=[Jl.of(this),Ge.languageData.of((i,o,s)=>i.facet(RA(i,o,s)))].concat(r)}isActiveAt(e,n,r=-1){return RA(e,n,r)==this.data}findRegions(e){let n=e.facet(Jl);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(Sd)==this.data){r.push({from:s,to:s+o.length});return}let l=o.prop(Ue.mounted);if(l){if(l.tree.prop(Sd)==this.data){if(l.overlay)for(let u of l.overlay)r.push({from:u.from+s,to:u.to+s});else r.push({from:s,to:s+o.length});return}else if(l.overlay){let u=r.length;if(i(l.tree,l.overlay[0].from+s),r.length>u)return}}for(let u=0;u<o.children.length;u++){let c=o.children[u];c instanceof Xt&&i(c,o.positions[u]+s)}};return i(nr(e),0),r}get allowsNesting(){return!0}}io.setState=Me.define();function RA(t,e,n){let r=t.facet(Jl);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let o=nr(t).topNode;o;o=o.enter(e,n,On.ExcludeBuffers))i=o.type.prop(Sd)||i;return i}class S0 extends io{constructor(e,n){super(e,n),this.parser=n}static define(e){let n=tW(e.languageData);return new S0(n,e.parser.configure({props:[Sd.add(r=>r.isTop?n:void 0)]}))}configure(e){return new S0(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function nr(t){let e=t.field(io.state,!1);return e?e.tree:Xt.empty}class nW{constructor(e,n=e.length){this.doc=e,this.length=n,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let ph=null;class k0{constructor(e,n,r=[],i,o,s,l,u){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=l,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new k0(e,n,[],Xt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new nW(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Xt.empty&&this.isDone(n!=null?n:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(tu.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n!=null?n:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(tu.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=ph;ph=this;try{return e()}finally{ph=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=MA(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((c,h,p,g)=>u.push({fromA:c,toA:h,fromB:p,toB:g})),r=tu.applyChanges(r,u),i=Xt.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let h=e.mapPos(c.from,1),p=e.mapPos(c.to,-1);h<p&&l.push({from:h,to:p})}}}return new k0(this.parser,n,r,i,o,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=MA(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends L3{createParse(n,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let u=ph;if(u){for(let c of i)u.tempSkipped.push(c);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=s,new Xt(Vr.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return ph}}function MA(t,e,n){return tu.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Yf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Yf(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=k0.create(e.facet(Jl).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Yf(r)}}io.state=Fn.define({create:Yf.init,update(t,e){for(let n of e.effects)if(n.is(io.setState))return n.value;return e.startState.facet(Jl)!=e.state.facet(Jl)?Yf.init(e.state):t.apply(e)}});let I3=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(I3=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const iw=typeof navigator<"u"&&((rw=navigator.scheduling)===null||rw===void 0?void 0:rw.isInputPending)?()=>navigator.scheduling.isInputPending():null,rW=Zt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(io.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(io.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=I3(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(io.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!iw?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<i&&r.doc.length>i+1e3,u=o.context.work(()=>iw&&iw()||Date.now()>s,i+(l?0:1e5));this.chunkBudget-=Date.now()-n,(u||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:io.setState.of(new Yf(o.context))})),this.chunkBudget>0&&!(u&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>li(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Jl=ge.define({combine(t){return t.length?t[0]:null},enables:[io.state,rW]});class iW{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const oW=ge.define(),cS=ge.define({combine:t=>{if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function E0(t){let e=t.facet(cS);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function kd(t,e){let n="",r=t.tabSize;if(t.facet(cS).charCodeAt(0)==9)for(;e>=r;)n+="	",e-=r;for(let i=0;i<e;i++)n+=" ";return n}function hS(t,e){t instanceof Ge&&(t=new kv(t));for(let r of t.state.facet(oW)){let i=r(t,e);if(i!=null)return i}let n=nr(t.state);return n?sW(t,n,e):null}class kv{constructor(e,n={}){this.state=e,this.options=n,this.unit=E0(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,n=e.length){return Wd(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const F3=new Ue;function sW(t,e,n){return z3(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function lW(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function aW(t){let e=t.type.prop(F3);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Ue.closedBy))){let i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>hW(s,!0,1,void 0,o&&!lW(s)?i.from:void 0)}return t.parent==null?uW:null}function z3(t,e,n){for(;t;t=t.parent){let r=aW(t);if(r)return r(dS.create(n,e,t))}return null}function uW(){return 0}class dS extends kv{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.node=r}static create(e,n,r){return new dS(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let n=this.node.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(fW(n,this.node))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?z3(e,this.pos,this.base):0}}function fW(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function cW(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let l=n.to;;){let u=e.childAfter(l);if(!u||u==r)return null;if(!u.type.isSkipped)return u.from<s?n:null;l=u.to}}function hW(t,e,n,r,i){let o=t.textAfter,s=o.match(/^\s*/)[0].length,l=r&&o.slice(s,s+r.length)==r||i==t.pos+s,u=e?cW(t):null;return u?l?t.column(u.from):t.column(u.to):t.baseIndent+(l?0:t.unit*n)}function LA({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const dW=200;function pW(){return Ge.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+dW)return t;let o=n.sliceString(i.from,r);if(!e.some(c=>c.test(o)))return t;let{state:s}=t,l=-1,u=[];for(let{head:c}of s.selection.ranges){let h=s.doc.lineAt(c);if(h.from==l)continue;l=h.from;let p=hS(s,h.from);if(p==null)continue;let g=/^\s*/.exec(h.text)[0],v=kd(s,p);g!=v&&u.push({from:h.from,to:h.from+g.length,insert:v})}return u.length?[t,{changes:u,sequential:!0}]:t})}const gW=ge.define(),$3=new Ue;function mW(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function vW(t,e,n){let r=nr(t);if(r.length<n)return null;let i=r.resolveInner(n),o=null;for(let s=i;s;s=s.parent){if(s.to<=n||s.from>n)continue;if(o&&s.from<e)break;let l=s.type.prop($3);if(l&&(s.to<r.length-50||r.length==t.doc.length||!yW(s))){let u=l(s,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(o=u)}}return o}function yW(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function C0(t,e,n){for(let r of t.facet(gW)){let i=r(t,e,n);if(i)return i}return vW(t,e,n)}function H3(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Ev=Me.define({map:H3}),qd=Me.define({map:H3});function V3(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const uu=Fn.define({create(){return me.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(Ev)&&!wW(t,n.value.from,n.value.to)?t=t.update({add:[NA.range(n.value.from,n.value.to)]}):n.is(qd)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,o)=>{i<r&&o>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return t},provide:t=>de.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(NA.range(r,i))}return me.set(e,!0)}});function A0(t,e,n){var r;let i=null;return(r=t.field(uu,!1))===null||r===void 0||r.between(e,n,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function wW(t,e,n){let r=!1;return t.between(e,e,(i,o)=>{i==e&&o==n&&(r=!0)}),r}function U3(t,e){return t.field(uu,!1)?e:e.concat(Me.appendConfig.of(q3()))}const _W=t=>{for(let e of V3(t)){let n=C0(t.state,e.from,e.to);if(n)return t.dispatch({effects:U3(t.state,[Ev.of(n),W3(t,n)])}),!0}return!1},xW=t=>{if(!t.state.field(uu,!1))return!1;let e=[];for(let n of V3(t)){let r=A0(t.state,n.from,n.to);r&&e.push(qd.of(r),W3(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function W3(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return de.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const bW=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=C0(e,i.from,i.to);o&&n.push(Ev.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:U3(t.state,n)}),!!n.length},SW=t=>{let e=t.state.field(uu,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(qd.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},kW=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:_W},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:xW},{key:"Ctrl-Alt-[",run:bW},{key:"Ctrl-Alt-]",run:SW}],EW={placeholderDOM:null,placeholderText:"\u2026"},j3=ge.define({combine(t){return Vs(t,EW)}});function q3(t){let e=[uu,TW];return t&&e.push(j3.of(t)),e}const NA=me.replace({widget:new class extends Us{toDOM(t){let{state:e}=t,n=e.facet(j3),r=o=>{let s=t.lineBlockAt(t.posAtDOM(o.target)),l=A0(t.state,s.from,s.to);l&&t.dispatch({effects:qd.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),CW={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ow extends Is{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function AW(t={}){let e=Object.assign(Object.assign({},CW),t),n=new ow(e,!0),r=new ow(e,!1),i=Zt.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Jl)!=s.state.facet(Jl)||s.startState.field(uu,!1)!=s.state.field(uu,!1)||nr(s.startState)!=nr(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new Ul;for(let u of s.viewportLineBlocks){let c=A0(s.state,u.from,u.to)?r:C0(s.state,u.from,u.to)?n:null;c&&l.add(u.from,u.from,c)}return l.finish()}}),{domEventHandlers:o}=e;return[i,NU({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(i))===null||l===void 0?void 0:l.markers)||ut.empty},initialSpacer(){return new ow(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,l,u)=>{if(o.click&&o.click(s,l,u))return!0;let c=A0(s.state,l.from,l.to);if(c)return s.dispatch({effects:qd.of(c)}),!0;let h=C0(s.state,l.from,l.to);return h?(s.dispatch({effects:Ev.of(h)}),!0):!1}})}),q3()]}const TW=de.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Jd{constructor(e,n){let r;function i(l){let u=Wl.newName();return(r||(r=Object.create(null)))["."+u]=l,u}const o=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,s=n.scope;this.scope=s instanceof io?l=>l.prop(Sd)==s.data:s?l=>l==s:void 0,this.style=B3(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=r?new Wl(r):null,this.themeType=n.themeType}static define(e,n){return new Jd(e,n||{})}}const mx=ge.define(),J3=ge.define({combine(t){return t.length?[t[0]]:null}});function sw(t){let e=t.facet(mx);return e.length?e:t.facet(J3)}function K3(t,e){let n=[RW],r;return t instanceof Jd&&(t.module&&n.push(de.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(J3.of(t)):r?n.push(mx.computeN([de.darkTheme],i=>i.facet(de.darkTheme)==(r=="dark")?[t]:[])):n.push(mx.of(t)),n}class OW{constructor(e){this.markCache=Object.create(null),this.tree=nr(e.state),this.decorations=this.buildDeco(e,sw(e.state))}update(e){let n=nr(e.state),r=sw(e.state),i=r!=sw(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return me.none;let r=new Ul;for(let{from:i,to:o}of e.visibleRanges)XU(this.tree,n,(s,l,u)=>{r.add(s,l,this.markCache[u]||(this.markCache[u]=me.mark({class:u})))},i,o);return r.finish()}}const RW=uc.high(Zt.fromClass(OW,{decorations:t=>t.decorations})),MW=Jd.define([{tag:K.meta,color:"#7a757a"},{tag:K.link,textDecoration:"underline"},{tag:K.heading,textDecoration:"underline",fontWeight:"bold"},{tag:K.emphasis,fontStyle:"italic"},{tag:K.strong,fontWeight:"bold"},{tag:K.strikethrough,textDecoration:"line-through"},{tag:K.keyword,color:"#708"},{tag:[K.atom,K.bool,K.url,K.contentSeparator,K.labelName],color:"#219"},{tag:[K.literal,K.inserted],color:"#164"},{tag:[K.string,K.deleted],color:"#a11"},{tag:[K.regexp,K.escape,K.special(K.string)],color:"#e40"},{tag:K.definition(K.variableName),color:"#00f"},{tag:K.local(K.variableName),color:"#30a"},{tag:[K.typeName,K.namespace],color:"#085"},{tag:K.className,color:"#167"},{tag:[K.special(K.variableName),K.macroName],color:"#256"},{tag:K.definition(K.propertyName),color:"#00c"},{tag:K.comment,color:"#940"},{tag:K.invalid,color:"#f00"}]),LW=de.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),G3=1e4,Z3="()[]{}",Y3=ge.define({combine(t){return Vs(t,{afterCursor:!0,brackets:Z3,maxScanDistance:G3,renderMatch:PW})}}),NW=me.mark({class:"cm-matchingBracket"}),DW=me.mark({class:"cm-nonmatchingBracket"});function PW(t){let e=[],n=t.matched?NW:DW;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const BW=Fn.define({create(){return me.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Y3);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=Ho(e.state,i.head,-1,r)||i.head>0&&Ho(e.state,i.head-1,1,r)||r.afterCursor&&(Ho(e.state,i.head,1,r)||i.head<e.state.doc.length&&Ho(e.state,i.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,e.state)))}return me.set(n,!0)},provide:t=>de.decorations.from(t)}),IW=[BW,LW];function FW(t={}){return[Y3.of(t),IW]}function vx(t,e,n){let r=t.prop(e<0?Ue.openedBy:Ue.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Ho(t,e,n,r={}){let i=r.maxScanDistance||G3,o=r.brackets||Z3,s=nr(t),l=s.resolveInner(e,n);for(let u=l;u;u=u.parent){let c=vx(u.type,n,o);if(c&&u.from<u.to)return zW(t,e,n,u,c,o)}return $W(t,e,n,s,l.type,i,o)}function zW(t,e,n,r,i,o){let s=r.parent,l={from:r.from,to:r.to},u=0,c=s==null?void 0:s.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:l,end:{from:c.from,to:c.to},matched:!0};if(vx(c.type,n,o))u++;else if(vx(c.type,-n,o)){if(u==0)return{start:l,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function $W(t,e,n,r,i,o,s){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),u=s.indexOf(l);if(u<0||u%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),p=0;for(let g=0;!h.next().done&&g<=o;){let v=h.value;n<0&&(g+=v.length);let y=e+g*n;for(let A=n>0?0:v.length-1,O=n>0?v.length:-1;A!=O;A+=n){let x=s.indexOf(v[A]);if(!(x<0||r.resolveInner(y+A,1).type!=i))if(x%2==0==n>0)p++;else{if(p==1)return{start:c,end:{from:y+A,to:y+A+1},matched:x>>1==u>>1};p--}}n>0&&(g+=v.length)}return h.done?{start:c,matched:!1}:null}const HW=Object.create(null),DA=[Vr.none],PA=[],VW=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])VW[t]=UW(HW,e);function lw(t,e){PA.indexOf(t)>-1||(PA.push(t),console.warn(e))}function UW(t,e){let n=null;for(let o of e.split(".")){let s=t[o]||K[o];s?typeof s=="function"?n?n=s(n):lw(o,`Modifier ${o} used at start of tag`):n?lw(o,`Tag ${o} used as modifier`):n=s:lw(o,`Unknown highlighting tag ${o}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=Vr.define({id:DA.length,name:r,props:[D3({[r]:n})]});return DA.push(i),i.id}const WW=t=>{let e=gS(t.state);return e.line?jW(t):e.block?JW(t):!1};function pS(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const jW=pS(ZW,0),qW=pS(Q3,0),JW=pS((t,e)=>Q3(t,e,GW(e)),0);function gS(t,e=t.selection.main.head){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const gh=50;function KW(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-gh,r),s=t.sliceDoc(i,i+gh),l=/\s*$/.exec(o)[0].length,u=/^\s*/.exec(s)[0].length,c=o.length-l;if(o.slice(c-e.length,c)==e&&s.slice(u,u+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:i+u,margin:u&&1}};let h,p;i-r<=2*gh?h=p=t.sliceDoc(r,i):(h=t.sliceDoc(r,r+gh),p=t.sliceDoc(i-gh,i));let g=/^\s*/.exec(h)[0].length,v=/\s*$/.exec(p)[0].length,y=p.length-v-n.length;return h.slice(g,g+e.length)==e&&p.slice(y,y+n.length)==n?{open:{pos:r+g+e.length,margin:/\s/.test(h.charAt(g+e.length))?1:0},close:{pos:i-v-n.length,margin:/\s/.test(p.charAt(y-1))?1:0}}:null}function GW(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from,to:i.to})}return e}function Q3(t,e,n=e.selection.ranges){let r=n.map(o=>gS(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,s)=>KW(e,r[s],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let s=0,l;s<i.length;s++)if(l=i[s]){let u=r[s],{open:c,close:h}=l;o.push({from:c.pos-u.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+u.close.length})}return{changes:o}}return null}function ZW(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of n){let l=r.length,u=1e9;for(let c=o;c<=s;){let h=e.doc.lineAt(c);if(h.from>i&&(o==s||s>h.from)){i=h.from;let p=gS(e,c).line;if(!p)continue;let g=/^\s*/.exec(h.text)[0].length,v=g==h.length,y=h.text.slice(g,g+p.length)==p?g:-1;g<h.text.length&&g<u&&(u=g),r.push({line:h,comment:y,token:p,indent:g,empty:v,single:!1})}c=h.to+1}if(u<1e9)for(let c=l;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=u);r.length==l+1&&(r[l].single=!0)}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:u,indent:c,empty:h,single:p}of r)(p||!h)&&o.push({from:l.from+c,insert:u+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:u}of r)if(l>=0){let c=s.from+l,h=c+u.length;s.text[h-s.from]==" "&&h++,o.push({from:c,to:h})}return{changes:o}}return null}const yx=wu.define(),YW=wu.define(),QW=ge.define(),X3=ge.define({combine(t){return Vs(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function XW(t){let e=0;return t.iterChangedRanges((n,r)=>e=r),e}const eN=Fn.define({create(){return Vo.empty},update(t,e){let n=e.state.facet(X3),r=e.annotation(yx);if(r){let u=e.docChanged?te.single(XW(e.changes)):void 0,c=Pr.fromTransaction(e,u),h=r.side,p=h==0?t.undone:t.done;return c?p=T0(p,p.length,n.minDepth,c):p=rN(p,e.startState.selection),new Vo(h==0?r.rest:p,h==0?p:r.rest)}let i=e.annotation(YW);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(un.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=Pr.fromTransaction(e),s=e.annotation(un.time),l=e.annotation(un.userEvent);return o?t=t.addChanges(o,s,l,n.newGroupDelay,n.minDepth):e.selection&&(t=t.addSelection(e.startState.selection,s,l,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Vo(t.done.map(Pr.fromJSON),t.undone.map(Pr.fromJSON))}});function ej(t={}){return[eN,X3.of(t),de.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?tN:e.inputType=="historyRedo"?wx:null;return r?(e.preventDefault(),r(n)):!1}})]}function Cv(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(eN,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}const tN=Cv(0,!1),wx=Cv(1,!1),tj=Cv(0,!0),nj=Cv(1,!0);class Pr{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new Pr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Pr(e.changes&&sn.fromJSON(e.changes),[],e.mapped&&Jo.fromJSON(e.mapped),e.startSelection&&te.fromJSON(e.startSelection),e.selectionsAfter.map(te.fromJSON))}static fromTransaction(e,n){let r=Pi;for(let i of e.startState.facet(QW)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new Pr(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Pi)}static selection(e){return new Pr(void 0,Pi,void 0,void 0,e)}}function T0(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function rj(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,s,l)=>{for(let u=0;u<n.length;){let c=n[u++],h=n[u++];l>=c&&s<=h&&(r=!0)}}),r}function ij(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function nN(t,e){return t.length?e.length?t.concat(e):t:e}const Pi=[],oj=200;function rN(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-oj));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),T0(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Pr.selection([e])]}function sj(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function aw(t,e){if(!t.length)return t;let n=t.length,r=Pi;for(;n;){let i=lj(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Pr.selection(r)]:Pi}function lj(t,e,n){let r=nN(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Pi,n);if(!t.changes)return Pr.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new Pr(i,Me.mapEffects(t.effects,e),s,t.startSelection.map(o),r)}const aj=/^(input\.type|delete)($|\.)/;class Vo{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Vo(this.done,this.undone):this}addChanges(e,n,r,i,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||aj.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<i&&rj(l.changes,e.changes)||r=="input.type.compose")?s=T0(s,s.length-1,o,new Pr(e.changes.compose(l.changes),nN(e.effects,l.effects),l.mapped,l.startSelection,Pi)):s=T0(s,s.length,o,e),new Vo(s,Pi,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Pi;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&ij(o[o.length-1],e)?this:new Vo(rN(this.done,e),this.undone,n,r)}addMapping(e){return new Vo(aw(this.done,e),aw(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1];if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:yx.of({side:e,rest:sj(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=i.length==1?Pi:i.slice(0,i.length-1);return o.mapped&&(s=aw(s,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:yx.of({side:e,rest:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vo.empty=new Vo(Pi,Pi);const uj=[{key:"Mod-z",run:tN,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:wx,preventDefault:!0},{linux:"Ctrl-Shift-z",run:wx,preventDefault:!0},{key:"Mod-u",run:tj,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:nj,preventDefault:!0}];function fc(t,e){return te.create(t.ranges.map(e),t.mainIndex)}function ts(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function go({state:t,dispatch:e},n){let r=fc(t.selection,n);return r.eq(t.selection)?!1:(e(ts(t,r)),!0)}function Av(t,e){return te.cursor(e?t.to:t.from)}function iN(t,e){return go(t,n=>n.empty?t.moveByChar(n,e):Av(n,e))}function or(t){return t.textDirectionAt(t.state.selection.main.head)==Dt.LTR}const oN=t=>iN(t,!or(t)),sN=t=>iN(t,or(t));function lN(t,e){return go(t,n=>n.empty?t.moveByGroup(n,e):Av(n,e))}const fj=t=>lN(t,!or(t)),cj=t=>lN(t,or(t));function hj(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Tv(t,e,n){let r=nr(t).resolveInner(e.head),i=n?Ue.closedBy:Ue.openedBy;for(let u=e.head;;){let c=n?r.childAfter(u):r.childBefore(u);if(!c)break;hj(t,c,i)?r=c:u=n?c.to:c.from}let o=r.type.prop(i),s,l;return o&&(s=n?Ho(t,r.from,1):Ho(t,r.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?r.to:r.from,te.cursor(l,n?-1:1)}const dj=t=>go(t,e=>Tv(t.state,e,!or(t))),pj=t=>go(t,e=>Tv(t.state,e,or(t)));function aN(t,e){return go(t,n=>{if(!n.empty)return Av(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const uN=t=>aN(t,!1),fN=t=>aN(t,!0);function cN(t){return Math.max(t.defaultLineHeight,Math.min(t.dom.clientHeight,innerHeight)-5)}function hN(t,e){let{state:n}=t,r=fc(n.selection,l=>l.empty?t.moveVertically(l,e,cN(t)):Av(l,e));if(r.eq(n.selection))return!1;let i=t.coordsAtPos(n.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),s;return i&&i.top>o.top&&i.bottom<o.bottom&&i.top-o.top<=t.scrollDOM.scrollHeight-t.scrollDOM.scrollTop-t.scrollDOM.clientHeight&&(s=de.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-o.top})),t.dispatch(ts(n,r),{effects:s}),!0}const BA=t=>hN(t,!1),_x=t=>hN(t,!0);function aa(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=te.cursor(r.from+o))}return i}const gj=t=>go(t,e=>aa(t,e,!0)),mj=t=>go(t,e=>aa(t,e,!1)),vj=t=>go(t,e=>aa(t,e,!or(t))),yj=t=>go(t,e=>aa(t,e,or(t))),wj=t=>go(t,e=>te.cursor(t.lineBlockAt(e.head).from,1)),_j=t=>go(t,e=>te.cursor(t.lineBlockAt(e.head).to,-1));function xj(t,e,n){let r=!1,i=fc(t.selection,o=>{let s=Ho(t,o.head,-1)||Ho(t,o.head,1)||o.head>0&&Ho(t,o.head-1,1)||o.head<t.doc.length&&Ho(t,o.head+1,-1);if(!s||!s.end)return o;r=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return n?te.range(o.anchor,l):te.cursor(l)});return r?(e(ts(t,i)),!0):!1}const bj=({state:t,dispatch:e})=>xj(t,e,!1);function qi(t,e){let n=fc(t.state.selection,r=>{let i=e(r);return te.range(r.anchor,i.head,i.goalColumn)});return n.eq(t.state.selection)?!1:(t.dispatch(ts(t.state,n)),!0)}function dN(t,e){return qi(t,n=>t.moveByChar(n,e))}const pN=t=>dN(t,!or(t)),gN=t=>dN(t,or(t));function mN(t,e){return qi(t,n=>t.moveByGroup(n,e))}const Sj=t=>mN(t,!or(t)),kj=t=>mN(t,or(t)),Ej=t=>qi(t,e=>Tv(t.state,e,!or(t))),Cj=t=>qi(t,e=>Tv(t.state,e,or(t)));function vN(t,e){return qi(t,n=>t.moveVertically(n,e))}const yN=t=>vN(t,!1),wN=t=>vN(t,!0);function _N(t,e){return qi(t,n=>t.moveVertically(n,e,cN(t)))}const IA=t=>_N(t,!1),FA=t=>_N(t,!0),Aj=t=>qi(t,e=>aa(t,e,!0)),Tj=t=>qi(t,e=>aa(t,e,!1)),Oj=t=>qi(t,e=>aa(t,e,!or(t))),Rj=t=>qi(t,e=>aa(t,e,or(t))),Mj=t=>qi(t,e=>te.cursor(t.lineBlockAt(e.head).from)),Lj=t=>qi(t,e=>te.cursor(t.lineBlockAt(e.head).to)),zA=({state:t,dispatch:e})=>(e(ts(t,{anchor:0})),!0),$A=({state:t,dispatch:e})=>(e(ts(t,{anchor:t.doc.length})),!0),HA=({state:t,dispatch:e})=>(e(ts(t,{anchor:t.selection.main.anchor,head:0})),!0),VA=({state:t,dispatch:e})=>(e(ts(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Nj=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Dj=({state:t,dispatch:e})=>{let n=Mv(t).map(({from:r,to:i})=>te.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:te.create(n),userEvent:"select"})),!0},Pj=({state:t,dispatch:e})=>{let n=fc(t.selection,r=>{var i;let o=nr(t).resolveInner(r.head,1);for(;!(o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from||!(!((i=o.parent)===null||i===void 0)&&i.parent));)o=o.parent;return te.range(o.to,o.from)});return e(ts(t,n)),!0},Bj=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=te.create([n.main]):n.main.empty||(r=te.create([te.cursor(n.main.head)])),r?(e(ts(t,r)),!0):!1};function Ov({state:t,dispatch:e},n){if(t.readOnly)return!1;let r="delete.selection",i=t.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let u=n(s);u<s?r="delete.backward":u>s&&(r="delete.forward"),s=Math.min(s,u),l=Math.max(l,u)}return s==l?{range:o}:{changes:{from:s,to:l},range:te.cursor(s)}});return i.changes.empty?!1:(e(t.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?de.announce.of(t.phrase("Selection deleted")):void 0})),!0)}function Rv(t,e,n){if(t instanceof de)for(let r of t.state.facet(de.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}const xN=(t,e)=>Ov(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),o,s;if(!e&&n>i.from&&n<i.from+200&&!/[^ \t]/.test(o=i.text.slice(0,n-i.from))){if(o[o.length-1]=="	")return n-1;let l=Wd(o,r.tabSize),u=l%E0(r)||E0(r);for(let c=0;c<u&&o[o.length-1-c]==" ";c++)n--;s=n}else s=ii(i.text,n-i.from,e,e)+i.from,s==n&&i.number!=(e?r.doc.lines:1)&&(s+=e?1:-1);return Rv(t,s,e)}),xx=t=>xN(t,!1),bN=t=>xN(t,!0),SN=(t,e)=>Ov(t,n=>{let r=n,{state:i}=t,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let l=null;;){if(r==(e?o.to:o.from)){r==n&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let u=ii(o.text,r-o.from,e)+o.from,c=o.text.slice(Math.min(r,u)-o.from,Math.max(r,u)-o.from),h=s(c);if(l!=null&&h!=l)break;(c!=" "||r!=n)&&(l=h),r=u}return Rv(t,r,e)}),kN=t=>SN(t,!1),Ij=t=>SN(t,!0),EN=t=>Ov(t,e=>{let n=t.lineBlockAt(e).to;return Rv(t,e<n?n:Math.min(t.state.doc.length,e+1),!0)}),Fj=t=>Ov(t,e=>{let n=t.lineBlockAt(e).from;return Rv(t,e>n?n:Math.max(0,e-1),!1)}),zj=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:at.of(["",""])},range:te.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},$j=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),s=i==o.from?i-1:ii(o.text,i-o.from,!1)+o.from,l=i==o.to?i+1:ii(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:t.doc.slice(i,l).append(t.doc.slice(s,i))},range:te.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Mv(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function CN(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of Mv(t)){if(n?o.to==t.doc.length:o.from==0)continue;let s=t.doc.lineAt(n?o.to+1:o.from-1),l=s.length+1;if(n){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+t.lineBreak});for(let u of o.ranges)i.push(te.range(Math.min(t.doc.length,u.anchor+l),Math.min(t.doc.length,u.head+l)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:t.lineBreak+s.text});for(let u of o.ranges)i.push(te.range(u.anchor-l,u.head-l))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:te.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Hj=({state:t,dispatch:e})=>CN(t,e,!1),Vj=({state:t,dispatch:e})=>CN(t,e,!0);function AN(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Mv(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Uj=({state:t,dispatch:e})=>AN(t,e,!1),Wj=({state:t,dispatch:e})=>AN(t,e,!0),jj=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Mv(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=fc(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function qj(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=nr(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(Ue.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const Jj=TN(!1),Kj=TN(!0);function TN(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,l=e.doc.lineAt(o),u=!t&&o==s&&qj(e,o);t&&(o=s=(s<=l.to?l:e.doc.lineAt(s)).to);let c=new kv(e,{simulateBreak:o,simulateDoubleBreak:!!u}),h=hS(c,o);for(h==null&&(h=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);s<l.to&&/\s/.test(l.text[s-l.from]);)s++;u?{from:o,to:s}=u:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let p=["",kd(e,h)];return u&&p.push(kd(e,c.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:at.of(p)},range:te.cursor(o+1+p[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function mS(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let l=t.doc.lineAt(s);l.number>n&&(r.empty||r.to>l.from)&&(e(l,i,r),n=l.number),s=l.to+1}let o=t.changes(i);return{changes:i,range:te.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const Gj=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new kv(t,{overrideIndentation:o=>{let s=n[o];return s==null?-1:s}}),i=mS(t,(o,s,l)=>{let u=hS(r,o.from);if(u==null)return;/\S/.test(o.text)||(u=0);let c=/^\s*/.exec(o.text)[0],h=kd(t,u);(c!=h||l.from<o.from+c.length)&&(n[o.from]=u,s.push({from:o.from,to:o.from+c.length,insert:h}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},ON=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(mS(t,(n,r)=>{r.push({from:n.from,insert:t.facet(cS)})}),{userEvent:"input.indent"})),!0),RN=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(mS(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=Wd(i,t.tabSize),s=0,l=kd(t,Math.max(0,o-E0(t)));for(;s<i.length&&s<l.length&&i.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:n.from+s,to:n.from+i.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),Zj=[{key:"Ctrl-b",run:oN,shift:pN,preventDefault:!0},{key:"Ctrl-f",run:sN,shift:gN},{key:"Ctrl-p",run:uN,shift:yN},{key:"Ctrl-n",run:fN,shift:wN},{key:"Ctrl-a",run:wj,shift:Mj},{key:"Ctrl-e",run:_j,shift:Lj},{key:"Ctrl-d",run:bN},{key:"Ctrl-h",run:xx},{key:"Ctrl-k",run:EN},{key:"Ctrl-Alt-h",run:kN},{key:"Ctrl-o",run:zj},{key:"Ctrl-t",run:$j},{key:"Ctrl-v",run:_x}],Yj=[{key:"ArrowLeft",run:oN,shift:pN,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:fj,shift:Sj,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:vj,shift:Oj,preventDefault:!0},{key:"ArrowRight",run:sN,shift:gN,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cj,shift:kj,preventDefault:!0},{mac:"Cmd-ArrowRight",run:yj,shift:Rj,preventDefault:!0},{key:"ArrowUp",run:uN,shift:yN,preventDefault:!0},{mac:"Cmd-ArrowUp",run:zA,shift:HA},{mac:"Ctrl-ArrowUp",run:BA,shift:IA},{key:"ArrowDown",run:fN,shift:wN,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$A,shift:VA},{mac:"Ctrl-ArrowDown",run:_x,shift:FA},{key:"PageUp",run:BA,shift:IA},{key:"PageDown",run:_x,shift:FA},{key:"Home",run:mj,shift:Tj,preventDefault:!0},{key:"Mod-Home",run:zA,shift:HA},{key:"End",run:gj,shift:Aj,preventDefault:!0},{key:"Mod-End",run:$A,shift:VA},{key:"Enter",run:Jj},{key:"Mod-a",run:Nj},{key:"Backspace",run:xx,shift:xx},{key:"Delete",run:bN},{key:"Mod-Backspace",mac:"Alt-Backspace",run:kN},{key:"Mod-Delete",mac:"Alt-Delete",run:Ij},{mac:"Mod-Backspace",run:Fj},{mac:"Mod-Delete",run:EN}].concat(Zj.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Qj=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:dj,shift:Ej},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:pj,shift:Cj},{key:"Alt-ArrowUp",run:Hj},{key:"Shift-Alt-ArrowUp",run:Uj},{key:"Alt-ArrowDown",run:Vj},{key:"Shift-Alt-ArrowDown",run:Wj},{key:"Escape",run:Bj},{key:"Mod-Enter",run:Kj},{key:"Alt-l",mac:"Ctrl-l",run:Dj},{key:"Mod-i",run:Pj,preventDefault:!0},{key:"Mod-[",run:RN},{key:"Mod-]",run:ON},{key:"Mod-Alt-\\",run:Gj},{key:"Shift-Mod-k",run:jj},{key:"Shift-Mod-\\",run:bj},{key:"Mod-/",run:WW},{key:"Alt-A",run:qW}].concat(Yj),Xj={key:"Tab",run:ON,shift:RN};function Ct(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)MN(t,arguments[e]);return t}function MN(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)MN(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const UA=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Qf{constructor(e,n,r=0,i=e.length,o){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?s=>o(UA(s)):UA,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return An(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Zb(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=ti(e);let i=this.normalize(n);for(let o=0,s=r;;o++){let l=i.charCodeAt(o),u=this.match(l,s);if(u)return this.value=u,this;if(o==i.length-1)break;s==r&&o<n.length&&n.charCodeAt(o)==l&&s++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,s=!0)),s||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r}}typeof Symbol<"u"&&(Qf.prototype[Symbol.iterator]=function(){return this});const LN={from:-1,to:-1,match:/.*/.exec("")},vS="gm"+(/x/.unicode==null?"":"u");class NN{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=LN,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new DN(e,n,r,i,o);this.re=new RegExp(n,vS+(r!=null&&r.ignoreCase?"i":"")),this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=O0(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=O0(this.text,i+(r==i?1:0)),r==this.curLine.length&&this.nextLine(),r<i||r>this.value.to)return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const uw=new WeakMap;class Df{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=uw.get(e);if(!i||i.from>=r||i.to<=n){let l=new Df(n,e.sliceString(n,r));return uw.set(e,l),l}if(i.from==n&&i.to==r)return i;let{text:o,from:s}=i;return s>n&&(o=e.sliceString(n,s)+o,s=n),i.to<r&&(o+=e.sliceString(i.to,r)),uw.set(e,new Df(s,o)),new Df(n,o.slice(n-s,r-s))}}class DN{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=LN,this.matchPos=O0(e,i),this.re=new RegExp(n,vS+(r!=null&&r.ignoreCase?"i":"")),this.flat=Df.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n&&this.flat.to<this.to&&n.index+n[0].length>this.flat.text.length-10&&(n=null),n){let r=this.flat.from+n.index,i=r+n[0].length;return this.value={from:r,to:i,match:n},this.matchPos=O0(this.text,i+(r==i?1:0)),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=Df.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol<"u"&&(NN.prototype[Symbol.iterator]=DN.prototype[Symbol.iterator]=function(){return this});function eq(t){try{return new RegExp(t,vS),!0}catch{return!1}}function O0(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function bx(t){let e=Ct("input",{class:"cm-textfield",name:"line"}),n=Ct("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:R0.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},Ct("label",t.state.phrase("Go to line"),": ",e)," ",Ct("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:o}=t,s=o.doc.lineAt(o.selection.main.head),[,l,u,c,h]=i,p=c?+c.slice(1):0,g=u?+u:s.number;if(u&&h){let y=g/100;l&&(y=y*(l=="-"?-1:1)+s.number/o.doc.lines),g=Math.round(o.doc.lines*y)}else u&&l&&(g=g*(l=="-"?-1:1)+s.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,g)));t.dispatch({effects:R0.of(!1),selection:te.cursor(v.from+Math.max(0,Math.min(p,v.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const R0=Me.define(),WA=Fn.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(R0)&&(t=n.value);return t},provide:t=>bd.from(t,e=>e?bx:null)}),tq=t=>{let e=xd(t,bx);if(!e){let n=[R0.of(!0)];t.state.field(WA,!1)==null&&n.push(Me.appendConfig.of([WA,nq])),t.dispatch({effects:n}),e=xd(t,bx)}return e&&e.dom.querySelector("input").focus(),!0},nq=de.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),rq={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},PN=ge.define({combine(t){return Vs(t,rq,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function iq(t){let e=[uq,aq];return t&&e.push(PN.of(t)),e}const oq=me.mark({class:"cm-selectionMatch"}),sq=me.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function jA(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=gr.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=gr.Word)}function lq(t,e,n,r){return t(e.sliceDoc(n,n+1))==gr.Word&&t(e.sliceDoc(r-1,r))==gr.Word}const aq=Zt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(PN),{state:n}=t,r=n.selection;if(r.ranges.length>1)return me.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return me.none;let u=n.wordAt(i.head);if(!u)return me.none;s=n.charCategorizer(i.head),o=n.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return me.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),s=n.charCategorizer(i.head),!(jA(s,n,i.from,i.to)&&lq(s,n,i.from,i.to)))return me.none}else if(o=n.sliceDoc(i.from,i.to).trim(),!o)return me.none}let l=[];for(let u of t.visibleRanges){let c=new Qf(n.doc,o,u.from,u.to);for(;!c.next().done;){let{from:h,to:p}=c.value;if((!s||jA(s,n,h,p))&&(i.empty&&h<=i.from&&p>=i.to?l.push(sq.range(h,p)):(h>=i.to||p<=i.from)&&l.push(oq.range(h,p)),l.length>e.maxMatches))return me.none}}return me.set(l)}},{decorations:t=>t.decorations}),uq=de.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),fq=({state:t,dispatch:e})=>{let{selection:n}=t,r=te.create(n.ranges.map(i=>t.wordAt(i.head)||te.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function cq(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let s=!1,l=new Qf(t.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new Qf(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(u=>u.from==l.value.from))continue;if(o){let u=t.wordAt(l.value.from);if(!u||u.from!=l.value.from||u.to!=l.value.to)continue}return l.value}}const hq=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return fq({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=cq(t,r);return i?(e(t.update({selection:t.selection.addRange(te.range(i.from,i.to),!1),effects:de.scrollIntoView(i.to)})),!0):!1},yS=ge.define({combine(t){var e;return{top:t.reduce((n,r)=>n!=null?n:r.top,void 0)||!1,caseSensitive:t.reduce((n,r)=>n!=null?n:r.caseSensitive,void 0)||!1,literal:t.reduce((n,r)=>n!=null?n:r.literal,void 0)||!1,createPanel:((e=t.find(n=>n.createPanel))===null||e===void 0?void 0:e.createPanel)||(n=>new bq(n))}}});class BN{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||eq(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new pq(this):new dq(this)}getCursor(e,n=0,r=e.length){return this.regexp?lf(this,e,n,r):sf(this,e,n,r)}}class IN{constructor(e){this.spec=e}}function sf(t,e,n,r){return new Qf(e,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase())}class dq extends IN{constructor(e){super(e)}nextMatch(e,n,r){let i=sf(this.spec,e,r,e.length).nextOverlapping();return i.done&&(i=sf(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),s=sf(this.spec,e,o,i),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,n){let r=sf(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=sf(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function lf(t,e,n,r){return new NN(e,t.search,t.caseSensitive?void 0:{ignoreCase:!0},n,r)}class pq extends IN{nextMatch(e,n,r){let i=lf(this.spec,e,r,e.length).next();return i.done&&(i=lf(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),s=lf(this.spec,e,o,r),l=null;for(;!s.next().done;)l=s.value;if(l&&(o==n||l.from>o+10))return l;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n)}matchAll(e,n){let r=lf(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=lf(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const Ed=Me.define(),wS=Me.define(),Nl=Fn.define({create(t){return new fw(Sx(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ed)?t=new fw(n.value.create(),t.panel):n.is(wS)&&(t=new fw(t.query,n.value?_S:null));return t},provide:t=>bd.from(t,e=>e.panel)});class fw{constructor(e,n){this.query=e,this.panel=n}}const gq=me.mark({class:"cm-searchMatch"}),mq=me.mark({class:"cm-searchMatch cm-searchMatch-selected"}),vq=Zt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Nl))}update(t){let e=t.state.field(Nl);(e!=t.startState.field(Nl)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return me.none;let{view:n}=this,r=new Ul;for(let i=0,o=n.visibleRanges,s=o.length;i<s;i++){let{from:l,to:u}=o[i];for(;i<s-1&&u>o[i+1].from-2*250;)u=o[++i].to;t.highlight(n.state.doc,l,u,(c,h)=>{let p=n.state.selection.ranges.some(g=>g.from==c&&g.to==h);r.add(c,h,p?mq:gq)})}return r.finish()}},{decorations:t=>t.decorations});function Kd(t){return e=>{let n=e.state.field(Nl,!1);return n&&n.query.spec.valid?t(e,n):FN(e)}}const M0=Kd((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state.doc,n,n);return r?(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:xS(t,r),userEvent:"select.search"}),!0):!1}),L0=Kd((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n.doc,r,r);return i?(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:xS(t,i),userEvent:"select.search"}),!0):!1}),yq=Kd((t,{query:e})=>{let n=e.matchAll(t.state.doc,1e3);return!n||!n.length?!1:(t.dispatch({selection:te.create(n.map(r=>te.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),wq=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let l=new Qf(t.doc,t.sliceDoc(r,i));!l.next().done;){if(o.length>1e3)return!1;l.value.from==r&&(s=o.length),o.push(te.range(l.value.from,l.value.to))}return e(t.update({selection:te.create(o,s),userEvent:"select.search.matches"})),!0},qA=Kd((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n.doc,r,r);if(!o)return!1;let s=[],l,u,c=[];if(o.from==r&&o.to==i&&(u=n.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n.doc,o.from,o.to),c.push(de.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let h=s.length==0||s[0].from>=o.to?0:o.to-o.from-u.length;l={anchor:o.from-h,head:o.to-h},c.push(xS(t,o))}return t.dispatch({changes:s,selection:l,scrollIntoView:!!l,effects:c,userEvent:"input.replace"}),!0}),_q=Kd((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state.doc,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:de.announce.of(r),userEvent:"input.replace.all"}),!0});function _S(t){return t.state.facet(yS).createPanel(t)}function Sx(t,e){var n,r,i;let o=t.selection.main,s=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!s)return e;let l=t.facet(yS);return new BN({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:l.literal)?s:s.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:l.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:l.literal})}const FN=t=>{let e=t.state.field(Nl,!1);if(e&&e.panel){let n=xd(t,_S);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=t.root.activeElement){let i=Sx(t.state,e.query.spec);i.valid&&t.dispatch({effects:Ed.of(i)}),r.focus(),r.select()}}else t.dispatch({effects:[wS.of(!0),e?Ed.of(Sx(t.state,e.query.spec)):Me.appendConfig.of(kq)]});return!0},zN=t=>{let e=t.state.field(Nl,!1);if(!e||!e.panel)return!1;let n=xd(t,_S);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:wS.of(!1)}),!0},xq=[{key:"Mod-f",run:FN,scope:"editor search-panel"},{key:"F3",run:M0,shift:L0,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:M0,shift:L0,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:zN,scope:"editor search-panel"},{key:"Mod-Shift-l",run:wq},{key:"Alt-g",run:tq},{key:"Mod-d",run:hq,preventDefault:!0}];class bq{constructor(e){this.view=e;let n=this.query=e.state.field(Nl).query.spec;this.commit=this.commit.bind(this),this.searchField=Ct("input",{value:n.search,placeholder:Ti(e,"Find"),"aria-label":Ti(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ct("input",{value:n.replace,placeholder:Ti(e,"Replace"),"aria-label":Ti(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ct("input",{type:"checkbox",name:"case",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ct("input",{type:"checkbox",name:"re",checked:n.regexp,onchange:this.commit});function r(i,o,s){return Ct("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=Ct("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>M0(e),[Ti(e,"next")]),r("prev",()=>L0(e),[Ti(e,"previous")]),r("select",()=>yq(e),[Ti(e,"all")]),Ct("label",null,[this.caseField,Ti(e,"match case")]),Ct("label",null,[this.reField,Ti(e,"regexp")]),...e.state.readOnly?[]:[Ct("br"),this.replaceField,r("replace",()=>qA(e),[Ti(e,"replace")]),r("replaceAll",()=>_q(e),[Ti(e,"replace all")]),Ct("button",{name:"close",onclick:()=>zN(e),"aria-label":Ti(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new BN({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ed.of(e)}))}keydown(e){U7(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?L0:M0)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),qA(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ed)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(yS).top}}function Ti(t,e){return t.state.phrase(e)}const Gg=30,Zg=/[\s\.,:;?!]/;function xS(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-Gg),s=Math.min(i,n+Gg),l=t.state.sliceDoc(o,s);if(o!=r.from){for(let u=0;u<Gg;u++)if(!Zg.test(l[u+1])&&Zg.test(l[u])){l=l.slice(u);break}}if(s!=i){for(let u=l.length-1;u>l.length-Gg;u--)if(!Zg.test(l[u-1])&&Zg.test(l[u])){l=l.slice(0,u);break}}return de.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${r.number}.`)}const Sq=de.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),kq=[Nl,uc.lowest(vq),Sq];class $N{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=nr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),o=i.search(HN(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function JA(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Eq(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let o=1;o<i.length;o++)n[i[o]]=!0}let r=JA(e)+JA(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Cq(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Eq(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:n}:null}}class KA{constructor(e,n,r){this.completion=e,this.source=n,this.match=r}}function Dl(t){return t.selection.main.head}function HN(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?t:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}function Aq(t,e,n,r){return Object.assign(Object.assign({},t.changeByRange(i=>{if(i==t.selection.main)return{changes:{from:n,to:r,insert:e},range:te.cursor(n+e.length)};let o=r-n;return!i.empty||o&&t.sliceDoc(i.from-o,i.from)!=t.sliceDoc(n,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:e},range:te.cursor(i.from-o+e.length)}})),{userEvent:"input.complete"})}function VN(t,e){const n=e.completion.apply||e.completion.label;let r=e.source;typeof n=="string"?t.dispatch(Aq(t.state,n,r.from,r.to)):n(t,e.completion,r.from,r.to)}const GA=new WeakMap;function Tq(t){if(!Array.isArray(t))return t;let e=GA.get(t);return e||GA.set(t,e=Cq(t)),e}class Oq{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<e.length;){let r=An(e,n),i=ti(r);this.chars.push(r);let o=e.slice(n,n+i),s=o.toUpperCase();this.folded.push(An(s==o?o.toLowerCase():s,0)),n+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:o,byWord:s}=this;if(n.length==1){let k=An(e,0);return k==n[0]?[0,0,ti(k)]:k==r[0]?[-200,0,ti(k)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let u=n.length,c=0;if(l<0){for(let k=0,b=Math.min(e.length,200);k<b&&c<u;){let T=An(e,k);(T==n[c]||T==r[c])&&(i[c++]=k),k+=ti(T)}if(c<u)return null}let h=0,p=0,g=!1,v=0,y=-1,A=-1,O=/[a-z]/.test(e),x=!0;for(let k=0,b=Math.min(e.length,200),T=0;k<b&&p<u;){let N=An(e,k);l<0&&(h<u&&N==n[h]&&(o[h++]=k),v<u&&(N==n[v]||N==r[v]?(v==0&&(y=k),A=k+1,v++):v=0));let B,D=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(B=Zb(N))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;(!k||D==1&&O||T==0&&D!=0)&&(n[p]==N||r[p]==N&&(g=!0)?s[p++]=k:s.length&&(x=!1)),T=D,k+=ti(N)}return p==u&&s[0]==0&&x?this.result(-100+(g?-200:0),s,e):v==u&&y==0?[-200-e.length,0,A]:l>-1?[-700-e.length,l,l+this.pattern.length]:v==u?[-200+-700-e.length,y,A]:p==u?this.result(-100+(g?-200:0)+-700+(x?0:-1100),s,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[e-r.length],o=1;for(let s of n){let l=s+(this.astral?ti(An(r,s)):1);o>1&&i[o-1]==s?i[o-1]=l:(i[o++]=s,i[o++]=l)}return i}}const Yo=ge.define({combine(t){return Vs(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,n)=>e.label.localeCompare(n.label)},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,optionClass:(e,n)=>r=>Rq(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function Rq(t,e){return t?e?t+" "+e:t:e}function Mq(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=n,l=0;for(let u=1;u<i.length;){let c=i[u++],h=i[u++];c>l&&o.appendChild(document.createTextNode(s.slice(l,c)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(s.slice(c,h))),p.className="cm-completionMatchedText",l=h}return l<s.length&&o.appendChild(document.createTextNode(s.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function ZA(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class Lq{constructor(e,n){this.view=e,this.stateField=n,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let r=e.state.field(n),{options:i,selected:o}=r.open,s=e.state.facet(Yo);this.optionContent=Mq(s),this.optionClass=s.optionClass,this.range=ZA(i.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let u=l.target,c;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(c=/-(\d+)$/.exec(u.id))&&+c[1]<i.length){VN(e,i[+c[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=ZA(n.options.length,n.selected,this.view.state.facet(Yo).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s)}).catch(s=>li(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(e),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&Dq(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect();if(i.top>Math.min(innerHeight,n.bottom)-10||i.bottom<Math.max(0,n.top)+10)return null;let o=Math.max(0,Math.min(i.top,innerHeight-r.height))-n.top,s=this.view.textDirection==Dt.RTL,l=n.left,u=innerWidth-n.right;return s&&l<Math.min(r.width,u)?s=!1:!s&&u<Math.min(r.width,l)&&(s=!0),{top:o,left:s}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=r.from;o<r.to;o++){let{completion:s,match:l}=e[o];const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let c=this.optionClass(s);c&&(u.className=c);for(let h of this.optionContent){let p=h(s,this.view.state,l);p&&u.appendChild(p)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function Nq(t){return e=>new Lq(e,t)}function Dq(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}function YA(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Pq(t,e){let n=[],r=0;for(let l of t)if(l.hasResult())if(l.result.filter===!1){let u=l.result.getMatch;for(let c of l.result.options){let h=[1e9-r++];if(u)for(let p of u(c))h.push(p);n.push(new KA(c,l,h))}}else{let u=new Oq(e.sliceDoc(l.from,l.to)),c;for(let h of l.result.options)(c=u.match(h.label))&&(h.boost!=null&&(c[0]+=h.boost),n.push(new KA(h,l,c)))}let i=[],o=null,s=e.facet(Yo).compareCompletions;for(let l of n.sort((u,c)=>c.match[0]-u.match[0]||s(u.completion,c.completion)))!o||o.label!=l.completion.label||o.detail!=l.completion.detail||o.type!=null&&l.completion.type!=null&&o.type!=l.completion.type||o.apply!=l.completion.apply?i.push(l):YA(l.completion)>YA(o)&&(i[i.length-1]=l),o=l.completion;return i}class Wh{constructor(e,n,r,i,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Wh(this.options,QA(n,e),this.tooltip,this.timestamp,e)}static build(e,n,r,i,o){let s=Pq(e,n);if(!s.length)return null;let l=n.facet(Yo).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==u){l=c;break}}return new Wh(s,QA(r,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:Nq(Li),above:o.aboveCursor},i?i.timestamp:Date.now(),l)}map(e){return new Wh(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class N0{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new N0(Fq,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Yo),o=(r.override||n.languageDataAt("autocomplete",Dl(n)).map(Tq)).map(l=>(this.active.find(c=>c.source==l)||new Nr(l,this.active.some(c=>c.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((l,u)=>l==this.active[u])&&(o=this.active);let s=e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Bq(o,this.active)?Wh.build(o,n,this.id,this.open,r):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new Nr(l.source,0):l));for(let l of e.effects)l.is(WN)&&(s=s&&s.setSelected(l.value,this.id));return o==this.active&&s==this.open?this:new N0(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Iq}}function Bq(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}const Iq={"aria-autocomplete":"list"};function QA(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Fq=[];function kx(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Nr{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=kx(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Nr(i.source,0));for(let o of e.effects)if(o.is(bS))i=new Nr(i.source,1,o.value?Dl(e.state):-1);else if(o.is(D0))i=new Nr(i.source,0);else if(o.is(UN))for(let s of o.value)s.source==i.source&&(i=s);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Nr(this.source,1)}handleChange(e){return e.changes.touchesRange(Dl(e.startState))?new Nr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Nr(this.source,this.state,e.mapPos(this.explicitPos))}}class jh extends Nr{constructor(e,n,r,i,o){super(e,2,n),this.result=r,this.from=i,this.to=o}hasResult(){return!0}handleUserEvent(e,n,r){var i;let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Dl(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>s||n=="delete"&&Dl(e.startState)==this.from)return new Nr(this.source,n=="input"&&r.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return zq(this.result.validFor,e.state,o,s)?new jh(this.source,u,this.result,o,s):this.result.update&&(c=this.result.update(this.result,o,s,new $N(e.state,l,u>=0)))?new jh(this.source,u,c,c.from,(i=c.to)!==null&&i!==void 0?i:Dl(e.state)):new Nr(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Nr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new jh(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function zq(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):HN(t,!0).test(i)}const bS=Me.define(),D0=Me.define(),UN=Me.define({map(t,e){return t.map(n=>n.map(e))}}),WN=Me.define(),Li=Fn.define({create(){return N0.start()},update(t,e){return t.update(e)},provide:t=>[oS.from(t,e=>e.tooltip),de.contentAttributes.from(t,e=>e.attrs)]}),jN=75;function Yg(t,e="option"){return n=>{let r=n.state.field(Li,!1);if(!r||!r.open||Date.now()-r.open.timestamp<jN)return!1;let i=1,o;e=="page"&&(o=RU(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),n.dispatch({effects:WN.of(l)}),!0}}const $q=t=>{let e=t.state.field(Li,!1);return t.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<jN||e.open.selected<0?!1:(VN(t,e.open.options[e.open.selected]),!0)},Hq=t=>t.state.field(Li,!1)?(t.dispatch({effects:bS.of(!0)}),!0):!1,Vq=t=>{let e=t.state.field(Li,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:D0.of(null)}),!0)};class Uq{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const XA=50,Wq=50,jq=1e3,qq=Zt.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(Li).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(Li);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Li)==e)return;let n=t.transactions.some(r=>(r.selection||r.docChanged)&&!kx(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(n||i.updates.length+t.transactions.length>Wq&&Date.now()-i.time>jq){for(let o of i.context.abortListeners)try{o()}catch(s){li(this.view.state,s)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),XA):-1,this.composing!=0)for(let r of t.transactions)kx(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(Li);for(let n of e.active)n.state==1&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n)}startQuery(t){let{state:e}=this.view,n=Dl(e),r=new $N(e,n,t.explicitPos==n),i=new Uq(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:D0.of(null)}),li(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),XA))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Yo);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let s=new jh(i.active.source,i.active.explicitPos,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:Dl(i.updates.length?i.updates[0].startState:this.view.state));for(let l of i.updates)s=s.update(l,n);if(s.hasResult()){e.push(s);continue}}let o=this.view.state.field(Li).active.find(s=>s.source==i.active.source);if(o&&o.state==1)if(i.done==null){let s=new Nr(i.active.source,0);for(let l of i.updates)s=s.update(l,n);s.state!=1&&e.push(s)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:UN.of(e)})}},{eventHandlers:{blur(){let t=this.view.state.field(Li,!1);t&&t.tooltip&&this.view.state.facet(Yo).closeOnBlur&&this.view.dispatch({effects:D0.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:bS.of(!1)}),20),this.composing=0}}}),Jq=de.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),P0={brackets:["(","[","{","'",'"'],before:")]}:;>"},Ga=Me.define({map(t,e){let n=e.mapPos(t,-1,pr.TrackAfter);return n==null?void 0:n}}),SS=Me.define({map(t,e){return e.mapPos(t)}}),kS=new class extends lu{};kS.startSide=1;kS.endSide=-1;const qN=Fn.define({create(){return ut.empty},update(t,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(r,-1)&&(t=ut.empty)}t=t.map(e.changes);for(let n of e.effects)n.is(Ga)?t=t.update({add:[kS.range(n.value,n.value+1)]}):n.is(SS)&&(t=t.update({filter:r=>r!=n.value}));return t}});function Kq(){return[Zq,qN]}const cw="()[]{}<>";function JN(t){for(let e=0;e<cw.length;e+=2)if(cw.charCodeAt(e)==t)return cw.charAt(e+1);return Zb(t<128?t:t+1)}function KN(t,e){return t.languageDataAt("closeBrackets",e)[0]||P0}const Gq=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Zq=de.inputHandler.of((t,e,n,r)=>{if((Gq?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&ti(An(r,0))==1||e!=i.from||n!=i.to)return!1;let o=Xq(t.state,r);return o?(t.dispatch(o),!0):!1}),Yq=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=KN(t,t.selection.main.head).brackets||P0.brackets,i=null,o=t.changeByRange(s=>{if(s.empty){let l=eJ(t.doc,s.head);for(let u of r)if(u==l&&Lv(t.doc,s.head)==JN(An(u,0)))return{changes:{from:s.head-u.length,to:s.head+u.length},range:te.cursor(s.head-u.length),userEvent:"delete.backward"}}return{range:i=s}});return i||e(t.update(o,{scrollIntoView:!0})),!i},Qq=[{key:"Backspace",run:Yq}];function Xq(t,e){let n=KN(t,t.selection.main.head),r=n.brackets||P0.brackets;for(let i of r){let o=JN(An(i,0));if(e==i)return o==i?rJ(t,i,r.indexOf(i+i+i)>-1):tJ(t,i,o,n.before||P0.before);if(e==o&&GN(t,t.selection.main.from))return nJ(t,i,o)}return null}function GN(t,e){let n=!1;return t.field(qN).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function Lv(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ti(An(n,0)))}function eJ(t,e){let n=t.sliceString(e-2,e);return ti(An(n,0))==n.length?n:n.slice(1)}function tJ(t,e,n,r){let i=null,o=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:n,from:s.to}],effects:Ga.of(s.to+e.length),range:te.range(s.anchor+e.length,s.head+e.length)};let l=Lv(t.doc,s.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+n,from:s.head},effects:Ga.of(s.head+e.length),range:te.cursor(s.head+e.length)}:{range:i=s}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function nJ(t,e,n){let r=null,i=t.selection.ranges.map(o=>o.empty&&Lv(t.doc,o.head)==n?te.cursor(o.head+n.length):r=o);return r?null:t.update({selection:te.create(i,t.selection.mainIndex),scrollIntoView:!0,effects:t.selection.ranges.map(({from:o})=>SS.of(o))})}function rJ(t,e,n){let r=null,i=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Ga.of(o.to+e.length),range:te.range(o.anchor+e.length,o.head+e.length)};let s=o.head,l=Lv(t.doc,s);if(l==e){if(eT(t,s))return{changes:{insert:e+e,from:s},effects:Ga.of(s+e.length),range:te.cursor(s+e.length)};if(GN(t,s)){let u=n&&t.sliceDoc(s,s+e.length*3)==e+e+e;return{range:te.cursor(s+e.length*(u?3:1)),effects:SS.of(s)}}}else{if(n&&t.sliceDoc(s-2*e.length,s)==e+e&&eT(t,s-2*e.length))return{changes:{insert:e+e+e+e,from:s},effects:Ga.of(s+e.length),range:te.cursor(s+e.length)};if(t.charCategorizer(s)(l)!=gr.Word){let u=t.sliceDoc(s-1,s);if(u!=e&&t.charCategorizer(s)(u)!=gr.Word&&!iJ(t,s,e))return{changes:{insert:e+e,from:s},effects:Ga.of(s+e.length),range:te.cursor(s+e.length)}}}return{range:r=o}});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function eT(t,e){let n=nr(t).resolveInner(e+1);return n.parent&&n.from==e}function iJ(t,e,n){let r=nr(t).resolveInner(e,-1);for(let i=0;i<5;i++){if(t.sliceDoc(r.from,r.from+n.length)==n){let s=r.firstChild;for(;s&&s.from==r.from&&s.to-s.from>n.length;){if(t.sliceDoc(s.to-n.length,s.to)==n)return!1;s=s.firstChild}return!0}let o=r.to==e&&r.parent;if(!o)break;r=o}return!1}function oJ(t={}){return[Li,Yo.of(t),qq,sJ,Jq]}const ZN=[{key:"Ctrl-Space",run:Hq},{key:"Escape",run:Vq},{key:"ArrowDown",run:Yg(!0)},{key:"ArrowUp",run:Yg(!1)},{key:"PageDown",run:Yg(!0,"page")},{key:"PageUp",run:Yg(!1,"page")},{key:"Enter",run:$q}],sJ=uc.highest(Sv.computeN([Yo],t=>t.facet(Yo).defaultKeymap?[ZN]:[]));class lJ{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class $a{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,o=r.facet(xf).markerFilter;o&&(i=o(i));let s=me.set(i.map(l=>l.from==l.to||l.from==l.to-1&&r.doc.lineAt(l.from).to==l.from?me.widget({widget:new vJ(l),diagnostic:l}).range(l.from):me.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new $a(s,n,Xf(s))}}function Xf(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return r=new lJ(i,o,s.diagnostic),!1}),r}function aJ(t,e){return!!(t.effects.some(n=>n.is(ES))||t.changes.touchesRange(e.pos))}function YN(t,e){return t.field(oi,!1)?e:e.concat(Me.appendConfig.of([oi,de.decorations.compute([oi],n=>{let{selected:r,panel:i}=n.field(oi);return!r||!i||r.from==r.to?me.none:me.set([fJ.range(r.from,r.to)])}),OU(cJ,{hideOn:aJ}),wJ]))}function uJ(t,e){return{effects:YN(t,[ES.of(e)])}}const ES=Me.define(),CS=Me.define(),QN=Me.define(),oi=Fn.define({create(){return new $a(me.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=Xf(n,t.selected.diagnostic,i)||Xf(n,null,i)}t=new $a(n,t.panel,r)}for(let n of e.effects)n.is(ES)?t=$a.init(n.value,t.panel,e.state):n.is(CS)?t=new $a(t.diagnostics,n.value?Nv.open:null,t.selected):n.is(QN)&&(t=new $a(t.diagnostics,t.panel,n.value));return t},provide:t=>[bd.from(t,e=>e.panel),de.decorations.from(t,e=>e.diagnostics)]}),fJ=me.mark({class:"cm-lintRange cm-lintRange-active"});function cJ(t,e,n){let{diagnostics:r}=t.state.field(oi),i=[],o=2e8,s=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(u,c,{spec:h})=>{e>=u&&e<=c&&(u==c||(e>u||n>0)&&(e<c||n<0))&&(i.push(h.diagnostic),o=Math.min(u,o),s=Math.max(c,s))});let l=t.state.facet(xf).tooltipFilter;return l&&(i=l(i)),i.length?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create(){return{dom:hJ(t,i)}}}:null}function hJ(t,e){return Ct("ul",{class:"cm-tooltip-lint"},e.map(n=>eD(t,n,!1)))}const dJ=t=>{let e=t.state.field(oi,!1);(!e||!e.panel)&&t.dispatch({effects:YN(t.state,[CS.of(!0)])});let n=xd(t,Nv.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},tT=t=>{let e=t.state.field(oi,!1);return!e||!e.panel?!1:(t.dispatch({effects:CS.of(!1)}),!0)},pJ=t=>{let e=t.state.field(oi,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},gJ=[{key:"Mod-Shift-m",run:dJ},{key:"F8",run:pJ}],mJ=Zt.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(xf);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(xf);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((o,s)=>o.concat(s));this.view.state.doc==e.doc&&this.view.dispatch(uJ(this.view.state,i))},r=>{li(this.view.state,r)})}}update(t){let e=t.state.facet(xf);(t.docChanged||e!=t.startState.facet(xf))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),xf=ge.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Vs(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:mJ});function XN(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function eD(t,e,n){var r;let i=n?XN(e.actions):[];return Ct("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ct("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let l=p=>{p.preventDefault();let g=Xf(t.state.field(oi).diagnostics,e);g&&o.apply(t,g.from,g.to)},{name:u}=o,c=i[s]?u.indexOf(i[s]):-1,h=c<0?u:[u.slice(0,c),Ct("u",u.slice(c,c+1)),u.slice(c+1)];return Ct("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[s]})"`}.`},h)}),e.source&&Ct("div",{class:"cm-diagnosticSource"},e.source))}class vJ extends Us{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ct("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class nT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=eD(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Nv{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)tT(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=XN(o.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==i.keyCode){let u=Xf(this.view.state.field(oi).diagnostics,o);u&&o.actions[l].apply(e,u.from,u.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=Ct("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Ct("div",{class:"cm-panel-lint"},this.list,Ct("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>tT(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(oi).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(oi),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,l,{spec:u})=>{let c=-1,h;for(let p=r;p<this.items.length;p++)if(this.items[p].diagnostic==u.diagnostic){c=p;break}c<0?(h=new nT(this.view,u.diagnostic),this.items.splice(r,0,h),i=!0):(h=this.items[c],c>r&&(this.items.splice(r,c-r),i=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),o=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new nT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{s.top<l.top?this.list.scrollTop-=l.top-s.top:s.bottom>l.bottom&&(this.list.scrollTop+=s.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(oi),r=Xf(n.diagnostics,this.items[e].diagnostic);!r||this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:QN.of(r)})}static open(e){return new Nv(e)}}function yJ(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function hw(t){return yJ(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const wJ=de.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:hw("#d11")},".cm-lintRange-warning":{backgroundImage:hw("orange")},".cm-lintRange-info":{backgroundImage:hw("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var rT=function(e){e===void 0&&(e={});var n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(Qq)),e.defaultKeymap!==!1&&(n=n.concat(Qj)),e.searchKeymap!==!1&&(n=n.concat(xq)),e.historyKeymap!==!1&&(n=n.concat(uj)),e.foldKeymap!==!1&&(n=n.concat(kW)),e.completionKeymap!==!1&&(n=n.concat(ZN)),e.lintKeymap!==!1&&(n=n.concat(gJ));var r=[];return e.lineNumbers!==!1&&r.push(zU()),e.highlightActiveLineGutter!==!1&&r.push(VU()),e.highlightSpecialChars!==!1&&r.push(iU()),e.history!==!1&&r.push(ej()),e.foldGutter!==!1&&r.push(AW()),e.drawSelection!==!1&&r.push(q7()),e.dropCursor!==!1&&r.push(Q7()),e.allowMultipleSelections!==!1&&r.push(Ge.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(pW()),e.syntaxHighlighting!==!1&&r.push(K3(MW,{fallback:!0})),e.bracketMatching!==!1&&r.push(FW()),e.closeBrackets!==!1&&r.push(Kq()),e.autocompletion!==!1&&r.push(oJ()),e.rectangularSelection!==!1&&r.push(yU()),e.crosshairCursor!==!1&&r.push(xU()),e.highlightActiveLine!==!1&&r.push(fU()),e.highlightSelectionMatches!==!1&&r.push(iq()),r.concat([Sv.of(n.flat())]).filter(Boolean)};const _J="#e5c07b",iT="#e06c75",xJ="#56b6c2",bJ="#ffffff",Em="#abb2bf",Ex="#7d8799",SJ="#61afef",kJ="#98c379",oT="#d19a66",EJ="#c678dd",CJ="#21252b",dw="#2c313a",sT="#282c34",pw="#353a42",AJ="#3E4451",lT="#528bff",TJ=de.theme({"&":{color:Em,backgroundColor:sT},".cm-content":{caretColor:lT},".cm-cursor, .cm-dropCursor":{borderLeftColor:lT},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:AJ},".cm-panels":{backgroundColor:CJ,color:Em},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:dw},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:sT,color:Ex,border:"none"},".cm-activeLineGutter":{backgroundColor:dw},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:pw},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:pw,borderBottomColor:pw},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:dw,color:Em}}},{dark:!0}),OJ=Jd.define([{tag:K.keyword,color:EJ},{tag:[K.name,K.deleted,K.character,K.propertyName,K.macroName],color:iT},{tag:[K.function(K.variableName),K.labelName],color:SJ},{tag:[K.color,K.constant(K.name),K.standard(K.name)],color:oT},{tag:[K.definition(K.name),K.separator],color:Em},{tag:[K.typeName,K.className,K.number,K.changed,K.annotation,K.modifier,K.self,K.namespace],color:_J},{tag:[K.operator,K.operatorKeyword,K.url,K.escape,K.regexp,K.link,K.special(K.string)],color:xJ},{tag:[K.meta,K.comment],color:Ex},{tag:K.strong,fontWeight:"bold"},{tag:K.emphasis,fontStyle:"italic"},{tag:K.strikethrough,textDecoration:"line-through"},{tag:K.link,color:Ex,textDecoration:"underline"},{tag:K.heading,fontWeight:"bold",color:iT},{tag:[K.atom,K.bool,K.special(K.variableName)],color:oT},{tag:[K.processingInstruction,K.string,K.inserted],color:kJ},{tag:K.invalid,color:bJ}]),RJ=[TJ,K3(OJ)];var MJ=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});function LJ(t){var{value:e,selection:n,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:s,extensions:l=[],autoFocus:u,theme:c="light",height:h="",minHeight:p="",maxHeight:g="",placeholder:v="",width:y="",minWidth:A="",maxWidth:O="",editable:x=!0,readOnly:k=!1,indentWithTab:b=!0,basicSetup:T=!0,root:N}=t,[B,D]=Je.exports.useState(),[$,G]=Je.exports.useState(),[W,oe]=Je.exports.useState(),ve=de.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),_e=de.theme({"&":{height:h,minHeight:p,maxHeight:g,width:y,minWidth:A,maxWidth:O}}),ze=Je.exports.useCallback((ye,F)=>r&&r(ye,F),[]),Qe=de.updateListener.of(ye=>{if(ye.docChanged&&typeof r=="function"){var F=ye.state.doc,J=F.toString();ze(J,ye)}i&&i(MJ(ye))}),Ce=[Qe,_e];switch(b&&Ce.unshift(Sv.of([Xj])),T&&(typeof T=="boolean"?Ce.unshift(rT()):Ce.unshift(rT(T))),v&&Ce.unshift(pU(v)),c){case"light":Ce.push(ve);break;case"dark":Ce.push(RJ);break;default:Ce.push(c);break}return x===!1&&Ce.push(de.editable.of(!1)),k&&Ce.push(Ge.readOnly.of(!0)),s&&typeof s=="function"&&Ce.push(de.updateListener.of(s)),Ce=Ce.concat(l),Je.exports.useEffect(()=>{if(B&&!W){var ye=Ge.create({doc:e,selection:n,extensions:Ce});if(oe(ye),!$){var F=new de({state:ye,parent:B,root:N});G(F),o&&o(F,ye)}}return()=>{$&&(oe(void 0),G(void 0))}},[B,W]),Je.exports.useEffect(()=>D(t.container),[t.container]),Je.exports.useEffect(()=>()=>{$&&($.destroy(),G(void 0))},[$]),Je.exports.useEffect(()=>{u&&$&&$.focus()},[u,$]),Je.exports.useEffect(()=>{$&&$.dispatch({effects:Me.reconfigure.of(Ce)})},[c,l,h,p,g,y,A,O,v,x,k,b,T,r,s]),Je.exports.useEffect(()=>{var ye=$?$.state.doc.toString():"";$&&e!==ye&&$.dispatch({changes:{from:0,to:ye.length,insert:e||""}})},[e,$]),{state:W,setState:oe,view:$,setView:G,container:B,setContainer:D}}var NJ=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root"],tD=Je.exports.forwardRef((t,e)=>{var{className:n,value:r="",selection:i,extensions:o=[],onChange:s,onStatistics:l,onCreateEditor:u,onUpdate:c,autoFocus:h,theme:p="light",height:g,minHeight:v,maxHeight:y,width:A,minWidth:O,maxWidth:x,basicSetup:k,placeholder:b,indentWithTab:T,editable:N,readOnly:B,root:D}=t,$=lV(t,NJ),G=Je.exports.useRef(null),{state:W,view:oe,container:ve,setContainer:_e}=LJ({container:G.current,root:D,value:r,autoFocus:h,theme:p,height:g,minHeight:v,maxHeight:y,width:A,minWidth:O,maxWidth:x,basicSetup:k,placeholder:b,indentWithTab:T,editable:N,readOnly:B,selection:i,onChange:s,onStatistics:l,onCreateEditor:u,onUpdate:c,extensions:o});if(Je.exports.useImperativeHandle(e,()=>({editor:G.current,state:W,view:oe}),[G,ve,W,oe]),typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var ze=typeof p=="string"?"cm-theme-"+p:"cm-theme";return Pe("div",dd({ref:G,className:""+ze+(n?" "+n:"")},$))});tD.displayName="CodeMirror";class B0{constructor(e,n,r,i,o,s,l,u,c,h=0,p){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=o,this.score=s,this.buffer=l,this.bufferBase=u,this.curContext=c,this.lookAhead=h,this.parent=p}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new B0(e,[],n,r,r,0,[],0,i?new aT(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let n=e>>19,r=e&65535,{parser:i}=this.p,o=i.dynamicPrecedence(r);if(o&&(this.score+=o),n==0){this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let s=this.stack.length-(n-1)*3-(e&262144?6:0),l=this.stack[s-2],u=this.stack[s-1],c=this.bufferBase+this.buffer.length-u;if(r<i.minRepeatTerm||e&131072){let h=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,l,h,c+4,!0)}if(e&262144)this.state=this.stack[s];else{let h=this.stack[s-3];this.state=i.getGoto(h,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,l)}storeNode(e,n,r,i=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,l=this.buffer.length;if(l==0&&s.parent&&(l=s.bufferBase-s.parent.bufferBase,s=s.parent),l>0&&s.buffer[l-4]==0&&s.buffer[l-1]>-1){if(n==r)return;if(s.buffer[l-2]>=n){s.buffer[l-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(e,n,r,i);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>r;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4);this.buffer[s]=e,this.buffer[s+1]=n,this.buffer[s+2]=r,this.buffer[s+3]=i}}shift(e,n,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||n<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(n,i),n<=s.maxNode&&this.buffer.push(n,i,r,4)}else this.pos=r,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,r,4)}apply(e,n,r){e&65536?this.reduce(e):this.shift(e,n,r)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new B0(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new DJ(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if((r&65536)==0)return!0;if(r==0)return!1;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>4<<1||this.stack.length>=120){let i=[];for(let o=0,s;o<n.length;o+=2)(s=n[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&i.push(n[o],s);if(this.stack.length<120)for(let o=0;i.length<4<<1&&o<n.length;o+=2){let s=n[o+1];i.some((l,u)=>u&1&&l==s)||i.push(n[o],s)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let o=n[i+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(n[i],this.pos),s.score-=200,r.push(s)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:n}=this.p;if(!n.validAction(this.state,e)){let r=e>>19,i=e&65535,o=this.stack.length-r*3;if(o<0||n.getGoto(this.stack[o],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new aT(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class aT{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}var uT;(function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(uT||(uT={}));class DJ{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class I0{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new I0(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new I0(this.stack,this.pos,this.index)}}class Cm{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const fT=new Cm;class PJ{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=fT,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let s=this.ranges[--i];o-=r.from-s.to,r=s}for(;n<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let s=this.ranges[++i];o+=s.from-r.to,r=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let s=this.rangeIndex,l=this.range;for(;l.to<=r;)l=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=fT,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class Am{constructor(e,n){this.data=e,this.id=n}token(e,n){BJ(this.data,e,n,this.id)}}Am.prototype.contextual=Am.prototype.fallback=Am.prototype.extend=!1;function BJ(t,e,n,r){let i=0,o=1<<r,{parser:s}=n.p,{dialect:l}=s;e:for(;(o&t[i])!=0;){let u=t[i+1];for(let g=i+3;g<u;g+=2)if((t[g+1]&o)>0){let v=t[g];if(l.allows(v)&&(e.token.value==-1||e.token.value==v||s.overrides(v,e.token.value))){e.acceptToken(v);break}}let c=e.next,h=0,p=t[i+2];if(e.next<0&&p>h&&t[u+p*3-3]==65535){i=t[u+p*3-1];continue e}for(;h<p;){let g=h+p>>1,v=u+g+(g<<1),y=t[v],A=t[v+1];if(c<y)p=g;else if(c>=A)h=g+1;else{i=t[v+2],e.advance();continue e}}break}}function Qg(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let o=0;for(;;){let s=t.charCodeAt(r++),l=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let u=s-32;if(u>=46&&(u-=46,l=!0),o+=u,l)break;o*=46}n?n[i++]=o:n=new e(o)}return n}const Xi=typeof ct<"u"&&ct.env&&/\bparse\b/.test(ct.env.LOG);let gw=null;var cT;(function(t){t[t.Margin=25]="Margin"})(cT||(cT={}));function hT(t,e,n){let r=t.cursor(On.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class IJ{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?hT(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?hT(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],s=this.start[n]+r.positions[i];if(s>e)return this.nextStart=s,null;if(o instanceof Xt){if(s==e){if(s<this.safeFrom)return null;let l=s+o.length;if(l<=this.safeTo){let u=o.prop(Ue.lookAhead);if(!u||l+u<this.fragment.to)return o}}this.index[n]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[n]++,this.nextStart=s+o.length}}}class FJ{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Cm)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,s=i.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,u=0;for(let c=0;c<o.length;c++){if((1<<c&s)==0)continue;let h=o[c],p=this.tokens[c];if(!(r&&!h.fallback)&&((h.contextual||p.start!=e.pos||p.mask!=s||p.context!=l)&&(this.updateCachedToken(p,h,e),p.mask=s,p.context=l),p.lookAhead>p.end+25&&(u=Math.max(p.lookAhead,u)),p.value!=0)){let g=n;if(p.extended>-1&&(n=this.addActions(e,p.extended,p.end,n)),n=this.addActions(e,p.value,p.end,n),!h.extend&&(r=p,n>g))break}}for(;this.actions.length>n;)this.actions.pop();return u&&e.setLookAhead(u),!r&&e.pos==this.stream.end&&(r=new Cm,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Cm,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let l=o.specializers[s](this.stream.read(e.start,e.end),r);if(l>=0&&r.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:o}=e,{parser:s}=e.p,{data:l}=s;for(let u=0;u<2;u++)for(let c=s.stateSlot(o,u?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=Ss(l,c+2);else{i==0&&l[c+1]==2&&(i=this.putAction(Ss(l,c+2),n,r,i));break}l[c]==n&&(i=this.putAction(Ss(l,c+1),n,r,i))}return i}}var dT;(function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=500]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit",t[t.CutDepth=15e3]="CutDepth",t[t.CutTo=9e3]="CutTo"})(dT||(dT={}));class zJ{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new PJ(n,i),this.tokens=new FJ(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[B0.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>e.bufferLength*4?new IJ(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,o;for(let s=0;s<e.length;s++){let l=e[s];for(;;){if(this.tokens.mainToken=null,l.pos>n)r.push(l);else{if(this.advanceStack(l,r,e))continue;{i||(i=[],o=[]),i.push(l);let u=this.tokens.getMainToken(l);o.push(u.value,u.end)}}break}}if(!r.length){let s=i&&HJ(i);if(s)return this.stackToTree(s);if(this.parser.strict)throw Xi&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let s=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(r.length>s)for(r.sort((l,u)=>u.score-l.score);r.length>s;)r.pop();r.some(l=>l.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let s=0;s<r.length-1;s++){let l=r[s];for(let u=s+1;u<r.length;u++){let c=r[u];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)r.splice(u--,1);else{r.splice(s--,1);continue e}}}}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:o}=this,s=Xi?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,h=c?e.curContext.hash:0;for(let p=this.fragments.nodeAt(i);p;){let g=this.parser.nodeSet.types[p.type.id]==p.type?o.getGoto(e.state,p.type.id):-1;if(g>-1&&p.length&&(!c||(p.prop(Ue.contextHash)||0)==h))return e.useNode(p,g),Xi&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(p.type.id)})`),!0;if(!(p instanceof Xt)||p.children.length==0||p.positions[0]>0)break;let v=p.children[0];if(v instanceof Xt&&p.positions[0]==0)p=v;else break}}let l=o.stateSlot(e.state,4);if(l>0)return e.reduce(l),Xi&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let c=0;c<u.length;){let h=u[c++],p=u[c++],g=u[c++],v=c==u.length||!r,y=v?e:e.split();if(y.apply(h,p,g),Xi&&console.log(s+this.stackID(y)+` (via ${(h&65536)==0?"shift":`reduce of ${o.getName(h&65535)}`} for ${o.getName(p)} @ ${i}${y==e?"":", split"})`),v)return!0;y.pos>i?n.push(y):r.push(y)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return pT(e,n),!0}}runRecovery(e,n,r){let i=null,o=!1;for(let s=0;s<e.length;s++){let l=e[s],u=n[s<<1],c=n[(s<<1)+1],h=Xi?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),Xi&&console.log(h+this.stackID(l)+" (restarted)"),this.advanceFully(l,r))))continue;let p=l.split(),g=h;for(let v=0;p.forceReduce()&&v<10&&(Xi&&console.log(g+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,r));v++)Xi&&(g=this.stackID(p)+" -> ");for(let v of l.recoverByInsert(u))Xi&&console.log(h+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,r);this.stream.end>l.pos?(c==l.pos&&(c++,u=0),l.recoverByDelete(u,c),Xi&&console.log(h+this.stackID(l)+` (via recover-delete ${this.parser.getName(u)})`),pT(l,r)):(!i||i.score<l.score)&&(i=l)}return i}stackToTree(e){return e.close(),Xt.build({buffer:I0.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(gw||(gw=new WeakMap)).get(e);return n||gw.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function pT(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class $J{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class F0 extends L3{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let l=0;l<e.repeatNodeCount;l++)n.push("");let r=Object.keys(e.topRules).map(l=>e.topRules[l][1]),i=[];for(let l=0;l<n.length;l++)i.push([]);function o(l,u,c){i[l].push([u,u.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let u=l[0];typeof u=="string"&&(u=Ue[u]);for(let c=1;c<l.length;){let h=l[c++];if(h>=0)o(h,u,l[c++]);else{let p=l[c+-h];for(let g=-h;g>0;g--)o(l[c++],u,p);c++}}}this.nodeSet=new lS(n.map((l,u)=>Vr.define({name:u>=this.minRepeatTerm?void 0:l,id:u,props:i[u],top:r.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=O3;let s=Qg(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(mT),this.states=Qg(e.states,Uint32Array),this.data=Qg(e.stateData),this.goto=Qg(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Am(s,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new zJ(this,e,n,r);for(let o of this.wrappers)i=o(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let o=i[n+1];;){let s=i[o++],l=s&1,u=i[o++];if(l&&r)return u;for(let c=o+(s>>1);o<c;o++)if(i[o]==e)return u;if(l)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let o=this.stateSlot(e,i?2:1),s;;o+=3){if((s=r[o])==65535)if(r[o+1]==1)s=r[o=Ss(r,o+2)];else{if(r[o+1]==2)return Ss(r,o+2);break}if(s==n||s==0)return Ss(r,o+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){if(n==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Ss(this.data,r+2);else return!1;if(n==Ss(this.data,r+1))return!0}}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Ss(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((o,s)=>s&1&&o==i)||n.push(this.data[r],i)}}return n}overrides(e,n){let r=gT(this.data,this.tokenPrecTable,n);return r<0||gT(this.data,this.tokenPrecTable,e)<r}configure(e){let n=Object.assign(Object.create(F0.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(l=>l.from==r.external);if(!o)return r;let s=Object.assign(Object.assign({},r),{external:o.to});return n.specializers[i]=mT(s),s})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let o of e.split(" ")){let s=n.indexOf(o);s>=0&&(r[s]=!0)}let i=null;for(let o=0;o<n.length;o++)if(!r[o])for(let s=this.dialects[n[o]],l;(l=this.data[s++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[l]=1;return new $J(e,r,i)}static deserialize(e){return new F0(e)}}function Ss(t,e){return t[e]|t[e+1]<<16}function gT(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function HJ(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function mT(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const VJ=D3({String:K.string,Number:K.number,"True False":K.bool,PropertyName:K.propertyName,Null:K.null,",":K.separator,"[ ]":K.squareBracket,"{ }":K.brace}),UJ=F0.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26A0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[VJ],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),WJ=S0.define({parser:UJ.configure({props:[F3.add({Object:LA({except:/^\s*\}/}),Array:LA({except:/^\s*\]/})}),$3.add({"Object Array":mW})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function jJ(){return new iW(WJ)}class Cx extends q0.Component{onValueChange(e){this.props.onChange(e)}render(){const e=this.props.value.split(/\r\n|\r|\n/).length,n=this.props.errors.map(r=>Pe("li",{className:"collection-item help-text red-text text-darken-2",children:r}));return dr("div",{children:[Pe(tD,{value:this.props.value,height:`${e*23}px`,extensions:[jJ()],onChange:r=>this.onValueChange(r)}),this.props.errors.length!==0&&Pe("div",{children:dr("ul",{className:"collection with-header",children:[Pe("li",{className:"collection-header red text-lighten-5",children:Pe("h6",{className:"white-text text-lighten-5",children:"Errors"})}),n]})})]})}}oE(Cx,"defaultProps",{value:"",errors:[]});var Cd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",p=1,g=2,v=4,y=1,A=2,O=1,x=2,k=4,b=8,T=16,N=32,B=64,D=128,$=256,G=512,W=30,oe="...",ve=800,_e=16,ze=1,Qe=2,Ce=3,ye=1/0,F=9007199254740991,J=17976931348623157e292,ie=0/0,Se=4294967295,$e=Se-1,bn=Se>>>1,tn=[["ary",D],["bind",O],["bindKey",x],["curry",b],["curryRight",T],["flip",G],["partial",N],["partialRight",B],["rearg",$]],lr="[object Arguments]",Yt="[object Array]",ar="[object AsyncFunction]",ss="[object Boolean]",ls="[object Date]",sp="[object DOMException]",da="[object Error]",pa="[object Function]",vc="[object GeneratorFunction]",$n="[object Map]",ga="[object Number]",qv="[object Null]",yi="[object Object]",Sn="[object Promise]",lp="[object Proxy]",St="[object RegExp]",Cr="[object Set]",He="[object String]",ma="[object Symbol]",ap="[object Undefined]",as="[object WeakMap]",va="[object WeakSet]",us="[object ArrayBuffer]",yo="[object DataView]",Au="[object Float32Array]",ya="[object Float64Array]",Tu="[object Int8Array]",yc="[object Int16Array]",Ou="[object Int32Array]",wc="[object Uint8Array]",_c="[object Uint8ClampedArray]",xc="[object Uint16Array]",bc="[object Uint32Array]",Jv=/\b__p \+= '';/g,qs=/\b(__p \+=) '' \+/g,up=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ru=/&(?:amp|lt|gt|quot|#39);/g,Mu=/[&<>"']/g,fp=RegExp(Ru.source),Lu=RegExp(Mu.source),cp=/<%-([\s\S]+?)%>/g,hp=/<%([\s\S]+?)%>/g,Sc=/<%=([\s\S]+?)%>/g,wa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kc=/^\w*$/,dp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_a=/[\\^$.*+?()[\]{}|]/g,xa=RegExp(_a.source),ba=/^\s+/,Sa=/\s/,pp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ec=/\{\n\/\* \[wrapped with (.+)\] \*/,Hn=/,? & /,gp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cc=/[()=,{}\[\]\/\s]/,ka=/\\(\\)?/g,mp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ac=/\w*$/,Kv=/^[-+]0x[0-9a-f]+$/i,Gv=/^0b[01]+$/i,Zv=/^\[object .+?Constructor\]$/,Tc=/^0o[0-7]+$/i,Yv=/^(?:0|[1-9]\d*)$/,Qv=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nu=/($^)/,Xv=/['\n\r\u2028\u2029\\]/g,Du="\\ud800-\\udfff",vp="\\u0300-\\u036f",Js="\\ufe20-\\ufe2f",yp="\\u20d0-\\u20ff",Vn=vp+Js+yp,wo="\\u2700-\\u27bf",wp="a-z\\xdf-\\xf6\\xf8-\\xff",_p="\\xac\\xb1\\xd7\\xf7",ey="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Oc="\\u2000-\\u206f",xp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bp="A-Z\\xc0-\\xd6\\xd8-\\xde",Rc="\\ufe0e\\ufe0f",Mc=_p+ey+Oc+xp,Ea="['\u2019]",Sp="["+Du+"]",Lc="["+Mc+"]",Ca="["+Vn+"]",Nc="\\d+",ty="["+wo+"]",Pu="["+wp+"]",wi="[^"+Du+Mc+Nc+wo+wp+bp+"]",Ji="\\ud83c[\\udffb-\\udfff]",kp="(?:"+Ca+"|"+Ji+")",Bu="[^"+Du+"]",Iu="(?:\\ud83c[\\udde6-\\uddff]){2}",_o="[\\ud800-\\udbff][\\udc00-\\udfff]",fs="["+bp+"]",Dc="\\u200d",_i="(?:"+Pu+"|"+wi+")",ny="(?:"+fs+"|"+wi+")",Fu="(?:"+Ea+"(?:d|ll|m|re|s|t|ve))?",Pc="(?:"+Ea+"(?:D|LL|M|RE|S|T|VE))?",Ep=kp+"?",Bc="["+Rc+"]?",Cp="(?:"+Dc+"(?:"+[Bu,Iu,_o].join("|")+")"+Bc+Ep+")*",zu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ry="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ap=Bc+Ep+Cp,iy="(?:"+[ty,Iu,_o].join("|")+")"+Ap,oy="(?:"+[Bu+Ca+"?",Ca,Iu,_o,Sp].join("|")+")",sy=RegExp(Ea,"g"),Tp=RegExp(Ca,"g"),Ic=RegExp(Ji+"(?="+Ji+")|"+oy+Ap,"g"),Op=RegExp([fs+"?"+Pu+"+"+Fu+"(?="+[Lc,fs,"$"].join("|")+")",ny+"+"+Pc+"(?="+[Lc,fs+_i,"$"].join("|")+")",fs+"?"+_i+"+"+Fu,fs+"+"+Pc,ry,zu,Nc,iy].join("|"),"g"),Fc=RegExp("["+Dc+Du+Vn+Rc+"]"),$u=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ly=-1,it={};it[Au]=it[ya]=it[Tu]=it[yc]=it[Ou]=it[wc]=it[_c]=it[xc]=it[bc]=!0,it[lr]=it[Yt]=it[us]=it[ss]=it[yo]=it[ls]=it[da]=it[pa]=it[$n]=it[ga]=it[yi]=it[St]=it[Cr]=it[He]=it[as]=!1;var dt={};dt[lr]=dt[Yt]=dt[us]=dt[yo]=dt[ss]=dt[ls]=dt[Au]=dt[ya]=dt[Tu]=dt[yc]=dt[Ou]=dt[$n]=dt[ga]=dt[yi]=dt[St]=dt[Cr]=dt[He]=dt[ma]=dt[wc]=dt[_c]=dt[xc]=dt[bc]=!0,dt[da]=dt[pa]=dt[as]=!1;var zc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ay={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hc=parseFloat,w=parseInt,S=typeof Po=="object"&&Po&&Po.Object===Object&&Po,R=typeof self=="object"&&self&&self.Object===Object&&self,M=S||R||Function("return this")(),V=e&&!e.nodeType&&e,I=V&&!0&&t&&!t.nodeType&&t,j=I&&I.exports===V,Y=j&&S.process,ce=function(){try{var z=I&&I.require&&I.require("util").types;return z||Y&&Y.binding&&Y.binding("util")}catch{}}(),ke=ce&&ce.isArrayBuffer,ot=ce&&ce.isDate,hn=ce&&ce.isMap,xo=ce&&ce.isRegExp,bo=ce&&ce.isSet,Ar=ce&&ce.isTypedArray;function dn(z,Z,q){switch(q.length){case 0:return z.call(Z);case 1:return z.call(Z,q[0]);case 2:return z.call(Z,q[0],q[1]);case 3:return z.call(Z,q[0],q[1],q[2])}return z.apply(Z,q)}function Lp(z,Z,q,ue){for(var Te=-1,Xe=z==null?0:z.length;++Te<Xe;){var nn=z[Te];Z(ue,nn,q(nn),z)}return ue}function xi(z,Z){for(var q=-1,ue=z==null?0:z.length;++q<ue&&Z(z[q],q,z)!==!1;);return z}function iB(z,Z){for(var q=z==null?0:z.length;q--&&Z(z[q],q,z)!==!1;);return z}function sk(z,Z){for(var q=-1,ue=z==null?0:z.length;++q<ue;)if(!Z(z[q],q,z))return!1;return!0}function Ks(z,Z){for(var q=-1,ue=z==null?0:z.length,Te=0,Xe=[];++q<ue;){var nn=z[q];Z(nn,q,z)&&(Xe[Te++]=nn)}return Xe}function Np(z,Z){var q=z==null?0:z.length;return!!q&&Hu(z,Z,0)>-1}function uy(z,Z,q){for(var ue=-1,Te=z==null?0:z.length;++ue<Te;)if(q(Z,z[ue]))return!0;return!1}function kt(z,Z){for(var q=-1,ue=z==null?0:z.length,Te=Array(ue);++q<ue;)Te[q]=Z(z[q],q,z);return Te}function Gs(z,Z){for(var q=-1,ue=Z.length,Te=z.length;++q<ue;)z[Te+q]=Z[q];return z}function fy(z,Z,q,ue){var Te=-1,Xe=z==null?0:z.length;for(ue&&Xe&&(q=z[++Te]);++Te<Xe;)q=Z(q,z[Te],Te,z);return q}function oB(z,Z,q,ue){var Te=z==null?0:z.length;for(ue&&Te&&(q=z[--Te]);Te--;)q=Z(q,z[Te],Te,z);return q}function cy(z,Z){for(var q=-1,ue=z==null?0:z.length;++q<ue;)if(Z(z[q],q,z))return!0;return!1}var sB=hy("length");function lB(z){return z.split("")}function aB(z){return z.match(gp)||[]}function lk(z,Z,q){var ue;return q(z,function(Te,Xe,nn){if(Z(Te,Xe,nn))return ue=Xe,!1}),ue}function Dp(z,Z,q,ue){for(var Te=z.length,Xe=q+(ue?1:-1);ue?Xe--:++Xe<Te;)if(Z(z[Xe],Xe,z))return Xe;return-1}function Hu(z,Z,q){return Z===Z?_B(z,Z,q):Dp(z,ak,q)}function uB(z,Z,q,ue){for(var Te=q-1,Xe=z.length;++Te<Xe;)if(ue(z[Te],Z))return Te;return-1}function ak(z){return z!==z}function uk(z,Z){var q=z==null?0:z.length;return q?py(z,Z)/q:ie}function hy(z){return function(Z){return Z==null?n:Z[z]}}function dy(z){return function(Z){return z==null?n:z[Z]}}function fk(z,Z,q,ue,Te){return Te(z,function(Xe,nn,vt){q=ue?(ue=!1,Xe):Z(q,Xe,nn,vt)}),q}function fB(z,Z){var q=z.length;for(z.sort(Z);q--;)z[q]=z[q].value;return z}function py(z,Z){for(var q,ue=-1,Te=z.length;++ue<Te;){var Xe=Z(z[ue]);Xe!==n&&(q=q===n?Xe:q+Xe)}return q}function gy(z,Z){for(var q=-1,ue=Array(z);++q<z;)ue[q]=Z(q);return ue}function cB(z,Z){return kt(Z,function(q){return[q,z[q]]})}function ck(z){return z&&z.slice(0,gk(z)+1).replace(ba,"")}function Kr(z){return function(Z){return z(Z)}}function my(z,Z){return kt(Z,function(q){return z[q]})}function Vc(z,Z){return z.has(Z)}function hk(z,Z){for(var q=-1,ue=z.length;++q<ue&&Hu(Z,z[q],0)>-1;);return q}function dk(z,Z){for(var q=z.length;q--&&Hu(Z,z[q],0)>-1;);return q}function hB(z,Z){for(var q=z.length,ue=0;q--;)z[q]===Z&&++ue;return ue}var dB=dy(zc),pB=dy(ay);function gB(z){return"\\"+Mp[z]}function mB(z,Z){return z==null?n:z[Z]}function Vu(z){return Fc.test(z)}function vB(z){return $u.test(z)}function yB(z){for(var Z,q=[];!(Z=z.next()).done;)q.push(Z.value);return q}function vy(z){var Z=-1,q=Array(z.size);return z.forEach(function(ue,Te){q[++Z]=[Te,ue]}),q}function pk(z,Z){return function(q){return z(Z(q))}}function Zs(z,Z){for(var q=-1,ue=z.length,Te=0,Xe=[];++q<ue;){var nn=z[q];(nn===Z||nn===h)&&(z[q]=h,Xe[Te++]=q)}return Xe}function Pp(z){var Z=-1,q=Array(z.size);return z.forEach(function(ue){q[++Z]=ue}),q}function wB(z){var Z=-1,q=Array(z.size);return z.forEach(function(ue){q[++Z]=[ue,ue]}),q}function _B(z,Z,q){for(var ue=q-1,Te=z.length;++ue<Te;)if(z[ue]===Z)return ue;return-1}function xB(z,Z,q){for(var ue=q+1;ue--;)if(z[ue]===Z)return ue;return ue}function Uu(z){return Vu(z)?SB(z):sB(z)}function Ki(z){return Vu(z)?kB(z):lB(z)}function gk(z){for(var Z=z.length;Z--&&Sa.test(z.charAt(Z)););return Z}var bB=dy($c);function SB(z){for(var Z=Ic.lastIndex=0;Ic.test(z);)++Z;return Z}function kB(z){return z.match(Ic)||[]}function EB(z){return z.match(Op)||[]}var CB=function z(Z){Z=Z==null?M:Wu.defaults(M.Object(),Z,Wu.pick(M,Rp));var q=Z.Array,ue=Z.Date,Te=Z.Error,Xe=Z.Function,nn=Z.Math,vt=Z.Object,yy=Z.RegExp,AB=Z.String,bi=Z.TypeError,Bp=q.prototype,TB=Xe.prototype,ju=vt.prototype,Ip=Z["__core-js_shared__"],Fp=TB.toString,st=ju.hasOwnProperty,OB=0,mk=function(){var a=/[^.]+$/.exec(Ip&&Ip.keys&&Ip.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),zp=ju.toString,RB=Fp.call(vt),MB=M._,LB=yy("^"+Fp.call(st).replace(_a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$p=j?Z.Buffer:n,Ys=Z.Symbol,Hp=Z.Uint8Array,vk=$p?$p.allocUnsafe:n,Vp=pk(vt.getPrototypeOf,vt),yk=vt.create,wk=ju.propertyIsEnumerable,Up=Bp.splice,_k=Ys?Ys.isConcatSpreadable:n,Uc=Ys?Ys.iterator:n,Aa=Ys?Ys.toStringTag:n,Wp=function(){try{var a=La(vt,"defineProperty");return a({},"",{}),a}catch{}}(),NB=Z.clearTimeout!==M.clearTimeout&&Z.clearTimeout,DB=ue&&ue.now!==M.Date.now&&ue.now,PB=Z.setTimeout!==M.setTimeout&&Z.setTimeout,jp=nn.ceil,qp=nn.floor,wy=vt.getOwnPropertySymbols,BB=$p?$p.isBuffer:n,xk=Z.isFinite,IB=Bp.join,FB=pk(vt.keys,vt),rn=nn.max,Un=nn.min,zB=ue.now,$B=Z.parseInt,bk=nn.random,HB=Bp.reverse,_y=La(Z,"DataView"),Wc=La(Z,"Map"),xy=La(Z,"Promise"),qu=La(Z,"Set"),jc=La(Z,"WeakMap"),qc=La(vt,"create"),Jp=jc&&new jc,Ju={},VB=Na(_y),UB=Na(Wc),WB=Na(xy),jB=Na(qu),qB=Na(jc),Kp=Ys?Ys.prototype:n,Jc=Kp?Kp.valueOf:n,Sk=Kp?Kp.toString:n;function E(a){if($t(a)&&!Oe(a)&&!(a instanceof Ve)){if(a instanceof Si)return a;if(st.call(a,"__wrapped__"))return k2(a)}return new Si(a)}var Ku=function(){function a(){}return function(f){if(!Mt(f))return{};if(yk)return yk(f);a.prototype=f;var d=new a;return a.prototype=n,d}}();function Gp(){}function Si(a,f){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=n}E.templateSettings={escape:cp,evaluate:hp,interpolate:Sc,variable:"",imports:{_:E}},E.prototype=Gp.prototype,E.prototype.constructor=E,Si.prototype=Ku(Gp.prototype),Si.prototype.constructor=Si;function Ve(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Se,this.__views__=[]}function JB(){var a=new Ve(this.__wrapped__);return a.__actions__=Tr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Tr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Tr(this.__views__),a}function KB(){if(this.__filtered__){var a=new Ve(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function GB(){var a=this.__wrapped__.value(),f=this.__dir__,d=Oe(a),m=f<0,_=d?a.length:0,C=lF(0,_,this.__views__),L=C.start,P=C.end,H=P-L,Q=m?P:L-1,X=this.__iteratees__,ne=X.length,le=0,he=Un(H,this.__takeCount__);if(!d||!m&&_==H&&he==H)return Jk(a,this.__actions__);var xe=[];e:for(;H--&&le<he;){Q+=f;for(var Ne=-1,be=a[Q];++Ne<ne;){var Fe=X[Ne],qe=Fe.iteratee,Yr=Fe.type,cr=qe(be);if(Yr==Qe)be=cr;else if(!cr){if(Yr==ze)continue e;break e}}xe[le++]=be}return xe}Ve.prototype=Ku(Gp.prototype),Ve.prototype.constructor=Ve;function Ta(a){var f=-1,d=a==null?0:a.length;for(this.clear();++f<d;){var m=a[f];this.set(m[0],m[1])}}function ZB(){this.__data__=qc?qc(null):{},this.size=0}function YB(a){var f=this.has(a)&&delete this.__data__[a];return this.size-=f?1:0,f}function QB(a){var f=this.__data__;if(qc){var d=f[a];return d===u?n:d}return st.call(f,a)?f[a]:n}function XB(a){var f=this.__data__;return qc?f[a]!==n:st.call(f,a)}function eI(a,f){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=qc&&f===n?u:f,this}Ta.prototype.clear=ZB,Ta.prototype.delete=YB,Ta.prototype.get=QB,Ta.prototype.has=XB,Ta.prototype.set=eI;function cs(a){var f=-1,d=a==null?0:a.length;for(this.clear();++f<d;){var m=a[f];this.set(m[0],m[1])}}function tI(){this.__data__=[],this.size=0}function nI(a){var f=this.__data__,d=Zp(f,a);if(d<0)return!1;var m=f.length-1;return d==m?f.pop():Up.call(f,d,1),--this.size,!0}function rI(a){var f=this.__data__,d=Zp(f,a);return d<0?n:f[d][1]}function iI(a){return Zp(this.__data__,a)>-1}function oI(a,f){var d=this.__data__,m=Zp(d,a);return m<0?(++this.size,d.push([a,f])):d[m][1]=f,this}cs.prototype.clear=tI,cs.prototype.delete=nI,cs.prototype.get=rI,cs.prototype.has=iI,cs.prototype.set=oI;function hs(a){var f=-1,d=a==null?0:a.length;for(this.clear();++f<d;){var m=a[f];this.set(m[0],m[1])}}function sI(){this.size=0,this.__data__={hash:new Ta,map:new(Wc||cs),string:new Ta}}function lI(a){var f=ag(this,a).delete(a);return this.size-=f?1:0,f}function aI(a){return ag(this,a).get(a)}function uI(a){return ag(this,a).has(a)}function fI(a,f){var d=ag(this,a),m=d.size;return d.set(a,f),this.size+=d.size==m?0:1,this}hs.prototype.clear=sI,hs.prototype.delete=lI,hs.prototype.get=aI,hs.prototype.has=uI,hs.prototype.set=fI;function Oa(a){var f=-1,d=a==null?0:a.length;for(this.__data__=new hs;++f<d;)this.add(a[f])}function cI(a){return this.__data__.set(a,u),this}function hI(a){return this.__data__.has(a)}Oa.prototype.add=Oa.prototype.push=cI,Oa.prototype.has=hI;function Gi(a){var f=this.__data__=new cs(a);this.size=f.size}function dI(){this.__data__=new cs,this.size=0}function pI(a){var f=this.__data__,d=f.delete(a);return this.size=f.size,d}function gI(a){return this.__data__.get(a)}function mI(a){return this.__data__.has(a)}function vI(a,f){var d=this.__data__;if(d instanceof cs){var m=d.__data__;if(!Wc||m.length<i-1)return m.push([a,f]),this.size=++d.size,this;d=this.__data__=new hs(m)}return d.set(a,f),this.size=d.size,this}Gi.prototype.clear=dI,Gi.prototype.delete=pI,Gi.prototype.get=gI,Gi.prototype.has=mI,Gi.prototype.set=vI;function kk(a,f){var d=Oe(a),m=!d&&Da(a),_=!d&&!m&&nl(a),C=!d&&!m&&!_&&Qu(a),L=d||m||_||C,P=L?gy(a.length,AB):[],H=P.length;for(var Q in a)(f||st.call(a,Q))&&!(L&&(Q=="length"||_&&(Q=="offset"||Q=="parent")||C&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||ms(Q,H)))&&P.push(Q);return P}function Ek(a){var f=a.length;return f?a[Ly(0,f-1)]:n}function yI(a,f){return ug(Tr(a),Ra(f,0,a.length))}function wI(a){return ug(Tr(a))}function by(a,f,d){(d!==n&&!Zi(a[f],d)||d===n&&!(f in a))&&ds(a,f,d)}function Kc(a,f,d){var m=a[f];(!(st.call(a,f)&&Zi(m,d))||d===n&&!(f in a))&&ds(a,f,d)}function Zp(a,f){for(var d=a.length;d--;)if(Zi(a[d][0],f))return d;return-1}function _I(a,f,d,m){return Qs(a,function(_,C,L){f(m,_,d(_),L)}),m}function Ck(a,f){return a&&ko(f,pn(f),a)}function xI(a,f){return a&&ko(f,Rr(f),a)}function ds(a,f,d){f=="__proto__"&&Wp?Wp(a,f,{configurable:!0,enumerable:!0,value:d,writable:!0}):a[f]=d}function Sy(a,f){for(var d=-1,m=f.length,_=q(m),C=a==null;++d<m;)_[d]=C?n:r1(a,f[d]);return _}function Ra(a,f,d){return a===a&&(d!==n&&(a=a<=d?a:d),f!==n&&(a=a>=f?a:f)),a}function ki(a,f,d,m,_,C){var L,P=f&p,H=f&g,Q=f&v;if(d&&(L=_?d(a,m,_,C):d(a)),L!==n)return L;if(!Mt(a))return a;var X=Oe(a);if(X){if(L=uF(a),!P)return Tr(a,L)}else{var ne=Wn(a),le=ne==pa||ne==vc;if(nl(a))return Zk(a,P);if(ne==yi||ne==lr||le&&!_){if(L=H||le?{}:g2(a),!P)return H?QI(a,xI(L,a)):YI(a,Ck(L,a))}else{if(!dt[ne])return _?a:{};L=fF(a,ne,P)}}C||(C=new Gi);var he=C.get(a);if(he)return he;C.set(a,L),W2(a)?a.forEach(function(be){L.add(ki(be,f,d,be,a,C))}):V2(a)&&a.forEach(function(be,Fe){L.set(Fe,ki(be,f,d,Fe,a,C))});var xe=Q?H?Uy:Vy:H?Rr:pn,Ne=X?n:xe(a);return xi(Ne||a,function(be,Fe){Ne&&(Fe=be,be=a[Fe]),Kc(L,Fe,ki(be,f,d,Fe,a,C))}),L}function bI(a){var f=pn(a);return function(d){return Ak(d,a,f)}}function Ak(a,f,d){var m=d.length;if(a==null)return!m;for(a=vt(a);m--;){var _=d[m],C=f[_],L=a[_];if(L===n&&!(_ in a)||!C(L))return!1}return!0}function Tk(a,f,d){if(typeof a!="function")throw new bi(s);return th(function(){a.apply(n,d)},f)}function Gc(a,f,d,m){var _=-1,C=Np,L=!0,P=a.length,H=[],Q=f.length;if(!P)return H;d&&(f=kt(f,Kr(d))),m?(C=uy,L=!1):f.length>=i&&(C=Vc,L=!1,f=new Oa(f));e:for(;++_<P;){var X=a[_],ne=d==null?X:d(X);if(X=m||X!==0?X:0,L&&ne===ne){for(var le=Q;le--;)if(f[le]===ne)continue e;H.push(X)}else C(f,ne,m)||H.push(X)}return H}var Qs=t2(So),Ok=t2(Ey,!0);function SI(a,f){var d=!0;return Qs(a,function(m,_,C){return d=!!f(m,_,C),d}),d}function Yp(a,f,d){for(var m=-1,_=a.length;++m<_;){var C=a[m],L=f(C);if(L!=null&&(P===n?L===L&&!Zr(L):d(L,P)))var P=L,H=C}return H}function kI(a,f,d,m){var _=a.length;for(d=Re(d),d<0&&(d=-d>_?0:_+d),m=m===n||m>_?_:Re(m),m<0&&(m+=_),m=d>m?0:q2(m);d<m;)a[d++]=f;return a}function Rk(a,f){var d=[];return Qs(a,function(m,_,C){f(m,_,C)&&d.push(m)}),d}function kn(a,f,d,m,_){var C=-1,L=a.length;for(d||(d=hF),_||(_=[]);++C<L;){var P=a[C];f>0&&d(P)?f>1?kn(P,f-1,d,m,_):Gs(_,P):m||(_[_.length]=P)}return _}var ky=n2(),Mk=n2(!0);function So(a,f){return a&&ky(a,f,pn)}function Ey(a,f){return a&&Mk(a,f,pn)}function Qp(a,f){return Ks(f,function(d){return vs(a[d])})}function Ma(a,f){f=el(f,a);for(var d=0,m=f.length;a!=null&&d<m;)a=a[Eo(f[d++])];return d&&d==m?a:n}function Lk(a,f,d){var m=f(a);return Oe(a)?m:Gs(m,d(a))}function ur(a){return a==null?a===n?ap:qv:Aa&&Aa in vt(a)?sF(a):wF(a)}function Cy(a,f){return a>f}function EI(a,f){return a!=null&&st.call(a,f)}function CI(a,f){return a!=null&&f in vt(a)}function AI(a,f,d){return a>=Un(f,d)&&a<rn(f,d)}function Ay(a,f,d){for(var m=d?uy:Np,_=a[0].length,C=a.length,L=C,P=q(C),H=1/0,Q=[];L--;){var X=a[L];L&&f&&(X=kt(X,Kr(f))),H=Un(X.length,H),P[L]=!d&&(f||_>=120&&X.length>=120)?new Oa(L&&X):n}X=a[0];var ne=-1,le=P[0];e:for(;++ne<_&&Q.length<H;){var he=X[ne],xe=f?f(he):he;if(he=d||he!==0?he:0,!(le?Vc(le,xe):m(Q,xe,d))){for(L=C;--L;){var Ne=P[L];if(!(Ne?Vc(Ne,xe):m(a[L],xe,d)))continue e}le&&le.push(xe),Q.push(he)}}return Q}function TI(a,f,d,m){return So(a,function(_,C,L){f(m,d(_),C,L)}),m}function Zc(a,f,d){f=el(f,a),a=w2(a,f);var m=a==null?a:a[Eo(Ci(f))];return m==null?n:dn(m,a,d)}function Nk(a){return $t(a)&&ur(a)==lr}function OI(a){return $t(a)&&ur(a)==us}function RI(a){return $t(a)&&ur(a)==ls}function Yc(a,f,d,m,_){return a===f?!0:a==null||f==null||!$t(a)&&!$t(f)?a!==a&&f!==f:MI(a,f,d,m,Yc,_)}function MI(a,f,d,m,_,C){var L=Oe(a),P=Oe(f),H=L?Yt:Wn(a),Q=P?Yt:Wn(f);H=H==lr?yi:H,Q=Q==lr?yi:Q;var X=H==yi,ne=Q==yi,le=H==Q;if(le&&nl(a)){if(!nl(f))return!1;L=!0,X=!1}if(le&&!X)return C||(C=new Gi),L||Qu(a)?h2(a,f,d,m,_,C):iF(a,f,H,d,m,_,C);if(!(d&y)){var he=X&&st.call(a,"__wrapped__"),xe=ne&&st.call(f,"__wrapped__");if(he||xe){var Ne=he?a.value():a,be=xe?f.value():f;return C||(C=new Gi),_(Ne,be,d,m,C)}}return le?(C||(C=new Gi),oF(a,f,d,m,_,C)):!1}function LI(a){return $t(a)&&Wn(a)==$n}function Ty(a,f,d,m){var _=d.length,C=_,L=!m;if(a==null)return!C;for(a=vt(a);_--;){var P=d[_];if(L&&P[2]?P[1]!==a[P[0]]:!(P[0]in a))return!1}for(;++_<C;){P=d[_];var H=P[0],Q=a[H],X=P[1];if(L&&P[2]){if(Q===n&&!(H in a))return!1}else{var ne=new Gi;if(m)var le=m(Q,X,H,a,f,ne);if(!(le===n?Yc(X,Q,y|A,m,ne):le))return!1}}return!0}function Dk(a){if(!Mt(a)||pF(a))return!1;var f=vs(a)?LB:Zv;return f.test(Na(a))}function NI(a){return $t(a)&&ur(a)==St}function DI(a){return $t(a)&&Wn(a)==Cr}function PI(a){return $t(a)&&gg(a.length)&&!!it[ur(a)]}function Pk(a){return typeof a=="function"?a:a==null?Mr:typeof a=="object"?Oe(a)?Fk(a[0],a[1]):Ik(a):rE(a)}function Oy(a){if(!eh(a))return FB(a);var f=[];for(var d in vt(a))st.call(a,d)&&d!="constructor"&&f.push(d);return f}function BI(a){if(!Mt(a))return yF(a);var f=eh(a),d=[];for(var m in a)m=="constructor"&&(f||!st.call(a,m))||d.push(m);return d}function Ry(a,f){return a<f}function Bk(a,f){var d=-1,m=Or(a)?q(a.length):[];return Qs(a,function(_,C,L){m[++d]=f(_,C,L)}),m}function Ik(a){var f=jy(a);return f.length==1&&f[0][2]?v2(f[0][0],f[0][1]):function(d){return d===a||Ty(d,a,f)}}function Fk(a,f){return Jy(a)&&m2(f)?v2(Eo(a),f):function(d){var m=r1(d,a);return m===n&&m===f?i1(d,a):Yc(f,m,y|A)}}function Xp(a,f,d,m,_){a!==f&&ky(f,function(C,L){if(_||(_=new Gi),Mt(C))II(a,f,L,d,Xp,m,_);else{var P=m?m(Gy(a,L),C,L+"",a,f,_):n;P===n&&(P=C),by(a,L,P)}},Rr)}function II(a,f,d,m,_,C,L){var P=Gy(a,d),H=Gy(f,d),Q=L.get(H);if(Q){by(a,d,Q);return}var X=C?C(P,H,d+"",a,f,L):n,ne=X===n;if(ne){var le=Oe(H),he=!le&&nl(H),xe=!le&&!he&&Qu(H);X=H,le||he||xe?Oe(P)?X=P:jt(P)?X=Tr(P):he?(ne=!1,X=Zk(H,!0)):xe?(ne=!1,X=Yk(H,!0)):X=[]:nh(H)||Da(H)?(X=P,Da(P)?X=J2(P):(!Mt(P)||vs(P))&&(X=g2(H))):ne=!1}ne&&(L.set(H,X),_(X,H,m,C,L),L.delete(H)),by(a,d,X)}function zk(a,f){var d=a.length;if(!!d)return f+=f<0?d:0,ms(f,d)?a[f]:n}function $k(a,f,d){f.length?f=kt(f,function(C){return Oe(C)?function(L){return Ma(L,C.length===1?C[0]:C)}:C}):f=[Mr];var m=-1;f=kt(f,Kr(we()));var _=Bk(a,function(C,L,P){var H=kt(f,function(Q){return Q(C)});return{criteria:H,index:++m,value:C}});return fB(_,function(C,L){return ZI(C,L,d)})}function FI(a,f){return Hk(a,f,function(d,m){return i1(a,m)})}function Hk(a,f,d){for(var m=-1,_=f.length,C={};++m<_;){var L=f[m],P=Ma(a,L);d(P,L)&&Qc(C,el(L,a),P)}return C}function zI(a){return function(f){return Ma(f,a)}}function My(a,f,d,m){var _=m?uB:Hu,C=-1,L=f.length,P=a;for(a===f&&(f=Tr(f)),d&&(P=kt(a,Kr(d)));++C<L;)for(var H=0,Q=f[C],X=d?d(Q):Q;(H=_(P,X,H,m))>-1;)P!==a&&Up.call(P,H,1),Up.call(a,H,1);return a}function Vk(a,f){for(var d=a?f.length:0,m=d-1;d--;){var _=f[d];if(d==m||_!==C){var C=_;ms(_)?Up.call(a,_,1):Py(a,_)}}return a}function Ly(a,f){return a+qp(bk()*(f-a+1))}function $I(a,f,d,m){for(var _=-1,C=rn(jp((f-a)/(d||1)),0),L=q(C);C--;)L[m?C:++_]=a,a+=d;return L}function Ny(a,f){var d="";if(!a||f<1||f>F)return d;do f%2&&(d+=a),f=qp(f/2),f&&(a+=a);while(f);return d}function De(a,f){return Zy(y2(a,f,Mr),a+"")}function HI(a){return Ek(Xu(a))}function VI(a,f){var d=Xu(a);return ug(d,Ra(f,0,d.length))}function Qc(a,f,d,m){if(!Mt(a))return a;f=el(f,a);for(var _=-1,C=f.length,L=C-1,P=a;P!=null&&++_<C;){var H=Eo(f[_]),Q=d;if(H==="__proto__"||H==="constructor"||H==="prototype")return a;if(_!=L){var X=P[H];Q=m?m(X,H,P):n,Q===n&&(Q=Mt(X)?X:ms(f[_+1])?[]:{})}Kc(P,H,Q),P=P[H]}return a}var Uk=Jp?function(a,f){return Jp.set(a,f),a}:Mr,UI=Wp?function(a,f){return Wp(a,"toString",{configurable:!0,enumerable:!1,value:s1(f),writable:!0})}:Mr;function WI(a){return ug(Xu(a))}function Ei(a,f,d){var m=-1,_=a.length;f<0&&(f=-f>_?0:_+f),d=d>_?_:d,d<0&&(d+=_),_=f>d?0:d-f>>>0,f>>>=0;for(var C=q(_);++m<_;)C[m]=a[m+f];return C}function jI(a,f){var d;return Qs(a,function(m,_,C){return d=f(m,_,C),!d}),!!d}function eg(a,f,d){var m=0,_=a==null?m:a.length;if(typeof f=="number"&&f===f&&_<=bn){for(;m<_;){var C=m+_>>>1,L=a[C];L!==null&&!Zr(L)&&(d?L<=f:L<f)?m=C+1:_=C}return _}return Dy(a,f,Mr,d)}function Dy(a,f,d,m){var _=0,C=a==null?0:a.length;if(C===0)return 0;f=d(f);for(var L=f!==f,P=f===null,H=Zr(f),Q=f===n;_<C;){var X=qp((_+C)/2),ne=d(a[X]),le=ne!==n,he=ne===null,xe=ne===ne,Ne=Zr(ne);if(L)var be=m||xe;else Q?be=xe&&(m||le):P?be=xe&&le&&(m||!he):H?be=xe&&le&&!he&&(m||!Ne):he||Ne?be=!1:be=m?ne<=f:ne<f;be?_=X+1:C=X}return Un(C,$e)}function Wk(a,f){for(var d=-1,m=a.length,_=0,C=[];++d<m;){var L=a[d],P=f?f(L):L;if(!d||!Zi(P,H)){var H=P;C[_++]=L===0?0:L}}return C}function jk(a){return typeof a=="number"?a:Zr(a)?ie:+a}function Gr(a){if(typeof a=="string")return a;if(Oe(a))return kt(a,Gr)+"";if(Zr(a))return Sk?Sk.call(a):"";var f=a+"";return f=="0"&&1/a==-ye?"-0":f}function Xs(a,f,d){var m=-1,_=Np,C=a.length,L=!0,P=[],H=P;if(d)L=!1,_=uy;else if(C>=i){var Q=f?null:nF(a);if(Q)return Pp(Q);L=!1,_=Vc,H=new Oa}else H=f?[]:P;e:for(;++m<C;){var X=a[m],ne=f?f(X):X;if(X=d||X!==0?X:0,L&&ne===ne){for(var le=H.length;le--;)if(H[le]===ne)continue e;f&&H.push(ne),P.push(X)}else _(H,ne,d)||(H!==P&&H.push(ne),P.push(X))}return P}function Py(a,f){return f=el(f,a),a=w2(a,f),a==null||delete a[Eo(Ci(f))]}function qk(a,f,d,m){return Qc(a,f,d(Ma(a,f)),m)}function tg(a,f,d,m){for(var _=a.length,C=m?_:-1;(m?C--:++C<_)&&f(a[C],C,a););return d?Ei(a,m?0:C,m?C+1:_):Ei(a,m?C+1:0,m?_:C)}function Jk(a,f){var d=a;return d instanceof Ve&&(d=d.value()),fy(f,function(m,_){return _.func.apply(_.thisArg,Gs([m],_.args))},d)}function By(a,f,d){var m=a.length;if(m<2)return m?Xs(a[0]):[];for(var _=-1,C=q(m);++_<m;)for(var L=a[_],P=-1;++P<m;)P!=_&&(C[_]=Gc(C[_]||L,a[P],f,d));return Xs(kn(C,1),f,d)}function Kk(a,f,d){for(var m=-1,_=a.length,C=f.length,L={};++m<_;){var P=m<C?f[m]:n;d(L,a[m],P)}return L}function Iy(a){return jt(a)?a:[]}function Fy(a){return typeof a=="function"?a:Mr}function el(a,f){return Oe(a)?a:Jy(a,f)?[a]:S2(tt(a))}var qI=De;function tl(a,f,d){var m=a.length;return d=d===n?m:d,!f&&d>=m?a:Ei(a,f,d)}var Gk=NB||function(a){return M.clearTimeout(a)};function Zk(a,f){if(f)return a.slice();var d=a.length,m=vk?vk(d):new a.constructor(d);return a.copy(m),m}function zy(a){var f=new a.constructor(a.byteLength);return new Hp(f).set(new Hp(a)),f}function JI(a,f){var d=f?zy(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}function KI(a){var f=new a.constructor(a.source,Ac.exec(a));return f.lastIndex=a.lastIndex,f}function GI(a){return Jc?vt(Jc.call(a)):{}}function Yk(a,f){var d=f?zy(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}function Qk(a,f){if(a!==f){var d=a!==n,m=a===null,_=a===a,C=Zr(a),L=f!==n,P=f===null,H=f===f,Q=Zr(f);if(!P&&!Q&&!C&&a>f||C&&L&&H&&!P&&!Q||m&&L&&H||!d&&H||!_)return 1;if(!m&&!C&&!Q&&a<f||Q&&d&&_&&!m&&!C||P&&d&&_||!L&&_||!H)return-1}return 0}function ZI(a,f,d){for(var m=-1,_=a.criteria,C=f.criteria,L=_.length,P=d.length;++m<L;){var H=Qk(_[m],C[m]);if(H){if(m>=P)return H;var Q=d[m];return H*(Q=="desc"?-1:1)}}return a.index-f.index}function Xk(a,f,d,m){for(var _=-1,C=a.length,L=d.length,P=-1,H=f.length,Q=rn(C-L,0),X=q(H+Q),ne=!m;++P<H;)X[P]=f[P];for(;++_<L;)(ne||_<C)&&(X[d[_]]=a[_]);for(;Q--;)X[P++]=a[_++];return X}function e2(a,f,d,m){for(var _=-1,C=a.length,L=-1,P=d.length,H=-1,Q=f.length,X=rn(C-P,0),ne=q(X+Q),le=!m;++_<X;)ne[_]=a[_];for(var he=_;++H<Q;)ne[he+H]=f[H];for(;++L<P;)(le||_<C)&&(ne[he+d[L]]=a[_++]);return ne}function Tr(a,f){var d=-1,m=a.length;for(f||(f=q(m));++d<m;)f[d]=a[d];return f}function ko(a,f,d,m){var _=!d;d||(d={});for(var C=-1,L=f.length;++C<L;){var P=f[C],H=m?m(d[P],a[P],P,d,a):n;H===n&&(H=a[P]),_?ds(d,P,H):Kc(d,P,H)}return d}function YI(a,f){return ko(a,qy(a),f)}function QI(a,f){return ko(a,d2(a),f)}function ng(a,f){return function(d,m){var _=Oe(d)?Lp:_I,C=f?f():{};return _(d,a,we(m,2),C)}}function Gu(a){return De(function(f,d){var m=-1,_=d.length,C=_>1?d[_-1]:n,L=_>2?d[2]:n;for(C=a.length>3&&typeof C=="function"?(_--,C):n,L&&fr(d[0],d[1],L)&&(C=_<3?n:C,_=1),f=vt(f);++m<_;){var P=d[m];P&&a(f,P,m,C)}return f})}function t2(a,f){return function(d,m){if(d==null)return d;if(!Or(d))return a(d,m);for(var _=d.length,C=f?_:-1,L=vt(d);(f?C--:++C<_)&&m(L[C],C,L)!==!1;);return d}}function n2(a){return function(f,d,m){for(var _=-1,C=vt(f),L=m(f),P=L.length;P--;){var H=L[a?P:++_];if(d(C[H],H,C)===!1)break}return f}}function XI(a,f,d){var m=f&O,_=Xc(a);function C(){var L=this&&this!==M&&this instanceof C?_:a;return L.apply(m?d:this,arguments)}return C}function r2(a){return function(f){f=tt(f);var d=Vu(f)?Ki(f):n,m=d?d[0]:f.charAt(0),_=d?tl(d,1).join(""):f.slice(1);return m[a]()+_}}function Zu(a){return function(f){return fy(tE(eE(f).replace(sy,"")),a,"")}}function Xc(a){return function(){var f=arguments;switch(f.length){case 0:return new a;case 1:return new a(f[0]);case 2:return new a(f[0],f[1]);case 3:return new a(f[0],f[1],f[2]);case 4:return new a(f[0],f[1],f[2],f[3]);case 5:return new a(f[0],f[1],f[2],f[3],f[4]);case 6:return new a(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new a(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var d=Ku(a.prototype),m=a.apply(d,f);return Mt(m)?m:d}}function eF(a,f,d){var m=Xc(a);function _(){for(var C=arguments.length,L=q(C),P=C,H=Yu(_);P--;)L[P]=arguments[P];var Q=C<3&&L[0]!==H&&L[C-1]!==H?[]:Zs(L,H);if(C-=Q.length,C<d)return a2(a,f,rg,_.placeholder,n,L,Q,n,n,d-C);var X=this&&this!==M&&this instanceof _?m:a;return dn(X,this,L)}return _}function i2(a){return function(f,d,m){var _=vt(f);if(!Or(f)){var C=we(d,3);f=pn(f),d=function(P){return C(_[P],P,_)}}var L=a(f,d,m);return L>-1?_[C?f[L]:L]:n}}function o2(a){return gs(function(f){var d=f.length,m=d,_=Si.prototype.thru;for(a&&f.reverse();m--;){var C=f[m];if(typeof C!="function")throw new bi(s);if(_&&!L&&lg(C)=="wrapper")var L=new Si([],!0)}for(m=L?m:d;++m<d;){C=f[m];var P=lg(C),H=P=="wrapper"?Wy(C):n;H&&Ky(H[0])&&H[1]==(D|b|N|$)&&!H[4].length&&H[9]==1?L=L[lg(H[0])].apply(L,H[3]):L=C.length==1&&Ky(C)?L[P]():L.thru(C)}return function(){var Q=arguments,X=Q[0];if(L&&Q.length==1&&Oe(X))return L.plant(X).value();for(var ne=0,le=d?f[ne].apply(this,Q):X;++ne<d;)le=f[ne].call(this,le);return le}})}function rg(a,f,d,m,_,C,L,P,H,Q){var X=f&D,ne=f&O,le=f&x,he=f&(b|T),xe=f&G,Ne=le?n:Xc(a);function be(){for(var Fe=arguments.length,qe=q(Fe),Yr=Fe;Yr--;)qe[Yr]=arguments[Yr];if(he)var cr=Yu(be),Qr=hB(qe,cr);if(m&&(qe=Xk(qe,m,_,he)),C&&(qe=e2(qe,C,L,he)),Fe-=Qr,he&&Fe<Q){var qt=Zs(qe,cr);return a2(a,f,rg,be.placeholder,d,qe,qt,P,H,Q-Fe)}var Yi=ne?d:this,ws=le?Yi[a]:a;return Fe=qe.length,P?qe=_F(qe,P):xe&&Fe>1&&qe.reverse(),X&&H<Fe&&(qe.length=H),this&&this!==M&&this instanceof be&&(ws=Ne||Xc(ws)),ws.apply(Yi,qe)}return be}function s2(a,f){return function(d,m){return TI(d,a,f(m),{})}}function ig(a,f){return function(d,m){var _;if(d===n&&m===n)return f;if(d!==n&&(_=d),m!==n){if(_===n)return m;typeof d=="string"||typeof m=="string"?(d=Gr(d),m=Gr(m)):(d=jk(d),m=jk(m)),_=a(d,m)}return _}}function $y(a){return gs(function(f){return f=kt(f,Kr(we())),De(function(d){var m=this;return a(f,function(_){return dn(_,m,d)})})})}function og(a,f){f=f===n?" ":Gr(f);var d=f.length;if(d<2)return d?Ny(f,a):f;var m=Ny(f,jp(a/Uu(f)));return Vu(f)?tl(Ki(m),0,a).join(""):m.slice(0,a)}function tF(a,f,d,m){var _=f&O,C=Xc(a);function L(){for(var P=-1,H=arguments.length,Q=-1,X=m.length,ne=q(X+H),le=this&&this!==M&&this instanceof L?C:a;++Q<X;)ne[Q]=m[Q];for(;H--;)ne[Q++]=arguments[++P];return dn(le,_?d:this,ne)}return L}function l2(a){return function(f,d,m){return m&&typeof m!="number"&&fr(f,d,m)&&(d=m=n),f=ys(f),d===n?(d=f,f=0):d=ys(d),m=m===n?f<d?1:-1:ys(m),$I(f,d,m,a)}}function sg(a){return function(f,d){return typeof f=="string"&&typeof d=="string"||(f=Ai(f),d=Ai(d)),a(f,d)}}function a2(a,f,d,m,_,C,L,P,H,Q){var X=f&b,ne=X?L:n,le=X?n:L,he=X?C:n,xe=X?n:C;f|=X?N:B,f&=~(X?B:N),f&k||(f&=~(O|x));var Ne=[a,f,_,he,ne,xe,le,P,H,Q],be=d.apply(n,Ne);return Ky(a)&&_2(be,Ne),be.placeholder=m,x2(be,a,f)}function Hy(a){var f=nn[a];return function(d,m){if(d=Ai(d),m=m==null?0:Un(Re(m),292),m&&xk(d)){var _=(tt(d)+"e").split("e"),C=f(_[0]+"e"+(+_[1]+m));return _=(tt(C)+"e").split("e"),+(_[0]+"e"+(+_[1]-m))}return f(d)}}var nF=qu&&1/Pp(new qu([,-0]))[1]==ye?function(a){return new qu(a)}:u1;function u2(a){return function(f){var d=Wn(f);return d==$n?vy(f):d==Cr?wB(f):cB(f,a(f))}}function ps(a,f,d,m,_,C,L,P){var H=f&x;if(!H&&typeof a!="function")throw new bi(s);var Q=m?m.length:0;if(Q||(f&=~(N|B),m=_=n),L=L===n?L:rn(Re(L),0),P=P===n?P:Re(P),Q-=_?_.length:0,f&B){var X=m,ne=_;m=_=n}var le=H?n:Wy(a),he=[a,f,d,m,_,X,ne,C,L,P];if(le&&vF(he,le),a=he[0],f=he[1],d=he[2],m=he[3],_=he[4],P=he[9]=he[9]===n?H?0:a.length:rn(he[9]-Q,0),!P&&f&(b|T)&&(f&=~(b|T)),!f||f==O)var xe=XI(a,f,d);else f==b||f==T?xe=eF(a,f,P):(f==N||f==(O|N))&&!_.length?xe=tF(a,f,d,m):xe=rg.apply(n,he);var Ne=le?Uk:_2;return x2(Ne(xe,he),a,f)}function f2(a,f,d,m){return a===n||Zi(a,ju[d])&&!st.call(m,d)?f:a}function c2(a,f,d,m,_,C){return Mt(a)&&Mt(f)&&(C.set(f,a),Xp(a,f,n,c2,C),C.delete(f)),a}function rF(a){return nh(a)?n:a}function h2(a,f,d,m,_,C){var L=d&y,P=a.length,H=f.length;if(P!=H&&!(L&&H>P))return!1;var Q=C.get(a),X=C.get(f);if(Q&&X)return Q==f&&X==a;var ne=-1,le=!0,he=d&A?new Oa:n;for(C.set(a,f),C.set(f,a);++ne<P;){var xe=a[ne],Ne=f[ne];if(m)var be=L?m(Ne,xe,ne,f,a,C):m(xe,Ne,ne,a,f,C);if(be!==n){if(be)continue;le=!1;break}if(he){if(!cy(f,function(Fe,qe){if(!Vc(he,qe)&&(xe===Fe||_(xe,Fe,d,m,C)))return he.push(qe)})){le=!1;break}}else if(!(xe===Ne||_(xe,Ne,d,m,C))){le=!1;break}}return C.delete(a),C.delete(f),le}function iF(a,f,d,m,_,C,L){switch(d){case yo:if(a.byteLength!=f.byteLength||a.byteOffset!=f.byteOffset)return!1;a=a.buffer,f=f.buffer;case us:return!(a.byteLength!=f.byteLength||!C(new Hp(a),new Hp(f)));case ss:case ls:case ga:return Zi(+a,+f);case da:return a.name==f.name&&a.message==f.message;case St:case He:return a==f+"";case $n:var P=vy;case Cr:var H=m&y;if(P||(P=Pp),a.size!=f.size&&!H)return!1;var Q=L.get(a);if(Q)return Q==f;m|=A,L.set(a,f);var X=h2(P(a),P(f),m,_,C,L);return L.delete(a),X;case ma:if(Jc)return Jc.call(a)==Jc.call(f)}return!1}function oF(a,f,d,m,_,C){var L=d&y,P=Vy(a),H=P.length,Q=Vy(f),X=Q.length;if(H!=X&&!L)return!1;for(var ne=H;ne--;){var le=P[ne];if(!(L?le in f:st.call(f,le)))return!1}var he=C.get(a),xe=C.get(f);if(he&&xe)return he==f&&xe==a;var Ne=!0;C.set(a,f),C.set(f,a);for(var be=L;++ne<H;){le=P[ne];var Fe=a[le],qe=f[le];if(m)var Yr=L?m(qe,Fe,le,f,a,C):m(Fe,qe,le,a,f,C);if(!(Yr===n?Fe===qe||_(Fe,qe,d,m,C):Yr)){Ne=!1;break}be||(be=le=="constructor")}if(Ne&&!be){var cr=a.constructor,Qr=f.constructor;cr!=Qr&&"constructor"in a&&"constructor"in f&&!(typeof cr=="function"&&cr instanceof cr&&typeof Qr=="function"&&Qr instanceof Qr)&&(Ne=!1)}return C.delete(a),C.delete(f),Ne}function gs(a){return Zy(y2(a,n,A2),a+"")}function Vy(a){return Lk(a,pn,qy)}function Uy(a){return Lk(a,Rr,d2)}var Wy=Jp?function(a){return Jp.get(a)}:u1;function lg(a){for(var f=a.name+"",d=Ju[f],m=st.call(Ju,f)?d.length:0;m--;){var _=d[m],C=_.func;if(C==null||C==a)return _.name}return f}function Yu(a){var f=st.call(E,"placeholder")?E:a;return f.placeholder}function we(){var a=E.iteratee||l1;return a=a===l1?Pk:a,arguments.length?a(arguments[0],arguments[1]):a}function ag(a,f){var d=a.__data__;return dF(f)?d[typeof f=="string"?"string":"hash"]:d.map}function jy(a){for(var f=pn(a),d=f.length;d--;){var m=f[d],_=a[m];f[d]=[m,_,m2(_)]}return f}function La(a,f){var d=mB(a,f);return Dk(d)?d:n}function sF(a){var f=st.call(a,Aa),d=a[Aa];try{a[Aa]=n;var m=!0}catch{}var _=zp.call(a);return m&&(f?a[Aa]=d:delete a[Aa]),_}var qy=wy?function(a){return a==null?[]:(a=vt(a),Ks(wy(a),function(f){return wk.call(a,f)}))}:f1,d2=wy?function(a){for(var f=[];a;)Gs(f,qy(a)),a=Vp(a);return f}:f1,Wn=ur;(_y&&Wn(new _y(new ArrayBuffer(1)))!=yo||Wc&&Wn(new Wc)!=$n||xy&&Wn(xy.resolve())!=Sn||qu&&Wn(new qu)!=Cr||jc&&Wn(new jc)!=as)&&(Wn=function(a){var f=ur(a),d=f==yi?a.constructor:n,m=d?Na(d):"";if(m)switch(m){case VB:return yo;case UB:return $n;case WB:return Sn;case jB:return Cr;case qB:return as}return f});function lF(a,f,d){for(var m=-1,_=d.length;++m<_;){var C=d[m],L=C.size;switch(C.type){case"drop":a+=L;break;case"dropRight":f-=L;break;case"take":f=Un(f,a+L);break;case"takeRight":a=rn(a,f-L);break}}return{start:a,end:f}}function aF(a){var f=a.match(Ec);return f?f[1].split(Hn):[]}function p2(a,f,d){f=el(f,a);for(var m=-1,_=f.length,C=!1;++m<_;){var L=Eo(f[m]);if(!(C=a!=null&&d(a,L)))break;a=a[L]}return C||++m!=_?C:(_=a==null?0:a.length,!!_&&gg(_)&&ms(L,_)&&(Oe(a)||Da(a)))}function uF(a){var f=a.length,d=new a.constructor(f);return f&&typeof a[0]=="string"&&st.call(a,"index")&&(d.index=a.index,d.input=a.input),d}function g2(a){return typeof a.constructor=="function"&&!eh(a)?Ku(Vp(a)):{}}function fF(a,f,d){var m=a.constructor;switch(f){case us:return zy(a);case ss:case ls:return new m(+a);case yo:return JI(a,d);case Au:case ya:case Tu:case yc:case Ou:case wc:case _c:case xc:case bc:return Yk(a,d);case $n:return new m;case ga:case He:return new m(a);case St:return KI(a);case Cr:return new m;case ma:return GI(a)}}function cF(a,f){var d=f.length;if(!d)return a;var m=d-1;return f[m]=(d>1?"& ":"")+f[m],f=f.join(d>2?", ":" "),a.replace(pp,`{
/* [wrapped with `+f+`] */
`)}function hF(a){return Oe(a)||Da(a)||!!(_k&&a&&a[_k])}function ms(a,f){var d=typeof a;return f=f==null?F:f,!!f&&(d=="number"||d!="symbol"&&Yv.test(a))&&a>-1&&a%1==0&&a<f}function fr(a,f,d){if(!Mt(d))return!1;var m=typeof f;return(m=="number"?Or(d)&&ms(f,d.length):m=="string"&&f in d)?Zi(d[f],a):!1}function Jy(a,f){if(Oe(a))return!1;var d=typeof a;return d=="number"||d=="symbol"||d=="boolean"||a==null||Zr(a)?!0:kc.test(a)||!wa.test(a)||f!=null&&a in vt(f)}function dF(a){var f=typeof a;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?a!=="__proto__":a===null}function Ky(a){var f=lg(a),d=E[f];if(typeof d!="function"||!(f in Ve.prototype))return!1;if(a===d)return!0;var m=Wy(d);return!!m&&a===m[0]}function pF(a){return!!mk&&mk in a}var gF=Ip?vs:c1;function eh(a){var f=a&&a.constructor,d=typeof f=="function"&&f.prototype||ju;return a===d}function m2(a){return a===a&&!Mt(a)}function v2(a,f){return function(d){return d==null?!1:d[a]===f&&(f!==n||a in vt(d))}}function mF(a){var f=dg(a,function(m){return d.size===c&&d.clear(),m}),d=f.cache;return f}function vF(a,f){var d=a[1],m=f[1],_=d|m,C=_<(O|x|D),L=m==D&&d==b||m==D&&d==$&&a[7].length<=f[8]||m==(D|$)&&f[7].length<=f[8]&&d==b;if(!(C||L))return a;m&O&&(a[2]=f[2],_|=d&O?0:k);var P=f[3];if(P){var H=a[3];a[3]=H?Xk(H,P,f[4]):P,a[4]=H?Zs(a[3],h):f[4]}return P=f[5],P&&(H=a[5],a[5]=H?e2(H,P,f[6]):P,a[6]=H?Zs(a[5],h):f[6]),P=f[7],P&&(a[7]=P),m&D&&(a[8]=a[8]==null?f[8]:Un(a[8],f[8])),a[9]==null&&(a[9]=f[9]),a[0]=f[0],a[1]=_,a}function yF(a){var f=[];if(a!=null)for(var d in vt(a))f.push(d);return f}function wF(a){return zp.call(a)}function y2(a,f,d){return f=rn(f===n?a.length-1:f,0),function(){for(var m=arguments,_=-1,C=rn(m.length-f,0),L=q(C);++_<C;)L[_]=m[f+_];_=-1;for(var P=q(f+1);++_<f;)P[_]=m[_];return P[f]=d(L),dn(a,this,P)}}function w2(a,f){return f.length<2?a:Ma(a,Ei(f,0,-1))}function _F(a,f){for(var d=a.length,m=Un(f.length,d),_=Tr(a);m--;){var C=f[m];a[m]=ms(C,d)?_[C]:n}return a}function Gy(a,f){if(!(f==="constructor"&&typeof a[f]=="function")&&f!="__proto__")return a[f]}var _2=b2(Uk),th=PB||function(a,f){return M.setTimeout(a,f)},Zy=b2(UI);function x2(a,f,d){var m=f+"";return Zy(a,cF(m,xF(aF(m),d)))}function b2(a){var f=0,d=0;return function(){var m=zB(),_=_e-(m-d);if(d=m,_>0){if(++f>=ve)return arguments[0]}else f=0;return a.apply(n,arguments)}}function ug(a,f){var d=-1,m=a.length,_=m-1;for(f=f===n?m:f;++d<f;){var C=Ly(d,_),L=a[C];a[C]=a[d],a[d]=L}return a.length=f,a}var S2=mF(function(a){var f=[];return a.charCodeAt(0)===46&&f.push(""),a.replace(dp,function(d,m,_,C){f.push(_?C.replace(ka,"$1"):m||d)}),f});function Eo(a){if(typeof a=="string"||Zr(a))return a;var f=a+"";return f=="0"&&1/a==-ye?"-0":f}function Na(a){if(a!=null){try{return Fp.call(a)}catch{}try{return a+""}catch{}}return""}function xF(a,f){return xi(tn,function(d){var m="_."+d[0];f&d[1]&&!Np(a,m)&&a.push(m)}),a.sort()}function k2(a){if(a instanceof Ve)return a.clone();var f=new Si(a.__wrapped__,a.__chain__);return f.__actions__=Tr(a.__actions__),f.__index__=a.__index__,f.__values__=a.__values__,f}function bF(a,f,d){(d?fr(a,f,d):f===n)?f=1:f=rn(Re(f),0);var m=a==null?0:a.length;if(!m||f<1)return[];for(var _=0,C=0,L=q(jp(m/f));_<m;)L[C++]=Ei(a,_,_+=f);return L}function SF(a){for(var f=-1,d=a==null?0:a.length,m=0,_=[];++f<d;){var C=a[f];C&&(_[m++]=C)}return _}function kF(){var a=arguments.length;if(!a)return[];for(var f=q(a-1),d=arguments[0],m=a;m--;)f[m-1]=arguments[m];return Gs(Oe(d)?Tr(d):[d],kn(f,1))}var EF=De(function(a,f){return jt(a)?Gc(a,kn(f,1,jt,!0)):[]}),CF=De(function(a,f){var d=Ci(f);return jt(d)&&(d=n),jt(a)?Gc(a,kn(f,1,jt,!0),we(d,2)):[]}),AF=De(function(a,f){var d=Ci(f);return jt(d)&&(d=n),jt(a)?Gc(a,kn(f,1,jt,!0),n,d):[]});function TF(a,f,d){var m=a==null?0:a.length;return m?(f=d||f===n?1:Re(f),Ei(a,f<0?0:f,m)):[]}function OF(a,f,d){var m=a==null?0:a.length;return m?(f=d||f===n?1:Re(f),f=m-f,Ei(a,0,f<0?0:f)):[]}function RF(a,f){return a&&a.length?tg(a,we(f,3),!0,!0):[]}function MF(a,f){return a&&a.length?tg(a,we(f,3),!0):[]}function LF(a,f,d,m){var _=a==null?0:a.length;return _?(d&&typeof d!="number"&&fr(a,f,d)&&(d=0,m=_),kI(a,f,d,m)):[]}function E2(a,f,d){var m=a==null?0:a.length;if(!m)return-1;var _=d==null?0:Re(d);return _<0&&(_=rn(m+_,0)),Dp(a,we(f,3),_)}function C2(a,f,d){var m=a==null?0:a.length;if(!m)return-1;var _=m-1;return d!==n&&(_=Re(d),_=d<0?rn(m+_,0):Un(_,m-1)),Dp(a,we(f,3),_,!0)}function A2(a){var f=a==null?0:a.length;return f?kn(a,1):[]}function NF(a){var f=a==null?0:a.length;return f?kn(a,ye):[]}function DF(a,f){var d=a==null?0:a.length;return d?(f=f===n?1:Re(f),kn(a,f)):[]}function PF(a){for(var f=-1,d=a==null?0:a.length,m={};++f<d;){var _=a[f];m[_[0]]=_[1]}return m}function T2(a){return a&&a.length?a[0]:n}function BF(a,f,d){var m=a==null?0:a.length;if(!m)return-1;var _=d==null?0:Re(d);return _<0&&(_=rn(m+_,0)),Hu(a,f,_)}function IF(a){var f=a==null?0:a.length;return f?Ei(a,0,-1):[]}var FF=De(function(a){var f=kt(a,Iy);return f.length&&f[0]===a[0]?Ay(f):[]}),zF=De(function(a){var f=Ci(a),d=kt(a,Iy);return f===Ci(d)?f=n:d.pop(),d.length&&d[0]===a[0]?Ay(d,we(f,2)):[]}),$F=De(function(a){var f=Ci(a),d=kt(a,Iy);return f=typeof f=="function"?f:n,f&&d.pop(),d.length&&d[0]===a[0]?Ay(d,n,f):[]});function HF(a,f){return a==null?"":IB.call(a,f)}function Ci(a){var f=a==null?0:a.length;return f?a[f-1]:n}function VF(a,f,d){var m=a==null?0:a.length;if(!m)return-1;var _=m;return d!==n&&(_=Re(d),_=_<0?rn(m+_,0):Un(_,m-1)),f===f?xB(a,f,_):Dp(a,ak,_,!0)}function UF(a,f){return a&&a.length?zk(a,Re(f)):n}var WF=De(O2);function O2(a,f){return a&&a.length&&f&&f.length?My(a,f):a}function jF(a,f,d){return a&&a.length&&f&&f.length?My(a,f,we(d,2)):a}function qF(a,f,d){return a&&a.length&&f&&f.length?My(a,f,n,d):a}var JF=gs(function(a,f){var d=a==null?0:a.length,m=Sy(a,f);return Vk(a,kt(f,function(_){return ms(_,d)?+_:_}).sort(Qk)),m});function KF(a,f){var d=[];if(!(a&&a.length))return d;var m=-1,_=[],C=a.length;for(f=we(f,3);++m<C;){var L=a[m];f(L,m,a)&&(d.push(L),_.push(m))}return Vk(a,_),d}function Yy(a){return a==null?a:HB.call(a)}function GF(a,f,d){var m=a==null?0:a.length;return m?(d&&typeof d!="number"&&fr(a,f,d)?(f=0,d=m):(f=f==null?0:Re(f),d=d===n?m:Re(d)),Ei(a,f,d)):[]}function ZF(a,f){return eg(a,f)}function YF(a,f,d){return Dy(a,f,we(d,2))}function QF(a,f){var d=a==null?0:a.length;if(d){var m=eg(a,f);if(m<d&&Zi(a[m],f))return m}return-1}function XF(a,f){return eg(a,f,!0)}function e4(a,f,d){return Dy(a,f,we(d,2),!0)}function t4(a,f){var d=a==null?0:a.length;if(d){var m=eg(a,f,!0)-1;if(Zi(a[m],f))return m}return-1}function n4(a){return a&&a.length?Wk(a):[]}function r4(a,f){return a&&a.length?Wk(a,we(f,2)):[]}function i4(a){var f=a==null?0:a.length;return f?Ei(a,1,f):[]}function o4(a,f,d){return a&&a.length?(f=d||f===n?1:Re(f),Ei(a,0,f<0?0:f)):[]}function s4(a,f,d){var m=a==null?0:a.length;return m?(f=d||f===n?1:Re(f),f=m-f,Ei(a,f<0?0:f,m)):[]}function l4(a,f){return a&&a.length?tg(a,we(f,3),!1,!0):[]}function a4(a,f){return a&&a.length?tg(a,we(f,3)):[]}var u4=De(function(a){return Xs(kn(a,1,jt,!0))}),f4=De(function(a){var f=Ci(a);return jt(f)&&(f=n),Xs(kn(a,1,jt,!0),we(f,2))}),c4=De(function(a){var f=Ci(a);return f=typeof f=="function"?f:n,Xs(kn(a,1,jt,!0),n,f)});function h4(a){return a&&a.length?Xs(a):[]}function d4(a,f){return a&&a.length?Xs(a,we(f,2)):[]}function p4(a,f){return f=typeof f=="function"?f:n,a&&a.length?Xs(a,n,f):[]}function Qy(a){if(!(a&&a.length))return[];var f=0;return a=Ks(a,function(d){if(jt(d))return f=rn(d.length,f),!0}),gy(f,function(d){return kt(a,hy(d))})}function R2(a,f){if(!(a&&a.length))return[];var d=Qy(a);return f==null?d:kt(d,function(m){return dn(f,n,m)})}var g4=De(function(a,f){return jt(a)?Gc(a,f):[]}),m4=De(function(a){return By(Ks(a,jt))}),v4=De(function(a){var f=Ci(a);return jt(f)&&(f=n),By(Ks(a,jt),we(f,2))}),y4=De(function(a){var f=Ci(a);return f=typeof f=="function"?f:n,By(Ks(a,jt),n,f)}),w4=De(Qy);function _4(a,f){return Kk(a||[],f||[],Kc)}function x4(a,f){return Kk(a||[],f||[],Qc)}var b4=De(function(a){var f=a.length,d=f>1?a[f-1]:n;return d=typeof d=="function"?(a.pop(),d):n,R2(a,d)});function M2(a){var f=E(a);return f.__chain__=!0,f}function S4(a,f){return f(a),a}function fg(a,f){return f(a)}var k4=gs(function(a){var f=a.length,d=f?a[0]:0,m=this.__wrapped__,_=function(C){return Sy(C,a)};return f>1||this.__actions__.length||!(m instanceof Ve)||!ms(d)?this.thru(_):(m=m.slice(d,+d+(f?1:0)),m.__actions__.push({func:fg,args:[_],thisArg:n}),new Si(m,this.__chain__).thru(function(C){return f&&!C.length&&C.push(n),C}))});function E4(){return M2(this)}function C4(){return new Si(this.value(),this.__chain__)}function A4(){this.__values__===n&&(this.__values__=j2(this.value()));var a=this.__index__>=this.__values__.length,f=a?n:this.__values__[this.__index__++];return{done:a,value:f}}function T4(){return this}function O4(a){for(var f,d=this;d instanceof Gp;){var m=k2(d);m.__index__=0,m.__values__=n,f?_.__wrapped__=m:f=m;var _=m;d=d.__wrapped__}return _.__wrapped__=a,f}function R4(){var a=this.__wrapped__;if(a instanceof Ve){var f=a;return this.__actions__.length&&(f=new Ve(this)),f=f.reverse(),f.__actions__.push({func:fg,args:[Yy],thisArg:n}),new Si(f,this.__chain__)}return this.thru(Yy)}function M4(){return Jk(this.__wrapped__,this.__actions__)}var L4=ng(function(a,f,d){st.call(a,d)?++a[d]:ds(a,d,1)});function N4(a,f,d){var m=Oe(a)?sk:SI;return d&&fr(a,f,d)&&(f=n),m(a,we(f,3))}function D4(a,f){var d=Oe(a)?Ks:Rk;return d(a,we(f,3))}var P4=i2(E2),B4=i2(C2);function I4(a,f){return kn(cg(a,f),1)}function F4(a,f){return kn(cg(a,f),ye)}function z4(a,f,d){return d=d===n?1:Re(d),kn(cg(a,f),d)}function L2(a,f){var d=Oe(a)?xi:Qs;return d(a,we(f,3))}function N2(a,f){var d=Oe(a)?iB:Ok;return d(a,we(f,3))}var $4=ng(function(a,f,d){st.call(a,d)?a[d].push(f):ds(a,d,[f])});function H4(a,f,d,m){a=Or(a)?a:Xu(a),d=d&&!m?Re(d):0;var _=a.length;return d<0&&(d=rn(_+d,0)),mg(a)?d<=_&&a.indexOf(f,d)>-1:!!_&&Hu(a,f,d)>-1}var V4=De(function(a,f,d){var m=-1,_=typeof f=="function",C=Or(a)?q(a.length):[];return Qs(a,function(L){C[++m]=_?dn(f,L,d):Zc(L,f,d)}),C}),U4=ng(function(a,f,d){ds(a,d,f)});function cg(a,f){var d=Oe(a)?kt:Bk;return d(a,we(f,3))}function W4(a,f,d,m){return a==null?[]:(Oe(f)||(f=f==null?[]:[f]),d=m?n:d,Oe(d)||(d=d==null?[]:[d]),$k(a,f,d))}var j4=ng(function(a,f,d){a[d?0:1].push(f)},function(){return[[],[]]});function q4(a,f,d){var m=Oe(a)?fy:fk,_=arguments.length<3;return m(a,we(f,4),d,_,Qs)}function J4(a,f,d){var m=Oe(a)?oB:fk,_=arguments.length<3;return m(a,we(f,4),d,_,Ok)}function K4(a,f){var d=Oe(a)?Ks:Rk;return d(a,pg(we(f,3)))}function G4(a){var f=Oe(a)?Ek:HI;return f(a)}function Z4(a,f,d){(d?fr(a,f,d):f===n)?f=1:f=Re(f);var m=Oe(a)?yI:VI;return m(a,f)}function Y4(a){var f=Oe(a)?wI:WI;return f(a)}function Q4(a){if(a==null)return 0;if(Or(a))return mg(a)?Uu(a):a.length;var f=Wn(a);return f==$n||f==Cr?a.size:Oy(a).length}function X4(a,f,d){var m=Oe(a)?cy:jI;return d&&fr(a,f,d)&&(f=n),m(a,we(f,3))}var e8=De(function(a,f){if(a==null)return[];var d=f.length;return d>1&&fr(a,f[0],f[1])?f=[]:d>2&&fr(f[0],f[1],f[2])&&(f=[f[0]]),$k(a,kn(f,1),[])}),hg=DB||function(){return M.Date.now()};function t8(a,f){if(typeof f!="function")throw new bi(s);return a=Re(a),function(){if(--a<1)return f.apply(this,arguments)}}function D2(a,f,d){return f=d?n:f,f=a&&f==null?a.length:f,ps(a,D,n,n,n,n,f)}function P2(a,f){var d;if(typeof f!="function")throw new bi(s);return a=Re(a),function(){return--a>0&&(d=f.apply(this,arguments)),a<=1&&(f=n),d}}var Xy=De(function(a,f,d){var m=O;if(d.length){var _=Zs(d,Yu(Xy));m|=N}return ps(a,m,f,d,_)}),B2=De(function(a,f,d){var m=O|x;if(d.length){var _=Zs(d,Yu(B2));m|=N}return ps(f,m,a,d,_)});function I2(a,f,d){f=d?n:f;var m=ps(a,b,n,n,n,n,n,f);return m.placeholder=I2.placeholder,m}function F2(a,f,d){f=d?n:f;var m=ps(a,T,n,n,n,n,n,f);return m.placeholder=F2.placeholder,m}function z2(a,f,d){var m,_,C,L,P,H,Q=0,X=!1,ne=!1,le=!0;if(typeof a!="function")throw new bi(s);f=Ai(f)||0,Mt(d)&&(X=!!d.leading,ne="maxWait"in d,C=ne?rn(Ai(d.maxWait)||0,f):C,le="trailing"in d?!!d.trailing:le);function he(qt){var Yi=m,ws=_;return m=_=n,Q=qt,L=a.apply(ws,Yi),L}function xe(qt){return Q=qt,P=th(Fe,f),X?he(qt):L}function Ne(qt){var Yi=qt-H,ws=qt-Q,iE=f-Yi;return ne?Un(iE,C-ws):iE}function be(qt){var Yi=qt-H,ws=qt-Q;return H===n||Yi>=f||Yi<0||ne&&ws>=C}function Fe(){var qt=hg();if(be(qt))return qe(qt);P=th(Fe,Ne(qt))}function qe(qt){return P=n,le&&m?he(qt):(m=_=n,L)}function Yr(){P!==n&&Gk(P),Q=0,m=H=_=P=n}function cr(){return P===n?L:qe(hg())}function Qr(){var qt=hg(),Yi=be(qt);if(m=arguments,_=this,H=qt,Yi){if(P===n)return xe(H);if(ne)return Gk(P),P=th(Fe,f),he(H)}return P===n&&(P=th(Fe,f)),L}return Qr.cancel=Yr,Qr.flush=cr,Qr}var n8=De(function(a,f){return Tk(a,1,f)}),r8=De(function(a,f,d){return Tk(a,Ai(f)||0,d)});function i8(a){return ps(a,G)}function dg(a,f){if(typeof a!="function"||f!=null&&typeof f!="function")throw new bi(s);var d=function(){var m=arguments,_=f?f.apply(this,m):m[0],C=d.cache;if(C.has(_))return C.get(_);var L=a.apply(this,m);return d.cache=C.set(_,L)||C,L};return d.cache=new(dg.Cache||hs),d}dg.Cache=hs;function pg(a){if(typeof a!="function")throw new bi(s);return function(){var f=arguments;switch(f.length){case 0:return!a.call(this);case 1:return!a.call(this,f[0]);case 2:return!a.call(this,f[0],f[1]);case 3:return!a.call(this,f[0],f[1],f[2])}return!a.apply(this,f)}}function o8(a){return P2(2,a)}var s8=qI(function(a,f){f=f.length==1&&Oe(f[0])?kt(f[0],Kr(we())):kt(kn(f,1),Kr(we()));var d=f.length;return De(function(m){for(var _=-1,C=Un(m.length,d);++_<C;)m[_]=f[_].call(this,m[_]);return dn(a,this,m)})}),e1=De(function(a,f){var d=Zs(f,Yu(e1));return ps(a,N,n,f,d)}),$2=De(function(a,f){var d=Zs(f,Yu($2));return ps(a,B,n,f,d)}),l8=gs(function(a,f){return ps(a,$,n,n,n,f)});function a8(a,f){if(typeof a!="function")throw new bi(s);return f=f===n?f:Re(f),De(a,f)}function u8(a,f){if(typeof a!="function")throw new bi(s);return f=f==null?0:rn(Re(f),0),De(function(d){var m=d[f],_=tl(d,0,f);return m&&Gs(_,m),dn(a,this,_)})}function f8(a,f,d){var m=!0,_=!0;if(typeof a!="function")throw new bi(s);return Mt(d)&&(m="leading"in d?!!d.leading:m,_="trailing"in d?!!d.trailing:_),z2(a,f,{leading:m,maxWait:f,trailing:_})}function c8(a){return D2(a,1)}function h8(a,f){return e1(Fy(f),a)}function d8(){if(!arguments.length)return[];var a=arguments[0];return Oe(a)?a:[a]}function p8(a){return ki(a,v)}function g8(a,f){return f=typeof f=="function"?f:n,ki(a,v,f)}function m8(a){return ki(a,p|v)}function v8(a,f){return f=typeof f=="function"?f:n,ki(a,p|v,f)}function y8(a,f){return f==null||Ak(a,f,pn(f))}function Zi(a,f){return a===f||a!==a&&f!==f}var w8=sg(Cy),_8=sg(function(a,f){return a>=f}),Da=Nk(function(){return arguments}())?Nk:function(a){return $t(a)&&st.call(a,"callee")&&!wk.call(a,"callee")},Oe=q.isArray,x8=ke?Kr(ke):OI;function Or(a){return a!=null&&gg(a.length)&&!vs(a)}function jt(a){return $t(a)&&Or(a)}function b8(a){return a===!0||a===!1||$t(a)&&ur(a)==ss}var nl=BB||c1,S8=ot?Kr(ot):RI;function k8(a){return $t(a)&&a.nodeType===1&&!nh(a)}function E8(a){if(a==null)return!0;if(Or(a)&&(Oe(a)||typeof a=="string"||typeof a.splice=="function"||nl(a)||Qu(a)||Da(a)))return!a.length;var f=Wn(a);if(f==$n||f==Cr)return!a.size;if(eh(a))return!Oy(a).length;for(var d in a)if(st.call(a,d))return!1;return!0}function C8(a,f){return Yc(a,f)}function A8(a,f,d){d=typeof d=="function"?d:n;var m=d?d(a,f):n;return m===n?Yc(a,f,n,d):!!m}function t1(a){if(!$t(a))return!1;var f=ur(a);return f==da||f==sp||typeof a.message=="string"&&typeof a.name=="string"&&!nh(a)}function T8(a){return typeof a=="number"&&xk(a)}function vs(a){if(!Mt(a))return!1;var f=ur(a);return f==pa||f==vc||f==ar||f==lp}function H2(a){return typeof a=="number"&&a==Re(a)}function gg(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=F}function Mt(a){var f=typeof a;return a!=null&&(f=="object"||f=="function")}function $t(a){return a!=null&&typeof a=="object"}var V2=hn?Kr(hn):LI;function O8(a,f){return a===f||Ty(a,f,jy(f))}function R8(a,f,d){return d=typeof d=="function"?d:n,Ty(a,f,jy(f),d)}function M8(a){return U2(a)&&a!=+a}function L8(a){if(gF(a))throw new Te(o);return Dk(a)}function N8(a){return a===null}function D8(a){return a==null}function U2(a){return typeof a=="number"||$t(a)&&ur(a)==ga}function nh(a){if(!$t(a)||ur(a)!=yi)return!1;var f=Vp(a);if(f===null)return!0;var d=st.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&Fp.call(d)==RB}var n1=xo?Kr(xo):NI;function P8(a){return H2(a)&&a>=-F&&a<=F}var W2=bo?Kr(bo):DI;function mg(a){return typeof a=="string"||!Oe(a)&&$t(a)&&ur(a)==He}function Zr(a){return typeof a=="symbol"||$t(a)&&ur(a)==ma}var Qu=Ar?Kr(Ar):PI;function B8(a){return a===n}function I8(a){return $t(a)&&Wn(a)==as}function F8(a){return $t(a)&&ur(a)==va}var z8=sg(Ry),$8=sg(function(a,f){return a<=f});function j2(a){if(!a)return[];if(Or(a))return mg(a)?Ki(a):Tr(a);if(Uc&&a[Uc])return yB(a[Uc]());var f=Wn(a),d=f==$n?vy:f==Cr?Pp:Xu;return d(a)}function ys(a){if(!a)return a===0?a:0;if(a=Ai(a),a===ye||a===-ye){var f=a<0?-1:1;return f*J}return a===a?a:0}function Re(a){var f=ys(a),d=f%1;return f===f?d?f-d:f:0}function q2(a){return a?Ra(Re(a),0,Se):0}function Ai(a){if(typeof a=="number")return a;if(Zr(a))return ie;if(Mt(a)){var f=typeof a.valueOf=="function"?a.valueOf():a;a=Mt(f)?f+"":f}if(typeof a!="string")return a===0?a:+a;a=ck(a);var d=Gv.test(a);return d||Tc.test(a)?w(a.slice(2),d?2:8):Kv.test(a)?ie:+a}function J2(a){return ko(a,Rr(a))}function H8(a){return a?Ra(Re(a),-F,F):a===0?a:0}function tt(a){return a==null?"":Gr(a)}var V8=Gu(function(a,f){if(eh(f)||Or(f)){ko(f,pn(f),a);return}for(var d in f)st.call(f,d)&&Kc(a,d,f[d])}),K2=Gu(function(a,f){ko(f,Rr(f),a)}),vg=Gu(function(a,f,d,m){ko(f,Rr(f),a,m)}),U8=Gu(function(a,f,d,m){ko(f,pn(f),a,m)}),W8=gs(Sy);function j8(a,f){var d=Ku(a);return f==null?d:Ck(d,f)}var q8=De(function(a,f){a=vt(a);var d=-1,m=f.length,_=m>2?f[2]:n;for(_&&fr(f[0],f[1],_)&&(m=1);++d<m;)for(var C=f[d],L=Rr(C),P=-1,H=L.length;++P<H;){var Q=L[P],X=a[Q];(X===n||Zi(X,ju[Q])&&!st.call(a,Q))&&(a[Q]=C[Q])}return a}),J8=De(function(a){return a.push(n,c2),dn(G2,n,a)});function K8(a,f){return lk(a,we(f,3),So)}function G8(a,f){return lk(a,we(f,3),Ey)}function Z8(a,f){return a==null?a:ky(a,we(f,3),Rr)}function Y8(a,f){return a==null?a:Mk(a,we(f,3),Rr)}function Q8(a,f){return a&&So(a,we(f,3))}function X8(a,f){return a&&Ey(a,we(f,3))}function e6(a){return a==null?[]:Qp(a,pn(a))}function t6(a){return a==null?[]:Qp(a,Rr(a))}function r1(a,f,d){var m=a==null?n:Ma(a,f);return m===n?d:m}function n6(a,f){return a!=null&&p2(a,f,EI)}function i1(a,f){return a!=null&&p2(a,f,CI)}var r6=s2(function(a,f,d){f!=null&&typeof f.toString!="function"&&(f=zp.call(f)),a[f]=d},s1(Mr)),i6=s2(function(a,f,d){f!=null&&typeof f.toString!="function"&&(f=zp.call(f)),st.call(a,f)?a[f].push(d):a[f]=[d]},we),o6=De(Zc);function pn(a){return Or(a)?kk(a):Oy(a)}function Rr(a){return Or(a)?kk(a,!0):BI(a)}function s6(a,f){var d={};return f=we(f,3),So(a,function(m,_,C){ds(d,f(m,_,C),m)}),d}function l6(a,f){var d={};return f=we(f,3),So(a,function(m,_,C){ds(d,_,f(m,_,C))}),d}var a6=Gu(function(a,f,d){Xp(a,f,d)}),G2=Gu(function(a,f,d,m){Xp(a,f,d,m)}),u6=gs(function(a,f){var d={};if(a==null)return d;var m=!1;f=kt(f,function(C){return C=el(C,a),m||(m=C.length>1),C}),ko(a,Uy(a),d),m&&(d=ki(d,p|g|v,rF));for(var _=f.length;_--;)Py(d,f[_]);return d});function f6(a,f){return Z2(a,pg(we(f)))}var c6=gs(function(a,f){return a==null?{}:FI(a,f)});function Z2(a,f){if(a==null)return{};var d=kt(Uy(a),function(m){return[m]});return f=we(f),Hk(a,d,function(m,_){return f(m,_[0])})}function h6(a,f,d){f=el(f,a);var m=-1,_=f.length;for(_||(_=1,a=n);++m<_;){var C=a==null?n:a[Eo(f[m])];C===n&&(m=_,C=d),a=vs(C)?C.call(a):C}return a}function d6(a,f,d){return a==null?a:Qc(a,f,d)}function p6(a,f,d,m){return m=typeof m=="function"?m:n,a==null?a:Qc(a,f,d,m)}var Y2=u2(pn),Q2=u2(Rr);function g6(a,f,d){var m=Oe(a),_=m||nl(a)||Qu(a);if(f=we(f,4),d==null){var C=a&&a.constructor;_?d=m?new C:[]:Mt(a)?d=vs(C)?Ku(Vp(a)):{}:d={}}return(_?xi:So)(a,function(L,P,H){return f(d,L,P,H)}),d}function m6(a,f){return a==null?!0:Py(a,f)}function v6(a,f,d){return a==null?a:qk(a,f,Fy(d))}function y6(a,f,d,m){return m=typeof m=="function"?m:n,a==null?a:qk(a,f,Fy(d),m)}function Xu(a){return a==null?[]:my(a,pn(a))}function w6(a){return a==null?[]:my(a,Rr(a))}function _6(a,f,d){return d===n&&(d=f,f=n),d!==n&&(d=Ai(d),d=d===d?d:0),f!==n&&(f=Ai(f),f=f===f?f:0),Ra(Ai(a),f,d)}function x6(a,f,d){return f=ys(f),d===n?(d=f,f=0):d=ys(d),a=Ai(a),AI(a,f,d)}function b6(a,f,d){if(d&&typeof d!="boolean"&&fr(a,f,d)&&(f=d=n),d===n&&(typeof f=="boolean"?(d=f,f=n):typeof a=="boolean"&&(d=a,a=n)),a===n&&f===n?(a=0,f=1):(a=ys(a),f===n?(f=a,a=0):f=ys(f)),a>f){var m=a;a=f,f=m}if(d||a%1||f%1){var _=bk();return Un(a+_*(f-a+Hc("1e-"+((_+"").length-1))),f)}return Ly(a,f)}var S6=Zu(function(a,f,d){return f=f.toLowerCase(),a+(d?X2(f):f)});function X2(a){return o1(tt(a).toLowerCase())}function eE(a){return a=tt(a),a&&a.replace(Qv,dB).replace(Tp,"")}function k6(a,f,d){a=tt(a),f=Gr(f);var m=a.length;d=d===n?m:Ra(Re(d),0,m);var _=d;return d-=f.length,d>=0&&a.slice(d,_)==f}function E6(a){return a=tt(a),a&&Lu.test(a)?a.replace(Mu,pB):a}function C6(a){return a=tt(a),a&&xa.test(a)?a.replace(_a,"\\$&"):a}var A6=Zu(function(a,f,d){return a+(d?"-":"")+f.toLowerCase()}),T6=Zu(function(a,f,d){return a+(d?" ":"")+f.toLowerCase()}),O6=r2("toLowerCase");function R6(a,f,d){a=tt(a),f=Re(f);var m=f?Uu(a):0;if(!f||m>=f)return a;var _=(f-m)/2;return og(qp(_),d)+a+og(jp(_),d)}function M6(a,f,d){a=tt(a),f=Re(f);var m=f?Uu(a):0;return f&&m<f?a+og(f-m,d):a}function L6(a,f,d){a=tt(a),f=Re(f);var m=f?Uu(a):0;return f&&m<f?og(f-m,d)+a:a}function N6(a,f,d){return d||f==null?f=0:f&&(f=+f),$B(tt(a).replace(ba,""),f||0)}function D6(a,f,d){return(d?fr(a,f,d):f===n)?f=1:f=Re(f),Ny(tt(a),f)}function P6(){var a=arguments,f=tt(a[0]);return a.length<3?f:f.replace(a[1],a[2])}var B6=Zu(function(a,f,d){return a+(d?"_":"")+f.toLowerCase()});function I6(a,f,d){return d&&typeof d!="number"&&fr(a,f,d)&&(f=d=n),d=d===n?Se:d>>>0,d?(a=tt(a),a&&(typeof f=="string"||f!=null&&!n1(f))&&(f=Gr(f),!f&&Vu(a))?tl(Ki(a),0,d):a.split(f,d)):[]}var F6=Zu(function(a,f,d){return a+(d?" ":"")+o1(f)});function z6(a,f,d){return a=tt(a),d=d==null?0:Ra(Re(d),0,a.length),f=Gr(f),a.slice(d,d+f.length)==f}function $6(a,f,d){var m=E.templateSettings;d&&fr(a,f,d)&&(f=n),a=tt(a),f=vg({},f,m,f2);var _=vg({},f.imports,m.imports,f2),C=pn(_),L=my(_,C),P,H,Q=0,X=f.interpolate||Nu,ne="__p += '",le=yy((f.escape||Nu).source+"|"+X.source+"|"+(X===Sc?mp:Nu).source+"|"+(f.evaluate||Nu).source+"|$","g"),he="//# sourceURL="+(st.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ly+"]")+`
`;a.replace(le,function(be,Fe,qe,Yr,cr,Qr){return qe||(qe=Yr),ne+=a.slice(Q,Qr).replace(Xv,gB),Fe&&(P=!0,ne+=`' +
__e(`+Fe+`) +
'`),cr&&(H=!0,ne+=`';
`+cr+`;
__p += '`),qe&&(ne+=`' +
((__t = (`+qe+`)) == null ? '' : __t) +
'`),Q=Qr+be.length,be}),ne+=`';
`;var xe=st.call(f,"variable")&&f.variable;if(!xe)ne=`with (obj) {
`+ne+`
}
`;else if(Cc.test(xe))throw new Te(l);ne=(H?ne.replace(Jv,""):ne).replace(qs,"$1").replace(up,"$1;"),ne="function("+(xe||"obj")+`) {
`+(xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(H?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var Ne=nE(function(){return Xe(C,he+"return "+ne).apply(n,L)});if(Ne.source=ne,t1(Ne))throw Ne;return Ne}function H6(a){return tt(a).toLowerCase()}function V6(a){return tt(a).toUpperCase()}function U6(a,f,d){if(a=tt(a),a&&(d||f===n))return ck(a);if(!a||!(f=Gr(f)))return a;var m=Ki(a),_=Ki(f),C=hk(m,_),L=dk(m,_)+1;return tl(m,C,L).join("")}function W6(a,f,d){if(a=tt(a),a&&(d||f===n))return a.slice(0,gk(a)+1);if(!a||!(f=Gr(f)))return a;var m=Ki(a),_=dk(m,Ki(f))+1;return tl(m,0,_).join("")}function j6(a,f,d){if(a=tt(a),a&&(d||f===n))return a.replace(ba,"");if(!a||!(f=Gr(f)))return a;var m=Ki(a),_=hk(m,Ki(f));return tl(m,_).join("")}function q6(a,f){var d=W,m=oe;if(Mt(f)){var _="separator"in f?f.separator:_;d="length"in f?Re(f.length):d,m="omission"in f?Gr(f.omission):m}a=tt(a);var C=a.length;if(Vu(a)){var L=Ki(a);C=L.length}if(d>=C)return a;var P=d-Uu(m);if(P<1)return m;var H=L?tl(L,0,P).join(""):a.slice(0,P);if(_===n)return H+m;if(L&&(P+=H.length-P),n1(_)){if(a.slice(P).search(_)){var Q,X=H;for(_.global||(_=yy(_.source,tt(Ac.exec(_))+"g")),_.lastIndex=0;Q=_.exec(X);)var ne=Q.index;H=H.slice(0,ne===n?P:ne)}}else if(a.indexOf(Gr(_),P)!=P){var le=H.lastIndexOf(_);le>-1&&(H=H.slice(0,le))}return H+m}function J6(a){return a=tt(a),a&&fp.test(a)?a.replace(Ru,bB):a}var K6=Zu(function(a,f,d){return a+(d?" ":"")+f.toUpperCase()}),o1=r2("toUpperCase");function tE(a,f,d){return a=tt(a),f=d?n:f,f===n?vB(a)?EB(a):aB(a):a.match(f)||[]}var nE=De(function(a,f){try{return dn(a,n,f)}catch(d){return t1(d)?d:new Te(d)}}),G6=gs(function(a,f){return xi(f,function(d){d=Eo(d),ds(a,d,Xy(a[d],a))}),a});function Z6(a){var f=a==null?0:a.length,d=we();return a=f?kt(a,function(m){if(typeof m[1]!="function")throw new bi(s);return[d(m[0]),m[1]]}):[],De(function(m){for(var _=-1;++_<f;){var C=a[_];if(dn(C[0],this,m))return dn(C[1],this,m)}})}function Y6(a){return bI(ki(a,p))}function s1(a){return function(){return a}}function Q6(a,f){return a==null||a!==a?f:a}var X6=o2(),e5=o2(!0);function Mr(a){return a}function l1(a){return Pk(typeof a=="function"?a:ki(a,p))}function t5(a){return Ik(ki(a,p))}function n5(a,f){return Fk(a,ki(f,p))}var r5=De(function(a,f){return function(d){return Zc(d,a,f)}}),i5=De(function(a,f){return function(d){return Zc(a,d,f)}});function a1(a,f,d){var m=pn(f),_=Qp(f,m);d==null&&!(Mt(f)&&(_.length||!m.length))&&(d=f,f=a,a=this,_=Qp(f,pn(f)));var C=!(Mt(d)&&"chain"in d)||!!d.chain,L=vs(a);return xi(_,function(P){var H=f[P];a[P]=H,L&&(a.prototype[P]=function(){var Q=this.__chain__;if(C||Q){var X=a(this.__wrapped__),ne=X.__actions__=Tr(this.__actions__);return ne.push({func:H,args:arguments,thisArg:a}),X.__chain__=Q,X}return H.apply(a,Gs([this.value()],arguments))})}),a}function o5(){return M._===this&&(M._=MB),this}function u1(){}function s5(a){return a=Re(a),De(function(f){return zk(f,a)})}var l5=$y(kt),a5=$y(sk),u5=$y(cy);function rE(a){return Jy(a)?hy(Eo(a)):zI(a)}function f5(a){return function(f){return a==null?n:Ma(a,f)}}var c5=l2(),h5=l2(!0);function f1(){return[]}function c1(){return!1}function d5(){return{}}function p5(){return""}function g5(){return!0}function m5(a,f){if(a=Re(a),a<1||a>F)return[];var d=Se,m=Un(a,Se);f=we(f),a-=Se;for(var _=gy(m,f);++d<a;)f(d);return _}function v5(a){return Oe(a)?kt(a,Eo):Zr(a)?[a]:Tr(S2(tt(a)))}function y5(a){var f=++OB;return tt(a)+f}var w5=ig(function(a,f){return a+f},0),_5=Hy("ceil"),x5=ig(function(a,f){return a/f},1),b5=Hy("floor");function S5(a){return a&&a.length?Yp(a,Mr,Cy):n}function k5(a,f){return a&&a.length?Yp(a,we(f,2),Cy):n}function E5(a){return uk(a,Mr)}function C5(a,f){return uk(a,we(f,2))}function A5(a){return a&&a.length?Yp(a,Mr,Ry):n}function T5(a,f){return a&&a.length?Yp(a,we(f,2),Ry):n}var O5=ig(function(a,f){return a*f},1),R5=Hy("round"),M5=ig(function(a,f){return a-f},0);function L5(a){return a&&a.length?py(a,Mr):0}function N5(a,f){return a&&a.length?py(a,we(f,2)):0}return E.after=t8,E.ary=D2,E.assign=V8,E.assignIn=K2,E.assignInWith=vg,E.assignWith=U8,E.at=W8,E.before=P2,E.bind=Xy,E.bindAll=G6,E.bindKey=B2,E.castArray=d8,E.chain=M2,E.chunk=bF,E.compact=SF,E.concat=kF,E.cond=Z6,E.conforms=Y6,E.constant=s1,E.countBy=L4,E.create=j8,E.curry=I2,E.curryRight=F2,E.debounce=z2,E.defaults=q8,E.defaultsDeep=J8,E.defer=n8,E.delay=r8,E.difference=EF,E.differenceBy=CF,E.differenceWith=AF,E.drop=TF,E.dropRight=OF,E.dropRightWhile=RF,E.dropWhile=MF,E.fill=LF,E.filter=D4,E.flatMap=I4,E.flatMapDeep=F4,E.flatMapDepth=z4,E.flatten=A2,E.flattenDeep=NF,E.flattenDepth=DF,E.flip=i8,E.flow=X6,E.flowRight=e5,E.fromPairs=PF,E.functions=e6,E.functionsIn=t6,E.groupBy=$4,E.initial=IF,E.intersection=FF,E.intersectionBy=zF,E.intersectionWith=$F,E.invert=r6,E.invertBy=i6,E.invokeMap=V4,E.iteratee=l1,E.keyBy=U4,E.keys=pn,E.keysIn=Rr,E.map=cg,E.mapKeys=s6,E.mapValues=l6,E.matches=t5,E.matchesProperty=n5,E.memoize=dg,E.merge=a6,E.mergeWith=G2,E.method=r5,E.methodOf=i5,E.mixin=a1,E.negate=pg,E.nthArg=s5,E.omit=u6,E.omitBy=f6,E.once=o8,E.orderBy=W4,E.over=l5,E.overArgs=s8,E.overEvery=a5,E.overSome=u5,E.partial=e1,E.partialRight=$2,E.partition=j4,E.pick=c6,E.pickBy=Z2,E.property=rE,E.propertyOf=f5,E.pull=WF,E.pullAll=O2,E.pullAllBy=jF,E.pullAllWith=qF,E.pullAt=JF,E.range=c5,E.rangeRight=h5,E.rearg=l8,E.reject=K4,E.remove=KF,E.rest=a8,E.reverse=Yy,E.sampleSize=Z4,E.set=d6,E.setWith=p6,E.shuffle=Y4,E.slice=GF,E.sortBy=e8,E.sortedUniq=n4,E.sortedUniqBy=r4,E.split=I6,E.spread=u8,E.tail=i4,E.take=o4,E.takeRight=s4,E.takeRightWhile=l4,E.takeWhile=a4,E.tap=S4,E.throttle=f8,E.thru=fg,E.toArray=j2,E.toPairs=Y2,E.toPairsIn=Q2,E.toPath=v5,E.toPlainObject=J2,E.transform=g6,E.unary=c8,E.union=u4,E.unionBy=f4,E.unionWith=c4,E.uniq=h4,E.uniqBy=d4,E.uniqWith=p4,E.unset=m6,E.unzip=Qy,E.unzipWith=R2,E.update=v6,E.updateWith=y6,E.values=Xu,E.valuesIn=w6,E.without=g4,E.words=tE,E.wrap=h8,E.xor=m4,E.xorBy=v4,E.xorWith=y4,E.zip=w4,E.zipObject=_4,E.zipObjectDeep=x4,E.zipWith=b4,E.entries=Y2,E.entriesIn=Q2,E.extend=K2,E.extendWith=vg,a1(E,E),E.add=w5,E.attempt=nE,E.camelCase=S6,E.capitalize=X2,E.ceil=_5,E.clamp=_6,E.clone=p8,E.cloneDeep=m8,E.cloneDeepWith=v8,E.cloneWith=g8,E.conformsTo=y8,E.deburr=eE,E.defaultTo=Q6,E.divide=x5,E.endsWith=k6,E.eq=Zi,E.escape=E6,E.escapeRegExp=C6,E.every=N4,E.find=P4,E.findIndex=E2,E.findKey=K8,E.findLast=B4,E.findLastIndex=C2,E.findLastKey=G8,E.floor=b5,E.forEach=L2,E.forEachRight=N2,E.forIn=Z8,E.forInRight=Y8,E.forOwn=Q8,E.forOwnRight=X8,E.get=r1,E.gt=w8,E.gte=_8,E.has=n6,E.hasIn=i1,E.head=T2,E.identity=Mr,E.includes=H4,E.indexOf=BF,E.inRange=x6,E.invoke=o6,E.isArguments=Da,E.isArray=Oe,E.isArrayBuffer=x8,E.isArrayLike=Or,E.isArrayLikeObject=jt,E.isBoolean=b8,E.isBuffer=nl,E.isDate=S8,E.isElement=k8,E.isEmpty=E8,E.isEqual=C8,E.isEqualWith=A8,E.isError=t1,E.isFinite=T8,E.isFunction=vs,E.isInteger=H2,E.isLength=gg,E.isMap=V2,E.isMatch=O8,E.isMatchWith=R8,E.isNaN=M8,E.isNative=L8,E.isNil=D8,E.isNull=N8,E.isNumber=U2,E.isObject=Mt,E.isObjectLike=$t,E.isPlainObject=nh,E.isRegExp=n1,E.isSafeInteger=P8,E.isSet=W2,E.isString=mg,E.isSymbol=Zr,E.isTypedArray=Qu,E.isUndefined=B8,E.isWeakMap=I8,E.isWeakSet=F8,E.join=HF,E.kebabCase=A6,E.last=Ci,E.lastIndexOf=VF,E.lowerCase=T6,E.lowerFirst=O6,E.lt=z8,E.lte=$8,E.max=S5,E.maxBy=k5,E.mean=E5,E.meanBy=C5,E.min=A5,E.minBy=T5,E.stubArray=f1,E.stubFalse=c1,E.stubObject=d5,E.stubString=p5,E.stubTrue=g5,E.multiply=O5,E.nth=UF,E.noConflict=o5,E.noop=u1,E.now=hg,E.pad=R6,E.padEnd=M6,E.padStart=L6,E.parseInt=N6,E.random=b6,E.reduce=q4,E.reduceRight=J4,E.repeat=D6,E.replace=P6,E.result=h6,E.round=R5,E.runInContext=z,E.sample=G4,E.size=Q4,E.snakeCase=B6,E.some=X4,E.sortedIndex=ZF,E.sortedIndexBy=YF,E.sortedIndexOf=QF,E.sortedLastIndex=XF,E.sortedLastIndexBy=e4,E.sortedLastIndexOf=t4,E.startCase=F6,E.startsWith=z6,E.subtract=M5,E.sum=L5,E.sumBy=N5,E.template=$6,E.times=m5,E.toFinite=ys,E.toInteger=Re,E.toLength=q2,E.toLower=H6,E.toNumber=Ai,E.toSafeInteger=H8,E.toString=tt,E.toUpper=V6,E.trim=U6,E.trimEnd=W6,E.trimStart=j6,E.truncate=q6,E.unescape=J6,E.uniqueId=y5,E.upperCase=K6,E.upperFirst=o1,E.each=L2,E.eachRight=N2,E.first=T2,a1(E,function(){var a={};return So(E,function(f,d){st.call(E.prototype,d)||(a[d]=f)}),a}(),{chain:!1}),E.VERSION=r,xi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){E[a].placeholder=E}),xi(["drop","take"],function(a,f){Ve.prototype[a]=function(d){d=d===n?1:rn(Re(d),0);var m=this.__filtered__&&!f?new Ve(this):this.clone();return m.__filtered__?m.__takeCount__=Un(d,m.__takeCount__):m.__views__.push({size:Un(d,Se),type:a+(m.__dir__<0?"Right":"")}),m},Ve.prototype[a+"Right"]=function(d){return this.reverse()[a](d).reverse()}}),xi(["filter","map","takeWhile"],function(a,f){var d=f+1,m=d==ze||d==Ce;Ve.prototype[a]=function(_){var C=this.clone();return C.__iteratees__.push({iteratee:we(_,3),type:d}),C.__filtered__=C.__filtered__||m,C}}),xi(["head","last"],function(a,f){var d="take"+(f?"Right":"");Ve.prototype[a]=function(){return this[d](1).value()[0]}}),xi(["initial","tail"],function(a,f){var d="drop"+(f?"":"Right");Ve.prototype[a]=function(){return this.__filtered__?new Ve(this):this[d](1)}}),Ve.prototype.compact=function(){return this.filter(Mr)},Ve.prototype.find=function(a){return this.filter(a).head()},Ve.prototype.findLast=function(a){return this.reverse().find(a)},Ve.prototype.invokeMap=De(function(a,f){return typeof a=="function"?new Ve(this):this.map(function(d){return Zc(d,a,f)})}),Ve.prototype.reject=function(a){return this.filter(pg(we(a)))},Ve.prototype.slice=function(a,f){a=Re(a);var d=this;return d.__filtered__&&(a>0||f<0)?new Ve(d):(a<0?d=d.takeRight(-a):a&&(d=d.drop(a)),f!==n&&(f=Re(f),d=f<0?d.dropRight(-f):d.take(f-a)),d)},Ve.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ve.prototype.toArray=function(){return this.take(Se)},So(Ve.prototype,function(a,f){var d=/^(?:filter|find|map|reject)|While$/.test(f),m=/^(?:head|last)$/.test(f),_=E[m?"take"+(f=="last"?"Right":""):f],C=m||/^find/.test(f);!_||(E.prototype[f]=function(){var L=this.__wrapped__,P=m?[1]:arguments,H=L instanceof Ve,Q=P[0],X=H||Oe(L),ne=function(Fe){var qe=_.apply(E,Gs([Fe],P));return m&&le?qe[0]:qe};X&&d&&typeof Q=="function"&&Q.length!=1&&(H=X=!1);var le=this.__chain__,he=!!this.__actions__.length,xe=C&&!le,Ne=H&&!he;if(!C&&X){L=Ne?L:new Ve(this);var be=a.apply(L,P);return be.__actions__.push({func:fg,args:[ne],thisArg:n}),new Si(be,le)}return xe&&Ne?a.apply(this,P):(be=this.thru(ne),xe?m?be.value()[0]:be.value():be)})}),xi(["pop","push","shift","sort","splice","unshift"],function(a){var f=Bp[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",m=/^(?:pop|shift)$/.test(a);E.prototype[a]=function(){var _=arguments;if(m&&!this.__chain__){var C=this.value();return f.apply(Oe(C)?C:[],_)}return this[d](function(L){return f.apply(Oe(L)?L:[],_)})}}),So(Ve.prototype,function(a,f){var d=E[f];if(d){var m=d.name+"";st.call(Ju,m)||(Ju[m]=[]),Ju[m].push({name:f,func:d})}}),Ju[rg(n,x).name]=[{name:"wrapper",func:n}],Ve.prototype.clone=JB,Ve.prototype.reverse=KB,Ve.prototype.value=GB,E.prototype.at=k4,E.prototype.chain=E4,E.prototype.commit=C4,E.prototype.next=A4,E.prototype.plant=O4,E.prototype.reverse=R4,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=M4,E.prototype.first=E.prototype.head,Uc&&(E.prototype[Uc]=T4),E},Wu=CB();I?((I.exports=Wu)._=Wu,V._=Wu):M._=Wu}).call(Po)})(Cd,Cd.exports);var z0={exports:{}},mw,vT;function qJ(){if(vT)return mw;vT=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,o=r*365.25;mw=function(h,p){p=p||{};var g=typeof h;if(g==="string"&&h.length>0)return s(h);if(g==="number"&&isFinite(h))return p.long?u(h):l(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function s(h){if(h=String(h),!(h.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(!!p){var g=parseFloat(p[1]),v=(p[2]||"ms").toLowerCase();switch(v){case"years":case"year":case"yrs":case"yr":case"y":return g*o;case"weeks":case"week":case"w":return g*i;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*n;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function l(h){var p=Math.abs(h);return p>=r?Math.round(h/r)+"d":p>=n?Math.round(h/n)+"h":p>=e?Math.round(h/e)+"m":p>=t?Math.round(h/t)+"s":h+"ms"}function u(h){var p=Math.abs(h);return p>=r?c(h,p,r,"day"):p>=n?c(h,p,n,"hour"):p>=e?c(h,p,e,"minute"):p>=t?c(h,p,t,"second"):h+" ms"}function c(h,p,g,v){var y=p>=g*1.5;return Math.round(h/g)+" "+v+(y?"s":"")}return mw}function JJ(t){n.debug=n,n.default=n,n.coerce=u,n.disable=o,n.enable=i,n.enabled=s,n.humanize=qJ(),n.destroy=c,Object.keys(t).forEach(h=>{n[h]=t[h]}),n.names=[],n.skips=[],n.formatters={};function e(h){let p=0;for(let g=0;g<h.length;g++)p=(p<<5)-p+h.charCodeAt(g),p|=0;return n.colors[Math.abs(p)%n.colors.length]}n.selectColor=e;function n(h){let p,g=null,v,y;function A(...O){if(!A.enabled)return;const x=A,k=Number(new Date),b=k-(p||k);x.diff=b,x.prev=p,x.curr=k,p=k,O[0]=n.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let T=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(B,D)=>{if(B==="%%")return"%";T++;const $=n.formatters[D];if(typeof $=="function"){const G=O[T];B=$.call(x,G),O.splice(T,1),T--}return B}),n.formatArgs.call(x,O),(x.log||n.log).apply(x,O)}return A.namespace=h,A.useColors=n.useColors(),A.color=n.selectColor(h),A.extend=r,A.destroy=n.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(v!==n.namespaces&&(v=n.namespaces,y=n.enabled(h)),y),set:O=>{g=O}}),typeof n.init=="function"&&n.init(A),A}function r(h,p){const g=n(this.namespace+(typeof p>"u"?":":p)+h);return g.log=this.log,g}function i(h){n.save(h),n.namespaces=h,n.names=[],n.skips=[];let p;const g=(typeof h=="string"?h:"").split(/[\s,]+/),v=g.length;for(p=0;p<v;p++)!g[p]||(h=g[p].replace(/\*/g,".*?"),h[0]==="-"?n.skips.push(new RegExp("^"+h.slice(1)+"$")):n.names.push(new RegExp("^"+h+"$")))}function o(){const h=[...n.names.map(l),...n.skips.map(l).map(p=>"-"+p)].join(",");return n.enable(""),h}function s(h){if(h[h.length-1]==="*")return!0;let p,g;for(p=0,g=n.skips.length;p<g;p++)if(n.skips[p].test(h))return!1;for(p=0,g=n.names.length;p<g;p++)if(n.names[p].test(h))return!0;return!1}function l(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function u(h){return h instanceof Error?h.stack||h.message:h}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var KJ=JJ;(function(t,e){e.formatArgs=r,e.save=i,e.load=o,e.useColors=n,e.storage=s(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;u.splice(1,0,c,"color: inherit");let h=0,p=0;u[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(h++,g==="%c"&&(p=h))}),u.splice(p,0,c)}e.log=console.debug||console.log||(()=>{});function i(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function o(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof ct<"u"&&"env"in ct&&(u=ct.env.DEBUG),u}function s(){try{return localStorage}catch{}}t.exports=KJ(e);const{formatters:l}=t.exports;l.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(z0,z0.exports);var nD={exports:{}},rD={exports:{}};function GJ(t){if(t!=="md5")throw new Error("only md5 is supported in the browser");return new AS}function AS(){this.data=void 0}AS.prototype.end=function(t){this.data=t};AS.prototype.read=function(){return QJ(this.data)};function vw(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=Jn(n,r,i,o,e[0],7,-680876936),o=Jn(o,n,r,i,e[1],12,-389564586),i=Jn(i,o,n,r,e[2],17,606105819),r=Jn(r,i,o,n,e[3],22,-1044525330),n=Jn(n,r,i,o,e[4],7,-176418897),o=Jn(o,n,r,i,e[5],12,1200080426),i=Jn(i,o,n,r,e[6],17,-1473231341),r=Jn(r,i,o,n,e[7],22,-45705983),n=Jn(n,r,i,o,e[8],7,1770035416),o=Jn(o,n,r,i,e[9],12,-1958414417),i=Jn(i,o,n,r,e[10],17,-42063),r=Jn(r,i,o,n,e[11],22,-1990404162),n=Jn(n,r,i,o,e[12],7,1804603682),o=Jn(o,n,r,i,e[13],12,-40341101),i=Jn(i,o,n,r,e[14],17,-1502002290),r=Jn(r,i,o,n,e[15],22,1236535329),n=Kn(n,r,i,o,e[1],5,-165796510),o=Kn(o,n,r,i,e[6],9,-1069501632),i=Kn(i,o,n,r,e[11],14,643717713),r=Kn(r,i,o,n,e[0],20,-373897302),n=Kn(n,r,i,o,e[5],5,-701558691),o=Kn(o,n,r,i,e[10],9,38016083),i=Kn(i,o,n,r,e[15],14,-660478335),r=Kn(r,i,o,n,e[4],20,-405537848),n=Kn(n,r,i,o,e[9],5,568446438),o=Kn(o,n,r,i,e[14],9,-1019803690),i=Kn(i,o,n,r,e[3],14,-187363961),r=Kn(r,i,o,n,e[8],20,1163531501),n=Kn(n,r,i,o,e[13],5,-1444681467),o=Kn(o,n,r,i,e[2],9,-51403784),i=Kn(i,o,n,r,e[7],14,1735328473),r=Kn(r,i,o,n,e[12],20,-1926607734),n=Gn(n,r,i,o,e[5],4,-378558),o=Gn(o,n,r,i,e[8],11,-2022574463),i=Gn(i,o,n,r,e[11],16,1839030562),r=Gn(r,i,o,n,e[14],23,-35309556),n=Gn(n,r,i,o,e[1],4,-1530992060),o=Gn(o,n,r,i,e[4],11,1272893353),i=Gn(i,o,n,r,e[7],16,-155497632),r=Gn(r,i,o,n,e[10],23,-1094730640),n=Gn(n,r,i,o,e[13],4,681279174),o=Gn(o,n,r,i,e[0],11,-358537222),i=Gn(i,o,n,r,e[3],16,-722521979),r=Gn(r,i,o,n,e[6],23,76029189),n=Gn(n,r,i,o,e[9],4,-640364487),o=Gn(o,n,r,i,e[12],11,-421815835),i=Gn(i,o,n,r,e[15],16,530742520),r=Gn(r,i,o,n,e[2],23,-995338651),n=Zn(n,r,i,o,e[0],6,-198630844),o=Zn(o,n,r,i,e[7],10,1126891415),i=Zn(i,o,n,r,e[14],15,-1416354905),r=Zn(r,i,o,n,e[5],21,-57434055),n=Zn(n,r,i,o,e[12],6,1700485571),o=Zn(o,n,r,i,e[3],10,-1894986606),i=Zn(i,o,n,r,e[10],15,-1051523),r=Zn(r,i,o,n,e[1],21,-2054922799),n=Zn(n,r,i,o,e[8],6,1873313359),o=Zn(o,n,r,i,e[15],10,-30611744),i=Zn(i,o,n,r,e[6],15,-1560198380),r=Zn(r,i,o,n,e[13],21,1309151649),n=Zn(n,r,i,o,e[4],6,-145523070),o=Zn(o,n,r,i,e[11],10,-1120210379),i=Zn(i,o,n,r,e[2],15,718787259),r=Zn(r,i,o,n,e[9],21,-343485551),t[0]=bl(n,t[0]),t[1]=bl(r,t[1]),t[2]=bl(i,t[2]),t[3]=bl(o,t[3])}function Dv(t,e,n,r,i,o){return e=bl(bl(e,t),bl(r,o)),bl(e<<i|e>>>32-i,n)}function Jn(t,e,n,r,i,o,s){return Dv(e&n|~e&r,t,e,i,o,s)}function Kn(t,e,n,r,i,o,s){return Dv(e&r|n&~r,t,e,i,o,s)}function Gn(t,e,n,r,i,o,s){return Dv(e^n^r,t,e,i,o,s)}function Zn(t,e,n,r,i,o,s){return Dv(n^(e|~r),t,e,i,o,s)}function ZJ(t){var e=t.length,n=[1732584193,-271733879,-1732584194,271733878],r;for(r=64;r<=t.length;r+=64)vw(n,YJ(t.substring(r-64,r)));t=t.substring(r-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)i[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(i[r>>2]|=128<<(r%4<<3),r>55)for(vw(n,i),r=0;r<16;r++)i[r]=0;return i[14]=e*8,vw(n,i),n}function YJ(t){var e=[],n;for(n=0;n<64;n+=4)e[n>>2]=t.charCodeAt(n)+(t.charCodeAt(n+1)<<8)+(t.charCodeAt(n+2)<<16)+(t.charCodeAt(n+3)<<24);return e}function QJ(t){var e=ZJ(t),n=U.alloc?U.alloc(16):new U(16),r;for(r=0;r<4;r++)n.writeIntLE(e[r],r*4,4);return n}function bl(t,e){return t+e&4294967295}var XJ={createHash:GJ},eK=XJ,iD=oa,tK=new TS(4096),nK=/^[A-Za-z_][A-Za-z0-9_]*$/,rK=iD.format;function Ad(t){return typeof U.alloc=="function"?U.alloc(t):new U(t)}function oD(t,e){return typeof U.from=="function"?U.from(t,e):new U(t,e)}function sD(t){return t.charAt(0).toUpperCase()+t.slice(1)}function iK(t,e){return t===e?0:t<e?-1:1}function oK(t,e,n){var r=t[e];return r===void 0?n:r}function sK(t,e){e=e||"md5";var n=eK.createHash(e);return n.end(t),n.read()}function lK(t,e){var n=-1,r,i;if(!t)return-1;for(r=0,i=t.length;r<i;r++)if(t[r]===e){if(n>=0)return-2;n=r}return n}function aK(t,e){var n={},r,i;for(r=0;r<t.length;r++)i=t[r],n[e(i)]=i;return n}function uK(t){return Object.keys(t).map(function(e){return t[e]})}function fK(t,e){var n=Object.create(null),r,i,o;for(r=0,i=t.length;r<i;r++){if(o=t[r],e&&(o=e(o)),n[o])return!0;n[o]=!0}return!1}function cK(t,e,n){var r=Object.getOwnPropertyNames(t),i,o,s;for(i=0,o=r.length;i<o;i++)if(s=r[i],!e.hasOwnProperty(s)||n){var l=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,l)}return e}function lD(t){return nK.test(t)}function hK(t,e){return~t.indexOf(".")?t=t.replace(/^\./,""):e&&(t=e+"."+t),t.split(".").forEach(function(n){if(!lD(n))throw new Error(rK("invalid name: %j",t))}),t}function dK(t){var e=t.split(".");return e[e.length-1]}function pK(t){var e=/^(.*)\.[^.]+$/.exec(t);return e?e[1]:void 0}function gK(t,e){e=e|0;var n=t.charAt(e++);if(/[\d-]/.test(n)){for(;/[eE\d.+-]/.test(t.charAt(e));)e++;return e}else{if(/true|null/.test(t.slice(e-1,e+3)))return e+3;if(/false/.test(t.slice(e-1,e+4)))return e+4}var r=0,i=!1;do switch(n){case"{":case"[":i||r++;break;case"}":case"]":if(!i&&!--r)return e;break;case'"':if(i=!i,!r&&!i)return e;break;case"\\":e++}while(n=t.charAt(e++));return-1}function mK(){throw new Error("abstract")}function vK(t,e){var n=t.prototype,r,i,o,s;for(r=0,i=e.length;r<i;r++)o=e[r],s="get"+sD(o),n[s]=iD.deprecate(l(o),"use `."+o+"` instead of `."+s+"()`");function l(u){return function(){var c=this[u];return typeof c=="function"?c.apply(this,arguments):c}}}function TS(t){this._len=t|0,this._pos=0,this._slab=Ad(this._len)}TS.prototype.alloc=function(t){if(t<0)throw new Error("negative length");var e=this._len;return t>e?Ad(t):(this._pos+t>e&&(this._slab=Ad(e),this._pos=0),this._slab.slice(this._pos,this._pos+=t))};function xu(t){var e=1103515245,n=12345,r=Math.pow(2,31),i=Math.floor(t||Math.random()*(r-1));this._max=r,this._nextInt=function(){return i=(e*i+n)%r}}xu.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};xu.prototype.nextInt=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?this._max:e,t+Math.floor(this.nextFloat()*(e-t))};xu.prototype.nextFloat=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?1:e,t+(e-t)*this._nextInt()/this._max};xu.prototype.nextString=function(t,e){t|=0,e=e||"aA";var n="";e.indexOf("a")>-1&&(n+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(n+="0123456789"),e.indexOf("!")>-1&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var r=[],i=0;i<t;i++)r.push(this.choice(n));return r.join("")};xu.prototype.nextBuffer=function(t){var e=[],n;for(n=0;n<t;n++)e.push(this.nextInt(256));return oD(e)};xu.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]};function OS(){this._index=0,this._items=[]}OS.prototype.push=function(t){var e=this._items,n=e.length|0,r;for(e.push(t);n>0&&e[n].index<e[r=n-1>>1].index;)t=e[n],e[n]=e[r],e[r]=t,n=r};OS.prototype.pop=function(){var t=this._items,e=t.length-1|0,n=t[0];if(!n||n.index>this._index)return null;if(this._index++,!e)return t.pop(),n;t[0]=t.pop();for(var r=e>>1,i=0,o,s,l,u,c,h,p;i<r&&(u=t[i],o=(i<<1)+1,s=i+1<<1,h=t[o],p=t[s],!p||h.index<=p.index?(c=h,l=o):(c=p,l=s),!(c.index>=u.index));)t[l]=u,t[i]=c,i=l;return n};function Le(t,e){if(this.buf=t,this.pos=e|0,this.pos<0)throw new Error("negative offset")}Le.prototype.isValid=function(){return this.pos<=this.buf.length};Le.prototype._invalidate=function(){this.pos=this.buf.length+1};Le.prototype.readBoolean=function(){return!!this.buf[this.pos++]};Le.prototype.skipBoolean=function(){this.pos++};Le.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t};Le.prototype.readInt=Le.prototype.readLong=function(){var t=0,e=0,n=this.buf,r,i,o,s;do r=n[this.pos++],i=r&128,t|=(r&127)<<e,e+=7;while(i&&e<28);if(i){o=t,s=268435456;do r=n[this.pos++],o+=(r&127)*s,s*=128;while(r&128);return(o%2?-(o+1):o)/2}return t>>1^-(t&1)};Le.prototype.skipInt=Le.prototype.skipLong=function(){for(var t=this.buf;t[this.pos++]&128;);};Le.prototype.writeInt=Le.prototype.writeLong=function(t){var e=this.buf,n,r;if(t>=-1073741824&&t<1073741824){r=t>=0?t<<1:~t<<1|1;do e[this.pos]=r&127,r>>=7;while(r&&(e[this.pos++]|=128))}else{n=t>=0?t*2:-t*2-1;do e[this.pos]=n&127,n/=128;while(n>=1&&(e[this.pos++]|=128))}this.pos++};Le.prototype.readFloat=function(){var t=this.buf,e=this.pos;return this.pos+=4,this.pos>t.length?0:this.buf.readFloatLE(e)};Le.prototype.skipFloat=function(){this.pos+=4};Le.prototype.writeFloat=function(t){var e=this.buf,n=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,n)};Le.prototype.readDouble=function(){var t=this.buf,e=this.pos;return this.pos+=8,this.pos>t.length?0:this.buf.readDoubleLE(e)};Le.prototype.skipDouble=function(){this.pos+=8};Le.prototype.writeDouble=function(t){var e=this.buf,n=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,n)};Le.prototype.readFixed=function(t){var e=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var n=tK.alloc(t);return this.buf.copy(n,0,e,e+t),n}};Le.prototype.skipFixed=function(t){this.pos+=t};Le.prototype.writeFixed=function(t,e){e=e||t.length;var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&t.copy(this.buf,n,0,e)};Le.prototype.readBytes=function(){var t=this.readLong();if(t<0){this._invalidate();return}return this.readFixed(t)};Le.prototype.skipBytes=function(){var t=this.readLong();if(t<0){this._invalidate();return}this.pos+=t};Le.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)};typeof U.prototype.utf8Slice=="function"?Le.prototype.readString=function(){var t=this.readLong();if(t<0)return this._invalidate(),"";var e=this.pos,n=this.buf;if(this.pos+=t,!(this.pos>n.length))return this.buf.utf8Slice(e,e+t)}:Le.prototype.readString=function(){var t=this.readLong();if(t<0)return this._invalidate(),"";var e=this.pos,n=this.buf;if(this.pos+=t,!(this.pos>n.length))return this.buf.slice(e,e+t).toString()};Le.prototype.skipString=function(){var t=this.readLong();if(t<0){this._invalidate();return}this.pos+=t};Le.prototype.writeString=function(t){var e=U.byteLength(t),n=this.buf;this.writeLong(e);var r=this.pos;if(this.pos+=e,!(this.pos>n.length))if(e>64&&typeof U.prototype.utf8Write=="function")n.utf8Write(t,r,e);else{var i,o,s,l;for(i=0,o=e;i<o;i++)s=t.charCodeAt(i),s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=s&63|128):(s&64512)===55296&&((l=t.charCodeAt(i+1))&64512)===56320?(s=65536+((s&1023)<<10)+(l&1023),i++,n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=s&63|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=s&63|128)}};typeof U.prototype.latin1Write=="function"?Le.prototype.writeBinary=function(t,e){var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.latin1Write(t,n,e)}:typeof U.prototype.binaryWrite=="function"?Le.prototype.writeBinary=function(t,e){var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.binaryWrite(t,n,e)}:Le.prototype.writeBinary=function(t,e){var n=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,n,e,"binary")};Le.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]};Le.prototype.matchInt=Le.prototype.matchLong=function(t){var e=this.readLong(),n=t.readLong();return e===n?0:e<n?-1:1};Le.prototype.matchFloat=function(t){var e=this.readFloat(),n=t.readFloat();return e===n?0:e<n?-1:1};Le.prototype.matchDouble=function(t){var e=this.readDouble(),n=t.readDouble();return e===n?0:e<n?-1:1};Le.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))};Le.prototype.matchBytes=Le.prototype.matchString=function(t){var e=this.readLong(),n=this.pos;this.pos+=e;var r=t.readLong(),i=t.pos;t.pos+=r;var o=this.buf.slice(n,this.pos),s=t.buf.slice(i,t.pos);return o.compare(s)};Le.prototype.unpackLongBytes=function(){var t=Ad(8),e=0,n=0,r=6,i=this.buf,o,s;for(o=i[this.pos++],s=o&1,t.fill(0),e|=(o&127)>>1;o&128;)o=i[this.pos++],e|=(o&127)<<r,r+=7,r>=8&&(r-=8,t[n++]=e,e>>=8);return t[n]=e,s&&Ax(t,8),t};Le.prototype.packLongBytes=function(t){var e=(t[7]&128)>>7,n=this.buf,r=1,i=0,o=3,s;e?(Ax(t,8),s=1):s=0;for(var l=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];o&&!l[--o];);for(;i<o;)for(s|=l[i++]<<r,r+=24;r>7;)n[this.pos++]=s&127|128,s>>=7,r-=7;s|=l[o]<<r;do n[this.pos]=s&127,s>>=7;while(s&&(n[this.pos++]|=128));this.pos++,e&&Ax(t,8)};function Ax(t,e){for(;e--;)t[e]=~t[e]}var cc={abstractFunction:mK,addDeprecatedGetters:vK,bufferFrom:oD,capitalize:sD,copyOwnProperties:cK,getHash:sK,compare:iK,getOption:oK,impliedNamespace:pK,isValidName:lD,jsonEnd:gK,newBuffer:Ad,objectValues:uK,qualify:hK,toMap:aK,singleIndexOf:lK,hasDuplicates:fK,unqualify:dK,BufferPool:TS,Lcg:xu,OrderedQueue:OS,Tap:Le},Ee=cc,aD=Hb,Wt=oa,fu=Ee.Tap,Tx=Wt.debuglog("avsc:types"),Be=Wt.format,$0={array:Jr,boolean:Ws,bytes:mi,double:rs,enum:jr,error:Vt,fixed:qr,float:ns,int:js,long:gi,map:xr,null:Ui,record:Vt,string:mo},Nn=new Ee.Lcg,Fa=new fu(new aD.SlowBuffer(1024)),ro=null,Pf=[];function ee(t,e){var n;if(ro?(n=ro,Pf.push([ro,this]),ro=null):n=this,this._hash=new yK,this.name=void 0,this.aliases=void 0,this.doc=t&&t.doc?""+t.doc:void 0,t){var r=t.name,i=t.namespace===void 0?e&&e.namespace:t.namespace;if(r!==void 0){if(r=Rx(r,i),hc(r))throw new Error(Be("cannot rename primitive type: %j",r));var o=e&&e.registry;if(o){if(o[r]!==void 0)throw new Error(Be("duplicate type name: %s",r));o[r]=n}}else if(e&&e.noAnonymousTypes)throw new Error(Be("missing name property in schema: %j",t));this.name=r,this.aliases=t.aliases?t.aliases.map(function(s){return Rx(s,i)}):[]}}ee.forSchema=function(t,e){e=e||{},e.registry=e.registry||{};var n=function(c){switch(c===!0?c="always":c===!1?c="never":c===void 0?c="auto":typeof c=="string"&&(c=c.toLowerCase()),c){case"always":return Wi;case"never":return Ur;case"auto":return;default:throw new Error(Be("invalid wrap unions option: %j",c))}}(e.wrapUnions);if(t===null)throw new Error('invalid type: null (did you mean "null"?)');if(ee.isType(t))return t;var r;if(e.typeHook&&(r=e.typeHook(t,e))){if(!ee.isType(r))throw new Error(Be("invalid typehook return value: %j",r));return r}if(typeof t=="string"){if(t=Rx(t,e.namespace),r=e.registry[t],r)return r;if(hc(t))return e.registry[t]=ee.forSchema({type:t},e);throw new Error(Be("undefined type name: %s",t))}if(t.logicalType&&e.logicalTypes&&!ro){var i=e.logicalTypes[t.logicalType];if(i){var o=e.namespace,s={};Object.keys(e.registry).forEach(function(c){s[c]=e.registry[c]});try{return Tx("instantiating logical type for %s",t.logicalType),new i(t,e)}catch(c){if(Tx("failed to instantiate logical type for %s",t.logicalType),e.assertLogicalTypes)throw c;ro=null,e.namespace=o,e.registry=s}}}if(Array.isArray(t)){var l=ro;ro=null;var u=t.map(function(c){return ee.forSchema(c,e)});n||(n=wK(u)?Wi:Ur),ro=l,r=new n(u,e)}else r=function(c){var h=$0[c];if(h===void 0)throw new Error(Be("unknown type: %j",c));return new h(t,e)}(t.type);return r};ee.forValue=function(t,e){if(e=e||{},e.emptyArrayType=e.emptyArrayType||ee.forSchema({type:"array",items:"null"}),e.valueHook){var n=e.valueHook(t,e);if(n!==void 0){if(!ee.isType(n))throw new Error(Be("invalid value hook return value: %j",n));return n}}switch(typeof t){case"string":return ee.forSchema("string",e);case"boolean":return ee.forSchema("boolean",e);case"number":return(t|0)===t?ee.forSchema("int",e):Math.abs(t)<9007199254740991?ee.forSchema("float",e):ee.forSchema("double",e);case"object":if(t===null)return ee.forSchema("null",e);if(Array.isArray(t))return t.length?ee.forSchema({type:"array",items:ee.forTypes(t.map(function(i){return ee.forValue(i,e)}),e)},e):e.emptyArrayType;if(U.isBuffer(t))return ee.forSchema("bytes",e);var r=Object.keys(t);return r.some(function(i){return!Ee.isValidName(i)})?ee.forSchema({type:"map",values:ee.forTypes(r.map(function(i){return ee.forValue(t[i],e)}),e)},e):ee.forSchema({type:"record",fields:r.map(function(i){return{name:i,type:ee.forValue(t[i],e)}})},e);default:throw new Error(Be("cannot infer type from: %j",t))}};ee.forTypes=function(t,e){if(!t.length)throw new Error("no types to combine");if(t.length===1)return t[0];e=e||{};var n=[],r=0,i=!0;if(t.forEach(function(p){switch(p.typeName){case"union:unwrapped":i=!1,n=n.concat(p.types);break;case"union:wrapped":r++,n=n.concat(p.types);break;case"null":n.push(p);break;default:i=!1,n.push(p)}}),r){if(!i)throw new Error("cannot combine wrapped union");var o={};n.forEach(function(p){var g=p.branchName,v=o[g];if(!v)o[g]=p;else if(!p.equals(v))throw new Error("inconsistent branch type")});var s=e.wrapUnions,l;e.wrapUnions=!0;try{l=ee.forSchema(Object.keys(o).map(function(p){return o[p]}),e)}catch(p){throw e.wrapUnions=s,p}return e.wrapUnions=s,l}var u={};n.forEach(function(p){var g=Pv(p),v=u[g];v||(u[g]=v=[]),v.push(p)});var c=Object.keys(u),h=c.map(function(p){var g=u[p];if(g.length===1)return g[0];switch(p){case"null":case"boolean":return g[0];case"number":return _K(g);case"string":return xK(g,e);case"buffer":return bK(g,e);case"array":return g=g.filter(function(v){return v!==e.emptyArrayType}),g.length?ee.forSchema({type:"array",items:ee.forTypes(g.map(function(v){return v.itemsType}),e)},e):e.emptyArrayType;default:return SK(g,e)}});return h.length===1?h[0]:ee.forSchema(h,e)};ee.isType=function(){var t=arguments.length;if(!t)return!1;var e=arguments[0];if(!e||typeof e._update!="function"||typeof e.fingerprint!="function")return!1;if(t===1)return!0;var n=e.typeName,r;for(r=1;r<t;r++)if(n.indexOf(arguments[r])===0)return!0;return!1};ee.__reset=function(t){Tx("resetting type buffer to %d",t),Fa.buf=new aD.SlowBuffer(t)};Object.defineProperty(ee.prototype,"branchName",{enumerable:!0,get:function(){var t=ee.isType(this,"logical")?this.underlyingType:this;return t.name?t.name:ee.isType(t,"abstract")?t._concreteTypeName:ee.isType(t,"union")?void 0:t.typeName}});ee.prototype.clone=function(t,e){return e?(e={coerce:!!e.coerceBuffers|0,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,skip:!!e.skipMissingFields,wrap:!!e.wrapUnions|0},this._copy(t,e)):this.fromBuffer(this.toBuffer(t))};ee.prototype.compare=Ee.abstractFunction;ee.prototype.compareBuffers=function(t,e){return this._match(new fu(t),new fu(e))};ee.prototype.createResolver=function(t,e){if(!ee.isType(t))throw new Error(Be("not a type: %j",t));if(!ee.isType(this,"union","logical")&&ee.isType(t,"logical"))return this.createResolver(t.underlyingType,e);e=e||{},e.registry=e.registry||{};var n,r;if(ee.isType(this,"record","error")&&ee.isType(t,"record","error")&&(r=this.name+":"+t.name,n=e.registry[r],n))return n;if(n=new RS(this),r&&(e.registry[r]=n),ee.isType(t,"union")){var i=t.types.map(function(o){return this.createResolver(o,e)},this);n._read=function(o){var s=o.readLong(),l=i[s];if(l===void 0)throw new Error(Be("invalid union index: %s",s));return i[s]._read(o)}}else this._update(n,t,e);if(!n._read)throw new Error(Be("cannot read %s as %s",t,this));return Object.freeze(n)};ee.prototype.decode=function(t,e,n){var r=new fu(t,e),i=uD(this,r,n);return r.isValid()?{value:i,offset:r.pos}:{value:void 0,offset:-1}};ee.prototype.encode=function(t,e,n){var r=new fu(e,n);return this._write(r,t),r.isValid()?r.pos:e.length-r.pos};ee.prototype.equals=function(t,e){var n=ee.isType(t)&&this.fingerprint().equals(t.fingerprint());return!n||!(e&&e.strict)?n:JSON.stringify(this.schema({exportAttrs:!0}))===JSON.stringify(t.schema({exportAttrs:!0}))};ee.prototype.fingerprint=function(t){if(t)return Ee.getHash(JSON.stringify(this.schema()),t);if(!this._hash.str){var e=JSON.stringify(this.schema());this._hash.str=Ee.getHash(e).toString("binary")}return Ee.bufferFrom(this._hash.str,"binary")};ee.prototype.fromBuffer=function(t,e,n){var r=new fu(t),i=uD(this,r,e,n);if(!r.isValid())throw new Error("truncated buffer");if(!n&&r.pos<t.length)throw new Error("trailing data");return i};ee.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})};ee.prototype.inspect=function(){var t=this.typeName,e=cD(t);if(hc(t))return Be("<%s>",e);var n=this.schema({exportAttrs:!0,noDeref:!0});return typeof n=="object"&&!ee.isType(this,"logical")&&(n.type=void 0),Be("<%s %j>",e,n)};ee.prototype.isValid=function(t,e){var n=(e&&e.noUndeclaredFields)|0,r=e&&e.errorHook,i,o;return r&&(o=[],i=function(s,l){r.call(this,o.slice(),s,l,t)}),this._check(t,n,i,o)};ee.prototype.random=Ee.abstractFunction;ee.prototype.schema=function(t){return this._attrs({exportAttrs:!!(t&&t.exportAttrs),noDeref:!!(t&&t.noDeref)})};ee.prototype.toBuffer=function(t){Fa.pos=0,this._write(Fa,t);var e=Ee.newBuffer(Fa.pos);return Fa.isValid()?Fa.buf.copy(e,0,0,Fa.pos):this._write(new fu(e),t),e};ee.prototype.toJSON=function(){return this.schema({exportAttrs:!0})};ee.prototype.toString=function(t){return t===void 0?JSON.stringify(this.schema({noDeref:!0})):JSON.stringify(this._copy(t,{coerce:3}))};ee.prototype.wrap=function(t){var e=this._branchConstructor;return e===null?null:new e(t)};ee.prototype._attrs=function(t){t.derefed=t.derefed||{};var e=this.name;if(e!==void 0){if(t.noDeref||t.derefed[e])return e;t.derefed[e]=!0}var n={};this.name!==void 0&&(n.name=e),n.type=this.typeName;var r=this._deref(n,t);return r!==void 0&&(n=r),t.exportAttrs&&(this.aliases&&this.aliases.length&&(n.aliases=this.aliases),this.doc!==void 0&&(n.doc=this.doc)),n};ee.prototype._createBranchConstructor=function(){var t=this.branchName;if(t==="null")return null;var e=~t.indexOf(".")?"this['"+t+"']":"this."+t,n="return function Branch$(val) { "+e+" = val; };",r=new Function(n)();return r.type=this,r.prototype.unwrap=new Function("return "+e+";"),r.prototype.unwrapped=r.prototype.unwrap,r};ee.prototype._peek=function(t){var e=t.pos,n=this._read(t);return t.pos=e,n};ee.prototype._check=Ee.abstractFunction;ee.prototype._copy=Ee.abstractFunction;ee.prototype._deref=Ee.abstractFunction;ee.prototype._match=Ee.abstractFunction;ee.prototype._read=Ee.abstractFunction;ee.prototype._skip=Ee.abstractFunction;ee.prototype._update=Ee.abstractFunction;ee.prototype._write=Ee.abstractFunction;ee.prototype.getAliases=function(){return this.aliases};ee.prototype.getFingerprint=ee.prototype.fingerprint;ee.prototype.getName=function(t){return this.name||!t?this.name:this.branchName};ee.prototype.getSchema=ee.prototype.schema;ee.prototype.getTypeName=function(){return this.typeName};function zt(t){ee.call(this),this._branchConstructor=this._createBranchConstructor(),t||Object.freeze(this)}Wt.inherits(zt,ee);zt.prototype._update=function(t,e){e.typeName===this.typeName&&(t._read=this._read)};zt.prototype._copy=function(t){return this._check(t,void 0,gt),t};zt.prototype._deref=function(){return this.typeName};zt.prototype.compare=Ee.compare;function Ui(){zt.call(this)}Wt.inherits(Ui,zt);Ui.prototype._check=function(t,e,n){var r=t===null;return!r&&n&&n(t,this),r};Ui.prototype._read=function(){return null};Ui.prototype._skip=function(){};Ui.prototype._write=function(t,e){e!==null&&gt(e,this)};Ui.prototype._match=function(){return 0};Ui.prototype.compare=Ui.prototype._match;Ui.prototype.typeName="null";Ui.prototype.random=Ui.prototype._read;function Ws(){zt.call(this)}Wt.inherits(Ws,zt);Ws.prototype._check=function(t,e,n){var r=typeof t=="boolean";return!r&&n&&n(t,this),r};Ws.prototype._read=function(t){return t.readBoolean()};Ws.prototype._skip=function(t){t.skipBoolean()};Ws.prototype._write=function(t,e){typeof e!="boolean"&&gt(e,this),t.writeBoolean(e)};Ws.prototype._match=function(t,e){return t.matchBoolean(e)};Ws.prototype.typeName="boolean";Ws.prototype.random=function(){return Nn.nextBoolean()};function js(){zt.call(this)}Wt.inherits(js,zt);js.prototype._check=function(t,e,n){var r=t===(t|0);return!r&&n&&n(t,this),r};js.prototype._read=function(t){return t.readInt()};js.prototype._skip=function(t){t.skipInt()};js.prototype._write=function(t,e){e!==(e|0)&&gt(e,this),t.writeInt(e)};js.prototype._match=function(t,e){return t.matchInt(e)};js.prototype.typeName="int";js.prototype.random=function(){return Nn.nextInt(1e3)|0};function gi(){zt.call(this)}Wt.inherits(gi,zt);gi.prototype._check=function(t,e,n){var r=typeof t=="number"&&t%1===0&&LS(t);return!r&&n&&n(t,this),r};gi.prototype._read=function(t){var e=t.readLong();if(!LS(e))throw new Error("potential precision loss");return e};gi.prototype._skip=function(t){t.skipLong()};gi.prototype._write=function(t,e){(typeof e!="number"||e%1||!LS(e))&&gt(e,this),t.writeLong(e)};gi.prototype._match=function(t,e){return t.matchLong(e)};gi.prototype._update=function(t,e){switch(e.typeName){case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=this._read}};gi.prototype.typeName="long";gi.prototype.random=function(){return Nn.nextInt()};gi.__with=function(t,e){t=t||{};var n={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},r=new sr(e);return Object.keys(n).forEach(function(i){if(t[i]===void 0)throw new Error(Be("missing method implementation: %s",i));r[n[i]]=t[i]}),Object.freeze(r)};function ns(){zt.call(this)}Wt.inherits(ns,zt);ns.prototype._check=function(t,e,n){var r=typeof t=="number";return!r&&n&&n(t,this),r};ns.prototype._read=function(t){return t.readFloat()};ns.prototype._skip=function(t){t.skipFloat()};ns.prototype._write=function(t,e){typeof e!="number"&&gt(e,this),t.writeFloat(e)};ns.prototype._match=function(t,e){return t.matchFloat(e)};ns.prototype._update=function(t,e){switch(e.typeName){case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(n){return n.readLong()}}};ns.prototype.typeName="float";ns.prototype.random=function(){return Nn.nextFloat(1e3)};function rs(){zt.call(this)}Wt.inherits(rs,zt);rs.prototype._check=function(t,e,n){var r=typeof t=="number";return!r&&n&&n(t,this),r};rs.prototype._read=function(t){return t.readDouble()};rs.prototype._skip=function(t){t.skipDouble()};rs.prototype._write=function(t,e){typeof e!="number"&&gt(e,this),t.writeDouble(e)};rs.prototype._match=function(t,e){return t.matchDouble(e)};rs.prototype._update=function(t,e){switch(e.typeName){case"double":case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(n){return n.readLong()}}};rs.prototype.typeName="double";rs.prototype.random=function(){return Nn.nextFloat()};function mo(){zt.call(this)}Wt.inherits(mo,zt);mo.prototype._check=function(t,e,n){var r=typeof t=="string";return!r&&n&&n(t,this),r};mo.prototype._read=function(t){return t.readString()};mo.prototype._skip=function(t){t.skipString()};mo.prototype._write=function(t,e){typeof e!="string"&&gt(e,this),t.writeString(e)};mo.prototype._match=function(t,e){return t.matchString(e)};mo.prototype._update=function(t,e){switch(e.typeName){case"bytes":case"string":t._read=this._read}};mo.prototype.typeName="string";mo.prototype.random=function(){return Nn.nextString(Nn.nextInt(32))};function mi(){zt.call(this)}Wt.inherits(mi,zt);mi.prototype._check=function(t,e,n){var r=U.isBuffer(t);return!r&&n&&n(t,this),r};mi.prototype._read=function(t){return t.readBytes()};mi.prototype._skip=function(t){t.skipBytes()};mi.prototype._write=function(t,e){U.isBuffer(e)||gt(e,this),t.writeBytes(e)};mi.prototype._match=function(t,e){return t.matchBytes(e)};mi.prototype._update=mo.prototype._update;mi.prototype._copy=function(t,e){var n;switch((e&&e.coerce)|0){case 3:return this._check(t,void 0,gt),t.toString("binary");case 2:if(typeof t!="string")throw new Error(Be("cannot coerce to buffer: %j",t));return n=Ee.bufferFrom(t,"binary"),this._check(n,void 0,gt),n;case 1:if(!hD(t))throw new Error(Be("cannot coerce to buffer: %j",t));return n=Ee.bufferFrom(t.data),this._check(n,void 0,gt),n;default:return this._check(t,void 0,gt),Ee.bufferFrom(t)}};mi.prototype.compare=U.compare;mi.prototype.typeName="bytes";mi.prototype.random=function(){return Nn.nextBuffer(Nn.nextInt(32))};function is(t,e){if(ee.call(this),!Array.isArray(t))throw new Error(Be("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this.types=Object.freeze(t.map(function(n){return ee.forSchema(n,e)})),this._branchIndices={},this.types.forEach(function(n,r){if(ee.isType(n,"union"))throw new Error("unions cannot be directly nested");var i=n.branchName;if(this._branchIndices[i]!==void 0)throw new Error(Be("duplicate union branch name: %j",i));this._branchIndices[i]=r},this)}Wt.inherits(is,ee);is.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")};is.prototype._skip=function(t){this.types[t.readLong()]._skip(t)};is.prototype._match=function(t,e){var n=t.readLong(),r=e.readLong();return n===r?this.types[n]._match(t,e):n<r?-1:1};is.prototype._deref=function(t,e){return this.types.map(function(n){return n._attrs(e)})};is.prototype.getTypes=function(){return this.types};function Ur(t,e){is.call(this,t,e),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(n,r){if(ee.isType(n,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:r,type:n});else{var i=Pv(n);if(this._bucketIndices[i]!==void 0)throw new Error(Be("ambiguous unwrapped union: %j",this));this._bucketIndices[i]=r}},this),Object.freeze(this)}Wt.inherits(Ur,is);Ur.prototype._getIndex=function(t){var e=this._bucketIndices[dD(t)];return this._dynamicBranches&&(e=this._getBranchIndex(t,e)),e};Ur.prototype._getBranchIndex=function(t,e){var n=this._dynamicBranches,r,i,o;for(r=0,i=n.length;r<i;r++)if(o=n[r],o.type._check(t))if(e===void 0)e=o.index;else throw new Error("ambiguous conversion");return e};Ur.prototype._check=function(t,e,n,r){var i=this._getIndex(t),o=i!==void 0;return o?this.types[i]._check(t,e,n,r):(n&&n(t,this),o)};Ur.prototype._read=function(t){var e=t.readLong(),n=this.types[e];if(n)return n._read(t);throw new Error(Be("invalid union index: %s",e))};Ur.prototype._write=function(t,e){var n=this._getIndex(e);n===void 0&&gt(e,this),t.writeLong(n),e!==null&&this.types[n]._write(t,e)};Ur.prototype._update=function(t,e,n){var r,i,o;for(r=0,i=this.types.length;r<i;r++){try{o=this.types[r].createResolver(e,n)}catch{continue}t._read=function(s){return o._read(s)};return}};Ur.prototype._copy=function(t,e){var n=e&&e.coerce|0,r=e&&e.wrap|0,i;if(r===2)i=0;else{switch(n){case 1:hD(t)&&this._bucketIndices.buffer!==void 0?i=this._bucketIndices.buffer:i=this._getIndex(t);break;case 2:if(t===null)i=this._bucketIndices.null;else if(typeof t=="object"){var o=Object.keys(t);o.length===1&&(i=this._branchIndices[o[0]],t=t[o[0]])}break;default:i=this._getIndex(t)}i===void 0&&gt(t,this)}var s=this.types[i];if(t===null||r===3)return s._copy(t,e);switch(n){case 3:var l={};return l[s.branchName]=s._copy(t,e),l;default:return s._copy(t,e)}};Ur.prototype.compare=function(t,e){var n=this._getIndex(t),r=this._getIndex(e);if(n===void 0)gt(t,this);else if(r===void 0)gt(e,this);else return n===r?this.types[n].compare(t,e):Ee.compare(n,r)};Ur.prototype.typeName="union:unwrapped";Ur.prototype.random=function(){var t=Nn.nextInt(this.types.length);return this.types[t].random()};function Wi(t,e){is.call(this,t,e),Object.freeze(this)}Wt.inherits(Wi,is);Wi.prototype._check=function(t,e,n,r){var i=!1;if(t===null)i=this._branchIndices.null!==void 0;else if(typeof t=="object"){var o=Object.keys(t);if(o.length===1){var s=o[0],l=this._branchIndices[s];if(l!==void 0)return n?(r.push(s),i=this.types[l]._check(t[s],e,n,r),r.pop(),i):this.types[l]._check(t[s],e)}}return!i&&n&&n(t,this),i};Wi.prototype._read=function(t){var e=this.types[t.readLong()];if(!e)throw new Error(Be("invalid union index"));var n=e._branchConstructor;return n===null?null:new n(e._read(t))};Wi.prototype._write=function(t,e){var n,r,i;e===null?(n=this._branchIndices.null,n===void 0&&gt(e,this),t.writeLong(n)):(r=Object.keys(e),r.length===1&&(i=r[0],n=this._branchIndices[i]),n===void 0&&gt(e,this),t.writeLong(n),this.types[n]._write(t,e[i]))};Wi.prototype._update=function(t,e,n){var r,i,o,s;for(r=0,i=this.types.length;r<i;r++){try{o=this.types[r].createResolver(e,n)}catch{continue}s=this.types[r]._branchConstructor,s?t._read=function(l){return new s(o._read(l))}:t._read=function(){return null};return}};Wi.prototype._copy=function(t,e){var n=e&&e.wrap|0;if(n===2){var r=this.types[0];return t===null&&r.typeName==="null"?null:new r._branchConstructor(r._copy(t,e))}if(t===null&&this._branchIndices.null!==void 0)return null;var i,o,s;if(typeof t=="object"){var l=Object.keys(t);if(l.length===1){var u=l[0];if(i=this._branchIndices[u],i===void 0&&e.qualifyNames){var c,h;for(c=0,o=this.types.length;c<o;c++)if(h=this.types[c],h.name&&u===Ee.unqualify(h.name)){i=c;break}}i!==void 0&&(s=this.types[i]._copy(t[u],e))}}if(n===1&&s===void 0)for(i=0,o=this.types.length;i<o&&s===void 0;)try{s=this.types[i]._copy(t,e)}catch{i++}if(s!==void 0)return n===3?s:new this.types[i]._branchConstructor(s);gt(t,this)};Wi.prototype.compare=function(t,e){var n=t===null?"null":Object.keys(t)[0],r=e===null?"null":Object.keys(e)[0],i=this._branchIndices[n];return n===r?n==="null"?0:this.types[i].compare(t[n],e[n]):Ee.compare(i,this._branchIndices[r])};Wi.prototype.typeName="union:wrapped";Wi.prototype.random=function(){var t=Nn.nextInt(this.types.length),e=this.types[t],n=e._branchConstructor;return n?new n(e.random()):null};function jr(t,e){if(ee.call(this,t,e),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(Be("invalid enum symbols: %j",t.symbols));if(this.symbols=Object.freeze(t.symbols.slice()),this._indices={},this.symbols.forEach(function(n,r){if(!Ee.isValidName(n))throw new Error(Be("invalid %s symbol: %j",this,n));if(this._indices[n]!==void 0)throw new Error(Be("duplicate %s symbol: %j",this,n));this._indices[n]=r},this),this.default=t.default,this.default!==void 0&&this._indices[this.default]===void 0)throw new Error(Be("invalid %s default: %j",this,this.default));this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Wt.inherits(jr,ee);jr.prototype._check=function(t,e,n){var r=this._indices[t]!==void 0;return!r&&n&&n(t,this),r};jr.prototype._read=function(t){var e=t.readLong(),n=this.symbols[e];if(n===void 0)throw new Error(Be("invalid %s enum index: %s",this.name,e));return n};jr.prototype._skip=function(t){t.skipLong()};jr.prototype._write=function(t,e){var n=this._indices[e];n===void 0&&gt(e,this),t.writeLong(n)};jr.prototype._match=function(t,e){return t.matchLong(e)};jr.prototype.compare=function(t,e){return Ee.compare(this._indices[t],this._indices[e])};jr.prototype._update=function(t,e,n){var r=this.symbols;e.typeName==="enum"&&MS(this,e,!n.ignoreNamespaces)&&(e.symbols.every(function(i){return~r.indexOf(i)})||this.default!==void 0)&&(t.symbols=e.symbols.map(function(i){return this._indices[i]===void 0?this.default:i},this),t._read=e._read)};jr.prototype._copy=function(t){return this._check(t,void 0,gt),t};jr.prototype._deref=function(t){t.symbols=this.symbols};jr.prototype.getSymbols=function(){return this.symbols};jr.prototype.typeName="enum";jr.prototype.random=function(){return Nn.choice(this.symbols)};function qr(t,e){if(ee.call(this,t,e),t.size!==(t.size|0)||t.size<0)throw new Error(Be("invalid %s size",this.branchName));this.size=t.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Wt.inherits(qr,ee);qr.prototype._check=function(t,e,n){var r=U.isBuffer(t)&&t.length===this.size;return!r&&n&&n(t,this),r};qr.prototype._read=function(t){return t.readFixed(this.size)};qr.prototype._skip=function(t){t.skipFixed(this.size)};qr.prototype._write=function(t,e){(!U.isBuffer(e)||e.length!==this.size)&&gt(e,this),t.writeFixed(e,this.size)};qr.prototype._match=function(t,e){return t.matchFixed(e,this.size)};qr.prototype.compare=U.compare;qr.prototype._update=function(t,e,n){e.typeName==="fixed"&&this.size===e.size&&MS(this,e,!n.ignoreNamespaces)&&(t.size=this.size,t._read=this._read)};qr.prototype._copy=mi.prototype._copy;qr.prototype._deref=function(t){t.size=this.size};qr.prototype.getSize=function(){return this.size};qr.prototype.typeName="fixed";qr.prototype.random=function(){return Nn.nextBuffer(this.size)};function xr(t,e){if(ee.call(this),!t.values)throw new Error(Be("missing map values: %j",t));this.valuesType=ee.forSchema(t.values,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Wt.inherits(xr,ee);xr.prototype._check=function(t,e,n,r){if(!t||typeof t!="object"||Array.isArray(t))return n&&n(t,this),!1;var i=Object.keys(t),o=!0,s,l,u,c;if(n){for(u=r.length,r.push(""),s=0,l=i.length;s<l;s++)c=r[u]=i[s],this.valuesType._check(t[c],e,n,r)||(o=!1);r.pop()}else for(s=0,l=i.length;s<l;s++)if(!this.valuesType._check(t[i[s]],e))return!1;return o};xr.prototype._read=function(t){for(var e=this.valuesType,n={},r;r=Ox(t);)for(;r--;){var i=t.readString();n[i]=e._read(t)}return n};xr.prototype._skip=function(t){for(var e=this.valuesType,n,r;r=t.readLong();)if(r<0)n=t.readLong(),t.pos+=n;else for(;r--;)t.skipString(),e._skip(t)};xr.prototype._write=function(t,e){(!e||typeof e!="object"||Array.isArray(e))&&gt(e,this);var n=this.valuesType,r=Object.keys(e),i=r.length,o,s;if(i)for(t.writeLong(i),o=0;o<i;o++)s=r[o],t.writeString(s),n._write(t,e[s]);t.writeLong(0)};xr.prototype._match=function(){throw new Error("maps cannot be compared")};xr.prototype._update=function(t,e,n){e.typeName==="map"&&(t.valuesType=this.valuesType.createResolver(e.valuesType,n),t._read=this._read)};xr.prototype._copy=function(t,e){if(t&&typeof t=="object"&&!Array.isArray(t)){var n=this.valuesType,r=Object.keys(t),i,o,s,l={};for(i=0,o=r.length;i<o;i++)s=r[i],l[s]=n._copy(t[s],e);return l}gt(t,this)};xr.prototype.compare=xr.prototype._match;xr.prototype.typeName="map";xr.prototype.getValuesType=function(){return this.valuesType};xr.prototype.random=function(){var t={},e,n;for(e=0,n=Nn.nextInt(10);e<n;e++)t[Nn.nextString(Nn.nextInt(20))]=this.valuesType.random();return t};xr.prototype._deref=function(t,e){t.values=this.valuesType._attrs(e)};function Jr(t,e){if(ee.call(this),!t.items)throw new Error(Be("missing array items: %j",t));this.itemsType=ee.forSchema(t.items,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}Wt.inherits(Jr,ee);Jr.prototype._check=function(t,e,n,r){if(!Array.isArray(t))return n&&n(t,this),!1;var i=this.itemsType,o=!0,s,l,u;if(n){for(u=r.length,r.push(""),s=0,l=t.length;s<l;s++)r[u]=""+s,i._check(t[s],e,n,r)||(o=!1);r.pop()}else for(s=0,l=t.length;s<l;s++)if(!i._check(t[s],e))return!1;return o};Jr.prototype._read=function(t){for(var e=this.itemsType,n=0,r,i;i=t.readLong();)for(i<0&&(i=-i,t.skipLong()),r=r||new Array(i);i--;)r[n++]=e._read(t);return r||[]};Jr.prototype._skip=function(t){for(var e=this.itemsType,n,r;r=t.readLong();)if(r<0)n=t.readLong(),t.pos+=n;else for(;r--;)e._skip(t)};Jr.prototype._write=function(t,e){Array.isArray(e)||gt(e,this);var n=this.itemsType,r=e.length,i;if(r)for(t.writeLong(r),i=0;i<r;i++)n._write(t,e[i]);t.writeLong(0)};Jr.prototype._match=function(t,e){for(var n=t.readLong(),r=e.readLong(),i;n&&r;){if(i=this.itemsType._match(t,e),i)return i;--n||(n=Ox(t)),--r||(r=Ox(e))}return Ee.compare(n,r)};Jr.prototype._update=function(t,e,n){e.typeName==="array"&&(t.itemsType=this.itemsType.createResolver(e.itemsType,n),t._read=this._read)};Jr.prototype._copy=function(t,e){Array.isArray(t)||gt(t,this);var n=new Array(t.length),r,i;for(r=0,i=t.length;r<i;r++)n[r]=this.itemsType._copy(t[r],e);return n};Jr.prototype._deref=function(t,e){t.items=this.itemsType._attrs(e)};Jr.prototype.compare=function(t,e){var n=t.length,r=e.length,i,o,s;for(i=0,o=Math.min(n,r);i<o;i++)if(s=this.itemsType.compare(t[i],e[i]))return s;return Ee.compare(n,r)};Jr.prototype.getItemsType=function(){return this.itemsType};Jr.prototype.typeName="array";Jr.prototype.random=function(){var t=[],e,n;for(e=0,n=Nn.nextInt(10);e<n;e++)t.push(this.itemsType.random());return t};function Vt(t,e){e=e||{};var n=e.namespace;if(t.namespace!==void 0)e.namespace=t.namespace;else if(t.name){var r=Ee.impliedNamespace(t.name);r!==void 0&&(e.namespace=r)}if(ee.call(this,t,e),!Array.isArray(t.fields))throw new Error(Be("non-array record fields: %j",t.fields));if(Ee.hasDuplicates(t.fields,function(i){return i.name}))throw new Error(Be("duplicate field name: %j",t.fields));this._fieldsByName={},this.fields=Object.freeze(t.fields.map(function(i){var o=new Fs(i,e);return this._fieldsByName[o.name]=o,o},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=t.type==="error",this.recordConstructor=this._createConstructor(e.errorStackTraces,e.omitRecordMethods),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=n,Object.freeze(this)}Wt.inherits(Vt,ee);Vt.prototype._getConstructorName=function(){return this.name?Ee.capitalize(Ee.unqualify(this.name)):this._isError?"Error$":"Record$"};Vt.prototype._createConstructor=function(t,e){var n=[],r=[],i=[],o="",s,l,u,c,h,p,g;for(s=0,l=this.fields.length;s<l;s++)u=this.fields[s],h=u.defaultValue,p=h()!==void 0,c=u.name,t&&this._isError&&c==="stack"&&ee.isType(u.type,"string")&&!p&&(g=u),r.push("v"+s),o+="  ",p?(o+="if (v"+s+" === undefined) { ",o+="this."+c+" = d"+i.length+"(); ",o+="} else { this."+c+" = v"+s+`; }
`,n.push("d"+i.length),i.push(h)):o+="this."+c+" = v"+s+`;
`;g&&(o+="  if (this.stack === undefined) { ",typeof Error.captureStackTrace=="function"?o+="Error.captureStackTrace(this, this.constructor);":o+="this.stack = Error().stack;",o+=` }
`);var v="return function "+this._getConstructorName()+"(";v+=r.join()+`) {
`+o+"};";var y=new Function(n.join(),v).apply(void 0,i);if(e)return y;var A=this;return y.getType=function(){return A},y.type=A,this._isError&&(Wt.inherits(y,Error),y.prototype.name=this._getConstructorName()),y.prototype.clone=function(O){return A.clone(this,O)},y.prototype.compare=function(O){return A.compare(this,O)},y.prototype.isValid=function(O){return A.isValid(this,O)},y.prototype.toBuffer=function(){return A.toBuffer(this)},y.prototype.toString=function(){return A.toString(this)},y.prototype.wrap=function(){return A.wrap(this)},y.prototype.wrapped=y.prototype.wrap,y};Vt.prototype._createChecker=function(){var t=[],e=[],n=this._getConstructorName(),r="return function check"+n+`(v, f, h, p) {
`;if(r+=`  if (
`,r+=`    v === null ||
`,r+=`    typeof v != 'object' ||
`,r+=`    (f && !this._checkFields(v))
`,r+=`  ) {
`,r+=`    if (h) { h(v, this); }
`,r+=`    return false;
`,r+=`  }
`,!this.fields.length)r+=`  return true;
`;else{for(i=0,o=this.fields.length;i<o;i++)s=this.fields[i],t.push("t"+i),e.push(s.type),s.defaultValue()!==void 0&&(r+="  var v"+i+" = v."+s.name+`;
`);r+=`  if (h) {
`,r+=`    var b = 1;
`,r+=`    var j = p.length;
`,r+=`    p.push('');
`;var i,o,s;for(i=0,o=this.fields.length;i<o;i++)s=this.fields[i],r+="    p[j] = '"+s.name+`';
`,r+="    b &= ",s.defaultValue()===void 0?r+="t"+i+"._check(v."+s.name+`, f, h, p);
`:(r+="v"+i+" === undefined || ",r+="t"+i+"._check(v"+i+`, f, h, p);
`);r+=`    p.pop();
`,r+=`    return !!b;
`,r+=`  } else {
    return (
      `,r+=this.fields.map(function(l,u){return l.defaultValue()===void 0?"t"+u+"._check(v."+l.name+", f)":"(v"+u+" === undefined || t"+u+"._check(v"+u+", f))"}).join(` &&
      `),r+=`
    );
  }
`}return r+="};",new Function(t.join(),r).apply(void 0,e)};Vt.prototype._createReader=function(){var t=[],e=[this.recordConstructor],n,r;for(n=0,r=this.fields.length;n<r;n++)t.push("t"+n),e.push(this.fields[n].type);var i=this._getConstructorName(),o="return function read"+i+`(t) {
`;return o+="  return new "+i+`(
    `,o+=t.map(function(s){return s+"._read(t)"}).join(`,
    `),o+=`
  );
};`,t.unshift(i),new Function(t.join(),o).apply(void 0,e)};Vt.prototype._createSkipper=function(){var t=[],e="return function skip"+this._getConstructorName()+`(t) {
`,n=[],r,i;for(r=0,i=this.fields.length;r<i;r++)t.push("t"+r),n.push(this.fields[r].type),e+="  t"+r+`._skip(t);
`;return e+="}",new Function(t.join(),e).apply(void 0,n)};Vt.prototype._createWriter=function(){var t=[],e=this._getConstructorName(),n="return function write"+e+`(t, v) {
`,r=[],i,o,s,l;for(i=0,o=this.fields.length;i<o;i++)s=this.fields[i],t.push("t"+i),r.push(s.type),n+="  ",s.defaultValue()===void 0?n+="t"+i+"._write(t, v."+s.name+`);
`:(l=s.type.toBuffer(s.defaultValue()).toString("binary"),t.push("d"+i),r.push(l),n+="var v"+i+" = v."+s.name+`;
`,n+="if (v"+i+` === undefined) {
`,n+="    t.writeBinary(d"+i+", "+l.length+`);
`,n+=`  } else {
    t`+i+"._write(t, v"+i+`);
  }
`);return n+="}",new Function(t.join(),n).apply(void 0,r)};Vt.prototype._update=function(t,e,n){if(!MS(this,e,!n.ignoreNamespaces))throw new Error(Be("no alias found for %s",e.name));var r=this.fields,i=e.fields,o=Ee.toMap(i,function(T){return T.name}),s=[],l={},u,c,h,p,g,v,y;for(u=0;u<r.length;u++){for(h=r[u],g=fD(h),v=[],c=0;c<g.length;c++)p=g[c],o[p]&&v.push(p);if(v.length>1)throw new Error(Be("ambiguous aliasing for %s.%s (%s)",e.name,h.name,v));if(v.length)p=v[0],y={resolver:h.type.createResolver(o[p].type,n),name:"_"+h.name},l[p]?l[p].push(y):l[p]=[y],s.push(y.name);else{if(h.defaultValue()===void 0)throw new Error(Be("no matching field for default-less %s.%s",e.name,h.name));s.push("undefined")}}var A=-1;for(u=i.length;u&&l[i[--u].name]===void 0;)A=u;var O=this._getConstructorName(),x=[O],k=[this.recordConstructor],b="  return function read"+O+`(t, b) {
`;for(u=0;u<i.length;u++)if(u===A&&(b+=`  if (!b) {
`),h=e.fields[u],p=h.name,l[p]===void 0)b+=~A&&u>=A?"    ":"  ",x.push("r"+u),k.push(h.type),b+="r"+u+`._skip(t);
`;else for(c=l[p].length;c--;)b+=~A&&u>=A?"    ":"  ",x.push("r"+u+"f"+c),y=l[p][c],k.push(y.resolver),b+="var "+y.name+" = ",b+="r"+u+"f"+c+"._"+(c?"peek":"read")+`(t);
`;~A&&(b+=`  }
`),b+="  return new "+O+"("+s.join()+`);
};`,t._read=new Function(x.join(),b).apply(void 0,k)};Vt.prototype._match=function(t,e){var n=this.fields,r,i,o,s,l;for(r=0,i=n.length;r<i;r++)if(o=n[r],s=o._order,l=o.type,s){if(s*=l._match(t,e),s)return s}else l._skip(t),l._skip(e);return 0};Vt.prototype._checkFields=function(t){var e=Object.keys(t),n,r;for(n=0,r=e.length;n<r;n++)if(!this._fieldsByName[e[n]])return!1;return!0};Vt.prototype._copy=function(t,e){var n=e&&e.fieldHook,r=[void 0],i,o,s,l;for(i=0,o=this.fields.length;i<o;i++)s=this.fields[i],l=t[s.name],l===void 0&&s.hasOwnProperty("defaultValue")&&(l=s.defaultValue()),(e&&!e.skip||l!==void 0)&&(l=s.type._copy(l,e)),n&&(l=n(s,l,this)),r.push(l);var u=this.recordConstructor;return new(u.bind.apply(u,r))};Vt.prototype._deref=function(t,e){t.fields=this.fields.map(function(n){var r=n.type,i={name:n.name,type:r._attrs(e)};if(e.exportAttrs){var o=n.defaultValue();o!==void 0&&(i.default=r._copy(o,{coerce:3,wrap:3}));var s=n.order;s!=="ascending"&&(i.order=s);var l=n.aliases;l.length&&(i.aliases=l);var u=n.doc;u!==void 0&&(i.doc=u)}return i})};Vt.prototype.compare=function(t,e){var n=this.fields,r,i,o,s,l,u;for(r=0,i=n.length;r<i;r++)if(o=n[r],s=o.name,l=o._order,u=o.type,l&&(l*=u.compare(t[s],e[s]),l))return l;return 0};Vt.prototype.random=function(){var t=this.fields.map(function(n){return n.type.random()});t.unshift(void 0);var e=this.recordConstructor;return new(e.bind.apply(e,t))};Vt.prototype.field=function(t){return this._fieldsByName[t]};Vt.prototype.getField=Vt.prototype.field;Vt.prototype.getFields=function(){return this.fields};Vt.prototype.getRecordConstructor=function(){return this.recordConstructor};Object.defineProperty(Vt.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function xn(t,e){this._logicalTypeName=t.logicalType,ee.call(this),ro=this;try{this._underlyingType=ee.forSchema(t,e)}finally{ro=null;var n=Pf.length;n&&Pf[n-1][0]===this&&Pf.pop()}ee.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}Wt.inherits(xn,ee);Object.defineProperty(xn.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}});Object.defineProperty(xn.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var t,e,n;for(t=0,e=Pf.length;t<e;t++)if(n=Pf[t],n[0]===this)return n[1]}});xn.prototype.getUnderlyingType=function(){return this.underlyingType};xn.prototype._read=function(t){return this._fromValue(this.underlyingType._read(t))};xn.prototype._write=function(t,e){this.underlyingType._write(t,this._toValue(e))};xn.prototype._check=function(t,e,n,r){try{var i=this._toValue(t)}catch{}return i===void 0?(n&&n(t,this),!1):this.underlyingType._check(i,e,n,r)};xn.prototype._copy=function(t,e){var n=this.underlyingType;switch(e&&e.coerce){case 3:return n._copy(this._toValue(t),e);case 2:return this._fromValue(n._copy(t,e));default:return this._fromValue(n._copy(this._toValue(t),e))}};xn.prototype._update=function(t,e,n){var r=this._resolve(e,n);r&&(t._read=function(i){return r(e._read(i))})};xn.prototype.compare=function(t,e){var n=this._toValue(t),r=this._toValue(e);return this.underlyingType.compare(n,r)};xn.prototype.random=function(){return this._fromValue(this.underlyingType.random())};xn.prototype._deref=function(t,e){var n=this.underlyingType,r=n.name!==void 0&&e.derefed[n.name];return t=n._attrs(e),!r&&e.exportAttrs&&(typeof t=="string"&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t};xn.prototype._skip=function(t){this.underlyingType._skip(t)};xn.prototype._export=function(){};xn.prototype._fromValue=Ee.abstractFunction;xn.prototype._toValue=Ee.abstractFunction;xn.prototype._resolve=Ee.abstractFunction;function sr(t){this._concreteTypeName="long",zt.call(this,!0),this._noUnpack=!!t}Wt.inherits(sr,gi);sr.prototype.typeName="abstract:long";sr.prototype._check=function(t,e,n){var r=this._isValid(t);return!r&&n&&n(t,this),r};sr.prototype._read=function(t){var e,n;if(this._noUnpack?(n=t.pos,t.skipLong(),e=t.buf.slice(n,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)};sr.prototype._write=function(t,e){this._isValid(e)||gt(e,this);var n=this._toBuffer(e);this._noUnpack?t.writeFixed(n):t.packLongBytes(n)};sr.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(this._toJSON(t))}};sr.prototype._deref=function(){return"long"};sr.prototype._update=function(t,e){var n=this;switch(e.typeName){case"int":t._read=function(r){return n._fromJSON(e._read(r))};break;case"abstract:long":case"long":t._read=function(r){return n._read(r)}}};sr.prototype.random=function(){return this._fromJSON(gi.prototype.random())};sr.prototype._fromBuffer=Ee.abstractFunction;sr.prototype._toBuffer=Ee.abstractFunction;sr.prototype._fromJSON=Ee.abstractFunction;sr.prototype._toJSON=Ee.abstractFunction;sr.prototype._isValid=Ee.abstractFunction;sr.prototype.compare=Ee.abstractFunction;function Fs(t,e){var n=t.name;if(typeof n!="string"||!Ee.isValidName(n))throw new Error(Be("invalid field name: %s",n));this.name=n,this.type=ee.forSchema(t.type,e),this.aliases=t.aliases||[],this.doc=t.doc!==void 0?""+t.doc:void 0,this._order=function(s){switch(s){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(Be("invalid order: %j",s))}}(t.order===void 0?"ascending":t.order);var r=t.default;if(r!==void 0){var i=this.type,o=i._copy(r,{coerce:2,wrap:2});hc(i.typeName)&&i.typeName!=="bytes"?this.defaultValue=function(){return o}:this.defaultValue=function(){return i._copy(o)}}Object.freeze(this)}Fs.prototype.defaultValue=function(){};Object.defineProperty(Fs.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}});Fs.prototype.getAliases=function(){return this.aliases};Fs.prototype.getDefault=Fs.prototype.defaultValue;Fs.prototype.getName=function(){return this.name};Fs.prototype.getOrder=function(){return this.order};Fs.prototype.getType=function(){return this.type};function RS(t){this._readerType=t,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}RS.prototype._peek=ee.prototype._peek;RS.prototype.inspect=function(){return"<Resolver>"};function yK(){this.str=void 0}function uD(t,e,n,r){if(n){if(n._readerType!==t)throw new Error("invalid resolver");return n._read(e,r)}else return t._read(e)}function fD(t){var e={};t.name&&(e[t.name]=!0);var n=t.aliases,r,i;for(r=0,i=n.length;r<i;r++)e[n[r]]=!0;return Object.keys(e)}function MS(t,e,n){if(!e.name)return!0;var r=n?e.name:Ee.unqualify(e.name),i=fD(t),o,s,l;for(o=0,s=i.length;o<s;o++)if(l=i[o],n||(l=Ee.unqualify(l)),l===r)return!0;return!1}function hc(t){var e=$0[t];return e&&e.prototype instanceof zt}function cD(t){if(t==="error")t="record";else{var e=/^([^:]+):(.*)$/.exec(t);e&&(e[1]==="union"?t=e[2]+"Union":t=e[1])}return Ee.capitalize(t)+"Type"}function Ox(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function LS(t){return t>=-9007199254740990&&t<=9007199254740990}function hD(t){return t&&t.type==="Buffer"&&Array.isArray(t.data)}function gt(t,e){throw new Error(Be("invalid %j: %j",e.schema(),t))}function Rx(t,e){var n=Ee.unqualify(t);return hc(n)?n:Ee.qualify(t,e)}function Pv(t){var e=t.typeName;switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function dD(t){if(t===null)return"null";var e=typeof t;if(e==="object"){if(Array.isArray(t))return"array";if(U.isBuffer(t))return"buffer"}return e}function wK(t){var e={},n,r,i,o;for(n=0,r=t.length;n<r;n++)if(o=t[n],!ee.isType(o,"logical")){if(i=Pv(o),e[i])return!0;e[i]=!0}return!1}function _K(t){var e=["int","long","float","double"],n=-1,r=null,i,o,s,l;for(i=0,o=t.length;i<o;i++)s=t[i],l=e.indexOf(s.typeName),l>n&&(n=l,r=s);return r}function xK(t,e){var n={},r,i,o,s;for(r=0,i=t.length;r<i;r++){if(o=t[r],o.typeName==="string")return o;s=o.symbols;var l,u;for(l=0,u=s.length;l<u;l++)n[s[l]]=!0}return ee.forSchema({type:"enum",symbols:Object.keys(n)},e)}function bK(t,e){var n=-1,r,i,o;for(r=0,i=t.length;r<i;r++){if(o=t[r],o.typeName==="bytes")return o;n===-1?n=o.size:o.size!==n&&(n=-2)}return n<0?ee.forSchema("bytes",e):t[0]}function SK(t,e){var n=[],r={},i={},o=!0,s,l,u,c;for(s=0,l=t.length;s<l;s++)if(u=t[s],u.typeName==="map")o=!1,n.push(u.valuesType);else{c=u.fields;var h,p,g,v,y,A;for(h=0,p=c.length;h<p;h++)g=c[h],y=g.name,A=g.type,n.push(A),o&&(r[y]||(r[y]=[]),r[y].push(A),v=g.defaultValue(),v!==void 0&&(i[y]=v))}if(o){var O=Object.keys(r);for(s=0,l=O.length;s<l;s++)y=O[s],r[y].length<t.length&&i[y]===void 0&&(e&&e.strictDefaults?o=!1:(r[y].unshift(ee.forSchema("null",e)),i[y]=null))}var x;return o?x={type:"record",fields:O.map(function(k){var b=ee.forTypes(r[k],e),T=i[k];if(T!==void 0&&~b.typeName.indexOf("union")){var N=b.types.slice(),B,D;for(B=0,D=N.length;B<D&&!N[B].isValid(T);B++);if(B>0){var $=N[0];N[0]=N[B],N[B]=$,b=ee.forSchema(N,e)}}return{name:k,type:b,default:i[k]}})}:x={type:"map",values:ee.forTypes(n,e)},ee.forSchema(x,e)}var NS={Type:ee,getTypeBucket:Pv,getValueBucket:dD,isPrimitive:hc,builtins:function(){var t={LogicalType:xn,UnwrappedUnionType:Ur,WrappedUnionType:Wi},e=Object.keys($0),n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],t[cD(i)]=$0[i];return t}()},Ch=NS;function kK(t,e){var n;if(typeof t=="string")try{n=JSON.parse(t)}catch{n=t}else n=t;return Ch.Type.forSchema(n,e)}var EK={Type:Ch.Type,parse:kK,types:Ch.builtins,combine:Ch.Type.forTypes,infer:Ch.Type.forValue},CK;function Pl(){}Pl.prototype=Object.create(null);function We(){We.init.call(this)}We.EventEmitter=We;We.usingDomains=!1;We.prototype.domain=void 0;We.prototype._events=void 0;We.prototype._maxListeners=void 0;We.defaultMaxListeners=10;We.init=function(){this.domain=null,We.usingDomains&&CK.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Pl,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};We.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function pD(t){return t._maxListeners===void 0?We.defaultMaxListeners:t._maxListeners}We.prototype.getMaxListeners=function(){return pD(this)};function AK(t,e,n){if(e)t.call(n);else for(var r=t.length,i=Gd(t,r),o=0;o<r;++o)i[o].call(n)}function TK(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=Gd(t,i),s=0;s<i;++s)o[s].call(n,r)}function OK(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,s=Gd(t,o),l=0;l<o;++l)s[l].call(n,r,i)}function RK(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var s=t.length,l=Gd(t,s),u=0;u<s;++u)l[u].call(n,r,i,o)}function MK(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=Gd(t,i),s=0;s<i;++s)o[s].apply(n,r)}We.prototype.emit=function(e){var n,r,i,o,s,l,u,c=e==="error";if(l=this._events,l)c=c&&l.error==null;else if(!c)return!1;if(u=this.domain,c){if(n=arguments[1],u)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=u,n.domainThrown=!1,u.emit("error",n);else{if(n instanceof Error)throw n;var h=new Error('Uncaught, unspecified "error" event. ('+n+")");throw h.context=n,h}return!1}if(r=l[e],!r)return!1;var p=typeof r=="function";switch(i=arguments.length,i){case 1:AK(r,p,this);break;case 2:TK(r,p,this,arguments[1]);break;case 3:OK(r,p,this,arguments[1],arguments[2]);break;case 4:RK(r,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),s=1;s<i;s++)o[s-1]=arguments[s];MK(r,p,this,o)}return!0};function gD(t,e,n,r){var i,o,s;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(o=t._events,o?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=new Pl,t._eventsCount=0),!s)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=pD(t),i&&i>0&&s.length>i)){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,LK(l)}return t}function LK(t){typeof console.warn=="function"?console.warn(t):console.log(t)}We.prototype.addListener=function(e,n){return gD(this,e,n,!1)};We.prototype.on=We.prototype.addListener;We.prototype.prependListener=function(e,n){return gD(this,e,n,!0)};function mD(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}We.prototype.once=function(e,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,mD(this,e,n)),this};We.prototype.prependOnceListener=function(e,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,mD(this,e,n)),this};We.prototype.removeListener=function(e,n){var r,i,o,s,l;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(r=i[e],!r)return this;if(r===n||r.listener&&r.listener===n)--this._eventsCount===0?this._events=new Pl:(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length;s-- >0;)if(r[s]===n||r[s].listener&&r[s].listener===n){l=r[s].listener,o=s;break}if(o<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount===0)return this._events=new Pl,this;delete i[e]}else NK(r,o);i.removeListener&&this.emit("removeListener",e,l||n)}return this};We.prototype.removeAllListeners=function(e){var n,r;if(r=this._events,!r)return this;if(!r.removeListener)return arguments.length===0?(this._events=new Pl,this._eventsCount=0):r[e]&&(--this._eventsCount===0?this._events=new Pl:delete r[e]),this;if(arguments.length===0){for(var i=Object.keys(r),o=0,s;o<i.length;++o)s=i[o],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=new Pl,this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n)do this.removeListener(e,n[n.length-1]);while(n[0]);return this};We.prototype.listeners=function(e){var n,r,i=this._events;return i?(n=i[e],n?typeof n=="function"?r=[n.listener||n]:r=DK(n):r=[]):r=[],r};We.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):vD.call(t,e)};We.prototype.listenerCount=vD;function vD(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}We.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function NK(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function Gd(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function DK(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}const PK=Object.freeze(Object.defineProperty({__proto__:null,default:We,EventEmitter:We},Symbol.toStringTag,{value:"Module"})),BK=oc(PK);function bu(){this.head=null,this.tail=null,this.length=0}bu.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};bu.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};bu.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};bu.prototype.clear=function(){this.head=this.tail=null,this.length=0};bu.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n};bu.prototype.concat=function(t){if(this.length===0)return U.alloc(0);if(this.length===1)return this.head.data;for(var e=U.allocUnsafe(t>>>0),n=this.head,r=0;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e};var IK=U.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function FK(t){if(t&&!IK(t))throw new Error("Unknown encoding: "+t)}function Zd(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),FK(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=$K;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=HK;break;default:this.write=zK;return}this.charBuffer=new U(6),this.charReceived=0,this.charLength=0}Zd.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(i>=55296&&i<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e};Zd.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e};Zd.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};function zK(t){return t.toString(this.encoding)}function $K(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function HK(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}It.ReadableState=yD;var lt=Vb("stream");rr(It,We);function VK(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}function UK(t,e){return t.listeners(e).length}function yD(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof ui&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new bu,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new Zd(t.encoding),this.encoding=t.encoding)}function It(t){if(!(this instanceof It))return new It(t);this._readableState=new yD(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),We.call(this)}It.prototype.push=function(t,e){var n=this._readableState;return!n.objectMode&&typeof t=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=U.from(t,e),e="")),wD(this,n,t,e,!1)};It.prototype.unshift=function(t){var e=this._readableState;return wD(this,e,t,"",!0)};It.prototype.isPaused=function(){return this._readableState.flowing===!1};function wD(t,e,n,r,i){var o=qK(e,n);if(o)t.emit("error",o);else if(n===null)e.reading=!1,JK(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var l=new Error("stream.unshift() after end event");t.emit("error",l)}else{var u;e.decoder&&!i&&!r&&(n=e.decoder.write(n),u=!e.objectMode&&n.length===0),i||(e.reading=!1),u||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&Bv(t))),KK(t,e)}else i||(e.reading=!1);return WK(e)}function WK(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}It.prototype.setEncoding=function(t){return this._readableState.decoder=new Zd(t),this._readableState.encoding=t,this};var yT=8388608;function jK(t){return t>=yT?t=yT:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function wT(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=jK(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}It.prototype.read=function(t){lt("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return lt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?yw(this):Bv(this),null;if(t=wT(t,e),t===0&&e.ended)return e.length===0&&yw(this),null;var r=e.needReadable;lt("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,lt("length less than watermark",r)),e.ended||e.reading?(r=!1,lt("reading or ended",r)):r&&(lt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=wT(n,e)));var i;return t>0?i=_D(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&yw(this)),i!==null&&this.emit("data",i),i};function qK(t,e){var n=null;return!U.isBuffer(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function JK(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,Bv(t)}}function Bv(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(lt("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?di(_T,t):_T(t))}function _T(t){lt("emit readable"),t.emit("readable"),DS(t)}function KK(t,e){e.readingMore||(e.readingMore=!0,di(GK,t,e))}function GK(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(lt("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}It.prototype._read=function(t){this.emit("error",new Error("not implemented"))};It.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,lt("pipe count=%d opts=%j",r.pipesCount,e);var i=!e||e.end!==!1,o=i?l:h;r.endEmitted?di(o):n.once("end",o),t.on("unpipe",s);function s(x){lt("onunpipe"),x===n&&h()}function l(){lt("onend"),t.end()}var u=ZK(n);t.on("drain",u);var c=!1;function h(){lt("cleanup"),t.removeListener("close",y),t.removeListener("finish",A),t.removeListener("drain",u),t.removeListener("error",v),t.removeListener("unpipe",s),n.removeListener("end",l),n.removeListener("end",h),n.removeListener("data",g),c=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var p=!1;n.on("data",g);function g(x){lt("ondata"),p=!1;var k=t.write(x);k===!1&&!p&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&xD(r.pipes,t)!==-1)&&!c&&(lt("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function v(x){lt("onerror",x),O(),t.removeListener("error",v),UK(t,"error")===0&&t.emit("error",x)}VK(t,"error",v);function y(){t.removeListener("finish",A),O()}t.once("close",y);function A(){lt("onfinish"),t.removeListener("close",y),O()}t.once("finish",A);function O(){lt("unpipe"),n.unpipe(t)}return t.emit("pipe",n),r.flowing||(lt("pipe resume"),n.resume()),t};function ZK(t){return function(){var e=t._readableState;lt("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,DS(t))}}It.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=xD(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};It.prototype.on=function(t,e){var n=We.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var r=this._readableState;!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Bv(this):di(YK,this))}return n};It.prototype.addListener=It.prototype.on;function YK(t){lt("readable nexttick read 0"),t.read(0)}It.prototype.resume=function(){var t=this._readableState;return t.flowing||(lt("resume"),t.flowing=!0,QK(this,t)),this};function QK(t,e){e.resumeScheduled||(e.resumeScheduled=!0,di(XK,t,e))}function XK(t,e){e.reading||(lt("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),DS(t),e.flowing&&!e.reading&&t.read(0)}It.prototype.pause=function(){return lt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(lt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function DS(t){var e=t._readableState;for(lt("flow",e.flowing);e.flowing&&t.read()!==null;);}It.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(lt("wrapped end"),e.decoder&&!e.ended){var s=e.decoder.end();s&&s.length&&r.push(s)}r.push(null)}),t.on("data",function(s){if(lt("wrapped data"),e.decoder&&(s=e.decoder.write(s)),!(e.objectMode&&s==null)&&!(!e.objectMode&&(!s||!s.length))){var l=r.push(s);l||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return iG(o,function(s){t.on(s,r.emit.bind(r,s))}),r._read=function(s){lt("wrapped _read",s),n&&(n=!1,t.resume())},r};It._fromList=_D;function _D(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.head.data:n=e.buffer.concat(e.length),e.buffer.clear()):n=eG(t,e.buffer,e.decoder),n}function eG(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?r=e.shift():r=n?tG(t,e):nG(t,e),r}function tG(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),t-=s,t===0){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}function nG(t,e){var n=U.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),t-=s,t===0){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}function yw(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,di(rG,e,t))}function rG(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function iG(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function xD(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}In.WritableState=PS;rr(In,We);function oG(){}function sG(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function PS(t,e){Object.defineProperty(this,"buffer",{get:gv(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof ui&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){dG(e,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ED(this)}PS.prototype.getBuffer=function(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};function In(t){if(!(this instanceof In)&&!(this instanceof ui))return new In(t);this._writableState=new PS(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),We.call(this)}In.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function lG(t,e){var n=new Error("write after end");t.emit("error",n),di(e,n)}function aG(t,e,n,r){var i=!0,o=!1;return n===null?o=new TypeError("May not write null values to stream"):!U.isBuffer(n)&&typeof n!="string"&&n!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),di(r,o),i=!1),i}In.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return typeof e=="function"&&(n=e,e=null),U.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),typeof n!="function"&&(n=oG),r.ended?lG(this,n):aG(this,r,t,n)&&(r.pendingcb++,i=fG(this,r,t,e,n)),i};In.prototype.cork=function(){var t=this._writableState;t.corked++};In.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&bD(this,t))};In.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function uG(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=U.from(e,n)),e}function fG(t,e,n,r,i){n=uG(e,n,r),U.isBuffer(n)&&(r="buffer");var o=e.objectMode?1:n.length;e.length+=o;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest=new sG(n,r,i),l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Mx(t,e,!1,o,n,r,i);return s}function Mx(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function cG(t,e,n,r,i){--e.pendingcb,n?di(i,r):i(r),t._writableState.errorEmitted=!0,t.emit("error",r)}function hG(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function dG(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(hG(n),e)cG(t,n,r,e,i);else{var o=SD(n);!o&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&bD(t,n),r?di(xT,t,n,o,i):xT(t,n,o,i)}}function xT(t,e,n,r){n||pG(t,e),e.pendingcb--,r(),kD(t,e)}function pG(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function bD(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;Mx(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new ED(e)}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback,h=e.objectMode?1:l.length;if(Mx(t,e,!1,h,l,u,c),n=n.next,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}In.prototype._write=function(t,e,n){n(new Error("not implemented"))};In.prototype._writev=null;In.prototype.end=function(t,e,n){var r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),!r.ending&&!r.finished&&gG(this,r,n)};function SD(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function bT(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function kD(t,e){var n=SD(e);return n&&(e.pendingcb===0?(bT(t,e),e.finished=!0,t.emit("finish")):bT(t,e)),n}function gG(t,e,n){e.ending=!0,kD(t,e),n&&(e.finished?di(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function ED(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}rr(ui,It);var ST=Object.keys(In.prototype);for(var ww=0;ww<ST.length;ww++){var _w=ST[ww];ui.prototype[_w]||(ui.prototype[_w]=In.prototype[_w])}function ui(t){if(!(this instanceof ui))return new ui(t);It.call(this,t),In.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",mG)}function mG(){this.allowHalfOpen||this._writableState.ended||di(vG,this)}function vG(t){t.end()}rr(fi,ui);function yG(t){this.afterTransform=function(e,n){return wG(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function wG(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,n!=null&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function fi(t){if(!(this instanceof fi))return new fi(t);ui.call(this,t),this._transformState=new yG(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){kT(e,n)}):kT(e)})}fi.prototype.push=function(t,e){return this._transformState.needTransform=!1,ui.prototype.push.call(this,t,e)};fi.prototype._transform=function(t,e,n){throw new Error("Not implemented")};fi.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};fi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function kT(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}rr(ec,fi);function ec(t){if(!(this instanceof ec))return new ec(t);fi.call(this,t)}ec.prototype._transform=function(t,e,n){n(null,t)};rr(co,We);co.Readable=It;co.Writable=In;co.Duplex=ui;co.Transform=fi;co.PassThrough=ec;co.Stream=co;function co(){We.call(this)}co.prototype.pipe=function(t,e){var n=this;function r(h){t.writable&&t.write(h)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",s),n.on("close",l));var o=!1;function s(){o||(o=!0,t.end())}function l(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(h){if(c(),We.listenerCount(this,"error")===0)throw h}n.on("error",u),t.on("error",u);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};const _G=Object.freeze(Object.defineProperty({__proto__:null,default:co,Readable:It,Writable:In,Duplex:ui,Transform:fi,PassThrough:ec,Stream:co},Symbol.toStringTag,{value:"Module"})),BS=oc(_G);var xG=NS,rt=cc,ua=BK,Qo=BS,ht=oa,IS=rt.Tap,fn=xG.Type,Gt=ht.debuglog("avsc:services"),vn=ht.format,Ko={namespace:"org.apache.avro.ipc"},CD=fn.forSchema("boolean",Ko),Xo=fn.forSchema({type:"map",values:"bytes"},Ko),FS=fn.forSchema("string",Ko),Yd=fn.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",Xo],default:null}]},Ko),Qd=fn.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",Xo],default:null}]},Ko),zS=16,$S=new zs("",fn.forSchema({name:"PingRequest",type:"record",fields:[]},Ko),fn.forSchema(["string"],Ko),fn.forSchema("null",Ko));function zs(t,e,n,r,i,o){if(this.name=t,!fn.isType(e,"record"))throw new Error("invalid request type");if(this.requestType=e,!fn.isType(n,"union")||!fn.isType(n.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=n,i&&(!fn.isType(r,"null")||n.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=r,this.oneWay=!!i,this.doc=o!==void 0?""+o:void 0,Object.freeze(this)}zs.forSchema=function(t,e,n){if(n=n||{},!rt.isValidName(t))throw new Error(vn("invalid message name: %s",t));if(!Array.isArray(e.request))throw new Error(vn("invalid message request: %s",t));var r=vn("%s.%sRequest",Ko.namespace,rt.capitalize(t)),i=fn.forSchema({name:r,type:"record",namespace:n.namespace||"",fields:e.request},n);if(delete n.registry[r],!e.response)throw new Error(vn("invalid message response: %s",t));var o=fn.forSchema(e.response,n);if(e.errors!==void 0&&!Array.isArray(e.errors))throw new Error(vn("invalid message errors: %s",t));var s=fn.forSchema(["string"].concat(e.errors||[]),n),l=!!e["one-way"];return new zs(t,i,s,o,l,e.doc)};zs.prototype.schema=fn.prototype.getSchema;zs.prototype._attrs=function(t){var e=this.requestType._attrs(t),n={request:e.fields,response:this.responseType._attrs(t)},r=this.doc;r!==void 0&&(n.doc=r);var i=this.errorType._attrs(t);return i.length>1&&(n.errors=i.slice(1)),this.oneWay&&(n["one-way"]=!0),n};rt.addDeprecatedGetters(zs,["name","errorType","requestType","responseType"]);zs.prototype.isOneWay=ht.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function et(t,e,n,r,i){if(typeof t!="string")return et.forProtocol(t,e);this.name=t,this._messagesByName=e||{},this.messages=Object.freeze(rt.objectValues(this._messagesByName)),this._typesByName=n||{},this.types=Object.freeze(rt.objectValues(this._typesByName)),this.protocol=r,this._hashStr=rt.getHash(JSON.stringify(r)).toString("binary"),this.doc=r.doc?""+r.doc:void 0,this._server=i||this.createServer({silent:!0}),Object.freeze(this)}et.Client=vi;et.Server=vo;et.compatible=function(t,e){try{OD(t,e)}catch{return!1}return!0};et.forProtocol=function(t,e){e=e||{};var n=t.protocol;if(!n)throw new Error("missing protocol name");if(t.namespace!==void 0)e.namespace=t.namespace;else{var r=/^(.*)\.[^.]+$/.exec(n);r&&(e.namespace=r[1])}n=rt.qualify(n,e.namespace),t.types&&t.types.forEach(function(o){fn.forSchema(o,e)});var i;return t.messages&&(i={},Object.keys(t.messages).forEach(function(o){i[o]=zs.forSchema(o,t.messages[o],e)})),new et(n,i,e.registry,t)};et.isService=function(t){return!!t&&t.hasOwnProperty("_hashStr")};et.prototype.createClient=function(t){var e=new vi(this,t);return ct.nextTick(function(){if(t&&t.server){var n={objectMode:!0},r=[new Qo.PassThrough(n),new Qo.PassThrough(n)];t.server.createChannel({readable:r[0],writable:r[1]},n),e.createChannel({readable:r[1],writable:r[0]},n)}else t&&t.transport&&e.createChannel(t.transport)}),e};et.prototype.createServer=function(t){return new vo(this,t)};Object.defineProperty(et.prototype,"hash",{enumerable:!0,get:function(){return rt.bufferFrom(this._hashStr,"binary")}});et.prototype.message=function(t){return this._messagesByName[t]};et.prototype.type=function(t){return this._typesByName[t]};et.prototype.inspect=function(){return vn("<Service %j>",this.name)};rt.addDeprecatedGetters(et,["message","messages","name","type","types"]);et.prototype.createEmitter=ht.deprecate(function(t,e){e=e||{};var n=this.createClient({cache:e.cache,buffering:!1,strictTypes:e.strictErrors,timeout:e.timeout}),r=n.createChannel(t,e);return SG(n,r),r},"use `.createClient()` instead of `.createEmitter()`");et.prototype.createListener=ht.deprecate(function(t,e){if(e&&e.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(t,e)},"use `.createServer().createChannel()` instead of `.createListener()`");et.prototype.emit=ht.deprecate(function(t,e,n,r){if(!n||!this.equals(n.client._svc$))throw new Error("invalid emitter");var i=n.client;return vi.prototype.emitMessage.call(i,t,e,r&&r.bind(this)),n.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`");et.prototype.equals=ht.deprecate(function(t){return et.isService(t)&&this.getFingerprint().equals(t.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead");et.prototype.getFingerprint=ht.deprecate(function(t){return rt.getHash(JSON.stringify(this.protocol),t)},"use `.hash` instead of `.getFingerprint()`");et.prototype.getSchema=ht.deprecate(fn.prototype.getSchema,"use `.protocol` instead of `.getSchema()`");et.prototype.on=ht.deprecate(function(t,e){var n=this;return this._server.onMessage(t,function(r,i){return e.call(n,r,this.channel,i)}),this},"use `.createServer().onMessage()` instead of `.on()`");et.prototype.subprotocol=ht.deprecate(function(){var t=this._server,e={strictTypes:t._strict,cache:t._cache},n=new vo(t.service,e);return n._handlers=Object.create(t._handlers),new et(this.name,this._messagesByName,this._typesByName,this.protocol,n)},"`.subprotocol()` will be removed in 5.1");et.prototype._attrs=function(t){var e={protocol:this.name},n=[];this.types.forEach(function(i){if(i.getName()!==void 0){var o=i._attrs(t);typeof o!="string"&&n.push(o)}}),n.length&&(e.types=n);var r=Object.keys(this._messagesByName);return r.length&&(e.messages={},r.forEach(function(i){e.messages[i]=this._messagesByName[i]._attrs(t)},this)),t&&t.exportAttrs&&this.doc!==void 0&&(e.doc=this.doc),e};function bG(t,e,n){n===void 0&&typeof e=="function"&&(n=e,e=void 0);var r=new et({protocol:"Empty"},Ko),i;r.createClient({timeout:e&&e.timeout}).createChannel(t,{scope:e&&e.scope,endWritable:typeof t=="function"}).once("handshake",function(o,s){i=s.serverProtocol,this.destroy(!0)}).once("eot",function(o,s){s&&!/interrupted/.test(s)?n(s):n(null,JSON.parse(i))})}function vi(t,e){e=e||{},ua.EventEmitter.call(this),this._svc$=t,this._channels$=[],this._fns$=[],this._buffering$=!!e.buffering,this._cache$=e.cache||{},this._policy$=e.channelPolicy,this._strict$=!!e.strictTypes,this._timeout$=rt.getOption(e,"timeout",1e4),e.remoteProtocols&&RD(this._cache$,e.remoteProtocols,t,!0),this._svc$.messages.forEach(function(n){this[n.name]=this._createMessageHandler$(n)},this)}ht.inherits(vi,ua.EventEmitter);vi.prototype.activeChannels=function(){return this._channels$.slice()};vi.prototype.createChannel=function(t,e){var n=e&&e.objectMode,r;if(typeof t=="function"){var i;n?i=t:i=function(h){var p=new ep,g=t(function(v,y){if(v){h(v);return}var A=new Su().once("error",function(O){r.destroy(O)});h(null,y.pipe(A))});if(g)return p.pipe(g),p},r=new HS(this,i,e)}else{var o,s;if(DD(t)?o=s=t:(o=t.readable,s=t.writable),!n){var l=new dc;o=o.pipe(l);var u=new tp;u.pipe(s),s=u}r=new Iv(this,o,s,e),n||(r.once("eot",function(){o.unpipe(l),u.unpipe(s)}),l.once("error",function(h){r.destroy(h)}))}var c=this._channels$;return c.push(r),r.once("_drain",function(){c.splice(c.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",r),r};vi.prototype.destroyChannels=function(t){this._channels$.forEach(function(e){e.destroy(t&&t.noWait)})};vi.prototype.emitMessage=function(t,e,n,r){var i=PD(this._svc$,t),o=new Fv(i,{},e);this._emitMessage$(o,n,r)};vi.prototype.remoteProtocols=function(){return MD(this._cache$,!0)};Object.defineProperty(vi.prototype,"service",{enumerable:!0,get:function(){return this._svc$}});vi.prototype.use=function(){var t,e,n;for(t=0,e=arguments.length;t<e;t++)n=arguments[t],this._fns$.push(n.length<3?n(this):n);return this};vi.prototype._emitMessage$=function(t,e,n){!n&&typeof e=="function"&&(n=e,e=void 0);var r=this,i=this._channels$,o=i.length;if(!o){if(this._buffering$)Gt("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(t,e,n)});else{var s=new Error("no active channels");ct.nextTick(function(){n?n.call(new US(t._msg),s):r.emit("error",s)})}return}e=e||{},e.timeout===void 0&&(e.timeout=this._timeout$);var l;if(o===1)l=i[0];else if(this._policy$){if(l=this._policy$(this._channels$.slice()),!l){Gt("policy returned no channel, skipping call");return}}else l=i[Math.floor(Math.random()*o)];l._emit(t,e,function(u,c){var h=this,p=h.message.errorType;if(u){r._strict$&&(u=p.clone(u.message,{wrapUnions:!0})),g(u);return}if(!c){g();return}u=c.error,r._strict$||(u===void 0?u=null:fn.isType(p,"union:unwrapped")?typeof u=="string"&&(u=new Error(u)):u&&u.string&&typeof u.string=="string"&&(u=new Error(u.string))),g(u,c.response);function g(v,y){n?n.call(h,v,y):v&&r.emit("error",v)}})};vi.prototype._createMessageHandler$=function(t){var e=t.requestType.getFields(),n=e.map(function(i){return i.getName()}),r="return function "+t.name+"(";return n.length&&(r+=n.join(", ")+", "),r+=`opts, cb) {
`,r+="  var req = {",r+=n.map(function(i){return i+": "+i}).join(", "),r+=`};
`,r+="  return this.emitMessage('"+t.name+`', req, opts, cb);
`,r+="};",new Function(r)()};function vo(t,e){e=e||{},ua.EventEmitter.call(this),this.service=t,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=e.cache||{},this._defaultHandler=e.defaultHandler,this._sysErrFormatter=e.systemErrorFormatter,this._silent=!!e.silent,this._strict=!!e.strictTypes,e.remoteProtocols&&RD(this._cache,e.remoteProtocols,t,!1),t.messages.forEach(function(n){var r=n.name;e.noCapitalize||(r=rt.capitalize(r)),this["on"+r]=this._createMessageHandler(n)},this)}ht.inherits(vo,ua.EventEmitter);vo.prototype.activeChannels=function(){return rt.objectValues(this._channels)};vo.prototype.createChannel=function(t,e){var n=e&&e.objectMode,r;if(typeof t=="function"){var i;n?i=t:i=function(p){var g=new Su().once("error",function(v){r.destroy(v)});return t(function(v,y){if(v){p(v);return}var A=new ep;A.pipe(y),p(null,A)}).pipe(g)},r=new AD(this,i,e)}else{var o,s;if(DD(t)?o=s=t:(o=t.readable,s=t.writable),!n){var l=new dc;o=o.pipe(l);var u=new tp;u.pipe(s),s=u}r=new TD(this,o,s,e),n||(r.once("eot",function(){o.unpipe(l),u.unpipe(s)}),l.once("error",function(p){r.destroy(p)}))}this.listeners("error").length||this.on("error",this._onError);var c=this._nextChannelId++,h=this._channels;return h[c]=r.once("eot",function(){delete h[c]}),this.emit("channel",r),r};vo.prototype.onMessage=function(t,e){return PD(this.service,t),this._handlers[t]=e,this};vo.prototype.remoteProtocols=function(){return MD(this._cache,!1)};vo.prototype.use=function(){var t,e,n;for(t=0,e=arguments.length;t<e;t++)n=arguments[t],this._fns.push(n.length<3?n(this):n);return this};vo.prototype._createMessageHandler=function(t){var e=t.name,n=t.requestType.fields,r=n.length,i=n.length?", "+n.map(function(s){return"req."+s.name}).join(", "):"",o=`return function (handler) {
`;return o+="  if (handler.length > "+r+`) {
`,o+="    return this.onMessage('"+e+`', function (req, cb) {
`,o+="      return handler.call(this"+i+`, cb);
`,o+=`    });
`,o+=`  } else {
`,o+="    return this.onMessage('"+e+`', function (req) {
`,o+="      return handler.call(this"+i+`);
`,o+=`    });
`,o+=`  }
`,o+=`};
`,new Function(o)()};vo.prototype._onError=function(t){!this._silent&&t.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),t.rpcCode?(console.error(t.rpcCode),console.error(t.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(t)))};function zn(t,e){e=e||{},ua.EventEmitter.call(this),this.client=t,this.timeout=rt.getOption(e,"timeout",t._timeout$),this._endWritable=!!rt.getOption(e,"endWritable",!0),this._prefix=LD(e.scope);var n=t._cache$,r=t._svc$,i=e.serverHash;i||(i=r.hash);var o=n[i];o||(i=r.hash,o=n[i]=new fa(r,r,i)),this._adapter=o,this._registry=new Xd(this,zS),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(s,l){Gt("client channel EOT"),this.destroyed=!0,this.emit("eot",s,l)})}ht.inherits(zn,ua.EventEmitter);zn.prototype.destroy=function(t){Gt("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var e=this._registry,n=this.pending;t&&e.clear(),t||!n?WS(t)?(Gt("fatal client channel error: %s",t),this.emit("_eot",n,t)):this.emit("_eot",n):Gt("client channel entering drain mode (%s pending)",n)};zn.prototype.ping=function(t,e){!e&&typeof t=="function"&&(e=t,t=void 0);var n=this,r=new Fv($S);this._emit(r,{timeout:t},function(i){e?e.call(n,i):i&&n.destroy(i)})};zn.prototype._createHandshakeRequest=function(t,e){var n=this.client._svc$;return{clientHash:n.hash,clientProtocol:e?null:JSON.stringify(n.protocol),serverHash:t._hash}};zn.prototype._emit=function(t,e,n){var r=t._msg,i=r.oneWay?void 0:new VS(r,{}),o=new US(r,this),s=this;this.pending++,ct.nextTick(function(){if(!r.name)l(t,i,u);else{s.emit("outgoingCall",o,e);var h=s.client._fns$;Gt("starting client middleware chain (%s middleware)",h.length),BD({fns:h,ctx:o,wreq:t,wres:i,onTransition:l,onCompletion:u,onError:c})}});function l(h,p,g){var v,y;if(s.destroyed)v=new Error("channel destroyed");else try{y=h.toBuffer()}catch{v=Nx(vn("invalid %j request",r.name),h,[{name:"headers",type:Xo},{name:"request",type:r.requestType}])}if(v){g(v);return}var A=e&&e.timeout!==void 0?e.timeout:s.timeout,O=s._registry.add(A,function(x,k,b){if(!x&&!r.oneWay)try{b._decodeResponse(k,p,r)}catch(T){x=T}g(x)});O|=s._prefix,Gt("sending message %s",O),s._send(O,y,!!r&&r.oneWay)}function u(h){s.pending--,n.call(o,h,i),s.draining&&!s.destroyed&&!s.pending&&s.destroy()}function c(h){s.client.emit("error",h,s)}};zn.prototype._getAdapter=function(t){var e=t.serverHash,n=this.client._cache$,r=n[e];if(r)return r;var i=JSON.parse(t.serverProtocol),o=et.forProtocol(i);return r=new fa(this.client._svc$,o,e,!0),n[e]=r};zn.prototype._matchesPrefix=function(t){return ND(t,this._prefix)};zn.prototype._send=rt.abstractFunction;rt.addDeprecatedGetters(zn,["pending","timeout"]);zn.prototype.getCache=ht.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`");zn.prototype.getProtocol=ht.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`");zn.prototype.isDestroyed=ht.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function HS(t,e,n){zn.call(this,t,n),this._writableFactory=e,(!n||!n.noPing)&&(Gt("emitting ping request"),this.ping())}ht.inherits(HS,zn);HS.prototype._send=function(t,e){var n=this._registry.get(t),r=this._adapter,i=this;return ct.nextTick(o),!0;function o(s){if(!i.destroyed){var l=i._createHandshakeRequest(r,!s),u=i._writableFactory.call(i,function(c,h){if(c){n(c);return}h.on("data",function(p){Gt("received response %s",p.id);var g=U.concat(p.payload);try{var v=zv(Qd,g),y=v.head;y.serverHash&&(r=i._getAdapter(y))}catch(O){n(O);return}var A=y.match;Gt("handshake match: %s",A),i.emit("handshake",l,y),A==="NONE"?ct.nextTick(function(){o(!0)}):(i._adapter=r,n(null,v.tail,r))})});if(!u){n(new Error("invalid writable stream"));return}u.write({id:t,payload:[Yd.toBuffer(l),e]}),i._endWritable&&u.end()}}};function Iv(t,e,n,r){zn.call(this,t,r),this._readable=e,this._writable=n,this._connected=!!(r&&r.noPing),this._readable.on("end",h),this._writable.on("finish",p);var i=this,o=null;this.once("eot",function(){o&&(clearTimeout(o),o=null),i._connected||i.emit("_ready"),this._writable.removeListener("finish",p),this._endWritable&&(Gt("ending transport"),this._writable.end()),this._readable.removeListener("data",u).removeListener("data",c).removeListener("end",h)});var s;this._connected?this._readable.on("data",c):(this._readable.on("data",u),ct.nextTick(l),i.timeout&&(o=setTimeout(function(){i.destroy(new Error("timeout"))},i.timeout)));function l(g){if(!i.destroyed){s=i._createHandshakeRequest(i._adapter,!g);var v=[Yd.toBuffer(s),rt.bufferFrom([0,0])];i._writable.write({id:i._prefix,payload:v})}}function u(g){if(!i._matchesPrefix(g.id)){Gt("discarding unscoped response %s (still connecting)",g.id);return}var v=U.concat(g.payload);try{var y=zv(Qd,v).head;y.serverHash&&(i._adapter=i._getAdapter(y))}catch(O){i.destroy(O);return}var A=y.match;Gt("handshake match: %s",A),i.emit("handshake",s,y),A==="NONE"?ct.nextTick(function(){l(!0)}):(Gt("successfully connected"),o&&(clearTimeout(o),o=null),i._readable.removeListener("data",u).on("data",c),i._connected=!0,i.emit("_ready"),s=null)}function c(g){var v=g.id;if(!i._matchesPrefix(v)){Gt("discarding unscoped message %s",v);return}var y=i._registry.get(v);y&&ct.nextTick(function(){Gt("received message %s",v),y(null,U.concat(g.payload),i._adapter)})}function h(){i.destroy(!0)}function p(){i.destroy()}}ht.inherits(Iv,zn);Iv.prototype._emit=function(){if(this._connected||this.draining)zn.prototype._emit.apply(this,arguments);else{Gt("queuing request");var t=[],e,n;for(e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);this.once("_ready",function(){this._emit.apply(this,t)})}};Iv.prototype._send=function(t,e,n){if(n){var r=this;ct.nextTick(function(){r._registry.get(t)(null,rt.bufferFrom([0,0,0]),r._adapter)})}return this._writable.write({id:t,payload:[e]})};function Er(t,e){e=e||{},ua.EventEmitter.call(this),this.server=t,this._endWritable=!!rt.getOption(e,"endWritable",!0),this._prefix=LD(e.scope);var n=t._cache,r=t.service,i=r.hash;n[i]||(n[i]=new fa(r,r,i)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(o,s){Gt("server channel EOT"),this.emit("eot",o,s)})}ht.inherits(Er,ua.EventEmitter);Er.prototype.destroy=function(t){this.draining||(this.draining=!0,this.emit("_drain")),(t||!this.pending)&&(this.destroyed=!0,WS(t)?(Gt("fatal server channel error: %s",t),this.emit("_eot",this.pending,t)):this.emit("_eot",this.pending))};Er.prototype._createHandshakeResponse=function(t,e){var n=this.server.service,r=n.hash,i=e&&e.serverHash.equals(r);return{match:t?"NONE":i?"BOTH":"CLIENT",serverProtocol:i?null:JSON.stringify(n.protocol),serverHash:i?null:r}};Er.prototype._getAdapter=function(t){var e=t.clientHash,n=this.server._cache[e];if(n)return n;if(!t.clientProtocol)throw Bl("UNKNOWN_PROTOCOL");var r=JSON.parse(t.clientProtocol),i=et.forProtocol(r);return n=new fa(i,this.server.service,e,!0),this.server._cache[e]=n};Er.prototype._matchesPrefix=function(t){return ND(t,this._prefix)};Er.prototype._receive=function(t,e,n){var r=this,i;try{i=e._decodeRequest(t)}catch(g){n(r._encodeSystemError(Bl("INVALID_REQUEST",g)));return}var o=i._msg,s=new VS(o,{});if(!o.name){s.response=null,n(s.toBuffer(),!1);return}var l=new US(o,this);r.emit("incomingCall",l);var u=this.server._fns;Gt("starting server middleware chain (%s middleware)",u.length),r.pending++,BD({fns:u,ctx:l,wreq:i,wres:s,onTransition:c,onCompletion:h,onError:p});function c(g,v,y){var A=r.server._handlers[o.name];if(A){var k=!o.oneWay;try{k?A.call(l,g.request,function(b,T){k=!1,v.error=b,v.response=T,y()}):(A.call(l,g.request),y())}catch(b){k?(k=!1,y(b)):p(b)}}else{var O=r.server._defaultHandler;if(O)O.call(l,g,v,y);else{var x=new Error(vn("no handler for %s",o.name));y(Bl("NOT_IMPLEMENTED",x))}}}function h(g){r.pending--;var v=r.server,y;if(!g){var A=s.error,O=v._strict;O||(WS(A)?s.error=o.errorType.clone(A.message,{wrapUnions:!0}):A===null&&(A=s.error=void 0),A===void 0&&s.response===void 0&&o.responseType.isValid(null)&&(s.response=null));try{y=s.toBuffer()}catch{s.error!==void 0?g=Nx(vn("invalid %j error",o.name),s,[{name:"headers",type:Xo},{name:"error",type:o.errorType}]):g=Nx(vn("invalid %j response",o.name),s,[{name:"headers",type:Xo},{name:"response",type:o.responseType}])}}y?A!==void 0&&v.emit("error",Bl("APPLICATION_ERROR",A)):y=r._encodeSystemError(g,s.headers),n(y,o.oneWay),r.draining&&!r.pending&&r.destroy()}function p(g){r.server.emit("error",g,r)}};rt.addDeprecatedGetters(Er,["pending"]);Er.prototype.getCache=ht.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`");Er.prototype.getProtocol=ht.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`");Er.prototype.isDestroyed=ht.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");Er.prototype._encodeSystemError=function(t,e){var n=this.server;n.emit("error",t,this);var r;n._sysErrFormatter?r=n._sysErrFormatter.call(this,t):t.rpcCode&&(r=t.message);var i;if(e)try{i=Xo.toBuffer(e)}catch(o){n.emit("error",o,this)}return U.concat([i||rt.bufferFrom([0]),rt.bufferFrom([1,0]),FS.toBuffer(r||"internal server error")])};function AD(t,e,n){Er.call(this,t,n),this._writable=void 0;var r=this,i;ct.nextTick(function(){i=e.call(r,function(u,c){ct.nextTick(function(){if(u){l(u);return}r._writable=c.on("finish",l),r.emit("_writable")})}).on("data",o).on("end",s)});function o(u){var c=u.id,h=U.concat(u.payload),p;try{var g=zv(Yd,h),v=g.head,y=r._getAdapter(v)}catch(x){p=Bl("INVALID_HANDSHAKE_REQUEST",x)}var A=r._createHandshakeResponse(p,v);r.emit("handshake",v,A),p?O(r._encodeSystemError(p)):r._receive(g.tail,y,O);function O(x){if(!r.destroyed){if(!r._writable){r.once("_writable",function(){O(x)});return}r._writable.write({id:c,payload:[Qd.toBuffer(A),x]})}r._writable&&r._endWritable&&r._writable.end()}}function s(){r.destroy()}function l(u){i.removeListener("data",o).removeListener("end",s),r.destroy(u||!0)}}ht.inherits(AD,Er);function TD(t,e,n,r){Er.call(this,t,r),this._adapter=void 0,this._writable=n.on("finish",u),this._readable=e.on("data",o).on("end",l),this.once("_drain",function(){this._readable.removeListener("data",o).removeListener("data",s).removeListener("end",l)}).once("eot",function(){this._writable.removeListener("finish",u),this._endWritable&&this._writable.end()});var i=this;function o(c){var h=c.id;if(!i._matchesPrefix(h))return;var p=U.concat(c.payload),g;try{var v=zv(Yd,p),y=v.head;i._adapter=i._getAdapter(y)}catch(x){g=Bl("INVALID_HANDSHAKE_REQUEST",x)}var A=i._createHandshakeResponse(g,y);i.emit("handshake",y,A),g?O(i._encodeSystemError(g)):(i._readable.removeListener("data",o).on("data",s),i._receive(v.tail,i._adapter,O));function O(x){i.destroyed||i._writable.write({id:h,payload:[Qd.toBuffer(A),x]})}}function s(c){var h=c.id;if(!!i._matchesPrefix(h)){var p=U.concat(c.payload);i._receive(p,i._adapter,function(g,v){i.destroyed||v||i._writable.write({id:h,payload:[g]})})}}function l(){i.destroy()}function u(){i.destroy(!0)}}ht.inherits(TD,Er);function Fv(t,e,n){this._msg=t,this.headers=e||{},this.request=n||{}}Fv.prototype.toBuffer=function(){var t=this._msg;return U.concat([Xo.toBuffer(this.headers),FS.toBuffer(t.name),t.requestType.toBuffer(this.request)])};function VS(t,e,n,r){this._msg=t,this.headers=e,this.error=n,this.response=r}VS.prototype.toBuffer=function(){var t=Xo.toBuffer(this.headers),e=this.error!==void 0;return U.concat([t,CD.toBuffer(e),e?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function US(t,e){this.channel=e,this.locals={},this.message=t,Object.freeze(this)}function Xd(t,e){this._ctx=t,this._mask=-1>>>(e|0),this._id=0,this._n=0,this._cbs={}}Xd.prototype.get=function(t){return this._cbs[t&this._mask]};Xd.prototype.add=function(t,e){this._id=this._id+1&this._mask;var n=this,r=this._id,i;return t>0&&(i=setTimeout(function(){o(new Error("timeout"))},t)),this._cbs[r]=o,this._n++,r;function o(){!n._cbs[r]||(delete n._cbs[r],n._n--,i&&clearTimeout(i),e.apply(n._ctx,arguments))}};Xd.prototype.clear=function(){Object.keys(this._cbs).forEach(function(t){this._cbs[t](new Error("interrupted"))},this)};function fa(t,e,n,r){this._clientSvc=t,this._serverSvc=e,this._hash=n,this._isRemote=!!r,this._readers=OD(t,e)}fa.prototype._decodeRequest=function(t){var e=new IS(t),n=Xo._read(e),r=FS._read(e),i,o;if(r?(i=this._serverSvc.message(r),o=this._readers[r+"?"]._read(e)):i=$S,!e.isValid())throw new Error(vn("truncated %s request",r||"ping$"));return new Fv(i,n,o)};fa.prototype._decodeResponse=function(t,e,n){var r=new IS(t);rt.copyOwnProperties(Xo._read(r),e.headers,!0);var i=CD._read(r),o=n.name;if(o){var s=this._readers[o+(i?"*":"!")];if(n=this._clientSvc.message(o),i?e.error=s._read(r):e.response=s._read(r),!r.isValid())throw new Error(vn("truncated %s response",o))}else n=$S};function Su(){Qo.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=rt.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}ht.inherits(Su,Qo.Transform);Su.prototype._transform=function(t,e,n){t=U.concat([this._buf,t]);for(var r;t.length>=4&&t.length>=(r=t.readInt32BE(0))+4;){if(r)this._bufs.push(t.slice(4,r+4));else{var i=this._bufs;this._bufs=[],this.push({id:null,payload:i})}t=t.slice(r+4)}this._buf=t,n()};Su.prototype._flush=function(t){if(this._buf.length||this._bufs.length){var e=this._bufs.slice();e.unshift(this._buf);var n=Bl("TRAILING_DATA");n.trailingData=U.concat(e).toString(),this.emit("error",n)}t()};function ep(){Qo.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}ht.inherits(ep,Qo.Transform);ep.prototype._transform=function(t,e,n){var r=t.payload,i,o,s;for(i=0,o=r.length;i<o;i++)s=r[i],this.push(Lx(s.length)),this.push(s);this.push(Lx(0)),n()};function dc(){Qo.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=rt.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}ht.inherits(dc,Qo.Transform);dc.prototype._transform=function(t,e,n){for(t=U.concat([this._buf,t]);;){if(this._id===void 0){if(t.length<8){this._buf=t,n();return}this._id=t.readInt32BE(0),this._frameCount=t.readInt32BE(4),t=t.slice(8)}for(var r;this._frameCount&&t.length>=4&&t.length>=(r=t.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(t.slice(4,r+4)),t=t.slice(r+4);if(this._frameCount){this._buf=t,n();return}else{var i={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(i)}}};dc.prototype._flush=Su.prototype._flush;function tp(){Qo.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}ht.inherits(tp,Qo.Transform);tp.prototype._transform=function(t,e,n){var r=t.payload,i=r.length,o;o=rt.newBuffer(8),o.writeInt32BE(t.id,0),o.writeInt32BE(i,4),this.push(o);var s;for(s=0;s<i;s++)o=r[s],this.push(Lx(o.length)),this.push(o);n()};function Lx(t){var e=rt.newBuffer(4);return e.writeInt32BE(t),e}function zv(t,e){var n=new IS(e),r=t._read(n);if(!n.isValid())throw new Error(vn("truncated %j",t.schema()));return{head:r,tail:n.buf.slice(n.pos)}}function xw(t,e){return t.equals(e)?t:t.createResolver(e)}function OD(t,e){var n={};return t.messages.forEach(function(r){var i=r.name,o=e.message(i);try{if(!o)throw new Error(vn("missing server message: %s",i));if(o.oneWay!==r.oneWay)throw new Error(vn("inconsistent one-way message: %s",i));n[i+"?"]=xw(o.requestType,r.requestType),n[i+"*"]=xw(r.errorType,o.errorType),n[i+"!"]=xw(r.responseType,o.responseType)}catch(s){throw Bl("INCOMPATIBLE_PROTOCOL",s)}}),n}function RD(t,e,n,r){Object.keys(e).forEach(function(i){var o=e[i],s,l;r?(s=n,l=et.forProtocol(o)):(s=et.forProtocol(o),l=n),t[i]=new fa(s,l,i,!0)})}function MD(t,e){var n={};return Object.keys(t).forEach(function(r){var i=t[r];if(i._isRemote){var o=e?i._serverSvc:i._clientSvc;n[r]=o.protocol}}),n}function WS(t){return!!t&&Object.prototype.toString.call(t)==="[object Error]"}function SG(t,e){return t.on("error",function(n){e.emit("error",n,t)})}function Tm(t,e){var n=new Error(t);return n.cause=e,n}function Bl(t,e){var n=Tm(t.toLowerCase().replace(/_/g," "),e);return n.rpcCode=e&&e.rpcCode?e.rpcCode:t,n}function Nx(t,e,n){var r=[],i,o,s;for(i=0,o=n.length;i<o;i++)s=n[i],s.type.isValid(e[s.name],{errorHook:c});var l=r.map(function(h){return vn("%s = %j but expected %s",h.path,h.value,h.type)}).join(", "),u=new Error(vn("%s (%s)",t,l));return u.details=r,u;function c(h,p,g){var v=[],y,A,O;for(y=0,A=h.length;y<A;y++)O=h[y],isNaN(O)?v.push("."+O):v.push("["+O+"]");r.push({path:s.name+v.join(""),value:p,type:g})}}function LD(t){return t?rt.getHash(t).readInt16BE(0)<<32-zS:0}function ND(t,e){return(t^e)>>32-zS===0}function DD(t){return!!(t&&t.pipe)}function PD(t,e){var n=t.message(e);if(!n)throw new Error(vn("unknown message: %s",e));return n}function BD(t){var e=[t.wreq,t.wres],n=[],r;i(0);function i(s){var l=!1;s<t.fns.length?t.fns[s].apply(t.ctx,e.concat(function(u,c){if(l){t.onError(Tm("duplicate forward middleware call",u));return}if(l=!0,u||t.wres&&(t.wres.error!==void 0||t.wres.response!==void 0)){r=u,o();return}c&&n.push(c),i(++s)})):t.onTransition.apply(t.ctx,e.concat(function(u){if(l){t.onError(Tm("duplicate handler call",u));return}l=!0,r=u,ct.nextTick(o)}))}function o(){var s=n.pop();if(s){var l=!1;s.call(t.ctx,r,function(u){if(l){t.onError(Tm("duplicate backward middleware call",u));return}r=u,l=!0,o()})}else t.onCompletion.call(t.ctx,r)}}var kG={Adapter:fa,HANDSHAKE_REQUEST_TYPE:Yd,HANDSHAKE_RESPONSE_TYPE:Qd,Message:zs,Registry:Xd,Service:et,discoverProtocol:bG,streams:{FrameDecoder:Su,FrameEncoder:ep,NettyDecoder:dc,NettyEncoder:tp}};function jS(){return new Error("unsupported in the browser")}function EG(){return function(t,e,n){n(jS())}}function CG(){return function(){throw jS()}}var AG={createImportHook:EG,createSyncImportHook:CG,existsSync:function(){return!1},readFileSync:function(){throw jS()}};function ID(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];i==="."?t.splice(r,1):i===".."?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var TG=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,qS=function(t){return TG.exec(t).slice(1)};function H0(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;t=r+"/"+t,e=r.charAt(0)==="/"}return t=ID(GS(t.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+t||"."}function JS(t){var e=KS(t),n=RG(t,-1)==="/";return t=ID(GS(t.split("/"),function(r){return!!r}),!e).join("/"),!t&&!e&&(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function KS(t){return t.charAt(0)==="/"}function FD(){var t=Array.prototype.slice.call(arguments,0);return JS(GS(t,function(e,n){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function zD(t,e){t=H0(t).substr(1),e=H0(e).substr(1);function n(c){for(var h=0;h<c.length&&c[h]==="";h++);for(var p=c.length-1;p>=0&&c[p]==="";p--);return h>p?[]:c.slice(h,p-h+1)}for(var r=n(t.split("/")),i=n(e.split("/")),o=Math.min(r.length,i.length),s=o,l=0;l<o;l++)if(r[l]!==i[l]){s=l;break}for(var u=[],l=s;l<r.length;l++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")}var $D="/",HD=":";function VD(t){var e=qS(t),n=e[0],r=e[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)}function UD(t,e){var n=qS(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function WD(t){return qS(t)[3]}const OG={extname:WD,basename:UD,dirname:VD,sep:$D,delimiter:HD,relative:zD,join:FD,isAbsolute:KS,normalize:JS,resolve:H0};function GS(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var RG="ab".substr(-1)==="b"?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)};const MG=Object.freeze(Object.defineProperty({__proto__:null,resolve:H0,normalize:JS,isAbsolute:KS,join:FD,relative:zD,sep:$D,delimiter:HD,dirname:VD,basename:UD,extname:WD,default:OG},Symbol.toStringTag,{value:"Module"})),LG=oc(MG);var Om=AG,jD=cc,Dx=LG,NG=oa,tc=NG.format,DG={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function qD(t,e,n){!n&&typeof e=="function"&&(n=e,e=void 0),e=e||{},e.importHook||(e.importHook=Om.createImportHook()),r(t,function(s,l){if(s){n(s);return}if(!l){n(new Error("empty root import"));return}var u=l.types;if(u){var c=ET(l)||"";u.forEach(function(h){h.namespace===c&&delete h.namespace})}n(null,l)});function r(s,l){e.importHook(s,"idl",function(u,c){if(u){l(u);return}if(c===void 0){l();return}try{var h=new Ut(c,e),p=h._readProtocol(c,e)}catch(g){g.path=s,l(g);return}i(p.protocol,p.imports,Dx.dirname(s),l)})}function i(s,l,u,c){var h=[];p();function p(){var g=l.shift();if(!g){h.reverse();try{h.forEach(function(y){o(s,y)})}catch(y){c(y);return}c(null,s);return}var v=Dx.join(u,g.name);g.kind==="idl"?r(v,function(y,A){if(y){c(y);return}A&&h.push(A),p()}):e.importHook(v,g.kind,function(y,A){if(y){c(y);return}switch(g.kind){case"protocol":case"schema":if(A===void 0){p();return}try{var O=JSON.parse(A)}catch(k){k.path=v,c(k);return}var x=g.kind==="schema"?{types:[O]}:O;h.push(x),p();return;default:c(new Error(tc("invalid import kind: %s",g.kind)))}})}}function o(s,l){var u=l.types||[];u.reverse(),u.forEach(function(c){s.types||(s.types=[]),c.namespace===void 0&&(c.namespace=ET(l)||""),s.types.unshift(c)}),Object.keys(l.messages||{}).forEach(function(c){if(s.messages||(s.messages={}),s.messages[c])throw new Error(tc("duplicate message: %s",c));s.messages[c]=l.messages[c]})}}function PG(t){var e;if(typeof t=="string"&&~t.indexOf(Dx.sep)&&Om.existsSync(t)){var n=Om.readFileSync(t,{encoding:"utf8"});try{return JSON.parse(n)}catch{var r={importHook:Om.createSyncImportHook()};qD(t,r,function(o,s){e=o?n:s})}}else e=t;if(typeof e!="string"||e==="null")return e;try{return JSON.parse(e)}catch{try{return Ut.readProtocol(e)}catch{try{return Ut.readSchema(e)}catch{return e}}}}function Ut(t,e){e=e||{},this._tk=new ca(t),this._ackVoidMessages=!!e.ackVoidMessages,this._implicitTags=!e.delimitedCollections,this._typeRefs=e.typeRefs||DG}Ut.readProtocol=function(t,e){var n=new Ut(t,e),r=n._readProtocol();if(r.imports.length)throw new Error("unresolvable import");return r.protocol};Ut.readSchema=function(t,e){var n=new Ut(t,e),r=n._readJavadoc(),i=n._readType(r===void 0?{}:{doc:r},!0);return n._tk.next({id:"(eof)"}),i};Ut.prototype._readProtocol=function(){var t=this._tk,e=[],n=[],r={},i;this._readImports(e);var o={},s=this._readJavadoc();for(s!==void 0&&(o.doc=s),this._readAnnotations(o),t.next({val:"protocol"}),t.next({val:"{",silent:!0})||(o.protocol=t.next({id:"name"}).val,t.next({val:"{"}));!t.next({val:"}",silent:!0});)if(!this._readImports(e)){var l=this._readJavadoc(),u=this._readType({},!0),c=this._readImports(e,!0),h=void 0;if(i=t.pos,!c&&(h=this._readMessage(u))){l!==void 0&&h.schema.doc===void 0&&(h.schema.doc=l);var p=!1;if((h.schema.response==="void"||h.schema.response.type==="void")&&(p=!this._ackVoidMessages&&!h.schema.errors,h.schema.response==="void"?h.schema.response="null":h.schema.response.type="null"),p&&(h.schema["one-way"]=!0),r[h.name])throw new Error(tc("duplicate message: %s",h.name));r[h.name]=h.schema}else l&&(typeof u=="string"?u={doc:l,type:u}:u.doc===void 0&&(u.doc=l)),n.push(u),t.pos=i,t.next({val:";",silent:!0});l=void 0}return t.next({id:"(eof)"}),n.length&&(o.types=n),Object.keys(r).length&&(o.messages=r),{protocol:o,imports:e}};Ut.prototype._readAnnotations=function(t){for(var e=this._tk;e.next({val:"@",silent:!0});){for(var n=[];!e.next({val:"(",silent:!0});)n.push(e.next().val);t[n.join("")]=e.next({id:"json"}).val,e.next({val:")"})}};Ut.prototype._readMessage=function(t){var e=this._tk,n={request:[],response:t};this._readAnnotations(n);var r=e.next().val;if(e.next().val==="("){if(!e.next({val:")",silent:!0}))do n.request.push(this._readField());while(!e.next({val:")",silent:!0})&&e.next({val:","}));var i=e.next();switch(i.val){case"throws":n.errors=[];do n.errors.push(this._readType());while(!e.next({val:";",silent:!0})&&e.next({val:","}));break;case"oneway":n["one-way"]=!0,e.next({val:";"});break;case";":break;default:throw e.error("invalid message suffix",i)}return{name:r,schema:n}}};Ut.prototype._readJavadoc=function(){var t=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(t)return t.val};Ut.prototype._readField=function(){var t=this._tk,e=this._readJavadoc(),n={type:this._readType()};return e!==void 0&&n.doc===void 0&&(n.doc=e),this._readAnnotations(n),n.name=t.next({id:"name"}).val,t.next({val:"=",silent:!0})&&(n.default=t.next({id:"json"}).val),n};Ut.prototype._readType=function(t,e){switch(t=t||{},this._readAnnotations(t),t.type=this._tk.next({id:"name"}).val,t.type){case"record":case"error":return this._readRecord(t);case"fixed":return this._readFixed(t);case"enum":return this._readEnum(t,e);case"map":return this._readMap(t);case"array":return this._readArray(t);case"union":if(Object.keys(t).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var n=this._typeRefs[t.type];return n&&(delete t.type,jD.copyOwnProperties(n,t)),Object.keys(t).length>1?t:t.type}};Ut.prototype._readFixed=function(t){var e=this._tk;return e.next({val:"(",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"("})),t.size=parseInt(e.next({id:"number"}).val),e.next({val:")"}),t};Ut.prototype._readMap=function(t){var e=this._tk,n=this._implicitTags,r=e.next({val:"<",silent:n})===void 0;return t.values=this._readType(),e.next({val:">",silent:r}),t};Ut.prototype._readArray=function(t){var e=this._tk,n=this._implicitTags,r=e.next({val:"<",silent:n})===void 0;return t.items=this._readType(),e.next({val:">",silent:r}),t};Ut.prototype._readEnum=function(t,e){var n=this._tk;n.next({val:"{",silent:!0})||(t.name=n.next({id:"name"}).val,n.next({val:"{"})),t.symbols=[];do t.symbols.push(n.next().val);while(!n.next({val:"}",silent:!0})&&n.next({val:","}));return e&&n.next({val:"=",silent:!0})&&(t.default=n.next().val,n.next({val:";"})),t};Ut.prototype._readUnion=function(){var t=this._tk,e=[];t.next({val:"{"});do e.push(this._readType());while(!t.next({val:"}",silent:!0})&&t.next({val:","}));return e};Ut.prototype._readRecord=function(t){var e=this._tk;for(e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.fields=[];!e.next({val:"}",silent:!0});)t.fields.push(this._readField()),e.next({val:";"});return t};Ut.prototype._readImports=function(t,e){for(var n=this._tk,r=0,i=n.pos;n.next({val:"import",silent:!0});){if(!r&&e&&n.next({val:"(",silent:!0})){n.pos=i;return}var o=n.next({id:"name"}).val,s=JSON.parse(n.next({id:"string"}).val);n.next({val:";"}),t.push({kind:o,name:s}),r++}return r};function ca(t){this._str=t,this.pos=0}ca.prototype.next=function(t){var e={pos:this.pos,id:void 0,val:void 0},n=this._skip(t&&t.emitJavadoc);if(typeof n=="string")e.id="javadoc",e.val=n;else{var r=this.pos,i=this._str,o=i.charAt(r);if(!o)e.id="(eof)";else if(t&&t.id==="json"?(e.id="json",this.pos=this._endOfJson()):o==='"'?(e.id="string",this.pos=this._endOfString()):/[0-9]/.test(o)?(e.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(o)?(e.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(e.id="operator",this.pos=r+1),e.val=i.slice(r,this.pos),e.id==="json")try{e.val=JSON.parse(e.val)}catch{throw this.error("invalid JSON",e)}else e.id==="name"&&(e.val=e.val.replace(/`/g,""))}var s;if(t&&t.id&&t.id!==e.id?s=this.error(tc("expected ID %s",t.id),e):t&&t.val&&t.val!==e.val&&(s=this.error(tc("expected value %s",t.val),e)),s)if(t&&t.silent){this.pos=e.pos;return}else throw s;else return e};ca.prototype.error=function(t,e){var n=typeof e!="number",r=n?e.pos:e,i=this._str,o=1,s=0,l;for(l=0;l<r;l++)i.charAt(l)===`
`&&(o++,s=l);var u=n?tc("invalid token %j: %s",e,t):t,c=new Error(u);return c.token=n?e:void 0,c.lineNum=o,c.colNum=r-s,c};ca.prototype._skip=function(t){for(var e=this._str,n=!1,r,i;(i=e.charAt(this.pos))&&/\s/.test(i);)this.pos++;if(r=this.pos,i==="/")switch(e.charAt(this.pos+1)){case"/":for(this.pos+=2;(i=e.charAt(this.pos))&&i!==`
`;)this.pos++;return this._skip(t);case"*":for(this.pos+=2,e.charAt(this.pos)==="*"&&(n=!0);i=e.charAt(this.pos++);)if(i==="*"&&e.charAt(this.pos)==="/")return this.pos++,n&&t?BG(e.slice(r+3,this.pos-2)):this._skip(t);throw this.error("unterminated comment",r)}};ca.prototype._endOf=function(t){for(var e=this.pos,n=this._str;t.test(n.charAt(e));)e++;return e};ca.prototype._endOfString=function(){for(var t=this.pos+1,e=this._str,n;n=e.charAt(t);){if(n==='"')return t+1;n==="\\"?t+=2:t++}throw this.error("unterminated string",t-1)};ca.prototype._endOfJson=function(){var t=jD.jsonEnd(this._str,this.pos);if(t<0)throw this.error("invalid JSON",t);return t};function BG(t){for(var e=t.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(n,r){return r?n.replace(/^\s*\*\s?/,""):n});e.length&&!e[0];)e.shift();for(;e.length&&!e[e.length-1];)e.pop();return e.join(`
`)}function ET(t){if(t.namespace)return t.namespace;var e=/^(.*)\.[^.]+$/.exec(t.protocol);return e?e[1]:void 0}var IG={Tokenizer:ca,assembleProtocol:qD,read:PG,readProtocol:Ut.readProtocol,readSchema:Ut.readSchema};(function(t){var e=EK,n=kG,r=IG,i=cc;function o(s,l){var u=r.read(s);return u.protocol?n.Service.forProtocol(u,l):e.Type.forSchema(u,l)}t.exports={Service:n.Service,assembleProtocol:r.assembleProtocol,discoverProtocol:n.discoverProtocol,parse:o,readProtocol:r.readProtocol,readSchema:r.readSchema},i.copyOwnProperties(e,t.exports)})(rD);const JD={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function FG(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Ls(t,e,n,r,i){if(e.subarray&&t.subarray){t.set(e.subarray(n,n+r),i);return}for(var o=0;o<r;o++)t[i+o]=e[n+o]}var V0=Uint8Array,Ni=Uint16Array,U0=Int32Array,zG=4,CT=0,AT=1,$G=2;function pc(t){for(var e=t.length;--e>=0;)t[e]=0}var HG=0,KD=1,VG=2,UG=3,WG=258,ZS=29,np=256,Td=np+1+ZS,Bf=30,YS=19,GD=2*Td+1,Za=15,bw=16,jG=7,QS=256,ZD=16,YD=17,QD=18,Px=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Rm=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qG=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],XD=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],JG=512,ks=new Array((Td+2)*2);pc(ks);var qh=new Array(Bf*2);pc(qh);var Od=new Array(JG);pc(Od);var Rd=new Array(WG-UG+1);pc(Rd);var XS=new Array(ZS);pc(XS);var W0=new Array(Bf);pc(W0);function Sw(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}var eP,tP,nP;function kw(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function rP(t){return t<256?Od[t]:Od[256+(t>>>7)]}function Md(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function Br(t,e,n){t.bi_valid>bw-n?(t.bi_buf|=e<<t.bi_valid&65535,Md(t,t.bi_buf),t.bi_buf=e>>bw-t.bi_valid,t.bi_valid+=n-bw):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function zo(t,e,n){Br(t,n[e*2],n[e*2+1])}function iP(t,e){var n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1}function KG(t){t.bi_valid===16?(Md(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function GG(t,e){var n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,l=e.stat_desc.extra_base,u=e.stat_desc.max_length,c,h,p,g,v,y,A=0;for(g=0;g<=Za;g++)t.bl_count[g]=0;for(n[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<GD;c++)h=t.heap[c],g=n[n[h*2+1]*2+1]+1,g>u&&(g=u,A++),n[h*2+1]=g,!(h>r)&&(t.bl_count[g]++,v=0,h>=l&&(v=s[h-l]),y=n[h*2],t.opt_len+=y*(g+v),o&&(t.static_len+=y*(i[h*2+1]+v)));if(A!==0){do{for(g=u-1;t.bl_count[g]===0;)g--;t.bl_count[g]--,t.bl_count[g+1]+=2,t.bl_count[u]--,A-=2}while(A>0);for(g=u;g!==0;g--)for(h=t.bl_count[g];h!==0;)p=t.heap[--c],!(p>r)&&(n[p*2+1]!==g&&(t.opt_len+=(g-n[p*2+1])*n[p*2],n[p*2+1]=g),h--)}}function oP(t,e,n){var r=new Array(Za+1),i=0,o,s;for(o=1;o<=Za;o++)r[o]=i=i+n[o-1]<<1;for(s=0;s<=e;s++){var l=t[s*2+1];l!==0&&(t[s*2]=iP(r[l]++,l))}}function ZG(){var t,e,n,r,i,o=new Array(Za+1);for(n=0,r=0;r<ZS-1;r++)for(XS[r]=n,t=0;t<1<<Px[r];t++)Rd[n++]=r;for(Rd[n-1]=r,i=0,r=0;r<16;r++)for(W0[r]=i,t=0;t<1<<Rm[r];t++)Od[i++]=r;for(i>>=7;r<Bf;r++)for(W0[r]=i<<7,t=0;t<1<<Rm[r]-7;t++)Od[256+i++]=r;for(e=0;e<=Za;e++)o[e]=0;for(t=0;t<=143;)ks[t*2+1]=8,t++,o[8]++;for(;t<=255;)ks[t*2+1]=9,t++,o[9]++;for(;t<=279;)ks[t*2+1]=7,t++,o[7]++;for(;t<=287;)ks[t*2+1]=8,t++,o[8]++;for(oP(ks,Td+1,o),t=0;t<Bf;t++)qh[t*2+1]=5,qh[t*2]=iP(t,5);eP=new Sw(ks,Px,np+1,Td,Za),tP=new Sw(qh,Rm,0,Bf,Za),nP=new Sw(new Array(0),qG,0,YS,jG)}function sP(t){var e;for(e=0;e<Td;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Bf;e++)t.dyn_dtree[e*2]=0;for(e=0;e<YS;e++)t.bl_tree[e*2]=0;t.dyn_ltree[QS*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function lP(t){t.bi_valid>8?Md(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function YG(t,e,n,r){lP(t),r&&(Md(t,n),Md(t,~n)),Ls(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function TT(t,e,n,r){var i=e*2,o=n*2;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function Ew(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&TT(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!TT(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function OT(t,e,n){var r,i,o=0,s,l;if(t.last_lit!==0)do r=t.pending_buf[t.d_buf+o*2]<<8|t.pending_buf[t.d_buf+o*2+1],i=t.pending_buf[t.l_buf+o],o++,r===0?zo(t,i,e):(s=Rd[i],zo(t,s+np+1,e),l=Px[s],l!==0&&(i-=XS[s],Br(t,i,l)),r--,s=rP(r),zo(t,s,n),l=Rm[s],l!==0&&(r-=W0[s],Br(t,r,l)));while(o<t.last_lit);zo(t,QS,e)}function Bx(t,e){var n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,l,u=-1,c;for(t.heap_len=0,t.heap_max=GD,s=0;s<o;s++)n[s*2]!==0?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):n[s*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,n[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[c*2+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)Ew(t,n,s);c=o;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Ew(t,n,1),l=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=l,n[c*2]=n[s*2]+n[l*2],t.depth[c]=(t.depth[s]>=t.depth[l]?t.depth[s]:t.depth[l])+1,n[s*2+1]=n[l*2+1]=c,t.heap[1]=c++,Ew(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],GG(t,e),oP(n,u,t.bl_count)}function RT(t,e,n){var r,i=-1,o,s=e[0*2+1],l=0,u=7,c=4;for(s===0&&(u=138,c=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)o=s,s=e[(r+1)*2+1],!(++l<u&&o===s)&&(l<c?t.bl_tree[o*2]+=l:o!==0?(o!==i&&t.bl_tree[o*2]++,t.bl_tree[ZD*2]++):l<=10?t.bl_tree[YD*2]++:t.bl_tree[QD*2]++,l=0,i=o,s===0?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4))}function MT(t,e,n){var r,i=-1,o,s=e[0*2+1],l=0,u=7,c=4;for(s===0&&(u=138,c=3),r=0;r<=n;r++)if(o=s,s=e[(r+1)*2+1],!(++l<u&&o===s)){if(l<c)do zo(t,o,t.bl_tree);while(--l!==0);else o!==0?(o!==i&&(zo(t,o,t.bl_tree),l--),zo(t,ZD,t.bl_tree),Br(t,l-3,2)):l<=10?(zo(t,YD,t.bl_tree),Br(t,l-3,3)):(zo(t,QD,t.bl_tree),Br(t,l-11,7));l=0,i=o,s===0?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4)}}function QG(t){var e;for(RT(t,t.dyn_ltree,t.l_desc.max_code),RT(t,t.dyn_dtree,t.d_desc.max_code),Bx(t,t.bl_desc),e=YS-1;e>=3&&t.bl_tree[XD[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function XG(t,e,n,r){var i;for(Br(t,e-257,5),Br(t,n-1,5),Br(t,r-4,4),i=0;i<r;i++)Br(t,t.bl_tree[XD[i]*2+1],3);MT(t,t.dyn_ltree,e-1),MT(t,t.dyn_dtree,n-1)}function eZ(t){var e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return CT;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return AT;for(n=32;n<np;n++)if(t.dyn_ltree[n*2]!==0)return AT;return CT}var LT=!1;function tZ(t){LT||(ZG(),LT=!0),t.l_desc=new kw(t.dyn_ltree,eP),t.d_desc=new kw(t.dyn_dtree,tP),t.bl_desc=new kw(t.bl_tree,nP),t.bi_buf=0,t.bi_valid=0,sP(t)}function aP(t,e,n,r){Br(t,(HG<<1)+(r?1:0),3),YG(t,e,n,!0)}function nZ(t){Br(t,KD<<1,3),zo(t,QS,ks),KG(t)}function rZ(t,e,n,r){var i,o,s=0;t.level>0?(t.strm.data_type===$G&&(t.strm.data_type=eZ(t)),Bx(t,t.l_desc),Bx(t,t.d_desc),s=QG(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&e!==-1?aP(t,e,n,r):t.strategy===zG||o===i?(Br(t,(KD<<1)+(r?1:0),3),OT(t,ks,qh)):(Br(t,(VG<<1)+(r?1:0),3),XG(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),OT(t,t.dyn_ltree,t.dyn_dtree)),sP(t),r&&lP(t)}function Il(t,e,n){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=n&255,t.last_lit++,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(Rd[n]+np+1)*2]++,t.dyn_dtree[rP(e)*2]++),t.last_lit===t.lit_bufsize-1}function Ix(t,e,n,r){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;n!==0;){s=n>2e3?2e3:n,n-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}function iZ(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e}var oZ=iZ();function gn(t,e,n,r){var i=oZ,o=r+n;t^=-1;for(var s=r;s<o;s++)t=t>>>8^i[(t^e[s])&255];return t^-1}var ku=0,sZ=1,lZ=3,Fl=4,NT=5,pl=0,DT=1,zl=-2,aZ=-3,Cw=-5,uZ=-1,fZ=1,Xg=2,cZ=3,hZ=4,dZ=2,ek=8,pZ=9,gZ=29,mZ=256,Fx=mZ+1+gZ,vZ=30,yZ=19,wZ=2*Fx+1,_Z=15,nt=3,Sl=258,ao=Sl+nt+1,xZ=32,tk=42,zx=69,Mm=73,Lm=91,Nm=103,Ya=113,Ah=666,ln=1,rp=2,cu=3,gc=4,bZ=3;function kl(t,e){return t.msg=JD[e],e}function PT(t){return(t<<1)-(t>4?9:0)}function Ha(t){for(var e=t.length;--e>=0;)t[e]=0}function sl(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(Ls(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))}function Mn(t,e){rZ(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,sl(t.strm)}function Ye(t,e){t.pending_buf[t.pending++]=e}function mh(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function SZ(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,Ls(e,t.input,t.next_in,i,n),t.state.wrap===1?t.adler=Ix(t.adler,e,i,n):t.state.wrap===2&&(t.adler=gn(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function uP(t,e){var n=t.max_chain_length,r=t.strstart,i,o,s=t.prev_length,l=t.nice_match,u=t.strstart>t.w_size-ao?t.strstart-(t.w_size-ao):0,c=t.window,h=t.w_mask,p=t.prev,g=t.strstart+Sl,v=c[r+s-1],y=c[r+s];t.prev_length>=t.good_match&&(n>>=2),l>t.lookahead&&(l=t.lookahead);do if(i=e,!(c[i+s]!==y||c[i+s-1]!==v||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<g);if(o=Sl-(g-r),r=g-Sl,o>s){if(t.match_start=e,s=o,o>=l)break;v=c[r+s-1],y=c[r+s]}}while((e=p[e&h])>u&&--n!==0);return s<=t.lookahead?s:t.lookahead}function ip(t){var e=t.w_size,n,r,i,o,s;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ao)){Ls(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,r=t.hash_size,n=r;do i=t.head[--n],t.head[n]=i>=e?i-e:0;while(--r);r=e,n=r;do i=t.prev[--n],t.prev[n]=i>=e?i-e:0;while(--r);o+=e}if(t.strm.avail_in===0)break;if(r=SZ(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=r,t.lookahead+t.insert>=nt)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+nt-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<nt)););}while(t.lookahead<ao&&t.strm.avail_in!==0)}function kZ(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ip(t),t.lookahead===0&&e===ku)return ln;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((t.strstart===0||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Mn(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-ao&&(Mn(t,!1),t.strm.avail_out===0))return ln}return t.insert=0,e===Fl?(Mn(t,!0),t.strm.avail_out===0?cu:gc):(t.strstart>t.block_start&&(Mn(t,!1),t.strm.avail_out===0),ln)}function Aw(t,e){for(var n,r;;){if(t.lookahead<ao){if(ip(t),t.lookahead<ao&&e===ku)return ln;if(t.lookahead===0)break}if(n=0,t.lookahead>=nt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+nt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-ao&&(t.match_length=uP(t,n)),t.match_length>=nt)if(r=Il(t,t.strstart-t.match_start,t.match_length-nt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=nt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+nt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=Il(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Mn(t,!1),t.strm.avail_out===0))return ln}return t.insert=t.strstart<nt-1?t.strstart:nt-1,e===Fl?(Mn(t,!0),t.strm.avail_out===0?cu:gc):t.last_lit&&(Mn(t,!1),t.strm.avail_out===0)?ln:rp}function nf(t,e){for(var n,r,i;;){if(t.lookahead<ao){if(ip(t),t.lookahead<ao&&e===ku)return ln;if(t.lookahead===0)break}if(n=0,t.lookahead>=nt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+nt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=nt-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ao&&(t.match_length=uP(t,n),t.match_length<=5&&(t.strategy===fZ||t.match_length===nt&&t.strstart-t.match_start>4096)&&(t.match_length=nt-1)),t.prev_length>=nt&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-nt,r=Il(t,t.strstart-1-t.prev_match,t.prev_length-nt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+nt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=nt-1,t.strstart++,r&&(Mn(t,!1),t.strm.avail_out===0))return ln}else if(t.match_available){if(r=Il(t,0,t.window[t.strstart-1]),r&&Mn(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return ln}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Il(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<nt-1?t.strstart:nt-1,e===Fl?(Mn(t,!0),t.strm.avail_out===0?cu:gc):t.last_lit&&(Mn(t,!1),t.strm.avail_out===0)?ln:rp}function EZ(t,e){for(var n,r,i,o,s=t.window;;){if(t.lookahead<=Sl){if(ip(t),t.lookahead<=Sl&&e===ku)return ln;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=nt&&t.strstart>0&&(i=t.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=t.strstart+Sl;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);t.match_length=Sl-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=nt?(n=Il(t,1,t.match_length-nt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Il(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Mn(t,!1),t.strm.avail_out===0))return ln}return t.insert=0,e===Fl?(Mn(t,!0),t.strm.avail_out===0?cu:gc):t.last_lit&&(Mn(t,!1),t.strm.avail_out===0)?ln:rp}function CZ(t,e){for(var n;;){if(t.lookahead===0&&(ip(t),t.lookahead===0)){if(e===ku)return ln;break}if(t.match_length=0,n=Il(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Mn(t,!1),t.strm.avail_out===0))return ln}return t.insert=0,e===Fl?(Mn(t,!0),t.strm.avail_out===0?cu:gc):t.last_lit&&(Mn(t,!1),t.strm.avail_out===0)?ln:rp}function Ro(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}var bf;bf=[new Ro(0,0,0,0,kZ),new Ro(4,4,8,4,Aw),new Ro(4,5,16,8,Aw),new Ro(4,6,32,32,Aw),new Ro(4,4,16,16,nf),new Ro(8,16,32,32,nf),new Ro(8,16,128,128,nf),new Ro(8,32,128,256,nf),new Ro(32,128,258,1024,nf),new Ro(32,258,258,4096,nf)];function AZ(t){t.window_size=2*t.w_size,Ha(t.head),t.max_lazy_match=bf[t.level].max_lazy,t.good_match=bf[t.level].good_length,t.nice_match=bf[t.level].nice_length,t.max_chain_length=bf[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=nt-1,t.match_available=0,t.ins_h=0}function TZ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ek,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ni(wZ*2),this.dyn_dtree=new Ni((2*vZ+1)*2),this.bl_tree=new Ni((2*yZ+1)*2),Ha(this.dyn_ltree),Ha(this.dyn_dtree),Ha(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ni(_Z+1),this.heap=new Ni(2*Fx+1),Ha(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ni(2*Fx+1),Ha(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function OZ(t){var e;return!t||!t.state?kl(t,zl):(t.total_in=t.total_out=0,t.data_type=dZ,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?tk:Ya,t.adler=e.wrap===2?0:1,e.last_flush=ku,tZ(e),pl)}function fP(t){var e=OZ(t);return e===pl&&AZ(t.state),e}function RZ(t,e,n,r,i,o){if(!t)return zl;var s=1;if(e===uZ&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>pZ||n!==ek||r<8||r>15||e<0||e>9||o<0||o>hZ)return kl(t,zl);r===8&&(r=9);var l=new TZ;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+nt-1)/nt),l.window=new V0(l.w_size*2),l.head=new Ni(l.hash_size),l.prev=new Ni(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new V0(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=(1+2)*l.lit_bufsize,l.level=e,l.strategy=o,l.method=n,fP(t)}function MZ(t,e){var n,r,i,o;if(!t||!t.state||e>NT||e<0)return t?kl(t,zl):zl;if(r=t.state,!t.output||!t.input&&t.avail_in!==0||r.status===Ah&&e!==Fl)return kl(t,t.avail_out===0?Cw:zl);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===tk)if(r.wrap===2)t.adler=0,Ye(r,31),Ye(r,139),Ye(r,8),r.gzhead?(Ye(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ye(r,r.gzhead.time&255),Ye(r,r.gzhead.time>>8&255),Ye(r,r.gzhead.time>>16&255),Ye(r,r.gzhead.time>>24&255),Ye(r,r.level===9?2:r.strategy>=Xg||r.level<2?4:0),Ye(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Ye(r,r.gzhead.extra.length&255),Ye(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=gn(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=zx):(Ye(r,0),Ye(r,0),Ye(r,0),Ye(r,0),Ye(r,0),Ye(r,r.level===9?2:r.strategy>=Xg||r.level<2?4:0),Ye(r,bZ),r.status=Ya);else{var s=ek+(r.w_bits-8<<4)<<8,l=-1;r.strategy>=Xg||r.level<2?l=0:r.level<6?l=1:r.level===6?l=2:l=3,s|=l<<6,r.strstart!==0&&(s|=xZ),s+=31-s%31,r.status=Ya,mh(r,s),r.strstart!==0&&(mh(r,t.adler>>>16),mh(r,t.adler&65535)),t.adler=1}if(r.status===zx)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=gn(t.adler,r.pending_buf,r.pending-i,i)),sl(t),i=r.pending,r.pending===r.pending_buf_size));)Ye(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=gn(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=Mm)}else r.status=Mm;if(r.status===Mm)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=gn(t.adler,r.pending_buf,r.pending-i,i)),sl(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,Ye(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=gn(t.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.gzindex=0,r.status=Lm)}else r.status=Lm;if(r.status===Lm)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=gn(t.adler,r.pending_buf,r.pending-i,i)),sl(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,Ye(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=gn(t.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.status=Nm)}else r.status=Nm;if(r.status===Nm&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&sl(t),r.pending+2<=r.pending_buf_size&&(Ye(r,t.adler&255),Ye(r,t.adler>>8&255),t.adler=0,r.status=Ya)):r.status=Ya),r.pending!==0){if(sl(t),t.avail_out===0)return r.last_flush=-1,pl}else if(t.avail_in===0&&PT(e)<=PT(n)&&e!==Fl)return kl(t,Cw);if(r.status===Ah&&t.avail_in!==0)return kl(t,Cw);if(t.avail_in!==0||r.lookahead!==0||e!==ku&&r.status!==Ah){var u=r.strategy===Xg?CZ(r,e):r.strategy===cZ?EZ(r,e):bf[r.level].func(r,e);if((u===cu||u===gc)&&(r.status=Ah),u===ln||u===cu)return t.avail_out===0&&(r.last_flush=-1),pl;if(u===rp&&(e===sZ?nZ(r):e!==NT&&(aP(r,0,0,!1),e===lZ&&(Ha(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),sl(t),t.avail_out===0))return r.last_flush=-1,pl}return e!==Fl?pl:r.wrap<=0?DT:(r.wrap===2?(Ye(r,t.adler&255),Ye(r,t.adler>>8&255),Ye(r,t.adler>>16&255),Ye(r,t.adler>>24&255),Ye(r,t.total_in&255),Ye(r,t.total_in>>8&255),Ye(r,t.total_in>>16&255),Ye(r,t.total_in>>24&255)):(mh(r,t.adler>>>16),mh(r,t.adler&65535)),sl(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?pl:DT)}function LZ(t){var e;return!t||!t.state?zl:(e=t.state.status,e!==tk&&e!==zx&&e!==Mm&&e!==Lm&&e!==Nm&&e!==Ya&&e!==Ah?kl(t,zl):(t.state=null,e===Ya?kl(t,aZ):pl))}var em=30,NZ=12;function DZ(t,e){var n,r,i,o,s,l,u,c,h,p,g,v,y,A,O,x,k,b,T,N,B,D,$,G,W;n=t.state,r=t.next_in,G=t.input,i=r+(t.avail_in-5),o=t.next_out,W=t.output,s=o-(e-t.avail_out),l=o+(t.avail_out-257),u=n.dmax,c=n.wsize,h=n.whave,p=n.wnext,g=n.window,v=n.hold,y=n.bits,A=n.lencode,O=n.distcode,x=(1<<n.lenbits)-1,k=(1<<n.distbits)-1;e:do{y<15&&(v+=G[r++]<<y,y+=8,v+=G[r++]<<y,y+=8),b=A[v&x];t:for(;;){if(T=b>>>24,v>>>=T,y-=T,T=b>>>16&255,T===0)W[o++]=b&65535;else if(T&16){N=b&65535,T&=15,T&&(y<T&&(v+=G[r++]<<y,y+=8),N+=v&(1<<T)-1,v>>>=T,y-=T),y<15&&(v+=G[r++]<<y,y+=8,v+=G[r++]<<y,y+=8),b=O[v&k];n:for(;;){if(T=b>>>24,v>>>=T,y-=T,T=b>>>16&255,T&16){if(B=b&65535,T&=15,y<T&&(v+=G[r++]<<y,y+=8,y<T&&(v+=G[r++]<<y,y+=8)),B+=v&(1<<T)-1,B>u){t.msg="invalid distance too far back",n.mode=em;break e}if(v>>>=T,y-=T,T=o-s,B>T){if(T=B-T,T>h&&n.sane){t.msg="invalid distance too far back",n.mode=em;break e}if(D=0,$=g,p===0){if(D+=c-T,T<N){N-=T;do W[o++]=g[D++];while(--T);D=o-B,$=W}}else if(p<T){if(D+=c+p-T,T-=p,T<N){N-=T;do W[o++]=g[D++];while(--T);if(D=0,p<N){T=p,N-=T;do W[o++]=g[D++];while(--T);D=o-B,$=W}}}else if(D+=p-T,T<N){N-=T;do W[o++]=g[D++];while(--T);D=o-B,$=W}for(;N>2;)W[o++]=$[D++],W[o++]=$[D++],W[o++]=$[D++],N-=3;N&&(W[o++]=$[D++],N>1&&(W[o++]=$[D++]))}else{D=o-B;do W[o++]=W[D++],W[o++]=W[D++],W[o++]=W[D++],N-=3;while(N>2);N&&(W[o++]=W[D++],N>1&&(W[o++]=W[D++]))}}else if((T&64)===0){b=O[(b&65535)+(v&(1<<T)-1)];continue n}else{t.msg="invalid distance code",n.mode=em;break e}break}}else if((T&64)===0){b=A[(b&65535)+(v&(1<<T)-1)];continue t}else if(T&32){n.mode=NZ;break e}else{t.msg="invalid literal/length code",n.mode=em;break e}break}}while(r<i&&o<l);N=y>>3,r-=N,y-=N<<3,v&=(1<<y)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=o<l?257+(l-o):257-(o-l),n.hold=v,n.bits=y}var rf=15,BT=852,IT=592,FT=0,Tw=1,zT=2,PZ=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],BZ=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],IZ=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],FZ=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Jh(t,e,n,r,i,o,s,l){var u=l.bits,c=0,h=0,p=0,g=0,v=0,y=0,A=0,O=0,x=0,k=0,b,T,N,B,D,$=null,G=0,W,oe=new Ni(rf+1),ve=new Ni(rf+1),_e=null,ze=0,Qe,Ce,ye;for(c=0;c<=rf;c++)oe[c]=0;for(h=0;h<r;h++)oe[e[n+h]]++;for(v=u,g=rf;g>=1&&oe[g]===0;g--);if(v>g&&(v=g),g===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,l.bits=1,0;for(p=1;p<g&&oe[p]===0;p++);for(v<p&&(v=p),O=1,c=1;c<=rf;c++)if(O<<=1,O-=oe[c],O<0)return-1;if(O>0&&(t===FT||g!==1))return-1;for(ve[1]=0,c=1;c<rf;c++)ve[c+1]=ve[c]+oe[c];for(h=0;h<r;h++)e[n+h]!==0&&(s[ve[e[n+h]]++]=h);if(t===FT?($=_e=s,W=19):t===Tw?($=PZ,G-=257,_e=BZ,ze-=257,W=256):($=IZ,_e=FZ,W=-1),k=0,h=0,c=p,D=o,y=v,A=0,N=-1,x=1<<v,B=x-1,t===Tw&&x>BT||t===zT&&x>IT)return 1;for(;;){Qe=c-A,s[h]<W?(Ce=0,ye=s[h]):s[h]>W?(Ce=_e[ze+s[h]],ye=$[G+s[h]]):(Ce=32+64,ye=0),b=1<<c-A,T=1<<y,p=T;do T-=b,i[D+(k>>A)+T]=Qe<<24|Ce<<16|ye|0;while(T!==0);for(b=1<<c-1;k&b;)b>>=1;if(b!==0?(k&=b-1,k+=b):k=0,h++,--oe[c]===0){if(c===g)break;c=e[n+s[h]]}if(c>v&&(k&B)!==N){for(A===0&&(A=v),D+=p,y=c-A,O=1<<y;y+A<g&&(O-=oe[y+A],!(O<=0));)y++,O<<=1;if(x+=1<<y,t===Tw&&x>BT||t===zT&&x>IT)return 1;N=k&B,i[N]=v<<24|y<<16|D-o|0}}return k!==0&&(i[D+k]=c-A<<24|64<<16|0),l.bits=v,0}var zZ=0,cP=1,hP=2,$T=4,$Z=5,tm=6,Ld=0,HZ=1,VZ=2,Kl=-2,UZ=-3,WZ=-4,jZ=-5,HT=8,dP=1,VT=2,UT=3,WT=4,jT=5,qT=6,JT=7,KT=8,GT=9,ZT=10,YT=11,_s=12,Ow=13,QT=14,Rw=15,XT=16,eO=17,tO=18,nO=19,nm=20,rm=21,rO=22,iO=23,oO=24,sO=25,lO=26,Mw=27,aO=28,uO=29,Et=30,qZ=31,JZ=32,KZ=852,GZ=592;function fO(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function ZZ(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ni(320),this.work=new Ni(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function YZ(t){var e;return!t||!t.state?Kl:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=dP,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new U0(KZ),e.distcode=e.distdyn=new U0(GZ),e.sane=1,e.back=-1,Ld)}function pP(t){var e;return!t||!t.state?Kl:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,YZ(t))}function QZ(t,e){var n,r;return!t||!t.state||(r=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Kl:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,pP(t))}function XZ(t,e){var n,r;return t?(r=new ZZ,t.state=r,r.window=null,n=QZ(t,e),n!==Ld&&(t.state=null),n):Kl}var cO=!0,Lw,Nw;function eY(t){if(cO){var e;for(Lw=new U0(512),Nw=new U0(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Jh(cP,t.lens,0,288,Lw,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Jh(hP,t.lens,0,32,Nw,0,t.work,{bits:5}),cO=!1}t.lencode=Lw,t.lenbits=9,t.distcode=Nw,t.distbits=5}function tY(t,e,n,r){var i,o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new V0(o.wsize)),r>=o.wsize?(Ls(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),Ls(o.window,e,n-r,i,o.wnext),r-=i,r?(Ls(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function nY(t,e){var n,r,i,o,s,l,u,c,h,p,g,v,y,A,O=0,x,k,b,T,N,B,D,$,G=new V0(4),W,oe,ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Kl;n=t.state,n.mode===_s&&(n.mode=Ow),s=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,r=t.input,l=t.avail_in,c=n.hold,h=n.bits,p=l,g=u,$=Ld;e:for(;;)switch(n.mode){case dP:if(n.wrap===0){n.mode=Ow;break}for(;h<16;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if(n.wrap&2&&c===35615){n.check=0,G[0]=c&255,G[1]=c>>>8&255,n.check=gn(n.check,G,2,0),c=0,h=0,n.mode=VT;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Et;break}if((c&15)!==HT){t.msg="unknown compression method",n.mode=Et;break}if(c>>>=4,h-=4,D=(c&15)+8,n.wbits===0)n.wbits=D;else if(D>n.wbits){t.msg="invalid window size",n.mode=Et;break}n.dmax=1<<D,t.adler=n.check=1,n.mode=c&512?ZT:_s,c=0,h=0;break;case VT:for(;h<16;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if(n.flags=c,(n.flags&255)!==HT){t.msg="unknown compression method",n.mode=Et;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Et;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(G[0]=c&255,G[1]=c>>>8&255,n.check=gn(n.check,G,2,0)),c=0,h=0,n.mode=UT;case UT:for(;h<32;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}n.head&&(n.head.time=c),n.flags&512&&(G[0]=c&255,G[1]=c>>>8&255,G[2]=c>>>16&255,G[3]=c>>>24&255,n.check=gn(n.check,G,4,0)),c=0,h=0,n.mode=WT;case WT:for(;h<16;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(G[0]=c&255,G[1]=c>>>8&255,n.check=gn(n.check,G,2,0)),c=0,h=0,n.mode=jT;case jT:if(n.flags&1024){for(;h<16;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(G[0]=c&255,G[1]=c>>>8&255,n.check=gn(n.check,G,2,0)),c=0,h=0}else n.head&&(n.head.extra=null);n.mode=qT;case qT:if(n.flags&1024&&(v=n.length,v>l&&(v=l),v&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Ls(n.head.extra,r,o,v,D)),n.flags&512&&(n.check=gn(n.check,r,v,o)),l-=v,o+=v,n.length-=v),n.length))break e;n.length=0,n.mode=JT;case JT:if(n.flags&2048){if(l===0)break e;v=0;do D=r[o+v++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D));while(D&&v<l);if(n.flags&512&&(n.check=gn(n.check,r,v,o)),l-=v,o+=v,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=KT;case KT:if(n.flags&4096){if(l===0)break e;v=0;do D=r[o+v++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D));while(D&&v<l);if(n.flags&512&&(n.check=gn(n.check,r,v,o)),l-=v,o+=v,D)break e}else n.head&&(n.head.comment=null);n.mode=GT;case GT:if(n.flags&512){for(;h<16;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if(c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Et;break}c=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=_s;break;case ZT:for(;h<32;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}t.adler=n.check=fO(c),c=0,h=0,n.mode=YT;case YT:if(n.havedict===0)return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,n.hold=c,n.bits=h,VZ;t.adler=n.check=1,n.mode=_s;case _s:if(e===$Z||e===tm)break e;case Ow:if(n.last){c>>>=h&7,h-=h&7,n.mode=Mw;break}for(;h<3;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}switch(n.last=c&1,c>>>=1,h-=1,c&3){case 0:n.mode=QT;break;case 1:if(eY(n),n.mode=nm,e===tm){c>>>=2,h-=2;break e}break;case 2:n.mode=eO;break;case 3:t.msg="invalid block type",n.mode=Et}c>>>=2,h-=2;break;case QT:for(c>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Et;break}if(n.length=c&65535,c=0,h=0,n.mode=Rw,e===tm)break e;case Rw:n.mode=XT;case XT:if(v=n.length,v){if(v>l&&(v=l),v>u&&(v=u),v===0)break e;Ls(i,r,o,v,s),l-=v,o+=v,u-=v,s+=v,n.length-=v;break}n.mode=_s;break;case eO:for(;h<14;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if(n.nlen=(c&31)+257,c>>>=5,h-=5,n.ndist=(c&31)+1,c>>>=5,h-=5,n.ncode=(c&15)+4,c>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Et;break}n.have=0,n.mode=tO;case tO:for(;n.have<n.ncode;){for(;h<3;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}n.lens[ve[n.have++]]=c&7,c>>>=3,h-=3}for(;n.have<19;)n.lens[ve[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,W={bits:n.lenbits},$=Jh(zZ,n.lens,0,19,n.lencode,0,n.work,W),n.lenbits=W.bits,$){t.msg="invalid code lengths set",n.mode=Et;break}n.have=0,n.mode=nO;case nO:for(;n.have<n.nlen+n.ndist;){for(;O=n.lencode[c&(1<<n.lenbits)-1],x=O>>>24,k=O>>>16&255,b=O&65535,!(x<=h);){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if(b<16)c>>>=x,h-=x,n.lens[n.have++]=b;else{if(b===16){for(oe=x+2;h<oe;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if(c>>>=x,h-=x,n.have===0){t.msg="invalid bit length repeat",n.mode=Et;break}D=n.lens[n.have-1],v=3+(c&3),c>>>=2,h-=2}else if(b===17){for(oe=x+3;h<oe;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}c>>>=x,h-=x,D=0,v=3+(c&7),c>>>=3,h-=3}else{for(oe=x+7;h<oe;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}c>>>=x,h-=x,D=0,v=11+(c&127),c>>>=7,h-=7}if(n.have+v>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Et;break}for(;v--;)n.lens[n.have++]=D}}if(n.mode===Et)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Et;break}if(n.lenbits=9,W={bits:n.lenbits},$=Jh(cP,n.lens,0,n.nlen,n.lencode,0,n.work,W),n.lenbits=W.bits,$){t.msg="invalid literal/lengths set",n.mode=Et;break}if(n.distbits=6,n.distcode=n.distdyn,W={bits:n.distbits},$=Jh(hP,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,W),n.distbits=W.bits,$){t.msg="invalid distances set",n.mode=Et;break}if(n.mode=nm,e===tm)break e;case nm:n.mode=rm;case rm:if(l>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,n.hold=c,n.bits=h,DZ(t,g),s=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,r=t.input,l=t.avail_in,c=n.hold,h=n.bits,n.mode===_s&&(n.back=-1);break}for(n.back=0;O=n.lencode[c&(1<<n.lenbits)-1],x=O>>>24,k=O>>>16&255,b=O&65535,!(x<=h);){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if(k&&(k&240)===0){for(T=x,N=k,B=b;O=n.lencode[B+((c&(1<<T+N)-1)>>T)],x=O>>>24,k=O>>>16&255,b=O&65535,!(T+x<=h);){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}c>>>=T,h-=T,n.back+=T}if(c>>>=x,h-=x,n.back+=x,n.length=b,k===0){n.mode=lO;break}if(k&32){n.back=-1,n.mode=_s;break}if(k&64){t.msg="invalid literal/length code",n.mode=Et;break}n.extra=k&15,n.mode=rO;case rO:if(n.extra){for(oe=n.extra;h<oe;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=iO;case iO:for(;O=n.distcode[c&(1<<n.distbits)-1],x=O>>>24,k=O>>>16&255,b=O&65535,!(x<=h);){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if((k&240)===0){for(T=x,N=k,B=b;O=n.distcode[B+((c&(1<<T+N)-1)>>T)],x=O>>>24,k=O>>>16&255,b=O&65535,!(T+x<=h);){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}c>>>=T,h-=T,n.back+=T}if(c>>>=x,h-=x,n.back+=x,k&64){t.msg="invalid distance code",n.mode=Et;break}n.offset=b,n.extra=k&15,n.mode=oO;case oO:if(n.extra){for(oe=n.extra;h<oe;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Et;break}n.mode=sO;case sO:if(u===0)break e;if(v=g-u,n.offset>v){if(v=n.offset-v,v>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Et;break}v>n.wnext?(v-=n.wnext,y=n.wsize-v):y=n.wnext-v,v>n.length&&(v=n.length),A=n.window}else A=i,y=s-n.offset,v=n.length;v>u&&(v=u),u-=v,n.length-=v;do i[s++]=A[y++];while(--v);n.length===0&&(n.mode=rm);break;case lO:if(u===0)break e;i[s++]=n.length,u--,n.mode=rm;break;case Mw:if(n.wrap){for(;h<32;){if(l===0)break e;l--,c|=r[o++]<<h,h+=8}if(g-=u,t.total_out+=g,n.total+=g,g&&(t.adler=n.check=n.flags?gn(n.check,i,g,s-g):Ix(n.check,i,g,s-g)),g=u,(n.flags?c:fO(c))!==n.check){t.msg="incorrect data check",n.mode=Et;break}c=0,h=0}n.mode=aO;case aO:if(n.wrap&&n.flags){for(;h<32;){if(l===0)break e;l--,c+=r[o++]<<h,h+=8}if(c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Et;break}c=0,h=0}n.mode=uO;case uO:$=HZ;break e;case Et:$=UZ;break e;case qZ:return WZ;case JZ:default:return Kl}return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,n.hold=c,n.bits=h,(n.wsize||g!==t.avail_out&&n.mode<Et&&(n.mode<Mw||e!==$T))&&tY(t,t.output,t.next_out,g-t.avail_out),p-=t.avail_in,g-=t.avail_out,t.total_in+=p,t.total_out+=g,n.total+=g,n.wrap&&g&&(t.adler=n.check=n.flags?gn(n.check,i,g,t.next_out-g):Ix(n.check,i,g,t.next_out-g)),t.data_type=n.bits+(n.last?64:0)+(n.mode===_s?128:0)+(n.mode===nm||n.mode===Rw?256:0),(p===0&&g===0||e===$T)&&$===Ld&&($=jZ),$}function rY(t){if(!t||!t.state)return Kl;var e=t.state;return e.window&&(e.window=null),t.state=null,Ld}var nk=0,mc=1,$v=2,Nd=3,j0=4,nc=5,Dd=6,Pd=7,gP=0,mP=1,vP=2,yP=3,wP=4,_P=5,iY=6,Hv=0,xP=1,oY=2,sY=-1,lY=-2,aY=-3,uY=-5,fY=0,cY=1,hY=9,dY=-1,pY=1,gY=2,mY=3,vY=4,yY=0,wY=0,_Y=1,xY=2,bP=8;function os(t){if(t<mc||t>Pd)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}os.prototype.init=function(t,e,n,r,i){this.windowBits=t,this.level=e,this.memLevel=n,this.strategy=r,(this.mode===Nd||this.mode===j0)&&(this.windowBits+=16),this.mode===Pd&&(this.windowBits+=32),(this.mode===nc||this.mode===Dd)&&(this.windowBits=-this.windowBits),this.strm=new FG;var o;switch(this.mode){case mc:case Nd:case nc:o=RZ(this.strm,this.level,bP,this.windowBits,this.memLevel,this.strategy);break;case $v:case j0:case Dd:case Pd:o=XZ(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(o!==Hv){this._error(o);return}this.write_in_progress=!1,this.init_done=!0};os.prototype.params=function(){throw new Error("deflateParams Not supported")};os.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===nk)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};os.prototype.write=function(t,e,n,r,i,o,s){this._writeCheck(),this.write_in_progress=!0;var l=this;return ct.nextTick(function(){l.write_in_progress=!1;var u=l._write(t,e,n,r,i,o,s);l.callback(u[0],u[1]),l.pending_close&&l.close()}),this};function bY(t,e){for(var n=0;n<t.length;n++)this[e+n]=t[n]}os.prototype.writeSync=function(t,e,n,r,i,o,s){return this._writeCheck(),this._write(t,e,n,r,i,o,s)};os.prototype._write=function(t,e,n,r,i,o,s){if(this.write_in_progress=!0,t!==gP&&t!==mP&&t!==vP&&t!==yP&&t!==wP&&t!==_P)throw new Error("Invalid flush value");e==null&&(e=new U(0),r=0,n=0),i._set?i.set=i._set:i.set=bY;var l=this.strm;l.avail_in=r,l.input=e,l.next_in=n,l.avail_out=s,l.output=i,l.next_out=o;var u;switch(this.mode){case mc:case Nd:case nc:u=MZ(l,t);break;case Pd:case $v:case j0:case Dd:u=nY(l,t);break;default:throw new Error("Unknown mode "+this.mode)}return u!==xP&&u!==Hv&&this._error(u),this.write_in_progress=!1,[l.avail_in,l.avail_out]};os.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===mc||this.mode===Nd||this.mode===nc?LZ(this.strm):rY(this.strm),this.mode=nk};var im;os.prototype.reset=function(){switch(this.mode){case mc:case nc:im=fP(this.strm);break;case $v:case Dd:im=pP(this.strm);break}im!==Hv&&this._error(im)};os.prototype._error=function(t){this.onerror(JD[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()};const hO=Object.freeze(Object.defineProperty({__proto__:null,NONE:nk,DEFLATE:mc,INFLATE:$v,GZIP:Nd,GUNZIP:j0,DEFLATERAW:nc,INFLATERAW:Dd,UNZIP:Pd,Z_NO_FLUSH:gP,Z_PARTIAL_FLUSH:mP,Z_SYNC_FLUSH:vP,Z_FULL_FLUSH:yP,Z_FINISH:wP,Z_BLOCK:_P,Z_TREES:iY,Z_OK:Hv,Z_STREAM_END:xP,Z_NEED_DICT:oY,Z_ERRNO:sY,Z_STREAM_ERROR:lY,Z_DATA_ERROR:aY,Z_BUF_ERROR:uY,Z_NO_COMPRESSION:fY,Z_BEST_SPEED:cY,Z_BEST_COMPRESSION:hY,Z_DEFAULT_COMPRESSION:dY,Z_FILTERED:pY,Z_HUFFMAN_ONLY:gY,Z_RLE:mY,Z_FIXED:vY,Z_DEFAULT_STRATEGY:yY,Z_BINARY:wY,Z_TEXT:_Y,Z_UNKNOWN:xY,Z_DEFLATED:bP,Zlib:os},Symbol.toStringTag,{value:"Module"}));function SY(t,e){if(!t)throw new Error(e)}var ae={};Object.keys(hO).forEach(function(t){ae[t]=hO[t]});ae.Z_MIN_WINDOWBITS=8;ae.Z_MAX_WINDOWBITS=15;ae.Z_DEFAULT_WINDOWBITS=15;ae.Z_MIN_CHUNK=64;ae.Z_MAX_CHUNK=1/0;ae.Z_DEFAULT_CHUNK=16*1024;ae.Z_MIN_MEMLEVEL=1;ae.Z_MAX_MEMLEVEL=9;ae.Z_DEFAULT_MEMLEVEL=8;ae.Z_MIN_LEVEL=-1;ae.Z_MAX_LEVEL=9;ae.Z_DEFAULT_LEVEL=ae.Z_DEFAULT_COMPRESSION;var Kh={Z_OK:ae.Z_OK,Z_STREAM_END:ae.Z_STREAM_END,Z_NEED_DICT:ae.Z_NEED_DICT,Z_ERRNO:ae.Z_ERRNO,Z_STREAM_ERROR:ae.Z_STREAM_ERROR,Z_DATA_ERROR:ae.Z_DATA_ERROR,Z_MEM_ERROR:ae.Z_MEM_ERROR,Z_BUF_ERROR:ae.Z_BUF_ERROR,Z_VERSION_ERROR:ae.Z_VERSION_ERROR};Object.keys(Kh).forEach(function(t){Kh[Kh[t]]=t});function SP(t){return new Gl(t)}function kP(t){return new Zl(t)}function EP(t){return new Xl(t)}function CP(t){return new ea(t)}function AP(t){return new Yl(t)}function TP(t){return new Ql(t)}function OP(t){return new ta(t)}function RP(t,e,n){return typeof e=="function"&&(n=e,e={}),Eu(new Gl(e),t,n)}function MP(t,e){return Cu(new Gl(e),t)}function LP(t,e,n){return typeof e=="function"&&(n=e,e={}),Eu(new Yl(e),t,n)}function NP(t,e){return Cu(new Yl(e),t)}function DP(t,e,n){return typeof e=="function"&&(n=e,e={}),Eu(new Xl(e),t,n)}function PP(t,e){return Cu(new Xl(e),t)}function BP(t,e,n){return typeof e=="function"&&(n=e,e={}),Eu(new ta(e),t,n)}function IP(t,e){return Cu(new ta(e),t)}function FP(t,e,n){return typeof e=="function"&&(n=e,e={}),Eu(new Zl(e),t,n)}function zP(t,e){return Cu(new Zl(e),t)}function $P(t,e,n){return typeof e=="function"&&(n=e,e={}),Eu(new Ql(e),t,n)}function HP(t,e){return Cu(new Ql(e),t)}function VP(t,e,n){return typeof e=="function"&&(n=e,e={}),Eu(new ea(e),t,n)}function UP(t,e){return Cu(new ea(e),t)}function Eu(t,e,n){var r=[],i=0;t.on("error",s),t.on("end",l),t.end(e),o();function o(){for(var u;(u=t.read())!==null;)r.push(u),i+=u.length;t.once("readable",o)}function s(u){t.removeListener("end",l),t.removeListener("readable",o),n(u)}function l(){var u=U.concat(r,i);r=[],n(null,u),t.close()}}function Cu(t,e){if(typeof e=="string"&&(e=new U(e)),!U.isBuffer(e))throw new TypeError("Not a string or buffer");var n=ae.Z_FINISH;return t._processChunk(e,n)}function Gl(t){if(!(this instanceof Gl))return new Gl(t);Rt.call(this,t,ae.DEFLATE)}function Zl(t){if(!(this instanceof Zl))return new Zl(t);Rt.call(this,t,ae.INFLATE)}function Yl(t){if(!(this instanceof Yl))return new Yl(t);Rt.call(this,t,ae.GZIP)}function Ql(t){if(!(this instanceof Ql))return new Ql(t);Rt.call(this,t,ae.GUNZIP)}function Xl(t){if(!(this instanceof Xl))return new Xl(t);Rt.call(this,t,ae.DEFLATERAW)}function ea(t){if(!(this instanceof ea))return new ea(t);Rt.call(this,t,ae.INFLATERAW)}function ta(t){if(!(this instanceof ta))return new ta(t);Rt.call(this,t,ae.UNZIP)}function Rt(t,e){if(this._opts=t=t||{},this._chunkSize=t.chunkSize||ae.Z_DEFAULT_CHUNK,fi.call(this,t),t.flush&&t.flush!==ae.Z_NO_FLUSH&&t.flush!==ae.Z_PARTIAL_FLUSH&&t.flush!==ae.Z_SYNC_FLUSH&&t.flush!==ae.Z_FULL_FLUSH&&t.flush!==ae.Z_FINISH&&t.flush!==ae.Z_BLOCK)throw new Error("Invalid flush flag: "+t.flush);if(this._flushFlag=t.flush||ae.Z_NO_FLUSH,t.chunkSize&&(t.chunkSize<ae.Z_MIN_CHUNK||t.chunkSize>ae.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<ae.Z_MIN_WINDOWBITS||t.windowBits>ae.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<ae.Z_MIN_LEVEL||t.level>ae.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<ae.Z_MIN_MEMLEVEL||t.memLevel>ae.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=ae.Z_FILTERED&&t.strategy!=ae.Z_HUFFMAN_ONLY&&t.strategy!=ae.Z_RLE&&t.strategy!=ae.Z_FIXED&&t.strategy!=ae.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!U.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new ae.Zlib(e);var n=this;this._hadError=!1,this._binding.onerror=function(o,s){n._binding=null,n._hadError=!0;var l=new Error(o);l.errno=s,l.code=ae.codes[s],n.emit("error",l)};var r=ae.Z_DEFAULT_COMPRESSION;typeof t.level=="number"&&(r=t.level);var i=ae.Z_DEFAULT_STRATEGY;typeof t.strategy=="number"&&(i=t.strategy),this._binding.init(t.windowBits||ae.Z_DEFAULT_WINDOWBITS,r,t.memLevel||ae.Z_DEFAULT_MEMLEVEL,i,t.dictionary),this._buffer=new U(this._chunkSize),this._offset=0,this._closed=!1,this._level=r,this._strategy=i,this.once("end",this.close)}rr(Rt,fi);Rt.prototype.params=function(t,e,n){if(t<ae.Z_MIN_LEVEL||t>ae.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(e!=ae.Z_FILTERED&&e!=ae.Z_HUFFMAN_ONLY&&e!=ae.Z_RLE&&e!=ae.Z_FIXED&&e!=ae.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+e);if(this._level!==t||this._strategy!==e){var r=this;this.flush(ae.Z_SYNC_FLUSH,function(){r._binding.params(t,e),r._hadError||(r._level=t,r._strategy=e,n&&n())})}else ct.nextTick(n)};Rt.prototype.reset=function(){return this._binding.reset()};Rt.prototype._flush=function(t){this._transform(new U(0),"",t)};Rt.prototype.flush=function(t,e){var n=this._writableState;if((typeof t=="function"||t===void 0&&!e)&&(e=t,t=ae.Z_FULL_FLUSH),n.ended)e&&ct.nextTick(e);else if(n.ending)e&&this.once("end",e);else if(n.needDrain){var r=this;this.once("drain",function(){r.flush(e)})}else this._flushFlag=t,this.write(new U(0),"",e)};Rt.prototype.close=function(t){if(t&&ct.nextTick(t),!this._closed){this._closed=!0,this._binding.close();var e=this;ct.nextTick(function(){e.emit("close")})}};Rt.prototype._transform=function(t,e,n){var r,i=this._writableState,o=i.ending||i.ended,s=o&&(!t||i.length===t.length);if(!t===null&&!U.isBuffer(t))return n(new Error("invalid input"));s?r=ae.Z_FINISH:(r=this._flushFlag,t.length>=i.length&&(this._flushFlag=this._opts.flush||ae.Z_NO_FLUSH)),this._processChunk(t,r,n)};Rt.prototype._processChunk=function(t,e,n){var r=t&&t.length,i=this._chunkSize-this._offset,o=0,s=this,l=typeof n=="function";if(!l){var u=[],c=0,h;this.on("error",function(A){h=A});do var p=this._binding.writeSync(e,t,o,r,this._buffer,this._offset,i);while(!this._hadError&&y(p[0],p[1]));if(this._hadError)throw h;var g=U.concat(u,c);return this.close(),g}var v=this._binding.write(e,t,o,r,this._buffer,this._offset,i);v.buffer=t,v.callback=y;function y(A,O){if(!s._hadError){var x=i-O;if(SY(x>=0,"have should not go down"),x>0){var k=s._buffer.slice(s._offset,s._offset+x);s._offset+=x,l?s.push(k):(u.push(k),c+=k.length)}if((O===0||s._offset>=s._chunkSize)&&(i=s._chunkSize,s._offset=0,s._buffer=new U(s._chunkSize)),O===0){if(o+=r-A,r=A,!l)return!0;var b=s._binding.write(e,t,o,r,s._buffer,s._offset,s._chunkSize);b.callback=y,b.buffer=t;return}if(!l)return!1;n()}}};rr(Gl,Rt);rr(Zl,Rt);rr(Yl,Rt);rr(Ql,Rt);rr(Xl,Rt);rr(ea,Rt);rr(ta,Rt);const kY={codes:Kh,createDeflate:SP,createInflate:kP,createDeflateRaw:EP,createInflateRaw:CP,createGzip:AP,createGunzip:TP,createUnzip:OP,deflate:RP,deflateSync:MP,gzip:LP,gzipSync:NP,deflateRaw:DP,deflateRawSync:PP,unzip:BP,unzipSync:IP,inflate:FP,inflateSync:zP,gunzip:$P,gunzipSync:HP,inflateRaw:VP,inflateRawSync:UP,Deflate:Gl,Inflate:Zl,Gzip:Yl,Gunzip:Ql,DeflateRaw:Xl,InflateRaw:ea,Unzip:ta,Zlib:Rt},EY=Object.freeze(Object.defineProperty({__proto__:null,codes:Kh,createDeflate:SP,createInflate:kP,createDeflateRaw:EP,createInflateRaw:CP,createGzip:AP,createGunzip:TP,createUnzip:OP,deflate:RP,deflateSync:MP,gzip:LP,gzipSync:NP,deflateRaw:DP,deflateRawSync:PP,unzip:BP,unzipSync:IP,inflate:FP,inflateSync:zP,gunzip:$P,gunzipSync:HP,inflateRaw:VP,inflateRawSync:UP,Deflate:Gl,Inflate:Zl,Gzip:Yl,Gunzip:Ql,DeflateRaw:Xl,InflateRaw:ea,Unzip:ta,Zlib:Rt,default:kY},Symbol.toStringTag,{value:"Module"})),CY=oc(EY);var es=NS,Dn=cc,ha=BS,op=oa,WP=CY,Vv={namespace:"org.apache.avro.file"},dO=es.Type.forSchema("long",Vv),jP=es.Type.forSchema({type:"map",values:"bytes"},Vv),rk=es.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:jP},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},Vv),qP=es.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},Vv),Gh=Dn.bufferFrom("Obj"),Uv=op.format,Bd=Dn.Tap;function Wv(t,e){e=e||{};var n=!!e.noDecode;ha.Duplex.call(this,{readableObjectMode:!n,allowHalfOpen:!1}),this._type=es.Type.forSchema(t),this._tap=new Bd(Dn.newBuffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=GP(n,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}op.inherits(Wv,ha.Duplex);Wv.prototype._write=function(t,e,n){this._writeCb=n;var r=this._tap;r.buf=U.concat([r.buf.slice(r.pos),t]),r.pos=0,this._needPush&&(this._needPush=!1,this._read())};Wv.prototype._read=function(){this._needPush=!1;var t=this._tap,e=t.pos,n=this._readValue(t);t.isValid()?this.push(n):this._finished?this.push(null):(t.pos=e,this._needPush=!0,this._writeCb&&this._writeCb())};function ho(t){t=t||{};var e=!!t.noDecode;ha.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!e}),this._rType=t.readerSchema!==void 0?es.Type.forSchema(t.readerSchema):void 0,this._wType=null,this._codecs=t.codecs,this._codec=void 0,this._parseHook=t.parseHook,this._tap=new Bd(Dn.newBuffer(0)),this._blockTap=new Bd(Dn.newBuffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=e,this._queue=new Dn.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}op.inherits(ho,ha.Duplex);ho.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:WP.inflateRaw}};ho.getDefaultCodecs=ho.defaultCodecs;ho.prototype._decodeHeader=function(){var t=this._tap;if(t.buf.length<Gh.length)return!1;if(!Gh.equals(t.buf.slice(0,Gh.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var e=rk._read(t);if(!t.isValid())return!1;this._codec=(e.meta["avro.codec"]||"null").toString();var n=this._codecs||ho.getDefaultCodecs();if(this._decompress=n[this._codec],!this._decompress){this.emit("error",new Error(Uv("unknown codec: %s",this._codec)));return}try{var r=JSON.parse(e.meta["avro.schema"].toString());this._parseHook&&(r=this._parseHook(r)),this._wType=es.Type.forSchema(r)}catch(i){this.emit("error",i);return}try{this._readValue=GP(this._noDecode,this._wType,this._rType)}catch(i){this.emit("error",i);return}return this._syncMarker=e.sync,this.emit("metadata",this._wType,this._codec,e),!0};ho.prototype._write=function(t,e,n){var r=this._tap;if(r.buf=U.concat([r.buf,t]),r.pos=0,!this._decodeHeader()){ct.nextTick(n);return}this._write=this._writeChunk,this._write(Dn.newBuffer(0),e,n)};ho.prototype._writeChunk=function(t,e,n){var r=this._tap;r.buf=U.concat([r.buf.slice(r.pos),t]),r.pos=0;for(var i=1,o;o=AY(r);){if(!this._syncMarker.equals(o.sync)){this.emit("error",new Error("invalid sync marker"));return}i++,this._decompress(o.data,this._createBlockCallback(o.data.length,o.count,s))}s();function s(){--i||n()}};ho.prototype._createBlockCallback=function(t,e,n){var r=this,i=this._index++;return function(o,s){if(o){var l=new Error(Uv("%s codec decompression error",r._codec));l.cause=o,r.emit("error",l),n()}else r.emit("block",new JP(e,s.length,t)),r._queue.push(new KP(i,s,n,e)),r._needPush&&r._read()}};ho.prototype._read=function(){this._needPush=!1;var t=this._blockTap;if(!this._remaining){var e=this._queue.pop();if(!e||!e.count){this._finished?this.push(null):this._needPush=!0,e&&e.cb();return}e.cb(),this._remaining=e.count,t.buf=e.buf,t.pos=0}this._remaining--;var n;try{if(n=this._readValue(t),!t.isValid())throw new Error("truncated block")}catch(r){this._remaining=0,this.emit("error",r);return}this.push(n)};function jv(t,e){e=e||{},ha.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=es.Type.forSchema(t),this._writeValue=function(n,r){try{this._type._write(n,r)}catch(i){this.emit("typeError",i,r,this._type)}},this._tap=new Bd(Dn.newBuffer(e.batchSize||65536)),this.on("typeError",function(n){this.emit("error",n)})}op.inherits(jv,ha.Transform);jv.prototype._transform=function(t,e,n){var r=this._tap,i=r.buf,o=r.pos;if(this._writeValue(r,t),!r.isValid()){o&&this.push(TY(r.buf,0,o));var s=r.pos-o;s>i.length&&(r.buf=Dn.newBuffer(2*s)),r.pos=0,this._writeValue(r,t)}n()};jv.prototype._flush=function(t){var e=this._tap,n=e.pos;n&&this.push(e.buf.slice(0,n)),t()};function po(t,e){e=e||{},ha.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var n;if(es.Type.isType(t)?(n=t,t=void 0):n=es.Type.forSchema(t),this._schema=t,this._type=n,this._writeValue=function(i,o){try{this._type._write(i,o)}catch(s){return this.emit("typeError",s,o,this._type),!1}return!0},this._blockSize=e.blockSize||65536,this._tap=new Bd(Dn.newBuffer(this._blockSize)),this._codecs=e.codecs,this._codec=e.codec||"null",this._blockCount=0,this._syncMarker=e.syncMarker||new Dn.Lcg().nextBuffer(16),this._queue=new Dn.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=e.metadata||{},!jP.isValid(this._metadata))throw new Error("invalid metadata");var r=this._codec;if(this._compress=(this._codecs||po.getDefaultCodecs())[r],!this._compress)throw new Error(Uv("unsupported codec: %s",r));switch(e.omitHeader!==void 0&&(e.writeHeader=e.omitHeader?"never":"auto"),e.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)}),this.on("typeError",function(i){this.emit("error",i)})}op.inherits(po,ha.Duplex);po.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:WP.deflateRaw}};po.getDefaultCodecs=po.defaultCodecs;po.prototype._writeHeader=function(){var t=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),e=Dn.copyOwnProperties(this._metadata,{"avro.schema":Dn.bufferFrom(t),"avro.codec":Dn.bufferFrom(this._codec)},!0),n=rk.getRecordConstructor(),r=new n(Gh,e,this._syncMarker);this.push(r.toBuffer())};po.prototype._write=function(t,e,n){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var r=this._tap,i=r.pos,o=!1;if(this._writeValue(r,t)){if(!r.isValid()){i&&(this._flushChunk(i,n),o=!0);var s=r.pos-i;s>this._blockSize&&(this._blockSize=s*2),r.buf=Dn.newBuffer(this._blockSize),r.pos=0,this._writeValue(r,t)}this._blockCount++}else r.pos=i;o||n()};po.prototype._flushChunk=function(t,e){var n=this._tap;t=t||n.pos,this._compress(n.buf.slice(0,t),this._createBlockCallback(t,e)),this._blockCount=0};po.prototype._read=function(){var t=this,e=this._queue.pop();if(!e){this._finished&&!this._pending?ct.nextTick(function(){t.push(null)}):this._needPush=!0;return}this.push(dO.toBuffer(e.count,!0)),this.push(dO.toBuffer(e.buf.length,!0)),this.push(e.buf),this.push(this._syncMarker),this._finished||e.cb()};po.prototype._createBlockCallback=function(t,e){var n=this,r=this._index++,i=this._blockCount;return this._pending++,function(o,s){if(o){var l=new Error(Uv("%s codec compression error",n._codec));l.cause=o,n.emit("error",l);return}n._pending--,n.emit("block",new JP(i,t,s.length)),n._queue.push(new KP(r,s,e,i)),n._needPush&&(n._needPush=!1,n._read())}};function JP(t,e,n){this.valueCount=t,this.rawDataLength=e,this.compressedDataLength=n}function KP(t,e,n,r){this.index=t,this.buf=e,this.cb=n,this.count=r|0}function AY(t){var e=t.pos,n=qP._read(t);return t.isValid()?n:(t.pos=e,null)}function GP(t,e,n){if(t)return function(i){return function(o){var s=o.pos;return i(o),o.buf.slice(s,o.pos)}}(e._skip);if(n){var r=n.createResolver(e);return function(i){return r._read(i)}}else return function(i){return e._read(i)}}function TY(t,e,n){var r=Dn.newBuffer(n);return t.copy(r,0,e,e+n),r}var OY={BLOCK_TYPE:qP,HEADER_TYPE:rk,MAGIC_BYTES:Gh,streams:{BlockDecoder:ho,BlockEncoder:po,RawDecoder:Wv,RawEncoder:jv}};(function(t){var e=rD.exports,n=OY,r=cc,i=BS,o=oa;function s(h,p){i.Readable.call(this),p=p||{},this._batchSize=p.batchSize||65536,this._blob=h,this._pos=0}o.inherits(s,i.Readable),s.prototype._read=function(){var h=this._pos;if(h>=this._blob.size){this.push(null);return}this._pos+=this._batchSize;var p=this._blob.slice(h,this._pos,this._blob.type),g=new FileReader,v=this;g.addEventListener("loadend",function y(A){g.removeEventListener("loadend",y,!1),A.error?v.emit("error",A.error):v.push(r.bufferFrom(g.result))},!1),g.readAsArrayBuffer(p)};function l(){i.Transform.call(this,{readableObjectMode:!0}),this._bufs=[]}o.inherits(l,i.Transform),l.prototype._transform=function(h,p,g){this._bufs.push(h),g()},l.prototype._flush=function(h){this.push(new Blob(this._bufs,{type:"application/octet-binary"})),h()};function u(h,p){return new s(h).pipe(new n.streams.BlockDecoder(p))}function c(h,p){var g=new n.streams.BlockEncoder(h,p),v=new l;return g.pipe(v),new i.Duplex({objectMode:!0,read:function(){var y=v.read();y?O(y):v.once("readable",O);var A=this;function O(x){A.push(x||v.read()),A.push(null)}},write:function(y,A,O){return g.write(y,A,O)}}).on("finish",function(){g.end()})}t.exports={createBlobDecoder:u,createBlobEncoder:c,streams:n.streams},r.copyOwnProperties(e,t.exports)})(nD);const RY=Cd.exports,MY=nD.exports,LY=z0.exports("json-to-avro:utils");function NY(t,e,n={wrapUnions:!0}){let r=!1;try{r=MY.parse(t,RY.clone(n)).isValid(e)}catch(i){!n.wrapUnions&&i.message.includes("ambiguous unwrapped union")&&(LY("Found ambiguous unwrapped union, passing this record as valid",JSON.stringify(e)),r=!0)}return r}var ZP={isValid:NY};const oo=Cd.exports,{isValid:DY}=ZP,PY={string:t=>{if(typeof t=="string")return t},boolean:t=>{if(typeof t=="boolean")return t},long:t=>{if(typeof t=="number")return t},double:t=>{if(typeof t=="number")return t},int:t=>{if(typeof t=="number")return t}};function YP(t,e,n){if(!DY(t,e,n))throw new Error("The record that was generated isnt valid according to the avro schema you passed in!")}function BY(t,e,n){const i=rc(e,t)[t.name];return YP(t,i,n),i}function rc(t,{name:e,fields:n}){if(!t)return;const r={};return r[e]=oo.reduce(n,(i,o)=>{const s=ik(t[o.name],o);return oo.assign(s,i)},{}),r}function ik(t,{name:e,type:n}){const r=PY[n],i={};if(r){const o=r(t,n);if(oo.isNil(o))throw new Error(`Received null as a value for field ${e}, expecting ${n}`);return i[e]=o,i}if(Array.isArray(n))return i[e]=XP(t,n,e),i;if(typeof n=="object"&&n.type){if(n.type==="record"){const o=rc(t,n);return i[e]=o[n.name],i}if(n.type==="array")return Array.isArray(n.items)?i[e]=oo.map(t,QP.bind(null,n.items)):typeof n.items!="object"?i[e]=t:i[e]=oo.map(t,o=>rc(o,n.items)[n.items.name]),i}return i[e]=t,i}function QP(t,e){const n=oo.find(t,({name:r})=>r===e.__type);return rc(oo.omit(e,"__type"),n)}function XP(t,e,n){const r=oo.without(e,"null"),i=oo.compact(oo.map(r,o=>{const s={};if(typeof o!="object")try{const l=ik(t,{type:o,name:n});return s[o]=l[n],s}catch{}else return o.type==="enum"?oo.isNil(t)?void 0:(s[o.name]=t,s):rc(t,o)}));return i.length?i[0]:null}var eB={jsonToAvro:BY,checkRecord:YP,processField:ik,processUnions:QP,processRecord:rc,processArrayType:XP};const Uo=Cd.exports,Dw=z0.exports("json-to-avro:avroToJson"),{isValid:IY}=ZP,{jsonToAvro:FY}=eB,zY={string:t=>t,boolean:t=>t,long:t=>t,double:t=>t,int:t=>t};function tB(t,e,n){if(Dw("checkRecord avroParseOptions",n),Dw("checkRecord schema",JSON.stringify(t)),Dw("checkRecord record",JSON.stringify(e)),!IY(t,e,n))throw new Error("The record that you passed in isnt valid according to the avro schema you passed in.")}function $Y(t,e,n){const r=ic(e,t);return tB(t,FY(t,r,n),n),r}function ic(t,e){const{fields:n}=e;return Uo.reduce(n,(i,o)=>{const s=ok(t[o.name],o);return Uo.assign(s,i)},{})}function ok(t,{name:e,type:n}){if(Uo.isNil(t)){if(Array.isArray(n)&&Uo.indexOf(n,"null")!==-1)return t;throw new Error(`Found a null value at ${e} in your record where that isnt allowed, expecting: ${JSON.stringify(n)}`)}const r={},i=zY[n];if(i){const o=i(t,n);return e?(r[e]=o,r):o}if(Array.isArray(n))return r[e]=rB(t,n),r;if(typeof n=="object"){if(n.type==="record")return r[e]=ic(t,n),r;if(n.type==="array"){if(Array.isArray(n.items)){const o=Uo.map(t,s=>nB(s,n.items));return r[e]=o,r}else if(typeof n.items=="object"){const o=Uo.map(t,s=>ic(s,n.items));return r[e]=o,r}}}return r[e]=t,r}function nB(t,e){const n=Uo.find(e,({name:o})=>{if(t[o])return!0}),r=t[n.name],i=ic(r,n);return i.__type=n.name,i}function rB(t,e){const n=Uo.without(e,"null");return Uo.compact(Uo.map(n,i=>{if(i.type==="enum")return t[i.name]!==void 0?t[i.name]:t;if(typeof i=="object"&&i.type&&i.type==="record")return ic(t[i.name],i);try{return ok(t[i],{type:i})}catch{}}))[0]}var HY={avroToJson:$Y,checkRecord:tB,processRecord:ic,processField:ok,processUnion:nB,processArrayType:rB},VY={avroToJson:HY.avroToJson,jsonToAvro:eB.jsonToAvro};const pO={type:"record",name:"Book",fields:[{name:"title",type:"string"},{name:"author",type:{name:"Author",type:"record",fields:[{name:"name",type:"string"},{name:"shortName",type:"string"}]}},{name:"kind",type:{type:"enum",name:"BookKind",symbols:["EBOOK","COMMON_COVER"]}},{name:"categories",type:{name:"categories_list",type:"array",items:"string",default:[]}}]},UY={title:"The Lord of Rings",kind:"COMMON_COVER",author:{name:"John Ronald Reuel Tolkien",shortName:"J.R.R. TOLKIEN"},categories:["FICTION","BEST_SELLERS"]},gO=t=>JSON.stringify(t,null,2);class WY extends q0.Component{constructor(e){super(e),this.state={schemaDefinition:gO(pO),schemaDefinitionErrors:[],schemaValue:gO(UY),schemaValueErrors:[],parsedSchemaDefinition:H1.parse(pO)}}listenToChange(e){const n=JSON.parse(e),r=H1.parse(n);console.log(n),console.log(r)}schemaDefinitionChangeHandler(e){let n={};const r=[];let i=!0,o=null;try{n=JSON.parse(e||"{}")}catch{i=!1,r.push("JSON is not valid"),n={}}if(i)try{o=H1.parse(e)}catch(s){r.push(String(s))}this.setState({schemaDefinition:e,schemaDefinitionErrors:r,parsedSchemaDefinition:o},()=>{this.schemaValueChangeHandler(this.state.schemaValue)})}schemaValueChangeHandler(e){let n={};const r=[];let i=!0;try{n=JSON.parse(e||"{}")}catch{i=!1,r.push("JSON is not valid"),n={}}if(i&&this.state.parsedSchemaDefinition){let o={};try{o=VY.jsonToAvro(JSON.parse(this.state.schemaDefinition),n)}catch(s){console.log(s),o=n}this.state.parsedSchemaDefinition.isValid(o,{errorHook:(s,l,u)=>{if(s.length===0){r.push(`Unexpected field for ${u}`);return}r.push(`Unexpected value given for field "${s}": Received: ${l} (${typeof l}), expected: ${u}`)}})}this.setState({schemaValue:e,schemaValueErrors:r})}render(){const{schemaDefinition:e,schemaValue:n}=this.state;return dr("div",{children:[dr("div",{className:"row",children:[Pe("h1",{className:"teal-text text-darken-3",children:"Avro schema validation"}),Pe("hr",{className:"teal-text text-darken-3"}),dr("p",{children:["An ",Pe("a",{href:"https://avro.apache.org/docs/1.10.2/spec.html",children:"Avro schema"})," and value validation powered by",Pe("a",{href:"https://github.com/apache/avro/tree/master/lang/js",children:" avro-js lib"})," and . Sometimes, is tedious to validate Avro schemas and values from it without setup an environment fot it. This section aims to provide a flexible way to fast validate Avro schemas and values easily."]})]}),dr("div",{className:"row",children:[dr("div",{className:"col s12 l5 z-depth-1",children:[dr("h5",{children:["Edit schema to validate it.",this.state.schemaDefinitionErrors.length!==0&&Pe("span",{"data-badge-caption":"Errors",className:"new badge red",children:this.state.schemaDefinitionErrors.length})]}),Pe("hr",{className:"teal-text text-darken-3"}),Pe(Cx,{errors:this.state.schemaDefinitionErrors,value:e,onChange:r=>this.schemaDefinitionChangeHandler(r)})]}),Pe("div",{className:"col s12 l2",children:Pe("div",{className:"center-align",children:Pe("i",{className:"material-icons large teal-text text-darken-3",children:"arrow_forward"})})}),dr("div",{className:"col s12 l5 z-depth-1",children:[dr("h5",{children:["Edit value to match schema structure.",this.state.schemaValueErrors.length!==0&&Pe("span",{"data-badge-caption":"Errors",className:"new badge red",children:this.state.schemaValueErrors.length})]}),Pe("hr",{className:"teal-text text-darken-3"}),Pe(Cx,{value:n,onChange:r=>this.schemaValueChangeHandler(r),errors:this.state.schemaValueErrors})]})]})]})}}const jY=()=>Pe(k$,{basename:"devplayground",children:dr(S$,{children:[Pe(T_,{path:"/validate-avro-schema",element:Pe(WY,{})}),Pe(T_,{path:"/",element:Pe(M$,{})})]})});function qY(){return dr("div",{className:"row",children:[Pe("nav",{children:dr("div",{className:"nav-wrapper teal darken-3",children:[Pe("a",{href:"/devplayground",className:"brand-logo right",children:"DevPlayground"}),Pe("ul",{id:"nav-mobile",className:"left hide-on-med-and-down",children:Pe("li",{children:Pe("a",{href:"/devplayground/validate-avro-schema",children:"Validate Avro Schema"})})})]})}),Pe("div",{className:"container",children:Pe(jY,{})})]})}Pw.createRoot(document.getElementById("root")).render(Pe(q0.StrictMode,{children:Pe(qY,{})}));
